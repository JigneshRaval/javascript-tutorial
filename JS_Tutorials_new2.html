
<!-- saved from url=(0092)file:///D:/++_MyWork/Tutorials_Aug_2015-2016-05-26/Tutorials_Aug_2015/JS_Tutorials_new1.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
		<title>JS Tutorials :: New 1</title>
		<style>
			
			body { font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif; line-height: 1.7; font-size: 14px; counter-reset: my-awesome-counter; }
			pre {
			border: 1px dashed #AAA;
			padding: 20px;
			word-break: normal;
			word-break: break-all;
			word-wrap: break-word;
			font-size: 13px;
			line-height: 1.42857143;
			white-space: pre-wrap;       /* css-3 */
			white-space: -moz-pre-wrap;  /* Mozilla, since 1999 */
			white-space: -pre-wrap;      /* Opera 4-6 */
			white-space: -o-pre-wrap;    /* Opera 7 */
			word-wrap: break-word;       /* Internet Explorer 5.5+ */
			position: relative;
			border-radius : 5px;
			}
			pre:after {
			content: "CODE";
			position: absolute;
			right: 0;
			top: 0;
			padding: 5px 10px;
			border-left: 1px dashed #888;
			border-bottom: 1px dashed #888;
			}
			h1{ border-top: 1px solid #666; border-bottom: 2px solid #888; padding: 10px 0; font-size: 20px; text-align: center; counter-increment: my-awesome-counter; }
			h1:before {
  content: counter(my-awesome-counter)". ";
}
			h2, h3 { font-size: 18px; border-left: 2px solid #666; padding: 5px 15px; }
			code, kbd, pre, samp {
			font-family: Menlo,Monaco,Consolas,"Courier New",monospace;
			}
			code {
			padding: 2px 4px;
			border-radius: 4px;
			}
			blockquote {
			letter-spacing: .01rem;
			font-weight: 400;
			font-style: italic;
			border-left: 3px solid rgba(0,0,0,0.8);
			padding-left: 20px;
			margin-left: -0;
			margin-bottom: 30px;
			padding-bottom: 3px;
			}
			table { border-collapse: collapse; border: 1px solid #CCC;}
			table th { text-align: left; }
			table tr { border-bottom: 1px solid #CCC;}
			table td, table th { padding: 10px; }
			@media print {
				img {
				display: block;
				page-break-inside: avoid;
				-webkit-column-break-inside : avoid;
				}
				pre, code, pre code, pre span, code span, pre code span {
				page-break-inside: avoid;
				-webkit-column-break-inside : avoid;
				}
			}
			img { max-width: 100%; }
		</style>
	</head>
	<body>
		<article>
			<h2>Index</h2>
			<ul>
				<li>13 JavaScript Tips & Tricks</li>
				<li>45 Useful JavaScript Tips, Tricks and Best Practices </li>
				</ul>
			</article>
		<!--=========================
			START : POST
		=============================-->
		<h1>13 JavaScript Tips & Tricks</h1>
		<div class="post-wrapper">
			 <p>JavaScript is a quirky language with some unexpected shortcuts and pitfalls. Here are 13 things you might find to be delightful or dreadful:</p>
<h2>1) Hoisting</h2>
<h3>Question: What is logged to the console?</h3>
<pre><code>var a = 1;
function go(){
    console.log(a);
    var a = 2;
}
go();</code></pre>
<h3>Answer:</h3>
<pre><code>&gt; undefined</code></pre>
<h3>Why:</h3>
<p>Variable declarations are hoisted to the top of the scope. Note that the declaration is hoisted, but not the assignment. So the example is actually interpreted as:</p>
<pre><code>var a;
a = 1;
function go(){
    var a;
    console.log(a);
    a = 2;
}
go();</code></pre>
<p>In this case, the <code>var a</code> declaration is hoisted above the logging statement, so <code>a</code>&#39;s value is reset to &quot;undefined&quot;.</p>
<p>This is rarely a problem unless you&#39;re referencing and redefining a variable from an outside scope. For example, the following code block would work as expected:</p>
<pre><code>var a = 1;
console.log(a);
var a = 2;</code></pre>
<p>Which is interpreted as:</p>
<pre><code>var a;
var a;
a = 1;
console.log(a);
a = 2;</code></pre>
<hr>
<h2>2) Simple Addition</h2>
<h3>Question: What is logged?</h3>
<pre><code>console.log(.1 + .2);
console.log((.1 + .2) == .3);</code></pre>
<h3>Answer:</h3>
<pre><code>&gt; 0.30000000000000004
&gt; false</code></pre>
<h3>Why:</h3>
<p>JavaScript has one data type for representing numbers and it&#39;s a <em>binary</em> floating-point format.</p>
<p>In this case, .1 is impossible to represent because it repeats infinitely in binary.</p>
<p>Before you go thinking that&#39;s weird, think about this. What if someone asked you to write 1/3 in decimal form? Decimal struggles with 1/3 just like binary struggles with 1/10.</p>
<p>And it&#39;s not just JavaScript that struggles with this.  Try this in C#:</p>
<pre><code>Console.WriteLine(.1 + .2); // .3
Console.WriteLine(.1 + .2 == .3); // false</code></pre>
<p>So any time a number is stored in a binary floating-point format, it&#39;s going to be a problem. The trick is that some environments hide the problem better than others.</p>
<p>Anyways, the key is to avoid equality comparisons between floating point numbers.  Instead, consider subtracting the numbers and compare it to an epsilon:</p>
<pre><code>var isEqual = Math.abs((.1 + .2) - .3) &lt; .0000001;</code></pre>
<p>Gross, huh? If you&#39;re dealing with money, consider working in pennies instead of dollars.</p>
<p>Or you could wait for inflation to dissolve the need for American pocket change. Based on the last 100 years, my guess is the year 2456.</p>
<hr>
<h2>3) Double Tilde</h2>
<h3>Question: What is logged?</h3>
<pre><code>console.log( ~~12.34   );
console.log( ~~&quot;56.78&quot; );
console.log( ~~-2.6 );
console.log( ~~&quot;Sunny&quot; );
console.log( ~~[] );
console.log( ~~null );</code></pre>
<h3>Answer:</h3>
<pre><code>&gt; 12
&gt; 56
&gt; -2
&gt; 0
&gt; 0
&gt; 0</code></pre>
<h3>Why:</h3>
<p>The double tilde is a quick way to truncate a value to an integer.</p>
<p>The nice thing is, it never returns <code>NaN</code>. If it fails, it just returns 0.</p>
<p>Notice that this is different from Math.floor since <code>~~</code> just removes everything after the decimal (think negative numbers).</p>
<p>Just remember that this is pretty obscure, so it may be confusing to people following your code.</p>
<h3>Bonus:</h3>
<p>The single tilde operator performs a &quot;bitwise complement on its single operand&quot;.</p>
<p>How&#39;s that useful?  It returns a &quot;truthy&quot; value for any number besides -1.  The <code>indexOf</code> function returns -1 if a match isn&#39;t found, so you can write:</p>
<pre><code>var names = [&#39;Josh&#39;, &#39;Jenny&#39;];

if(~names.indexOf(&#39;Sunny&#39;)){
    //found
}else{
    //not found
}</code></pre>
<hr>
<h2>4) The Infamous, Asynchronous Loop Problem</h2>
<h3>Question: What is logged?</h3>
<pre><code>for (var i=0; i&lt;4; i++)
{
    setTimeout(function(){
        console.log(i);        
    }, 1000);
}</code></pre>
<h3>Answer:</h3>
<pre><code>&gt; 4
&gt; 4
&gt; 4
&gt; 4</code></pre>
<h3>Why:</h3>
<p>Each timeout refers to the original <code>i</code>, not a copy. So the <code>for</code> loop increments <code>i</code> until it gets to 4, then the timeouts run and use the current value of <code>i</code> (which is 4).</p>
<p>To log the correct value, you would need to create a copy of <code>i</code>. So you might try this:</p>
<pre><code>//DOES NOT WORK
for (var i=0; i&lt;4; i++)
{
    var temp = i;
    setTimeout(function(){
        console.log(temp);        
    }, 1000);
}

&gt; 3
&gt; 3
&gt; 3
&gt; 3</code></pre>
<p>But that doesn&#39;t work. Why? Because blocks don&#39;t create a scope and variables initializers are hoisted to the top of the scope.  In fact, the previous block is the same as:</p>
<pre><code>//DOES NOT WORK
var temp;
for (var i=0; i&lt;4; i++)
{
    temp = i;
    setTimeout(function(){
        console.log(temp);        
    }, 1000);
}</code></pre>
<p>There are a few different ways to copy <code>i</code>. The most common way is creating a closure by declaring a function and passing <code>i</code> as an argument. Here we do this as a self-calling function:</p>
<pre><code>  //WORKS
for (var i=0; i&lt;4; i++)
{
    (function(num){
        setTimeout(function(){
            console.log(num);
        }, 1000);
    })(i);
}</code></pre>
<p>In JavaScript, arguments are passed by value to a function. So primitive types like numbers, dates, and strings are basically copied. If you change them inside the function, it does not affect the outside scope.  Objects are special: if the inside function changes a property, the change is reflected in all scopes.</p>
<hr>
<h2>5) Plus a Boolean</h2>
<h3>Question: What is logged?</h3>
<pre><code>&gt; 3 + false
&gt; 3 + true</code></pre>
<h3>Answer:</h3>
<pre><code>&gt; 3
&gt; 4</code></pre>
<h3>Why:</h3>
<p>JavaScript uses type coercion to convert a boolean to a number. So <code>true</code> evaluates to <code>1</code> and <code>false</code> to <code>0</code>. Simple but handy.</p>
<hr>
<h2>6) Not Not</h2>
<h3>Question: What is logged?</h3>
<pre><code>&gt; !&quot;Cool&quot;
&gt; !-2
&gt; !!0
&gt; !!&#39;&#39;</code></pre>
<h3>Answer:</h3>
<pre><code>&gt; false
&gt; false
&gt; false
&gt; false</code></pre>
<h3>Why:</h3>
<p>This is pretty common knowledge, but it&#39;s worth a mention.</p>
<p>JavaScript uses type coercion to convert between types, so in this case it is implicitly converting to boolean. This is handy because a null or empty string will be &quot;false&quot;, as will the number 0. This makes it easy to check if a string contains a value without checking for both null and empty.</p>
<p>Sometimes you&#39;ll want to force a value to a bool, but you don&#39;t want to negate it. So you use <code>!!</code> to negate it twice.</p>
<p>It works on any type, but some results are tricky. For example, I wish an empty array <code>!![]</code> evaluated to false. But <code>[]</code> is truthy so <code>!![]</code> is true.</p>
<p>The best compressors actually convert <code>true</code> to <code>!0</code> and <code>false</code> to <code>!1</code>. It saves space and means the same thing.</p>
<hr>
<h2>7) String Builder</h2>
<h3>Question: What is logged?</h3>
<pre><code>&gt; &#39;A&#39;+&#39;B&#39;+&#39;C&#39;
&gt; [&#39;A&#39;,&#39;B&#39;,&#39;C&#39;].join(&#39;&#39;);</code></pre>
<h3>Answer:</h3>
<pre><code>&gt; ABC
&gt; ABC</code></pre>
<h3>Why:</h3>
<p>Another simple one, but quite handy.  If you&#39;re building a big string (maybe HTML) with JavaScript, it might look like this:</p>
<pre><code>var html = &#39;&#39;;
for(var i=0; i&lt;100; i++)
    html += &#39;&lt;p&gt;&#39; + i + &#39;&lt;/p&gt;&#39;;</code></pre>
<p>This can be pretty slow because it&#39;s rebuilding the whole string every time. Instead, you can add the values to an array and then join it at the end:</p>
<pre><code>var html = [];
for(var i=0; i&lt;100; i++)
    html.push(&#39;&lt;p&gt;&#39;, i, &#39;&lt;/p&gt;&#39;);
html = html.join(&#39;&#39;);</code></pre>
<p>This version creates an array of all the pieces, then joins them all together once at the end.  </p>
<hr>
<h2>8) Missing Parenthesis</h2>
<h3>Question: What is logged?</h3>
<pre><code>&gt; new Date()
&gt; new Date</code></pre>
<h3>Answer:</h3>
<pre><code>&gt; Wed Jul 24 2013 19:45:34 GMT-0500 (CDT)
&gt; Wed Jul 24 2013 19:45:34 GMT-0500 (CDT)</code></pre>
<h3>Why:</h3>
<p>Another strange part of the JavaScript <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/new?redirectlocale=en-US&amp;redirectslug=JavaScript%2FReference%2FOperators%2Fnew">spec</a> is that you can omit the parenthesis on a constructor if you are passing no arguments.</p>
<p>Just remember - you can&#39;t call a method (like <code>new Date.getTime()</code>) unless you do it like <code>(new Date).getTime()</code>.</p>
<hr>
<h2>9) Named Functions</h2>
<h3>Question: What is logged?</h3>
<pre><code>setTimeout(function(){
  null.toString();           
}, 10);

setTimeout(function MyAwesomeFunction(){
  null.toString();
}, 20);</code></pre>
<h3>Answer:</h3>
<pre><code>&gt; Cannot call method &#39;toString&#39; of null (anonymous function)
&gt; Cannot call method &#39;toString&#39; of null (MyAwesomeFunction)</code></pre>
<h3>Why:</h3>
<p>We use anonymous functions for timeouts, intervals, dom events, and other callbacks. If an error happens, it may be difficult to tell what function to look in because unnamed functions are called &#39;anonymous function&#39;.</p>
<p>You can give yourself better error stack traces if you include a name. In this case, I named the second function <code>MyAwesomeFunction</code> so it is clear where the error occurred.</p>
<hr>
<h2>10) Semi Colons Optional</h2>
<h3>Question: What is logged?</h3>
<pre><code>var getName1 = function () {
  return 
    &quot;John&quot;
}

var getName2 = function () {
  return 
    &quot;John&quot;;
}

console.log(getName1());
console.log(getName2());</code></pre>
<h3>Answer</h3>
<pre><code>&gt; undefined
&gt; undefined</code></pre>
<h3>Why:</h3>
<p>Line ending semi-colons are optional in JavaScript and there are <a href="https://github.com/twbs/bootstrap/issues/3057">heated debates</a> about when they <a href="http://davidwalsh.name/javascript-semicolons">belong</a>.</p>
<p>The code above is an example I&#39;ve seen from both sides of the argument. What&#39;s interesting is that it doesn&#39;t actually matter, in this case, whether you write semi-colons or not. JavaScript automatically inserts &quot;missing&quot; semi-colons, so both of these code blocks will be turned into: </p>
<pre><code>var getName = function () {
  return;  //returns undefined
  &quot;John&quot;;  //unreachable code
}</code></pre>
<p>Here&#39;s my take on the issue:</p>
<ul>
<li>Understand the <a href="http://bclary.com/2004/11/07/#a-7.9.1">rules of automatic semicolon insertion</a></li>
<li>Realize that the issue isn&#39;t two-sided - for example, do semicolons belong after an anonymous function is assigned to a variable?</li>
<li>If your JavaScript is for the browser, your compressor is probably inserting semi-colons for you (so omitting them doesn&#39;t save space)</li>
<li>There are <a href="http://stackoverflow.com/a/42311/193896">some cases</a> where omitting a semicolon may have unexpected results</li>
<li>There are <a href="https://gist.github.com/bendytree/113ce75b95bb326b07f0">some cases</a> where including a semicolon may be misleading</li>
<li>Very smart people come down on both sides of the issue. The worst outcome of a semicolon debate isn&#39;t the deprivation of a preference. </li>
</ul>
<hr>
<h2>11) arguments</h2>
<h3>Question: What is logged?</h3>
<pre><code>var doSomething = function(){
    console.log(arguments);
}

doSomething(&quot;Sunny&quot;, 23);</code></pre>
<h3>Answer</h3>
<pre><code>&gt; [&quot;Sunny&quot;, 23]</code></pre>
<h3>Why:</h3>
<p>Arguments is a keyword in JavaScript that contains the incoming arguments for a function. It&#39;s a handy way to view or log parameters for debugging or to simulate function overloading in JavaScript.</p>
<p>The type of <code>arguments</code> is either an array or an &quot;array-like object&quot; which means it has a length property and you can reference it with numerical indexes.</p>
<p>Most often, it also includes <code>.caller</code> and <code>.callee</code> properties that reference the function that called you and the function that was actually called. It&#39;s widely considered bad practice to use these two properties.</p>
<hr>
<h2>12) Loop Labels</h2>
<h3>Question: What is logged?</h3>
<pre><code>outer:
for (var i = 0; i &lt; 10; i++)
{ 
   inner:
   for (var j = 0; j &lt; 100; j++)
   {
      console.log(i, j);

      if (j == 2)
          break outer;
   }
}</code></pre>
<h3>Answer</h3>
<pre><code>&gt; 0, 0
&gt; 0, 1
&gt; 0, 2</code></pre>
<h3>Why:</h3>
<p>&quot;Loop labels&quot; allow you to name your loops, then <code>break</code> or <code>continue</code> specific loops. It&#39;s an easy way to break out of a nested loop.</p>
<p>It&#39;s been in JavaScript since version 1.2 (June 1997, IE3) - so you can rely on its existence.</p>
<hr>
<h2>13) Use Strict</h2>
<h3>Question: What is logged?</h3>
<pre><code>(function(){
    a = 1;
    console.log(a);
})();

(function(){
    &quot;use strict&quot;;

    b = 2;
})();</code></pre>
<h3>Answer</h3>
<pre><code>&gt; 1
&gt; ReferenceError: b is not defined</code></pre>
<h3>Why:</h3>
<p>First off, let&#39;s talk browser support. &#39;Use strict&#39; is part of <a href="http://ejohn.org/blog/ecmascript-5-strict-mode-json-and-more/">ECMAScript 5</a> and is supported by FF 4+, Safari 5.1+, Chrome 13+, and has partial support in IE10. Classic.</p>
<p>When <code>use strict</code> is enabled, it basically causes the browser to throw an error when you do something sloppy. Sloppy actions include:</p>
<ul>
<li>creating a global variable</li>
<li>using eval(...)</li>
<li><code>deleting</code> something that can&#39;t be deleted</li>
<li>accessing <code>arguments.callee</code> or <code>arguments.caller</code></li>
<li>any use of the <code>with</code> keyword is considered a syntax error</li>
</ul>
<p>So if the user&#39;s browser doesn&#39;t support &quot;use strict&quot; then it degrades gracefully - sloppy code is simply allowed.</p>
<p>You may wonder, &quot;Why would I want the browser to throw an exception? Isn&#39;t it best if the browser powers through?&quot; I think of it like a bad memory access - I never want my program to crash but it&#39;s much easier to track bugs if the application blows up when it knows something is wrong.  It&#39;s also nice for other developers to see &#39;use strict&#39; because they can make certain assumptions about your code.</p>
<p><code>use strict</code> can be applied to just the scope of a function (as above) or the entire file. If you use it file wide, keep in mind that bundling scripts will cause all the other scripts to run in &quot;strict&quot; mode. You may consider wrapping your file in a self-calling function with &quot;use strict&quot; inside.</p>
<hr>
<h2>BONUS: Binary to ASCII</h2>
<pre><code>var encoded = btoa(&quot;hi&quot;);
console.log(encoded);
&gt; &quot;aGk=&quot;
console.log(atob(encoded));
&gt; &quot;hi&quot;</code></pre>
<p>&#39;atob()&#39; and &#39;btoa()&#39; are fun little functions for encoding binary &lt;=&gt; ASCII. They are supported by modern browser and IE10+.</p>
<p>Just watch out for <a href="https://developer.mozilla.org/en-US/docs/Web/API/window.btoa?redirectlocale=en-US&amp;redirectslug=DOM%2Fwindow.btoa#Unicode_Strings">unicode strings</a>. Very useful for <a href="http://codegolf.stackexchange.com/">Code Golf</a>.</p>
<hr>
<p>There were a lot of things (like <a href="http://net.tutsplus.com/articles/news/ecmascript-6-today/">ECMAScript 6</a>) that I wanted to include in this post, but it&#39;s already too long.</p>

			
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>45 Useful JavaScript Tips, Tricks and Best Practices </h1>
		<div class="post-wrapper">
			
			<p>As you know, JavaScript is the number one programming language in the world, the language of the web, of mobile hybrid apps (like <a href="http://phonegap.com/">PhoneGap</a> or <a href="http://www.appcelerator.com/">Appcelerator</a>), of the server side (like <a href="http://nodejs.org">NodeJS</a> or <a href="http://wakanda.org">Wakanda</a>) and has many other implementations. It&#8217;s also the starting point for many new developers to the world of programming, as it can be used to display a simple alert in the web browser but also to control a robot (using <a href="http://nodebots.io/">nodebot</a>, or <a href="http://semu.github.io/noduino/">nodruino</a>). The developers who master JavaScript and write organized and performant code have become the most sought after in the job market.</p>
<p>In this article, I&#8217;ll share a set of JavaScript tips, tricks and best practices that should be known by all JavaScript developers regardless of their browser/engine or the SSJS (Server Side JavaScript) interpreter.</p>
<p>Note that the code snippets in this article have been tested in the latest Google Chrome version 30, which uses the V8 JavaScript Engine (V8 3.20.17.15).</p>
<p><strong>1 &#8211; Don't forget <code>var</code> keyword when assigning a variable's value for the first time.</strong></p>
<p>Assignment to an undeclared variable automatically results in a global variable being created. Avoid global variables.</p>
<p><strong>2 &#8211; use <code>===</code> instead of <code>==</code></strong></p>
<p>The <code>==</code> (or <code>!=</code>) operator performs an automatic type conversion if needed. The <code>===</code> (or <code>!==</code>) operator will not perform any conversion. It compares the value and the type, which could be considered faster than <code>==</code>.</p>
<pre><code>[10] === 10    // is false
[10]  == 10    // is true
'10' == 10     // is true
'10' === 10    // is false
 []   == 0     // is true
 [] ===  0     // is false
 '' == false   // is true but true == "a" is false
 '' ===   false // is false </code></pre>
<p><strong>3 &#8211; <code>undefined</code>, <code>null</code>, 0, <code>false</code>, <code>NaN</code>, <code>''</code> (empty string) are all falsy.</strong><br/>
<strong>4 &#8211; Use Semicolons for line termination</strong></p>
<p>The use of semi-colons for line termination is a good practice. You won&#8217;t be warned if you forget it, because in most cases it will be inserted by the JavaScript parser. For more details about why you should use semi-colons, take a look to this artice: <a href="http://davidwalsh.name/javascript-semicolons">http://davidwalsh.name/javascript-semicolons</a>.</p>
<p><strong>5 &#8211; Create an object constructor</strong></p>
<pre><code>function Person(firstName, lastName){
    this.firstName =  firstName;
    this.lastName = lastName;        
}  

var Saad = new Person("Saad", "Mousliki");</code></pre>
<p><strong>6 &#8211; Be careful when using <code>typeof</code>, <code>instanceof</code> and <code>constructor</code>.</strong></p>
<ul>
<li><em>typeof</em> : a JavaScript unary operator used to  return a string that represents the primitive type of a variable,  don&#8217;t forget that <code>typeof null</code> will return &#8220;object&#8221;, and for the majority of object types (Array, Date, and others) will return also &#8220;object&#8221;.</li>
<li><em>constructor</em> : is a property of the internal prototype property, which could be overridden by code.</li>
<li><em>instanceof</em> : is another JavaScript operator that check in all the prototypes chain the constructor it returns true if it&#8217;s found and false if not.</li>
</ul>
<pre><code>var arr = ["a", "b", "c"];
typeof arr;   // return "object" 
arr  instanceof Array // true
arr.constructor();  //[]
</code></pre>
<p><strong>7 &#8211; Create a Self-calling Function</strong></p>
<p>This is often called a Self-Invoked Anonymous Function or Immediately Invoked Function Expression (IIFE). It is a function that executes automatically when you create it, and has the following form:</p>
<pre><code>(function(){
    // some private code that will be executed automatically
})();  
(function(a,b){
    var result = a+b;
    return result;
})(10,20)</code></pre>
<p><strong>8 &#8211; Get a random item from an array</strong></p>
<pre><code>var items = [12, 548 , 'a' , 2 , 5478 , 'foo' , 8852, , 'Doe' , 2145 , 119];

var  randomItem = items[Math.floor(Math.random() * items.length)];</code></pre>
<p><strong>9 &#8211; Get a random number in a specific range</strong></p>
<p>This code snippet can be useful when trying to generate fake data for testing purposes, such as a salary between min and max.</p>
<pre><code>var x = Math.floor(Math.random() * (max - min + 1)) + min;</code></pre>
<p><strong>10 &#8211; Generate an array of numbers with numbers from 0 to max</strong></p>
<pre><code>var numbersArray = [] , max = 100;

for( var i=1; numbersArray.push(i++) &lt; max;);  // numbers = [1,2,3 ... 100] </code></pre>
<p><strong>11 &#8211; Generate a random set of alphanumeric characters</strong></p>
<pre><code>function generateRandomAlphaNum(len) {
    var rdmString = "";
    for( ; rdmString.length &lt; len; rdmString  += Math.random().toString(36).substr(2));
    return  rdmString.substr(0, len);

}
</code></pre>
<p><strong>12 &#8211; Shuffle an array of numbers</strong></p>
<pre><code>var numbers = [5, 458 , 120 , -215 , 228 , 400 , 122205, -85411];
numbers = numbers.sort(function(){ return Math.random() - 0.5});
/* the array numbers will be equal for example to [120, 5, 228, -215, 400, 458, -85411, 122205]  */</code></pre>
<p>A better option could be to implement a random sort order by code (e.g. : Fisher-Yates shuffle), than using the native sort JavaScript function. For more details take a look to <a href="http://stackoverflow.com/questions/962802/is-it-correct-to-use-javascript-array-sort-method-for-shuffling/962890#962890">this discussion</a>.</p>
<p><strong>13 &#8211; A string trim function</strong></p>
<p>The classic trim function of Java, C#, PHP and many other language that remove whitespace from a string doesn't exist in JavaScript, so we could add it to the <code>String</code> object.</p>
<pre><code>String.prototype.trim = function(){return this.replace(/^s+|s+$/g, "");};  </code></pre>
<p>A native implementation of the trim() function is available in the recent JavaScript engines.</p>
<p><strong>14 &#8211; Append an array to another array</strong></p>
<pre><code>var array1 = [12 , "foo" , {name "Joe"} , -2458];

var array2 = ["Doe" , 555 , 100];
Array.prototype.push.apply(array1, array2);
/* array1 will be equal to  [12 , "foo" , {name "Joe"} , -2458 , "Doe" , 555 , 100] */</code></pre>
<p><strong>15 &#8211; Transform the <code>arguments</code> object into an array</strong></p>
<pre><code>var argArray = Array.prototype.slice.call(arguments);</code></pre>
<p><strong>16 &#8211; Verify that a given argument is a number</strong></p>
<pre><code>function isNumber(n){
    return !isNaN(parseFloat(n)) &amp;&amp; isFinite(n);
}</code></pre>
<p><strong>17 &#8211; Verify that a given argument is an array</strong></p>
<pre><code>function isArray(obj){
    return Object.prototype.toString.call(obj) === '[object Array]' ;
}</code></pre>
<p>Note that if the toString() method is overridden, you will not get the expected result using this trick.</p>
<p>Or use&#8230;</p>
<pre><code>Array.isArray(obj); // its a new Array method</code></pre>
<p>You could also use <code>instanceof</code> if you are not working with multiple frames. However, if you have many contexts, you will get a wrong result.</p>
<pre><code>var myFrame = document.createElement('iframe');
document.body.appendChild(myFrame);

var myArray = window.frames[window.frames.length-1].Array;
var arr = new myArray(a,b,10); // [a,b,10]  

// instanceof will not work correctly, myArray loses his constructor 
// constructor is not shared between frames
arr instanceof Array; // false</code></pre>
<p><strong>18 &#8211; Get the max or the min in an array of numbers</strong></p>
<pre><code>var  numbers = [5, 458 , 120 , -215 , 228 , 400 , 122205, -85411]; 
var maxInNumbers = Math.max.apply(Math, numbers); 
var minInNumbers = Math.min.apply(Math, numbers);</code></pre>
<p><strong>19 &#8211; Empty an array</strong></p>
<pre><code>var myArray = [12 , 222 , 1000 ];  
myArray.length = 0; // myArray will be equal to [].</code></pre>
<p><strong>20 &#8211; Don't use delete to remove an item from array</strong></p>
<p>Use <code>splice</code> instead of using <code>delete</code> to delete an item from an array. Using <code>delete</code> replaces the item with <code>undefined</code> instead of the removing it from the array.</p>
<p>Instead of&#8230;</p>
<pre><code>var items = [12, 548 ,'a' , 2 , 5478 , 'foo' , 8852, , 'Doe' ,2154 , 119 ]; 
items.length; // return 11 
delete items[3]; // return true 
items.length; // return 11 
/* items will be equal to [12, 548, "a", undefined × 1, 5478, "foo", 8852, undefined × 1, "Doe", 2154,       119]   */</code></pre>
<p>Use&#8230;</p>
<pre><code>var items = [12, 548 ,'a' , 2 , 5478 , 'foo' , 8852, , 'Doe' ,2154 , 119 ]; 
items.length; // return 11 
items.splice(3,1) ; 
items.length; // return 10 
/* items will be equal to [12, 548, "a", 5478, "foo", 8852, undefined × 1, "Doe", 2154,       119]   */</code></pre>
<p>The delete method should be used to delete an object property.</p>
<p><strong>21 &#8211; Truncate an array using length</strong></p>
<p>Like the previous example of emptying an array, we truncate it using the <code>length</code> property.</p>
<pre><code>var myArray = [12 , 222 , 1000 , 124 , 98 , 10 ];  
myArray.length = 4; // myArray will be equal to [12 , 222 , 1000 , 124].</code></pre>
<p>As a bonus, if you set the array length to a higher value, the length will be changed and new items will be added with <code>undefined</code> as a value. The array length is not a read only property.</p>
<pre><code>myArray.length = 10; // the new array length is 10 
myArray[myArray.length - 1] ; // undefined</code></pre>
<p><strong>22 &#8211; Use logical AND/ OR for conditions</strong></p>
<pre><code>var foo = 10;  
foo == 10 &amp;&amp; doSomething(); // is the same thing as if (foo == 10) doSomething(); 
foo == 5 || doSomething(); // is the same thing as if (foo != 5) doSomething();</code></pre>
<p>The logical OR could also be used to set a default value for function argument.</p>
<pre><code>function doSomething(arg1){ 
    arg1 = arg1 || 10; // arg1 will have 10 as a default value if it's not already set
}</code></pre>
<p><strong>23 &#8211; Use the map() function method to loop through an array&#8217;s items</strong></p>
<pre><code>var squares = [1,2,3,4].map(function (val) {  
    return val * val;  
}); 
// squares will be equal to [1, 4, 9, 16] </code></pre>
<p><strong>24 &#8211; Rounding number to N decimal place</strong></p>
<pre><code>var num =2.443242342;
num = num.toFixed(4);  // num will be equal to 2.4432</code></pre>
<p>NOTE : the <code>toFixed()</code> function returns a string and not a number.</p>
<p><strong>25 &#8211; Floating point problems</strong></p>
<pre><code>0.1 + 0.2 === 0.3 // is false 
9007199254740992 + 1 // is equal to 9007199254740992  
9007199254740992 + 2 // is equal to 9007199254740994</code></pre>
<p>Why does this happen? 0.1 +0.2 is equal to 0.30000000000000004. What you need to know is that all JavaScript numbers are floating points represented internally in 64 bit binary according to the IEEE 754 standard. For more explanation, take a look to <a href="http://www.2ality.com/2012/04/number-encoding.html">this blog post</a>.</p>
<p>You can use <code>toFixed()</code> and <code>toPrecision()</code> to resolve this problem.</p>
<p><strong>26 &#8211; Check the properties of an object when using a for-in loop</strong></p>
<p>This code snippet could be useful in order to avoid iterating through the properties from the object's prototype.</p>
<pre><code>for (var name in object) {  
    if (object.hasOwnProperty(name)) { 
        // do something with name                    
    }  
}</code></pre>
<p><strong>27 &#8211; Comma operator</strong></p>
<pre><code>var a = 0; 
var b = ( a++, 99 ); 
console.log(a);  // a will be equal to 1 
console.log(b);  // b is equal to 99</code></pre>
<p><strong>28 &#8211; Cache variables that need calculation or querying</strong></p>
<p>In the case of a jQuery selector, we could cache the DOM element.</p>
<pre><code>var navright = document.querySelector('#right'); 
var navleft = document.querySelector('#left'); 
var navup = document.querySelector('#up'); 
var navdown = document.querySelector('#down');</code></pre>
<p><strong>29 &#8211; Verify the argument before passing it to <code>isFinite()</code></strong></p>
<pre><code>isFinite(0/0) ; // false 
isFinite("foo"); // false 
isFinite("10"); // true 
isFinite(10);   // true 
isFinite(undefined);  // false 
isFinite();   // false 
isFinite(null);  // true  !!! </code></pre>
<p><strong>30 &#8211; Avoid negative indexes in arrays</strong></p>
<pre><code>var numbersArray = [1,2,3,4,5]; 
var from = numbersArray.indexOf("foo") ;  // from is equal to -1 
numbersArray.splice(from,2);    // will return [5]</code></pre>
<p>Make sure that the arguments passed to <code>splice</code> are not negative.</p>
<p><strong>31 &#8211; Serialization and deserialization (working with JSON)</strong></p>
<pre><code>var person = {name :'Saad', age : 26, department : {ID : 15, name : "R&amp;D"} }; 
var stringFromPerson = JSON.stringify(person); 
/* stringFromPerson is equal to "{"name":"Saad","age":26,"department":{"ID":15,"name":"R&amp;D"}}"   */ 
var personFromString = JSON.parse(stringFromPerson);  
/* personFromString is equal to person object  */</code></pre>
<p><strong>32 &#8211; Avoid the use of <code>eval()</code> or the <code>Function</code> constructor</strong></p>
<p>Use of <code>eval</code> or the <code>Function</code> constructor are expensive operations as each time they are called script engine must convert source code to executable code.</p>
<pre><code>var func1 = new Function(functionCode);
var func2 = eval(functionCode);</code></pre>
<p><strong>33 &#8211; Avoid using <code>with()</code> (The good part)</strong></p>
<p>Using <code>with()</code> inserts a variable at the global scope. Thus, if another variable has the same name it could cause confusion and overwrite the value.</p>
<p><strong>34 &#8211; Avoid using for-in loop for arrays</strong></p>
<p>Instead of using&#8230;</p>
<pre><code>var sum = 0;  
for (var i in arrayNumbers) {  
    sum += arrayNumbers[i];  
}</code></pre>
<p>&#8230;it's better to use&#8230;</p>
<pre><code>var sum = 0;  
for (var i = 0, len = arrayNumbers.length; i &lt; len; i++) {  
    sum += arrayNumbers[i];  
}</code></pre>
<p>As a bonus, the instantiation of <code>i</code> and <code>len</code> is executed once because it's in the first statement of the for loop. Thsi is faster than using&#8230;</p>
<pre><code>for (var i = 0; i &lt; arrayNumbers.length; i++)</code></pre>
<p>Why? The length of the array <code>arrayNumbers</code> is recalculated every time the loop iterates.</p>
<p>NOTE : the issue of recalculating the length in each iteration was fixed in the latest JavaScript engines.</p>
<p><strong>35 &#8211; Pass functions, not strings, to <code>setTimeout()</code> and <code>setInterval()</code></strong></p>
<p>If you pass a string into <code>setTimeout()</code> or <code>setInterval()</code>, the string will be evaluated the same way as with <code>eval</code>, which is slow. Instead of using&#8230;</p>
<pre><code>setInterval('doSomethingPeriodically()', 1000);  
setTimeout('doSomethingAfterFiveSeconds()', 5000);</code></pre>
<p>&#8230;use&#8230;</p>
<pre><code>setInterval(doSomethingPeriodically, 1000);  
setTimeout(doSomethingAfterFiveSeconds, 5000);</code></pre>
<p><strong>36 &#8211; Use a switch/case statement instead of a series of if/else</strong></p>
<p>Using switch/case is faster when there are more than 2 cases, and it is more elegant (better organized code). Avoid using it when you have more than 10 cases.</p>
<p><strong>37 &#8211; Use switch/case statement with numeric ranges</strong></p>
<p>Using a switch/case statement with numeric ranges is possible with this trick.</p>
<pre><code>function getCategory(age) {  
    var category = "";  
    switch (true) {  
        case isNaN(age):  
            category = "not an age";  
            break;  
        case (age &gt;= 50):  
            category = "Old";  
            break;  
        case (age &lt;= 20):  
            category = "Baby";  
            break;  
        default:  
            category = "Young";  
            break;  
    };  
    return category;  
}  
getCategory(5);  // will return "Baby"</code></pre>
<p><strong>38 &#8211; Create an object whose prototype is a given object</strong></p>
<p>It's possible to write a function that creates an object whose prototype is the given argument like this&#8230;</p>
<pre><code>function clone(object) {  
    function OneShotConstructor(){}; 
    OneShotConstructor.prototype= object;  
    return new OneShotConstructor(); 
} 
clone(Array).prototype ;  // []</code></pre>
<p><strong>39 &#8211; An HTML escaper function</strong></p>
<pre><code>function escapeHTML(text) {  
    var replacements= {"&lt;": "&amp;lt;", "&gt;": "&amp;gt;","&amp;": "&amp;amp;", """: "&amp;quot;"};                      
    return text.replace(/[&lt;&gt;&amp;"]/g, function(character) {  
        return replacements[character];  
    }); 
}</code></pre>
<p><strong>40 &#8211; Avoid using try-catch-finally inside a loop</strong></p>
<p>The try-catch-finally construct creates a new variable in the current scope at runtime each time the catch clause is executed where the caught exception object is assigned to a variable.</p>
<p>Instead of using&#8230;</p>
<pre><code>var object = ['foo', 'bar'], i;  
for (i = 0, len = object.length; i &lt;len; i++) {  
    try {  
        // do something that throws an exception 
    }  
    catch (e) {   
        // handle exception  
    } 
}</code></pre>
<p>&#8230;use&#8230;</p>
<pre><code>var object = ['foo', 'bar'], i;  
try { 
    for (i = 0, len = object.length; i &lt;len; i++) {  
        // do something that throws an exception 
    } 
} 
catch (e) {   
    // handle exception  
} </code></pre>
<p><strong>41 &#8211; Set timeouts to <code>XMLHttpRequests</code></strong></p>
<p>You could abort the connection if an XHR takes a long time (for example, due to a network issue), by using <code>setTimeout()</code> with the XHR call.</p>
<pre><code>var xhr = new XMLHttpRequest (); 
xhr.onreadystatechange = function () {  
    if (this.readyState == 4) {  
        clearTimeout(timeout);  
        // do something with response data 
    }  
}  
var timeout = setTimeout( function () {  
    xhr.abort(); // call error callback  
}, 60*1000 /* timeout after a minute */ ); 
xhr.open('GET', url, true);  

xhr.send();</code></pre>
<p>As a bonus, you should generally avoid synchronous XHR calls completely.</p>
<p><strong>42 &#8211; Deal with WebSocket timeout</strong></p>
<p>Generally when a WebSocket connection is established, a server could time out your connection after 30 seconds of inactivity. The firewall could also time out the connection after a period of inactivity.</p>
<p>To deal with the timeout issue you could send an empty message to the server periodically. To do this, add these two functions to your code: one to keep alive the connection and the other one to cancel the keep alive. Using this trick, you'll control the timeout.</p>
<p>Add a <code>timerID</code>&#8230;</p>
<pre><code>var timerID = 0; 
function keepAlive() { 
    var timeout = 15000;  
    if (webSocket.readyState == webSocket.OPEN) {  
        webSocket.send('');  
    }  
    timerId = setTimeout(keepAlive, timeout);  
}  
function cancelKeepAlive() {  
    if (timerId) {  
        cancelTimeout(timerId);  
    }  
}</code></pre>
<p>The <code>keepAlive()</code> function should be added at the end of the <code>onOpen()</code> method of the webSocket connection and the <code>cancelKeepAlive()</code> at the end of the <code>onClose()</code> method.</p>
<p><strong>43 &#8211; Keep in mind that <a href="http://dev.opera.com/articles/view/efficient-javascript/?page=2#primitiveoperator">primitive operations can be faster than function calls</a>. Use <a href="http://vanilla-js.com/">VanillaJS</a>.</strong></p>
<p>For example, instead of using&#8230;</p>
<pre><code>var min = Math.min(a,b); 
A.push(v);</code></pre>
<p>&#8230;use&#8230;</p>
<pre><code>var min = a &lt; b ? a : b; 
A[A.length] = v;</code></pre>
<p><strong>44 &#8211; Don't forget to use a code beautifier when coding. Use JSLint and minification (JSMin, for example) before going live.</strong></p>
<p><strong>45 &#8211; JavaScript is awesome: <a href="http://stackoverflow.com/questions/11246/best-resources-to-learn-javascript">Best Resources To Learn JavaScript</a></strong></p>
<ul>
<li>Code Academy JavaScript tracks: <a href="http://www.codecademy.com/tracks/javascript">http://www.codecademy.com/tracks/javascript</a></li>
<li>Eloquent JavaScript by Marjin Haverbeke: <a href="http://eloquentjavascript.net/">http://eloquentjavascript.net/</a></li>
<li>Advanced JavaScript by John Resig: <a href="http://ejohn.org/apps/learn/">http://ejohn.org/apps/learn/</a></li>
</ul>
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>JavaScript 101: Objects and Functions</h1>
		<div class="post-wrapper">
		<h2>JavaScript Object and their Prototypes</h2>
<p>Objects in JavaScript is nothing but collection of attributes (or properties to be more inline with ECMA definition). And a property is defined as a key-value pair. Object in JavaScript can be created using many ways, but for now we are gonna use a simple one.<br/>
Lets create a Person called John:</p>

<pre><code class="language-markup">
var John = {<br/>
             'name'  : 'John Doe',<br/>
             'age'   : '25'<br/>
};<br/>
</code></pre>
<p>This object has two property &#8216;name&#8217; and &#8216;age&#8217;. Note that the value of a property is not at all limited to primitive types but can be any other javascript object. So for example &#8216;John&#8217; may have another property &#8216;address&#8217;, whose value can be an Array of different address objects.  Apart from the properties defined in object, every JavaScript object has another secret internal property called &#8216;__proto__&#8217;. This property points to the prototype of the John. But what is the prototype of John? Well for John here, its JavaScript&#8217;s parent of all objects, The Object. And what is the prototype of The Object? Its <i>null</i>.<br/>
Below image might make this more clear:</p>
<p><img src="//img.viralpatel.net/2014/01/javascript-object.png" alt="javascript-object" width="500" height="125" class="aligncenter size-full wp-image-3168" srcset="http://img.viralpatel.net/2014/01/javascript-object.png 500w, http://img.viralpatel.net/2014/01/javascript-object-300x75.png 300w" sizes="(max-width: 500px) 100vw, 500px" pagespeed_url_hash="786910719" onload="pagespeed.CriticalImages.checkImageForCriticality(this);"/></p>
<h2>Prototype Chaining and Inheritance</h2>
<p>We now know that each object in JavaScript has another __proto__ property which refers to its prototype. If I am to create an object, and explicitly assign __proto__ another object&#8230; what would that mean?<br/>
<pre><code class="language-markup">
var Man = {<br/>
   gender: 'male'<br/>
};<br/>
var John = {<br/>
   name: 'John Doe',<br/>
   age: 25,<br/>
   __proto__: Man<br/>
}
</code></pre><br/>
<img src="//img.viralpatel.net/2014/01/javascript-prototype-chain.png" alt="javascript-prototype-chain" width="505" height="242" class="aligncenter size-full wp-image-3169" srcset="http://img.viralpatel.net/2014/01/javascript-prototype-chain.png 505w, http://img.viralpatel.net/2014/01/javascript-prototype-chain-300x143.png 300w" sizes="(max-width: 505px) 100vw, 505px" pagespeed_url_hash="1439630448" onload="pagespeed.CriticalImages.checkImageForCriticality(this);"/></p>
<p>This would mean John <i>prototypically inherits</i> from Man. All properties of Man can be directly accessed through John, this is because whenever any property is accessed via John and if it is not found in John it will be looked in the prototype of John.<br/>
<pre><code class="language-markup"><br/>
console.log(John.name); // John Doe<br/>
console.log(John.age); // 25<br/>
console.log(John.gender); // male<br/>
</code></pre></p>
<p>Further, this prototypical inheritance is not limited to two levels and can be extended to any level. This sort of chaining is called <b>Prototype Chaining</b>.</p>
<p>The rule to resolve any property is: If a property is not found in an object, it is looked into the prototype chain of the object all the way to Object unless found earlier. If property is not found, we get a property undefined error.</p>
<h2>Function</h2>
<p>A function is a special type of Object which may be invoked as a routine. A function may have properties, and some lines of code which determines the behavior of the function. For example, we can have a function named isEven() which takes a number as parameter and tell us whether a number is even or not.<br/>
	<pre><code class="language-php"><br/>
function isEven(no){<br/>
   return no % 2 === 0;<br/>
}<br/>
</code></pre> </p>
<p>Further functions can be used to create Objects acting as a Constructor for the class. All that is required is to use <code>new</code> operator when calling that function. For example, I can write following Person function to create different Person objects:<br/>
<pre><code class="language-php"><br/>
function Person(name, age){<br/>
   this.name = name;<br/>
   this.age = age;<br/>
   this.shoutYourName = function(){<br/>
                              alert('My name is ' + name +'!');<br/>
                        };<br/>
}<br/>
//create Objects<br/>
var John = new Person('John'25);<br/>
var Donn = new Person('Donn'29);</p>
<p>console.log(John.name);  //John<br/>
console.log(John.age);  //25<br/>
John.shoutYourName();   //alerts 'My name is John!'<br/>
</code></pre></p>
<p>Now the question is what gets create and stored in memory above functions are created? What&#8217;s the prototype of it? And how is it that same functions can act as Constructors to create new objects?</p>
<p>To answer these question,<br/>
A function that is called using <i>new</i> operator for creation of new objects is called a Constructor Function.<br/>
Creating a function creates an object of type <code>Function</code>. That means, any new function will have its __proto__ point to prototype of &#8216;Function&#8217;.<br/>
<b>As a side note:</b> <i>Function is a global internal Object, it doesn&#8217;t have any properties of its own but inherits them from Function.prototype.</i><br/>
Further, objects of type Function have another property called &#8216;prototype&#8217; pointing to the prototype of the objects which will be created using this function.</p>
<p>In case of above example:<br/>
1. Person is an object of type Function. And this also means Person has its __proto__ property pointed to Function.prototype<br/>
2. Person has a property &#8216;prototype&#8217; pointing to an object which will be assigned to  __proto__ property of objects created by Person, in our case, John and Donn. Lets call this prototype object Person.prototype. So this would mean any objects created using Person will be prototypically inherited from Person.<br/>
<pre><code class="language-php"><br/>
console.log(John.__proto__ === Person.prototype)     //true<br/>
console.log(Donn.__proto__ === Person.prototype)     //true<br/>
console.log(Person.__proto__ === Function.prototype) //true<br/>
</code></pre></p>
<h3>Structure of Person.prototype</h3>
<p>As already mentioned above, all objects created using Person will have their __proto__ pointing to Person.prototype. This means, these objects will Prototypically inherit from Person.prototype</p>
<ol>
<li> __proto__ of Person.prototype points to Object. </li>
<li> And extra property added to Person.prototype will be prototypically available to objects created by calling new Person(). And using <code>this</code> reference inside properties of Person.prototype will refer to  properties of Person. So, after creating the objects John and Donn, if I am to add below code:
<pre><code class="language-php"><br/>
Person.prototype.getAllCapsName = function(){<br/>
return this.name.toUpperCase();<br/>
};<br/>
</code></pre>
<p>this property <code>getAllCapsName</code> will be immediately available in already created objects &#8216;John&#8217; and &#8216;Donn&#8217;. And that&#8217;s because, saying it again, __proto__ of John and Donn is pointing to Person.prototype object,i.e, John and Donn prototypically-inherits from Person.<br/>
<pre><code class="language-php"><br/>
console.log(John.getAllCapsName()) //JOHN<br/>
console.log(John.__proto__.getAllCapsName()) //Can't access property of John using this.<br/>
                                             //this refers to Person.prototype object<br/>
console.log(Person.prorotype.getAllCapsName()) //Can't access property using this.<br/>
</code></pre>
</li>
<li> Person.prototype has another special property called <code>constructor</code>, which points to the original function object Person. And due to above point:<br/>
<pre><code class="language-php"><br/>
 console.log(Person.prototype.constructor===Person) //true<br/>
 console.log(John.constructor)// print Person function<br/>
 console.log(Person.prototype.constructor)// print Person function<br/>
 console.log(John.constructor===Person) //true<br/>
 console.log(John.__proto__.constructor===Person.prototype.constructor) //true<br/>
 console.log(John.__proto__.constructor===Person.prototype.constructor) //true<br/>
</code></pre>
</li>
</ol>
<p>In case things are still hazy, image below might help:</p>
<p><img src="//img.viralpatel.net/2014/01/javascript-constructor-object.png" alt="javascript-constructor-object" width="656" height="391" class="aligncenter size-full wp-image-3170" srcset="http://img.viralpatel.net/2014/01/javascript-constructor-object.png 656w, http://img.viralpatel.net/2014/01/javascript-constructor-object-300x178.png 300w, http://img.viralpatel.net/2014/01/javascript-constructor-object-640x381.png 640w" sizes="(max-width: 656px) 100vw, 656px" pagespeed_url_hash="1103962562" onload="pagespeed.CriticalImages.checkImageForCriticality(this);"/></p>
<p>Now since behavior of all objects created using one Constructor Function will be same, it makes more sense to add the behavior in the prototype of Constructor Function than in the Constructor Function. I.e. to add functions properties inside Person.prototype than in Person. This is because any function-property in Person (say shoutYourName()) will be copied in John and Donn. But, any function-property in Person.prototype will be available to John and Donn through __proto__ reference.<br/>
So if I am to change the definition of shoutYourName for John, behavior of Donn will not be affected. But it&#8217;s not the case with getAllCapsName().</p>
<p>Let see this working:<br/>
<pre><code class="language-php"><br/>
var Person = function(name, age){<br/>
    this.name = name;<br/>
    this.age = age;<br/>
    this.shoutYourName = function(){<br/>
        return 'SHOUTING '+ this.name;<br/>
    };<br/>
};</p>
<p>var John = new Person('John',25);<br/>
var Donn = new Person('Donn',25);</p>
<p>console.log(John.shoutYourName()) // SHOUTING John<br/>
console.log(Donn.shoutYourName()) // SHOUTING Donn</p>
<p>Person.prototype.shhhYourName = function(){<br/>
    return 'shhh ' + this.name;<br/>
};</p>
<p>console.log(John.shhhYourName()) // shhh John<br/>
console.log(Donn.shhhYourName()) // shhh Donn</p>
<p>//changing definition of only John<br/>
John.shoutYourName = function(){<br/>
    return 'SHOUTING ' + this.name + '!!!!!';<br/>
};</p>
<p>//changing definition in prototype<br/>
Person.prototype.shhhYourName = function(){<br/>
    return 'shhh ' + this.name + '!!!!!';<br/>
};</p>
<p>console.log(John.shoutYourName()) // SHOUTING John!!!!!<br/>
console.log(Donn.shoutYourName()) // SHOUTING Donn</p>
<p>console.log(John.shhhYourName()) // shhh John!!!!!<br/>
console.log(Donn.shhhYourName()) // shhh Donn!!!!!<br/>
</code></pre></p>	
			
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1 class="post-title">JavaScript Module Design Pattern</h1>
		<div class="post-wrapper">
			
			<p>JavaScript Module pattern provides a way to wrap public, private methods (and variable) into a single entity and exposing only the public members to the world outside of module. This allows faster namespace resolution, avoid collision of the methods/variables with other global APIs since the namespace isn&#8217;t populated with all many functions, and obviously provides cleaner code.</p>
<h2>Implementing Basic JavaScript Module Pattern</h2>
<p>Implementing a module is pretty simple, lets say we need to create a Calculator module.<br/>
To do so, we execute a function expression which returns an object containing all the public members as its properties.</p>

<pre><code class="language-php"><br/>
CalcModule = (function(){<br/>
                    var pub = {};</p>
<p>                    pub.add = function(a, b) {<br/>
                                 console.log('in add()', a, b);<br/>
                                 return a + b;<br/>
                    };</p>
<p>                    pub.sub = function(a, b) {<br/>
                                 console.log('in sub()', a, b);<br/>
                                 return a - b;<br/>
                    };</p>
<p>                    return pub;<br/>
})();<br/>
</code></pre>
<p>Here we create and execute an anonymous function and assigns the return value of the function to the variable <code>CalcModule</code>. Inside the function, we have created an object &#8216;<b>pub</b>&#8216; and then simply add properties to this object which needs to be exposed to outside world (functions &#8216;add&#8217; and &#8216;sub&#8217; in our case). Since the function is anonymously executed, any local variables declared inside the function can still be accessed inside the <code>CalcModule</code> but will not be available outside of module.</p>
<p>Now to use this calculator, we can simple write:<br/>
<pre><code class="language-php"><br/>
CalcModule.add(5,2) //returns : 7<br/>
CalcModule.sub(5,2) //returns : 3<br/>
</code></pre></p>
<h4>Demo</h4>

<p>Note that as JavaScript doesn&#8217;t provide any access modifiers, the private members inside a module were created using closures. And the module itself was created using anonymous function expression.</p>
<h2>Adding private members to Module</h2>
<p>Lets give our calculator the ability to store results in its memory. To do so we add a private variable &#8216;<b>mem</b>&#8216; and expose a function to retrieve data. Any declared function or variable will be private unless we add it as a property to the returned public object.</p>
<p><pre><code class="language-php"><br/>
CalcModule = (function(){<br/>
		var pub = {};<br/>
		var mem = new Array(); //private variable</p>
<p>		var storeInMemory = function(val) {  //private function<br/>
							mem.push(val);<br/>
					};</p>
<p>		pub.add = function(a, b) {<br/>
					 var result = a + b;<br/>
					 storeInMemory(result); //call to private function<br/>
					 return result;<br/>
				  };</p>
<p>		 pub.sub = function(a, b) {<br/>
					 var result = a - b;<br/>
					 storeInMemory(result); //call to private function<br/>
					 return result;<br/>
				  };</p>
<p>		 pub.retrieveFromMemory = function() {<br/>
					 return mem.pop();<br/>
				 };</p>
<p>			   return pub;<br/>
})();</code></pre><br/>
Usage:<br/>
<pre><code class="language-php"><br/>
CalcModule.add(2,10);<br/>
CalcModule.add(5,15);<br/>
console.log(CalcModule.retrieveFromMemory()); //outputs 20<br/>
console.log(CalcModule.retrieveFromMemory()); //outputs 12<br/>
</code></pre></p>
<h4>Demo</h4>

<h2>Importing Parameters in JavaScript Module</h2>
<p>Once the basic module is ready, we can pass parameters in the module during its initialization (effectively importing them inside the module). For eg, we would like to pass jQuery variable into our module so that resolving jQuery variable inside of module don&#8217;t have to search entire scope chain but is available locally. To do so we simply pass the &#8216;jQuery&#8217; in the parenthesis used to execute the function expression. In this example, we use jQuery&#8217;s <code>isNumeric()</code> function to check whether input provided is a number.<br/>
<pre><code class="language-php"><br/>
CalcModule = (function($){<br/>
                       var pub = {};<br/>
                       var INVALID = 'invalid input';<br/>
                       pub.add = function(a,b){<br/>
                                     if($.isNumeric(a) &amp;&amp; $.isNumeric(b)){<br/>
                                         return a+b;<br/>
                                     }<br/>
                                     else{<br/>
                                         return INVALID;<br/>
                                     }<br/>
                       };</p>
<p>                       pub.sub = function(a,b){<br/>
                                     if($.isNumeric(a) &amp;&amp; $.isNumeric(b)){<br/>
                                          return a-b;<br/>
                                     }<br/>
                                     else{<br/>
                                         return INVALID;<br/>
                                     }<br/>
                       };</p>
<p>                       return pub;<br/>
})(jQuery); //passed 'jQuery' global variable into local parameter '$'<br/>
</code></pre></p>
<h4>Demo</h4>

<h2>Separating Module across different JS files: Augmentation</h2>
<p>Let say, due to overly complex module we want our module to be defined in different js files. And that too in a way so that the implementation is independent of the order of execution of js files (It might happen that one JS file gets loaded before another). In our example lets separate out &#8216;add&#8217; and &#8216;sub&#8217; functions into one js-file, and memory implementation into another file.</p>
<p><i>File</i>: calc.js<br/>
<pre><code class="language-php"><br/>
var CalcModule = (function($, pub){<br/>
                        //jQuery will still be available via $<br/>
                        var mem = new Array(); //private variable</p>
<p>                        pub.storeInMemory = function(val){<br/>
                                                mem.push(val);<br/>
                                            };</p>
<p>                        pub.retrieveFromMemory = function(){<br/>
                                     return mem.pop();<br/>
                       };</p>
<p>                       return pub;<br/>
})(jQuery, CalcModule || {});<br/>
</code></pre></p>
<p><i>File</i>: calc_functions.js<br/>
<pre><code class="language-php"><br/>
var CalcModule = (function($, pub){<br/>
                       //jQuery will still be available via $<br/>
                       pub.add = function(a,b){<br/>
                                     var result = a + b;<br/>
                                     pub.storeInMemory(result);<br/>
                                     return result;<br/>
                                  };</p>
<p>                       pub.sub = function(a,b){<br/>
                                     var result = a - b;<br/>
                                     pub.storeInMemory(result);<br/>
                                     return result;<br/>
                                  };</p>
<p>                       return pub;<br/>
}(jQuery, CalcModule || {}));<br/>
</code></pre>                      </p>
<p>First things to notice in above code is passing of parameters into the module. We pass the same javascript module &#8216;CalcModule&#8217; as argument into the anonymous function and which gets assigned to parameter &#8216;pub&#8217;. Inside the function, we add properties to this parameter &#8216;pub&#8217;, and then return the same variable which gets assigned back to CalcModule. Thus, we managed to extend the existing CalcModule with new properties. </p>
<p>Second thing to notice is the OR ( || ) condition in the call. This is what makes above files independent of each other with respect to order of execution. If the CalcModule doesn&#8217;t exists yet, a new object is created (using &#8216;{}&#8217;) and passed to the parameter &#8216;pub&#8217; which is then assigned to CalcModule. This ability to allow loading of scripts in any order, converts a Strict Augmentation to Loosely Augmentation.</p>
<p>This functionality to extend the module with other members is called <b>Augmentation</b>. And if the order in which these modules are loaded is defined than its called a <b>Strict Augmentation</b>, or else if the order is not important as in example above, it is called <b>Loose Augmentation</b>.</p>
<p>A disadvantage of separating same module across different files is inability to share private variables between files. Above logic worked because we can pass the global variable CalcModule to different anonymous functions and add properties to it, but since CalcModule only exposes public APIs, different modules won&#8217;t be able share private members (remember private members are implemented using closures, and each anonymous function will have its own closure).</p>
<h2>Revealing Module Pattern</h2>
<p>A variation of the module pattern is the Revealing Module Pattern. As described earlier, for creation of a module it is required to return an object form anonymous function which has all the public properties. So lets change the implementation of the second example as below:</p>
<p><pre><code class="language-php"><br/>
CalcModule = (function(){<br/>
			var mem = new Array(); //private variable</p>
<p>			var storeInMemory = function(val) {  //private function<br/>
				mem.push(val);<br/>
			};</p>
<p>			var add = function(a, b) {<br/>
						var result = a + b;<br/>
						storeInMemory(result); //call to private function<br/>
						return result;<br/>
					};</p>
<p>			var sub = function(a, b) {<br/>
						var result = a - b;<br/>
						storeInMemory(result); //call to private function<br/>
						return result;<br/>
					};</p>
<p>			var retrieveFromMemory = function() {<br/>
						return mem.pop();<br/>
					};</p>
<p>			return {<br/>
				add: add,<br/>
				sub: sub,<br/>
				popMemory: retrieveFromMemory<br/>
			};<br/>
})();<br/>
</code></pre><br/>
Notice the changes here, we are not creating a separate &#8216;pub&#8217; variable and then adding properties to it. But instead we define all the functions public or not in the same way, and then in the return statement create a new object and add properties to it.</p>
<h3>Advantages of Revealing Module pattern</h3>
<ol>
<li>Consistent coding style inside the module for both private and public members.</li>
<li>Better control on the name of the public API, i.e., if it is required to change the name of add() method to addition(), all we need to do is change the name in the return statement without effecting the function name inside the module.</li>
<li>Control on what to make public, just adding/removing the properties in return statement is sufficient.</li>
<li>As always, cleaner code.</li>
</ol>
<p>This concluded the basics of module design pattern.</p>
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>JavaScript Singleton Design Pattern</h1>
		<div class="post-wrapper">
		<p>JavaScript Singleton pattern ensure that only a single instance of the class may exits in application. Details  of singleton design pattern can be found in the an existing post named <a href="http://viralpatel.net/blogs/java-singleton-design-pattern-tutorial-example-singleton-j2ee-design-pattern/">Java Singleton Design Pattern Tutorial</a>. This pattern comes in handy when you want to create a class whose functionality doesn&#8217;t change for its multiple instances for e.g. an Ajax handler or Util class.</p>
<h2>Implementing Singleton in JavaScript</h2>
<p>Implementing a basic singleton pattern can be as simple as creating a simple object literal, because the created object will be an instance itself: </p>

<pre><code class="language-php"><br/>
var Sun = {<br/>
  publicEmitLight:function() {// do something to emit light<br/>
                  },<br/>
  mass: 10000<br/>
};<br/>
</code></pre>
<p>The above approach is easy to implement, but is very limited in usage. For example, it is not possible to have private members in this object.</p>
<p>To create a more usable Singleton object, it will be required to create a class and then expose a method in the class which always returns the same instance. To do so, this exposed method would check if the instance is already created, and if so return it, else it would create one before returning.<br/>
Ok, let&#8217;s try to put above lines into a JavaScript code. Creating the Sun of our Solar System again with some private members this time:</p>
<pre><code class="language-php"><br/>
var Sun = (function(){<br/>
              var sunInstance; //private variable to hold the<br/>
							   //only instance of Sun that will exits.</p>
<p>              var createSun = function(){<br/>
                         var privateMass = 10000000000; //private<br/>
                         var looseMass = function(mass){<br/>
                             privateMass -= mass;<br/>
                         }<br/>
                         var publicEmitLight = function(){<br/>
                                  //some complex Nuclear fission<br/>
								  //calling looseMass()<br/>
                                  looseMass(10);<br/>
                         };<br/>
                         var getMass = function(){<br/>
                                  return privateMass;<br/>
                         };<br/>
                         return {<br/>
                                emitLight: publicEmitLight,<br/>
                                getMass: getMass<br/>
                         };<br/>
              };</p>
<p>              return {<br/>
                    getInstance: function(){<br/>
                          if(!sunInstance){<br/>
                              sunInstance = createSun();<br/>
                          }<br/>
                          return sunInstance;<br/>
                    }<br/>
              };<br/>
})();<br/>
</code></pre>
<p>Lets break down above code to understand whats going on here. We created a variable Sun, and instantiated it using <a href="http://viralpatel.net/blogs/javascript-module-pattern/">JavaScript Module Pattern</a>. But instead of exposing declared members, we returned a new  property getInstance(). Lets re-look the return statement:</p>
<pre><code class="language-php"><br/>
 return {<br/>
                    getInstance: function(){<br/>
                          if(!sunInstance){<br/>
                              sunInstance = createSun();<br/>
                          }<br/>
                          return sunInstance;<br/>
                    }<br/>
              };<br/>
</code></pre>
<p>The Sun variable will be assigned what this return statement evaluates to. And clearly, this evaluate to an object with only one property of type function: <code>getInstance</code>. So whenever we need to obtain an instance of sun in our code, all we do is use:</p>
<pre><code class="language-php"><br/>
var mySun = Sun.getInstance();<br/>
</code></pre>
<p>In above line, we executed the only public method in Sun module: getInstance(). Inside the getInstance() function we check if the local private variable <code>sunInstance</code> exists, if not this is assigned a value by calling a private function createSun(). And at last, getInstance() return this private variable sunInstance. So it is getInstance() which ensures if the sun doesn&#8217;t exists it creates one before returning. And always returns the same instance of Sun. This is because sunInstance is inside a closure and will always be the same instance between many calls.</p>
<p>Ok, next step is to find out how does createSun() works. Lets go though the code of createSun():</p>
<p><pre><code class="language-php"><br/>
var createSun = function(){<br/>
					var privateMass = 10000000000; //private<br/>
					var looseMass = function(mass){<br/>
					 privateMass -= mass;<br/>
					}<br/>
					var publicEmitLight = function(){<br/>
						  //some complex Nuclear fission<br/>
						  //calling looseMass()<br/>
						  looseMass(10);<br/>
					};<br/>
					var getMass = function(){<br/>
						  return privateMass;<br/>
					};<br/>
					return {<br/>
						emitLight: publicEmitLight,<br/>
						getMass: getMass<br/>
					};<br/>
				};<br/>
</code></pre><br/>
This is the function where all the private and public property of Sun are implemented. This function  returns an object with properties &#8217;emitLight&#8217; and &#8216;getMass&#8217;. Note, that the members privateMass, looseMass(), publicEmitLight() and getMass() will continue to exist after call is complete due to closure.  Calling createSun() will always return a new object with property &#8217;emitLight&#8217;. So it needs to be ensured that createSun() is called just once, and obtained instance is to be stored and returned on further request to get instance of Sun. This instance is store in the private variable &#8216;sunInstance&#8217; and any call to getInstance() first checks whether sunInstance is already defined or not, as we saw above in getInstance() implementation.</p>
<p>Lets put above implementation to test:<br/>
<pre><code class="language-php"><br/>
var sunA = Sun.getInstance();<br/>
var sunB = Sun.getInstance();<br/>
console.log(sunA === sunB); //true<br/>
sunB.emitLight(); //loose some Mass in sunB<br/>
var massInSunA = sunA.getMass();<br/>
var massInSunB = sunB.getMass();<br/>
console.log(massInSunA === massInSunB); //true<br/>
</code></pre><br/>
Output:<br/>
<pre><code class="language-php"><br/>
true<br/>
true<br/>
</code></pre><br/>
</p>
<p>It is worth noting that the popular <a href="http://viralpatel.net/blogs/javascript-module-pattern/">Module pattern</a> is also a type of Singleton pattern, although it doesn&#039;t expose a getInstance() method to get instance of Singleton object which is considered to be a signature method in Singleton pattern.</p>
<p>The End :)</p>
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>Object-Oriented programming with JavaScript</h1>
		<div class="post-wrapper">
<p><img src="//img.viralpatel.net/2009/07/object-oriented-programming-cars.png" alt="object-oriented-programming-cars" title="object-oriented-programming-cars" width="309" height="161" class="alignleft size-full wp-image-1568" srcset="http://img.viralpatel.net/2009/07/object-oriented-programming-cars.png 309w, http://img.viralpatel.net/2009/07/object-oriented-programming-cars-300x156.png 300w" sizes="(max-width: 309px) 100vw, 309px"/><strong>Object-Oriented programming</strong> is one of the widely used programming paradigm that uses abstraction to create model based on real world. It is a model organized around &#8220;objects&#8221; rather than &#8220;actions&#8221; and data rather than logic. Historically, a program has been viewed as a logical procedure that takes input data, processes it, and produces output data. Object-oriented programming (OOP) uses <strong>&#8220;objects&#8221;</strong>  data structures consisting of <strong>datafields</strong> and <strong>methods</strong>  and their interactions to design applications and computer programs. Each object can be seen as a tiny machine which is responsible for the set of task assign to it.</p>
<p>Today, many popular programming languages (such as Java, JavaScript, C#, C++, Python, PHP etc) support <strong>object-oriented programming</strong> (OOP). </p>

<p>JavaScript has strong object-oriented programming capabilities. Although there is differences in object-oriented capability of javascript compared to other languages.</p>
<h2>Terminology</h2>
<p>First let us see few terminologies that we use in object-oriented programming.</p>
<p><strong>Class</strong>: Defines the characteristics of the Object.<br/>
<strong>Constructor</strong>: A method called at the moment of instantiation.<br/>
<strong>Object</strong>: An Instance of a Class.<br/>
<strong>Method</strong>: An Object capability as walk.<br/>
<strong>Property</strong>: An Object characteristic, such as color.<br/>
<strong>Inheritance</strong>: A Class can inherit characteristics from another Class.<br/>
<strong>Encapsulation</strong>: A Class defines only the characteristics of the Object, a method defines only how the method executes.<br/>
<strong>Abstraction</strong>: The conjunction of complex inheritance, methods, properties of an Object must be able to simulate a reality model.<br/>
<strong>Polymorphism</strong>: Different Classes might define the same method or property.</p>
<h2>The Class in JavaScript</h2>
<p>Unlike Java, C++ etc, JavaScript does not contains class statement. JavaScript is a prototype-based language. JavaScript uses functions as classes. Defining a class is as easy as defining a function. In the example below we define a new class called Car.<br/>
<pre><code class="language-php"><br/>
//Define the class Car<br/>
function Car() { }<br/>
</code></pre></p>
<h2>The Object (Class Instance) in JavaScript</h2>
<p>For creating instances of any class i.e. objects use <strong>new</strong> keyword. For example, in below code snippet we created two instances of class Car.<br/>
<pre><code class="language-php"><br/>
//Define the class Car<br/>
function Car() { }</p>
<p>var car1 = new Car();<br/>
var car2 = new Car();<br/>
</code></pre></p>
<h2>The Constructor in JavaScript</h2>
<p>In object oriented methodology, a Constructor is a method that is used to initiate the properties of any class instance. Thus the constructor gets called when the class is instantiated.<br/>
As in JavaScript there is no class keyword and the function serves as class definition, there is no need of defining constructor explicitly. The function defined for the class acts as constructor. For example, in following code snippet we have called an alert statement when class Car is instantiated.<br/>
<pre><code class="language-php"><br/>
//Define the class Car<br/>
function Car() {<br/>
	alert(&quot;Class CAR Instantiated&quot;);<br/>
}</p>
<p>var car1 = new Car();<br/>
var car2 = new Car();<br/>
</code></pre></p>
<h2> The Property (object attribute) in JavaScript</h2>
<p>Properties are the variable that are member of an object and can define the state of any instance of Class. Property of a class can be accessed within the class using <code><strong>this</strong></code> keyword. For example, in following code snippet we have assign a property <em>speed</em> to Car.<br/>
<pre><code class="language-php"><br/>
//Define the class Car<br/>
function Car(speed) {<br/>
	alert(&quot;Class CAR Instantiated&quot;);<br/>
	this.speed = speed;<br/>
}</p>
<p>var car1 = new Car(40);<br/>
var car2 = new Car(60);</p>
<p>alert(&quot;Car1 Speed: &quot; + car1.speed);<br/>
alert(&quot;Car2 Speed: &quot; + car2.speed);<br/>
</code></pre></p>
<p>One thing we should note here is that for inheritance works correctly, the Properties should be set in the prototype property of the class (function). The above example becomes:</p>
<pre><code class="language-php"><br/>
//Define the class Car<br/>
function Car(speed) {<br/>
	alert(&quot;Class CAR Instantiated&quot;);<br/>
	this.speed = speed;<br/>
}<br/>
Car.prototype.speed= 'Car Speed';</p>
<p>var car1 = new Car(40);<br/>
var car2 = new Car(60);</p>
<p>alert(&quot;Car1 Speed: &quot; + car1.speed);<br/>
alert(&quot;Car2 Speed: &quot; + car2.speed);<br/>
</code></pre>
<h2>The methods in JavaScript</h2>
<p>To define methods in a Class, all you have to do is just define a attribute and assign an function to it.  For example, in below code snippet we defined a method <code>setSpeed()</code> for class <code>Car</code>.</p>
<pre><code class="language-php"><br/>
//Define the class Car<br/>
function Car(speed) {<br/>
	alert(&quot;Class CAR Instantiated&quot;);<br/>
	this.speed = speed;<br/>
}<br/>
Car.prototype.speed= 'Car Speed';<br/>
Car.prototype.setSpeed = function(speed) {<br/>
	this.speed = speed;<br/>
	alert(&quot;Car speed changed&quot;);<br/>
}</p>
<p>var car1 = new Car(40);<br/>
var car2 = new Car(60);</p>
<p>car1.setSpeed(120);<br/>
car2.setSpeed(140);<br/>
</code></pre>
<h2>Inheritance in JavaScript</h2>
<p>JavaScript supports single class inheritance. To create a child class that inherit parent class, we create a Parent class object and assign it to the Child class. In following example we created a child class Ferrari from parent class Car.<br/>
<pre><code class="language-php"><br/>
//Define the Car class<br/>
function Car() { }<br/>
Car.prototype.speed= 'Car Speed';<br/>
Car.prototype.setSpeed = function(speed) {<br/>
	this.speed = speed;<br/>
	alert(&quot;Car speed changed&quot;);<br/>
}</p>
<p>//Define the Ferrari class<br/>
function Ferrari() { }<br/>
Ferrari.prototype = new Car();</p>
<p>// correct the constructor pointer because it points to Car<br/>
Ferrari.prototype.constructor = Ferrari;</p>
<p>// replace the setSpeed method<br/>
Ferrari.prototype.setSpeed = function(speed) {<br/>
	this.speed = speed;<br/>
	alert(&quot;Ferrari speed changed&quot;);<br/>
}</p>
<p>var car = new Ferrari();<br/>
car.setSpeed();<br/>
</code></pre></p>
<h2>Encapsulation in JavaScript</h2>
<p>In JavaScript, encapsulation is achieved by the inheritance. The child class inherit all the properties and methods of parent class and needs to override the method only that needs to be changed. This encapsulation by which every class inherits the methods of its parent and only needs to define things it wishes to change. </p>
<p><strong>Update</strong>: A new tutorial cover these Javascript OOPs topics in details. Please refer: <a href="http://viralpatel.net/blogs/javascript-objects-functions/"><strong>JavaScript 101: Objects and Functions</strong></a></p>	
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		 <h1>Factory Method</h1>
		<div class="post-wrapper">
		<h3>Definition</h3>

                    <div style="width:80%;padding:6px 0;">
                        Define an interface for creating an object, but let subclasses decide which class to instantiate. Factory Method lets a class defer instantiation to subclasses.
                    </div>
<h3 class="phead">Summary</h3>

<p class="ptext">
    A Factory Method creates new objects as instructed by the client. One way to create objects in JavaScript is by invoking a constructor function with the new operator.
    There are situations however, where the client does not, or should not, know which one of several candidate objects to instantiate.
    The Factory Method allows the client to delegate object creation while still retaining control over which type to instantiate.
</p>
<p class="ptext">
    The key objective of the Factory Method is extensibility. Factory Methods are frequently used in applications that manage, maintain,
    or manipulate collections of objects that are different but at the same time have many characteristics (i.e. methods and properties) in common.
    An example would be a collection of documents with a mix of Xml documents, Pdf documents, and Rtf documents.
</p>
<br />

<h3 class="phead">Diagram</h3>
<div style="padding-left:10px;">
    <img class="diagram img-responsive" src="http://www.dofactory.com/images/diagrams/javascript/javascript-factory-method.jpg" alt="Diagram JavaScript Factory Method Design Pattern" />
</div>
<br />
<br />


<h3 class="phead">Participants</h3>
<div class="ptext">
    The objects participating in this pattern are:
    <br /><br />
    <ul>
        <li>
            <b>Creator</b> -- In sample code: <b style="color:#088;">Factory</b>
            <ul>
                <li>the 'factory' object that creates new products</li>
                <li>implements 'factoryMethod' which returns newly created products</li>
            </ul>
        </li>
        <li>
            <b>AbstractProduct</b> -- not used in JavaScript
            <ul>
                <li>declares an interface for products</li>
            </ul>
        </li>
        <li>
            <b>ConcreteProduct</b> -- In sample code: <b style="color:#088;">Employees</b>
            <ul>
                <li>the product being created</li>
                <li>all products support the same interface (properties and methods)</li>
            </ul>
        </li>
    </ul>

</div>

<br />

<h3 class="phead">Sample code in JavaScript</h3>

<p class="ptext">
    In this JavaScript example the <span class="cd">Factory</span> object creates four different types of employees.
    Each employee type has a different hourly rate.  The <span class="cd">createEmployee</span> method is the actual Factory Method.
    The client instructs the factory what type of employee to create by passing a type argument into the Factory Method.
</p>
<p class="ptext">
    The AbstractProduct in the diagram is not implemented because Javascript does not support abstract classes or interfaces.
    However, we still need to ensure that all employee types have the same interface (properties and methods).
</p>
<p class="ptext">
    Four different employee types are created; all are stored in the same array.
    Each employee is asked to say what they are and their hourly rate.
</p>
<p class="ptext">
    The <span class="cd">log</span> function is a helper which collects and displays results.
</p>


<pre class="prettyprint linenums run code-hscroll">
function Factory() {
    this.createEmployee = function (type) {
        var employee;

        if (type === "fulltime") {
            employee = new FullTime();
        } else if (type === "parttime") {
            employee = new PartTime();
        } else if (type === "temporary") {
            employee = new Temporary();
        } else if (type === "contractor") {
            employee = new Contractor();
        }

        employee.type = type;

        employee.say = function () {
            log.add(this.type + ": rate " + this.hourly + "/hour");
        }

        return employee;
    }
}

var FullTime = function () {
    this.hourly = "$12";
};

var PartTime = function () {
    this.hourly = "$11";
};

var Temporary = function () {
    this.hourly = "$10";
};

var Contractor = function () {
    this.hourly = "$15";
};

// log helper
var log = (function () {
    var log = "";

    return {
        add: function (msg) { log += msg + "\n"; },
        show: function () { alert(log); log = ""; }
    }
})();

function run() {
    var employees = [];
    var factory = new Factory();

    employees.push(factory.createEmployee("fulltime"));
    employees.push(factory.createEmployee("parttime"));
    employees.push(factory.createEmployee("temporary"));
    employees.push(factory.createEmployee("contractor"));
    
    for (var i = 0, len = employees.length; i < len; i++) {
        employees[i].say();
    }

    log.show();
}
</pre>	
			
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>Singleton</h1>
		<div class="post-wrapper">
			<h3>Definition</h3>

                    <div style="width:80%;padding:6px 0;">
                        Ensure a class has only one instance and provide a global point of access to it.
                    </div>
			        
<h3 class="phead">Summary</h3>

<p class="ptext">
    The Singleton Pattern limits the number of instances of a particular object to just one.  This single instance is called the singleton.
</p>
<p class="ptext">
    Singletons are useful in situations where system-wide actions need to be coordinated from a single central place.
    An example is a database connection pool.
    The pool manages the creation, destruction, and lifetime of all database connections for the entire application ensuring that no connections are 'lost'.
</p>
<p class="ptext">
    Singletons reduce the need for global variables which is particularly important in JavaScript because it limits namespace
    pollution and associated risk of name collisions.
    The Module pattern (see our <a href="/products/javascript-jquery-design-pattern-framework">JavaScript + jQuery Design Pattern Framework</a>)
    is JavaScript's manifestation of the Singleton pattern.
</p>
<p class="ptext">
    Several other patterns, such as, Factory, Prototype, and Façade are frequently implemented as Singletons when only one instance is needed.
</p>


<br />

<h3 class="phead">Diagram</h3>
<div style="padding-left:10px;">
    <img class="diagram img-responsive" src="http://www.dofactory.com/images/diagrams/javascript/javascript-singleton.jpg" alt="Diagram JavaScript Singleton  Design Pattern" />
</div>
<br />
<br />


<h3 class="phead">Participants</h3>
<div class="ptext">
    The objects participating in this pattern are:<br /><br />

    <ul>
        <li>
            <b>Singleton</b> -- In sample code: <b style="color:#088;">Singleton</b>
            <ul>
                <li>defines getInstance() which returns the unique instance.</li>
                <li>responsible for creating and managing the instance object.</li>
            </ul>
        </li>
    </ul>

</div>

<br />

<h3 class="phead">Sample code in JavaScript</h3>

<p class="ptext">
    The <span class="cd">Singleton</span> object is implemented as an <i>immediate anonymous function</i>.
    The function executes immediately by wrapping it in brackets followed by two additional brackets.
    It is called anonymous because it doesn't have a name.
</p>
<p class="ptext">
    The <span class="cd">getInstance</span> method is Singleton's gatekeeper. It returns the one and only instance of the object
    while maintaining a private reference to it which is not accessible to the outside world.
</p>
<p class="ptext">
    The <span class="cd">getInstance</span> method demonstates another design pattern called Lazy Load.
    Lazy Load checks if an instance has already been created; if not, it creates one and
    stores it for future reference. All subsequent calls will receive the stored instance.
    Lazy loading is a CPU and memory saving technique by creating objects only when absolutely necessary.
</p>
<p class="ptext">
    Singleton is a manifestation of a common JavaScript pattern: the Module pattern.
    Module is the basis to all popular JavaScript libraries and frameworks (jQuery, Backbone, Ember, etc.).
    To learn how to benefit from Module, Lazy Load and many other JavaScript patterns in your own projects, check out our
    unique <a href="/products/javascript-jquery-design-pattern-framework">JavaScript + jQuery Design Pattern Framework</a>.
</p>

<pre class="prettyprint linenums run code-hscroll">
var Singleton = (function () {
    var instance;

    function createInstance() {
        var object = new Object("I am the instance");
        return object;
    }

    return {
        getInstance: function () {
            if (!instance) {
                instance = createInstance();
            }
            return instance;
        }
    };
})();

function run() {

    var instance1 = Singleton.getInstance();
    var instance2 = Singleton.getInstance();

    alert("Same instance? " + (instance1 === instance2));  
}
</pre>
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>Facade</h1>
		<div class="post-wrapper">
			
			 <h3>Definition</h3>

                    <div style="width:80%;padding:6px 0;">
                        Provide a unified interface to a set of interfaces in a subsystem. Fa&#231;ade defines a higher-level interface that makes the subsystem easier to use.
                    </div>
					

<h3 class="phead">Summary</h3>

<p class="ptext">
    The Façade pattern provides an interface which shields clients from complex functionality in one or more subsystems.
    It is a simple pattern that may seem trivial but it is powerful and extremely useful.
    It is often present in systems that are built around a multi-layer architecture.
</p>
<p class="ptext">
    The intent of the Façade is to provide a high-level interface (properties and methods) that makes a subsystem or toolkit easy to use for the client.
</p>
<p class="ptext">
    On the server, in a multi-layer web application you frequently have a presentation layer which is a client to a service layer.
    Communication between these two layers takes place via a well-defined API.
    This API, or façade, hides the complexities of the business objects and their interactions from the presentation layer.
</p>
<p class="ptext">
    Another area where Façades are used is in refactoring. Suppose you have a confusing or messy set of legacy objects that the client should not be concerned about.
    You can hide this code behind a Façade. The Façade exposes only what is necessary and presents a cleaner and easy-to-use interface.
</p>
<p class="ptext">
    Façades are frequently combined with other design patterns.  Facades themselves are often implemented as singleton factories.
</p>
<br />

<h3 class="phead">Diagram</h3>
<div style="padding-left:10px;">
    <img class="diagram img-responsive" src="http://www.dofactory.com/images/diagrams/javascript/javascript-facade.jpg" alt="Diagram JavaScript Facade  Design Pattern" />
</div>
<br />
<br />

<h3 class="phead">Participants</h3>
<div class="ptext">
    The objects participating in this pattern are:<br /><br />

    <ul>
        <li>
            <b>Facade</b> -- In sample code: <b style="color:#088;">Mortgage</b>
            <ul>
                <li>knows which subsystems are responsible for a request</li>
                <li>delegates client requests to appropriate subsystem objects</li>
            </ul>
        </li>
        <li>
            <b>Sub Systems</b> -- In sample code: <b style="color:#088;">Bank, Credit, Background</b>
            <ul>
                <li>implements and performs specialized subsystem functionality</li>
                <li>have no knowledge of or reference to the facade</li>
            </ul>
        </li>

    </ul>


</div>

<br />

<h3 class="phead">Sample code in JavaScript</h3>

<p class="ptext">
    The  <span class="cd">Mortgage</span> object is the Facade in the sample code.
    It presents a simple interface to the client with only a single method: <span class="cd">applyFor</span>.
    Eut underneath this simple API lies considerable complexity.
</p>
<p class="ptext">
    The applicant's name is passed into the Mortgage constructor function.
    Then the <span class="cd">applyFor</span> method is called with the requested loan amount.
    Internally, this method uses services from 3 separate subsystems that are complex and possibly take some time to process; they are
    <span class="cd">Bank</span>,  <span class="cd">Credit</span>, and  <span class="cd">Background</span>.
</p>
<p class="ptext">
    Based on several criteria (bank statements, credit reports, and criminal background) the applicant is either accepted or denied for the
    requested loan.
</p>

<pre class="prettyprint linenums run code-hscroll">
var Mortgage = function(name) {
    this.name = name;
}

Mortgage.prototype = {

    applyFor: function(amount) {
        // access multiple subsystems...
        var result = "approved";
        if (!new Bank().verify(this.name, amount)) {
            result = "denied";
        } else if (!new Credit().get(this.name)) {
            result = "denied";
        } else if (!new Background().check(this.name)) {
            result = "denied";
        }
        return this.name + " has been " + result +
               " for a " + amount + " mortgage";
    }
}

var Bank = function() {
    this.verify = function(name, amount) {
        // complex logic ...
        return true;
    }
}

var Credit = function() {
    this.get = function(name) {
        // complex logic ...
        return true;
    }
}

var Background = function() {
    this.check = function(name) {
        // complex logic ...
        return true;
    }
}

function run() {
    var mortgage = new Mortgage("Joan Templeton");
    var result = mortgage.applyFor("$100,000");

    alert(result);
}

</pre>
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>Observer</h1>
		<div class="post-wrapper">
			 <h3>Definition</h3>

                    <div style="width:80%;padding:6px 0;">
                        Define a one-to-many dependency between objects so that when one object changes state, all its dependents are notified and updated automatically.
                    </div>
			
<h3 class="phead">Summary</h3>

<p class="ptext">
    The Observer pattern offers a subscription model in which objects subscribe to an event and get notified when the event occurs.
    This pattern is the cornerstone of event driven programming, including JavaScript.
    The Observer pattern facilitates good object-oriented design and promotes loose coupling.
</p>
<p class="ptext">
    When building web apps you end up writing many event handlers. Event handlers are functions that will be notified when a certain event fires.
    These notifications optionally receive an event argument with details about the event (for example the x and y position of the mouse at a click event).
</p>
<p class="ptext">
    The event and event-handler paradigm in JavaScript is the manifestation of the Observer design pattern.
    Another name for the Observer pattern is Pub/Sub, short for Publication/Subscription.
</p>

<br />

<h3 class="phead">Diagram</h3>
<div style="padding-left:60px;">
    <img class="diagram img-responsive" src="http://www.dofactory.com/images/diagrams/javascript/javascript-observer.jpg" alt="Diagram JavaScript Observer Design Pattern" />
</div>
<br />
<br />

<h3 class="phead">Participants</h3>
<div class="ptext">
    The objects participating in this pattern are:<br /><br />

    <ul>
        <li>
            <b>Subject</b> -- In sample code: <b style="color:#088;">Click</b>
            <ul>
                <li>maintains list of observers. Any number of Observer objects may observe a Subject</li>
                <li>implements an interface that lets observer objects subscribe or unsubscribe</li>
                <li>sends a notification to its observers when its state changes</li>
            </ul>
        </li>
        <li>
            <b>Observers</b> -- In sample code: <b style="color:#088;">clickHandler</b>
            <ul>
                <li>has a function signature that can be invoked when Subject changes (i.e. event occurs)</li>
            </ul>
        </li>
    </ul>

</div>

<br />

<h3 class="phead">Sample code in JavaScript</h3>

<p class="ptext">
    The <span class="cd">Click</span> object represents the Subject.
    The <span class="cd">clickHandler</span> function is the subscribing Observer.
    This handler subscribes, unsubscribes, and then subscribes itself while events are firing.
    It gets notified only of events #1 and #3.
</p>
<p class="ptext">
    Notice that the <span class="cd">fire</span> method accepts two arguments.
    The first one has details about the event and the second one is the
    context, that is, the <span class="cd">this</span> value for when the eventhandlers are called.
    If no context is provided <span class="cd">this</span> will be bound to the global object (window).
</p>
<p class="ptext">
    The <span class="cd">log</span> function is a helper which collects and displays results.
</p>

<pre class="prettyprint linenums run code-hscroll">
function Click() {
    this.handlers = [];  // observers
}

Click.prototype = {

    subscribe: function(fn) {
        this.handlers.push(fn);
    },

    unsubscribe: function(fn) {
        this.handlers = this.handlers.filter(
            function(item) {
                if (item !== fn) {
                    return item;
                }
            }
        );
    },

    fire: function(o, thisObj) {
        var scope = thisObj || window;
        this.handlers.forEach(function(item) {
            item.call(scope, o);
        });
    }
}

// log helper

var log = (function() {
    var log = "";

    return {
        add: function(msg) { log += msg + "\n"; },
        show: function() { alert(log); log = ""; }
    }
})();

function run() {

    var clickHandler = function(item) { 
        log.add("fired: " + item); 
    };

    var click = new Click();

    click.subscribe(clickHandler);
    click.fire('event #1');
    click.unsubscribe(clickHandler);
    click.fire('event #2');
    click.subscribe(clickHandler);
    click.fire('event #3');

    log.show();
}
</pre>
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>4 JavaScript Design Patterns You Should Know</h1>
		<div class="post-wrapper">
			<p>Every developer strives to write maintainable, readable, and reusable code. Code structuring becomes more important as applications become larger. Design patterns prove crucial to solving this challenge &#8211; providing an organization structure for common issues in a particular circumstance.</p>
<p>JavaScript web developers frequently interact with design patterns, even unknowingly, when creating applications.</p>
<p>Although there is a diverse list of design patterns used in certain circumstances, JavaScript developers tend to use some patterns customarily more than others.</p>
<p>In this post, I want to discuss these common patterns to expose ways to improve your programming repertoire and dive deeper into the JavaScript internals.</p>
<p>The design patterns in question include the following:</p>
<ul>
<li>Module</li>
<li>Prototype</li>
<li>Observer</li>
<li>Singleton</li>
</ul>
<p>Each pattern consists of many properties, though, I will emphasize the following key points:</p>
<ol>
<li><strong>Context</strong>: Where/under what circumstances is the pattern used?</li>
<li><strong>Problem</strong>: What are we trying to solve?</li>
<li><strong>Solution</strong>: How does using this pattern solve our proposed problem? </li>
<li><strong>Implementation</strong>: What does the implementation look like?</li>
</ol>
<h2>Module Design Pattern</h2>
<p>JavaScript modules are the most prevalently used design patterns for keeping particular pieces of code independent of other components. This provides loose coupling to support well-structured code.</p>
<p>For those that are familiar with object-oriented languages, modules are JavaScript &#8220;classes&#8221;. One of the many advantages of classes is <em>encapsulation</em> &#8211; protecting states and behaviors from being accessed from other classes. The module pattern allows for public and private (plus the lesser-know protected and privileged) access levels.</p>
<p>Modules should be Immediately-Invoked-Function-Expressions (IIFE) to allow for private scopes &#8211; that is, a closure that protect variables and methods (however, it will return an object instead of a function). This is what it looks like:</p>
<pre><code class="language-javascript">
(function() {

    // declare private variables and/or functions

    return {
      // declare public variables and/or functions
    }

})();
</code>
</pre>
<p>Here we instantiate the private variables and/or functions before returning our object that we want to return. Code outside of our closure is unable to access these private variables since it is not in the same scope. Let&#8217;s take a more concrete implementation:</p>
<pre><code class="language-javascript">
var HTMLChanger = (function() {
  var contents = 'contents'

  var changeHTML = function() {
    var element = document.getElementById('attribute-to-change');
    element.innerHTML = contents;
  }

  return {
    callChangeHTML: function() {
      changeHTML();
      console.log(contents);
    }
  };

})();

HTMLChanger.callChangeHTML();       // Outputs: 'contents'
console.log(HTMLChanger.contents);  // undefined
</code></pre>
<p>Notice that <code>callChangeHTML</code> binds to the returned object and can be referenced within the <code>HTMLChanger</code> namespace. However, when outside the module, contents are unable to be referenced.</p>
<h3>Revealing Module Pattern</h3>
<p>A variation of the module pattern is called the <strong>Revealing Module Pattern</strong>. The purpose is to maintain encapsulation and reveal certain variables and methods returned in an object literal. The direct implementation looks like this:</p>
<pre><code class="language-javascript">
var Exposer = (function() {
  var privateVariable = 10;

  var privateMethod = function() {
    console.log('Inside a private method!');
    privateVariable++;
  }

  var methodToExpose = function() {
    console.log('This is a method I want to expose!');
  }

  var otherMethodIWantToExpose = function() {
    privateMethod();
  }

  return {
      first: methodToExpose,
      second: otherMethodIWantToExpose
  };
})();

Exposer.first();        // Output: This is a method I want to expose!
Exposer.second();       // Output: Inside a private method!
Exposer.methodToExpose; // undefined

</code></pre>
<p>Although this looks much cleaner, an obvious disadvantage is unable to reference the private methods. This can pose unit testing challenges. Similarly, the public behaviors are non-overridable.</p>
<h2>Prototype Design Pattern</h2>
<p>Any JavaScript developer has either seen the keyword <strong>prototype</strong>, confused by the prototypical inheritance, or implemented prototypes in their code. The Prototype design pattern relies on the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Inheritance_and_the_prototype_chain">JavaScript prototypical inheritance</a>. The prototype model is used mainly for creating objects in performance-intensive situations.</p>
<p>The objects created are clones (shallow clones) of the original object that are passed around. One use case of the prototype pattern is performing an extensive database operation to create an object used for other parts of the application. If another process needs to use this object, instead of having to perform this substantial database operation, it would be advantageous to clone the previously created object.</p>
<p><img src="https://upload.wikimedia.org/wikipedia/commons/1/14/Prototype_UML.svg" alt="Prototype Design Pattern"/><br/>
<caption style="text-align:center"><a href="https://upload.wikimedia.org/wikipedia/commons/1/14/Prototype_UML.svg">Prototype Design Pattern on <em>Wikipedia</em></a></caption>
</p>
<p>This UML describes how a prototype interface is used to clone concrete implementations.</p>
<p>To clone an object, a constructor must exist to instantiate the first object. Next, by using the keyword <strong>prototype</strong> variables and methods bind to the object&#8217;s structure. Let&#8217;s look at a basic example:</p>
<pre><code class="language-javascript">
var TeslaModelS = function() {
  this.numWheels    = 4;
  this.manufacturer = 'Tesla';
  this.make         = 'Model S';
}

TeslaModelS.prototype.go = function() {
  // Rotate wheels
}

TeslaModelS.prototype.stop = function() {
  // Apply brake pads
}
</code></pre>
<p>The constructor allows the creation of a single TeslaModelS object. When a creating new TeslaModelS object, it will retain the states initialized in the constructor. Additionally, maintaining the function <strong>go</strong> and <strong>stop</strong> is easy since we declared them with <strong>prototype</strong>. A synonymous way to extend functions on the prototype as described below:</p>
<pre><code class="language-javascript">
var TeslaModelS = function() {
  this.numWheels    = 4;
  this.manufacturer = 'Tesla';
  this.make         = 'Model S';
}

TeslaModelS.prototype = {
  go: function() {
    // Rotate wheels
  },
  stop: function() {
    // Apply brake pads
  }
}
</code></pre>
<h3>Revealing Prototype Pattern</h3>
<p>Similar to Module pattern, the Prototype pattern also has a revealing variation. The Revealing Prototype Pattern provides encapsulation with public and private members since it returns an object literal.</p>
<p>Since we are returning an object, we will prefix the prototype object with a <strong>function</strong>. By extending our example above, we can choose what we want to expose in the current prototype to preserve their access levels:</p>
<pre><code class="language-javascript">
var TeslaModelS = function() {
  this.numWheels    = 4;
  this.manufacturer = 'Tesla';
  this.make         = 'Model S';
}

TeslaModelS.prototype = function() {

  var go = function() {
    // Rotate wheels
  };

  var stop = function() {
    // Apply brake pads
  };

  return {
    pressBrakePedal: stop,
    pressGasPedal: go
  }

}();
</code></pre>
<p>Note how the functions stop and go will be shielded from the returning object due to being outside of returned object&#8217;s scope. Since JavaScript natively supports prototypical inheritance, there is no need to rewrite underlying features.</p>
<h2>Observer Design Pattern</h2>
<p>There are many times when one part of the application changes, other parts needs to be updated. In AngularJS, if the <code>$scope</code> object updates, an event can be triggered to notify another component. The observer pattern incorporates just that &#8211; if an object is modified it <strong>broadcasts</strong> to dependent objects that a change has occurred.</p>
<p>Another prime example is the model-view-controller (MVC) architecture; The view updates when the model changes. One benefit is decoupling the view from the model to reduce dependencies.</p>
<p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/8d/Observer.svg/1000px-Observer.svg.png" alt="Observer Design Pattern"/><br/>
<caption style="text-align:center"><a href="https://upload.wikimedia.org/wikipedia/commons/thumb/8/8d/Observer.svg/1000px-Observer.svg.png">Observer Design Pattern on <em>Wikipedia</em></a></caption>
</p>
<p>As shown in the UML diagram, the necessary objects are the <code>subject</code>, <code>observer</code>, and <code>concrete</code> objects. The subject contains references to the concrete observers to notify for any changes. The Observer object is an abstract class that allows for the concrete observers to implements the notify method.</p>
<p>Let&#8217;s take a look at an AngularJS example that encompasses the observer pattern through event management.</p>
<pre><code class="language-javascript">
// Controller 1
$scope.$on('nameChanged', function(event, args) {
    $scope.name = args.name;
});

...

// Controller 2
$scope.userNameChanged = function(name) {
    $scope.$emit('nameChanged', {name: name});
};
</code></pre>
<p>With the observer pattern, it is important to distinguish the independent object or the <strong>subject</strong>.</p>
<p>It is important to note that although the observer pattern does offer many advantages, one of the disadvantages is a significant drop in performance as the number of observers increased. One of the most notorious observers is <strong>watchers</strong>. In AngularJS, we can <strong>watch</strong> variables, functions, and objects. The <strong>$$digest</strong> cycle runs and notifies each of the watchers with the new values whenever a scope object is modified.</p>
<p>We can create our own Subjects and Observers in JavaScript. Let&#8217;s see how this is implemented:</p>
<pre><code class="language-javascript">
var Subject = function() {
  this.observers = [];

  return {
    subscribeObserver: function(observer) {
      this.observers.push(observer);
    },
    unsubscribeObserver: function(observer) {
      var index = this.observers.indexOf(observer);
      if(index &gt; -1) {
        this.observers.splice(index, 1);
      }
    },
    notifyObserver: function(observer) {
      var index = this.observers.indexOf(observer);
      if(index &gt; -1) {
        this.observers[index].notify(index);
      }
    },
    notifyAllObservers: function() {
      for(var i = 0; i &lt; this.observers.length; i++){
        this.observers[i].notify(i);
      };
    }
  };
};

var Observer = function() {
  return {
    notify: function(index) {
      console.log("Observer " + index + " is notified!");
    }
  }
}

var subject = new Subject();

var observer1 = new Observer();
var observer2 = new Observer();
var observer3 = new Observer();
var observer4 = new Observer();

subject.subscribeObserver(observer1);
subject.subscribeObserver(observer2);
subject.subscribeObserver(observer3);
subject.subscribeObserver(observer4);

subject.notifyObserver(observer2); // Observer 2 is notified!

subject.notifyAllObservers();
// Observer 1 is notified!
// Observer 2 is notified!
// Observer 3 is notified!
// Observer 4 is notified!
</code></pre>
<h3>Publish/Subscribe</h3>
<p>The Publish/Subscribe pattern, however, uses a topic/event channel that sits between the objects wishing to receive notifications (subscribers) and the object firing the event (the publisher). This event system allows code to define application-specific events that can pass custom arguments containing values needed by the subscriber. The idea here is to avoid dependencies between the subscriber and publisher.</p>
<p>This differs from the Observer pattern since any subscriber implementing an appropriate event handler to register for and receive topic notifications broadcast by the publisher.</p>
<p>Many developers choose to aggregate the publish/subscribe design pattern with the observer though there is a distinction. Subscribers in the publish/subscribe pattern are notified through some messaging medium, but observers are notified by implementing a handler similar to the subject.</p>
<p>In AngularJS, a subscriber &#8216;subscribes&#8217; to an event using $on(&#8216;event&#8217;, callback), and a publisher &#8216;publishes&#8217; an event using $emit(&#8216;event&#8217;, args) or $broadcast(&#8216;event&#8217;, args).</p>
<h2>Singleton</h2>
<p>A Singleton only allows for a single instantiation, but many instances of the same object. The Singleton restricts clients from creating multiple objects, after the first object created, it will return instances of itself.</p>
<p>Finding use cases for Singletons is difficult for most who have not yet used it prior. One example is using an office printer. If there are ten people in an office, and they all use one printer, ten computers share one printer (instance). By sharing one printer, they share the same resources.</p>
<pre><code class="language-javascript">
var printer = (function () {

  var printerInstance;

  function create () {

    function print() {
      // underlying printer mechanics
    }

    function turnOn() {
      // warm up
      // check for paper
    }

    return {
      // public + private states and behaviors
      print: print,
      turnOn: turnOn
    };
  }

  return {
    getInstance: function() {
      if(!printerInstance) {
        printerInstance = create();
      }
      return printerInstance;
    }
  };

  function Singleton () {
    if(!printerInstance) {
      printerInstance = intialize();
    }
  };

})();
</code></pre>
<p>The create method is private because we do not want the client to access this, however, notice that the <em>getInstance</em> method is public. Each officer worker can generate a printer instance by interacting with the <em>getInstance</em> method, like so:</p>
<pre><code class="language-javascript">
var officePrinter = printer.getInstance();
</code></pre>
<p>In AngularJS, Singletons are prevalent, the most notable being services, factories, and providers. Since they maintain state and provides resource accessing, creating two instances defeats the point of a shared service/factory/provider.</p>
<p>Race conditions occur in multi-threaded applications when more than one thread tries to access the same resource. Singletons are susceptible to race conditions, such that if no instance were initialized first, two threads could then create two objects instead of returning and instance. This defeats the purpose of a singleton. Therefore, developers must be privy to synchronization when implementing singletons in multithreaded applications.</p>
<h2>Conclusion</h2>
<p>Design patterns are frequently used in larger applications, though to understand where one might be advantageous over another, comes with practice.</p>
<p>Before building any application, you should thoroughly think about each actor and how they interact with one another. After reviewing the <code>Module</code>, <code>Prototype</code>, <code>Observer</code>, and <code>Singleton</code> design patterns, you should be able to identify these patterns and use them in the wild.</p>
			
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>Understanding Design Patterns in JavaScript</h1>
		<div class="post-wrapper">
	<p>Today, we're going to put on our computer science hats as we learn about some common design patterns. Design patterns offer developers ways to solve technical problems in a reusable and elegant way. Interested in becoming a better JavaScript developer? Then read on.</p>
<p><!--more--></p>
<div class="republished-shortcode">
<strong>Republished Tutorial</strong>
<p>Every few weeks, we revisit some of our reader's favorite posts from throughout the history of the site. This tutorial was first published in July, 2012.</p>
</div>
<hr>
<h2>Introduction</h2>
<p>Solid design patterns are the basic building block for maintainable software applications. If you've ever participated in a technical interview, you've liked been asked about them. In this tutorial, we'll take a look at a few patterns that you can start using today.</p>
<hr>
<h2>What is a Design Pattern?</h2>
<blockquote class="pullquote"><p>A design pattern is a reusable software solution</p></blockquote>
<p>Simply put, a design pattern is a reusable software solution to a specific type of problem that occurs frequently when developing software. Over the many years of practicing software development, experts have figured out ways of solving similar problems. These solutions have been encapsulated into design patterns. So:</p>
<ul>
<li>patterns are proven solutions to software development problems </li>
<li>patterns are scalable as they usually are structured and have rules that you should follow </li>
<li>patterns are reusable for similar problems </li>
</ul>
<p>We'll get into some examples of design patterns further in to the tutorial.</p>
<hr>
<h2>Types of Design Patterns</h2>
<p>In software development, design patterns are generally grouped into a few categories. We'll cover the three most important ones in this tutorial. They are explained in brief below:</p>
<ol>
<li>
<strong>Creational</strong> patterns focus on ways to create objects or classes. This may sound simple (and it is in some cases), but large applications need to control the object creation process.

</li>
<li>
<strong>Structural</strong> design patterns focus on ways to manage relationships between objects so that your application is architected in a scalable way. A key aspect of structural patterns is to ensure that a change in one part of your application does not affect all other parts.

</li>
<li>
<strong>Behavioral</strong> patterns focus on communication between objects. </li>
</ol>
<p>You may still have questions after reading these brief descriptions. This is natural, and things will clear up once we look at some design patterns in depth below. So read on!</p>
<hr>
<h2>A Note About Classes in JavaScript</h2>
<p>When reading about design patterns, you'll often see references to classes and objects. This can be confusing, as JavaScript does not really have the construct of "class"; a more correct term is "data type".</p>
<h3>Data Types in JavaScript</h3>
<p>JavaScript is an object-oriented language where objects inherit from other objects in a concept known as prototypical inheritance. A data type can be created by defining what is called a constructor function, like this:</p>
<pre class="brush: js noskimlinks noskimwords">function Person(config) {
    this.name = config.name;
    this.age = config.age;
}

Person.prototype.getAge = function() {
    return this.age;
};

var tilo = new Person({name:"Tilo", age:23 });
console.log(tilo.getAge());</pre>
<p>Note the use of the <code>prototype</code> when defining methods on the <code>Person</code> data type. Since multiple <code>Person</code> objects will reference the same prototype, this allows the <code>getAge()</code> method to be shared by all instances of the <code>Person</code> data type, rather than redefining it for every instance. Additionally, any data type that inherits from <code>Person</code> will have access to the <code>getAge()</code> method. </p>
<h3>Dealing with Privacy</h3>
<p>Another common issue in JavaScript is that there is no true sense of private variables. However, we can use closures to somewhat simulate privacy. Consider the following snippet:</p>
<pre class="brush: js noskimlinks noskimwords">var retinaMacbook = (function() {

    //Private variables
    var RAM, addRAM;

    RAM = 4;

    //Private method
    addRAM = function (additionalRAM) {
        RAM += additionalRAM;
    };

    return {

        //Public variables and methods
        USB: undefined,
        insertUSB: function (device) {
            this.USB = device;
        },

        removeUSB: function () {
            var device = this.USB;
            this.USB = undefined;
            return device;
        }
    };
})();</pre>
<p>In the example above, we created a <code>retinaMacbook</code> object, with public and private variables and methods. This is how we would use it:</p>
<pre class="brush: js noskimlinks noskimwords">retinaMacbook.insertUSB("myUSB");
console.log(retinaMacbook.USB); //logs out "myUSB"
console.log(retinaMacbook.RAM) //logs out undefined</pre>
<p>There's a lot more that we can do with functions and closures in JavaScript, but we won't get into all of it in this tutorial. With this little lesson on JavaScript data types and privacy behind us, we can carry along to learn about design patterns.</p>
<hr>
<h2>Creational Design Patterns</h2>
<p>There are many different kinds of creational design patterns but we are going to cover two of them in this tutorial: Builder and Prototype. I find that these are used often enough to warrant the attention. </p>
<h3>Builder Pattern</h3>
<p>The Builder Pattern is often used in web development, and you've probably used it before without realizing it. Simply put, this pattern can be defined as the following:</p>
<blockquote>
<p>Applying the builder pattern allows us to construct objects by only specifying the type and the content of the object. We don't have to explicitly create the object. </p>
</blockquote>
<p>For example, you've probably done this countless times in jQuery:</p>
<pre class="brush: js noskimlinks noskimwords">var myDiv = $('&lt;div id="myDiv"&gt;This is a div.&lt;/div&gt;');

//myDiv now represents a jQuery object referencing a DOM node.

var someText = $('&lt;p/&gt;');
//someText is a jQuery object referencing an HTMLParagraphElement

var input = $('&lt;input /&gt;');</pre>
<p>Take a look at the three examples above. In the first one, we passed in a <code>&lt;div/&gt;</code> element with some content. In the second, we passed in an empty <code>&lt;p&gt;</code> tag. In the last one, we passed in an <code>&lt;input /&gt;</code> element. The result of all three were the same: we were returned a jQuery object referencing a DOM node.</p>
<p>The <code>$</code> variable adopts the Builder Pattern in jQuery. In each example, we were returned a jQuery DOM object and had access to all the methods provided by the jQuery library, but at no point did we explicitly call <code>document.createElement</code>. The JS library handled all of that under the hood. </p>
<p>Imagine how much work it would be if we had to explicitly create the DOM element and insert content into it! By leveraging the builder pattern, we're able to focus on the type and the content of the object, rather than explicit creation of it. </p>
<h3>Prototype Pattern</h3>
<p>Earlier, we went through how to define data types in JavaScript through functions and adding methods to the object's <code>prototype</code>. The Prototype pattern allows objects to inherit from other objects, via their prototypes. </p>
<blockquote>
<p>The prototype pattern is a pattern where objects are created based on a template of an existing object through cloning. </p>
</blockquote>
<p>This is an easy and natural way of implementing inheritance in JavaScript. For example:</p>
<pre class="brush: js noskimlinks noskimwords">var Person = {
    numFeet: 2,
    numHeads: 1,
    numHands:2
};

//Object.create takes its first argument and applies it to the prototype of your new object.
var tilo = Object.create(Person);

console.log(tilo.numHeads); //outputs 1
tilo.numHeads = 2;
console.log(tilo.numHeads) //outputs 2</pre>
<p>The properties (and methods) in the <code>Person</code> object get applied to the prototype of the <code>tilo</code> object. We can redefine the properties on the <code>tilo</code> object if we want them to be different.</p>
<p>In the example above, we used <code>Object.create()</code>. However, Internet Explorer 8 does not support the newer method. In these cases, we can simulate it's behavior:</p>
<pre class="brush: js noskimlinks noskimwords">var vehiclePrototype = {

  init: function (carModel) {
    this.model = carModel;
  },

  getModel: function () {
    console.log( "The model of this vehicle is " + this.model);
  }
};


function vehicle (model) {

  function F() {};
  F.prototype = vehiclePrototype;

  var f = new F();

  f.init(model);
  return f;

}

var car = vehicle("Ford Escort");
car.getModel();</pre>
<p>The only disadvantage to this method is that you cannot specify read-only properties, which <a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/create">can be specified</a> when using <code>Object.create()</code>. Nonetheless, the prototype pattern shows how objects can inherit from other objects. </p>
<hr>
<h2>Structural Design Patterns</h2>
<p>Structural design patterns are really helpful when figuring out how a system should work. They allow our applications to scale easily and remain maintainable. We're going to look at the following patterns in this group: Composite and Facade.</p>
<h3>Composite Pattern</h3>
<p>The composite pattern is another pattern that you probably have used before without any realization. </p>
<blockquote>
<p>The composite pattern says that a group of objects can be treated in the same manner as an individual object of the group.</p>
</blockquote>
<p>So what does this mean? Well, consider this example in jQuery (most JS libraries will have an equivalent to this):</p>
<pre class="brush: js noskimlinks noskimwords">$('.myList').addClass('selected');
$('#myItem').addClass('selected');

//dont do this on large tables, it's just an example.
$("#dataTable tbody tr").on("click", function(event){
    alert($(this).text());
});

$('#myButton').on("click", function(event) {
    alert("Clicked.");
});</pre>
<p>Most JavaScript libraries provide a consistent API regardless of whether we are dealing with a single DOM element or an array of DOM elements. In the first example, we are able to add the <code>selected</code> class to all the items picked up by the <code>.myList</code> selector, but we can use the same method when dealing with a singular DOM element, <code>#myItem</code>. Similarly, we can attach event handlers using the <code>on()</code> method on multiple nodes, or on a single node through the same API. </p>
<p>By leveraging the Composite pattern, jQuery (and many other libraries) provide us with a simplified API.</p>
<p>The Composite Pattern can sometimes cause problems as well. In a loosely-typed language such as JavaScript, it can often be helpful to know whether we are dealing with a single element or multiple elements. Since the composite pattern uses the same API for both, we can often mistake one for the other and end up with unexpected bugs. Some libaries, such as YUI3, offer two separate methods of getting elements (<code>Y.one()</code> vs <code>Y.all()</code>). </p>
<h3>Facade Pattern</h3>
<p>Here's another common pattern that we take for granted. In fact, this one is one of my favorites because it's simple, and I've seen it being used all over the place to help with browser inconsistencies. Here's what the Facade pattern is about:</p>
<blockquote>
<p>The Facade Pattern provides the user with a simple interface, while hiding it's underlying complexity. </p>
</blockquote>
<p>The Facade pattern almost always improves usability of a piece of software. Using jQuery as an example again, one of the more popular methods of the library is the <code>ready()</code> method:</p>
<pre class="brush: js noskimlinks noskimwords">$(document).ready(function() {

    //all your code goes here...

});</pre>
<p>The <code>ready()</code> method actually implements a facade. If you take a look at the source, here's what you find:</p>
<pre class="brush: js noskimlinks noskimwords">ready: (function() {

    ...

    //Mozilla, Opera, and Webkit
    if (document.addEventListener) {
        document.addEventListener("DOMContentLoaded", idempotent_fn, false);
        ...
    }
    //IE event model
    else if (document.attachEvent) {

        // ensure firing before onload; maybe late but safe also for iframes
        document.attachEvent("onreadystatechange", idempotent_fn);

        // A fallback to window.onload, that will always work
        window.attachEvent("onload", idempotent_fn);

        ...     
    }

})</pre>
<p>Under the hood, the <code>ready()</code> method is not all that simple. jQuery normalizes the browser inconsistencies to ensure that <code>ready()</code> is fired at the appropriate time. However, as a developer, you are presented with a simple interface. </p>
<p>Most examples of the Facade pattern follow this principle. When implementing one, we usually rely on conditional statements under the hood, but present it as a simple interface to the user. Other methods implementing this pattern include <code>animate()</code> and <code>css()</code>. Can you think of why these would be using a facade pattern?</p>
<hr>
<h2>Behavioral Design Patterns</h2>
<p>Any object-oriented software systems will have communication between objects. Not organizing that communication can lead to bugs that are difficult to find and fix. Behavioral design patterns prescribe different methods of organizing the communication between objects. In this section, we're going to look at the Observer and Mediator patterns. </p>
<h3>Observer Pattern</h3>
<p>The Observer pattern is the first of the two behavioral patterns that we are going to go through. Here's what it says:</p>
<blockquote>
<p>In the Observer Pattern, a subject can have a list of observers that are interested in it's lifecycle. Anytime the subject does something interesting, it sends a notification to its observers. If an observer is no longer interested in listening to the subject, the subject can remove it from its list. </p>
</blockquote>
<p>Sounds pretty simple, right? We need three methods to describe this pattern:</p>
<ul>
<li>
<code>publish(data)</code>: Called by the subject when it has a notification to make. Some data may be passed by this method. </li>
<li>
<code>subscribe(observer)</code>: Called by the subject to add an observer to its list of observers. </li>
<li>
<code>unsubscribe(observer)</code>: Called by the subject to remove an observer from its list of observers. </li>
</ul>
<p>Well, it turns out that most modern JavaScript libraries support these three methods as part of their custom events infrastructure. Usually, there's an <code>on()</code> or <code>attach()</code> method, a <code>trigger()</code> or <code>fire()</code> method, and an <code>off()</code> or <code>detach()</code> method. Consider the following snippet:</p>
<pre class="brush: js noskimlinks noskimwords">//We just create an association between the jQuery events methods</pre>
<pre class="brush: js noskimlinks noskimwords">//and those prescribed by the Observer Pattern but you don't have to.
var o = $( {} );
$.subscribe = o.on.bind(o);
$.unsubscribe = o.off.bind(o);
$.publish = o.trigger.bind(o);

// Usage
document.on( 'tweetsReceived', function(tweets) {
    //perform some actions, then fire an event

    $.publish('tweetsShow', tweets);
});

//We can subscribe to this event and then fire our own event.
$.subscribe( 'tweetsShow', function() {
    //display the tweets somehow
    ..

    //publish an action after they are shown.
    $.publish('tweetsDisplayed);
});

$.subscribe('tweetsDisplayed, function() {
    ...
});</pre>
<p>The Observer pattern is one of the simpler patterns to implement, but it is very powerful. JavaScript is well suited to adopt this pattern as it's naturally event-based. The next time you develop web applications, think about developing modules that are loosely-coupled with each other and adopt the Observer pattern as a means of communication. The observer pattern can become problematic if there are too many subjects and observers involved. This can happen in large-scale systems, and the next pattern we look at tries to solve this problem.</p>
<h3>Mediator Pattern</h3>
<p>The last pattern we are going to look at is the Mediator Pattern. It's similar to the Observer pattern but with some notable differences.</p>
<blockquote>
<p>The Mediator Pattern promotes the use of a single shared subject that handles communication with multiple objects. All objects communicate with each other through the mediator.</p>
</blockquote>
<p>A good real-world analogy would be an Air Traffic Tower, which handles communication between the airport and the flights. In the world of software development, the Mediator pattern is often used as a system gets overly complicated. By placing mediators, communication can be handled through a single object, rather than having multiple objects communicating with each other. In this sense, a mediator pattern can be used to replace a system that implements the observer pattern.</p>
<p>There's a simplified implementation of the Mediator pattern by Addy Osmani in <a href="https://gist.github.com/1794823">this gist</a>. Let's talk about how you may use it. Imagine that you have a web app that allows users to click on an album, and play music from it. You could set up a mediator like this:</p>
<pre class="brush: js noskimlinks noskimwords">$('#album').on('click', function(e) {
    e.preventDefault();
    var albumId = $(this).id();
    mediator.publish("playAlbum", albumId);
});


var playAlbum = function(id) {
    
    mediator.publish("albumStartedPlaying", {songList: [..], currentSong: "Without You"});

};

var logAlbumPlayed = function(id) {
    //Log the album in the backend
};

var updateUserInterface = function(album) {
    //Update UI to reflect what's being played
};

//Mediator subscriptions
mediator.subscribe("playAlbum", playAlbum);
mediator.subscribe("playAlbum", logAlbumPlayed);
mediator.subscribe("albumStartedPlaying", updateUserInterface);</pre>
<p>The benefit of this pattern over the Observer pattern is that a single object is responsible for communication, whereas in the observer pattern, multiple objects could be listening and subscribing to each other. </p>
<p>In the Observer pattern, there is no single object that encapsulates a constraint. Instead, the Observer and the Subject must cooperate to maintain the constraint. Communication patterns are determined by the way observers and subjects are interconnected: a single subject usually has many observers, and sometimes the observer of one subject is a subject of another observer.</p>
<hr>
<h2>Conclusion</h2>
<blockquote class="pullquote"><p>Someone has already applied it successfully in the past.</p></blockquote>
<p>The great thing about design patterns is that someone has already applied it successfully in the past. There are lots of open-source code that implement various patterns in JavaScript. As developers, we need to be aware of what patterns are out there and when to apply them. I hope this tutorial helped you take one more step towards answering these questions. </p>
<hr>
<h2>Additional Reading</h2>
<p>Much of the content from this article can be found in the excellent <a href="http://addyosmani.com/resources/essentialjsdesignpatterns/book/">Learning JavaScript Design Patterns</a> book, by Addy Osmani. It's an online book that was released for free under a Creative Commons license. The book extensively covers the theory and implementation of lots of different patterns, both in vanilla JavaScript and various JS libraries. I encourage you to look into it as a reference when you start your next project. </p>		
			
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>Learning JavaScript Native Functions and How to Use Them</h1>
		<div class="post-wrapper">
<h2>Introduction</h2>
<p>JavaScript is becoming the most popular programming language though it is very misunderstood. Understanding JavaScript's internals is tough. Similarly, coercing JavaScript into a more conventional paradigm, such as Object Oriented or Functional Programming can be equally challenging. I want to highlight key native functions with hopes to elucidate JavaScript's innards.</p>
<p>In this article, I discuss the following behaviors:</p>
<ul>
<li>Call/Apply</li>
<li>Bind</li>
<li>Map</li>
<li>Filter</li>
</ul>
<p>I first define the function (with Mozilla's signature), then provide an example, and lastly implement it.</p>
<p>To explain these behaviors, I need to expound on the convoluted 'this' keyword as well as the 'arguments' array-like object.</p>
<h2>this &amp;&amp; arguments Objects</h2>
<p>JavaScript's scoping is function-based, formally known as <a href="https://en.wikipedia.org/wiki/Scope_%28computer_science%29#Lexical_scoping_and_dynamic_sooping">lexical-scoped</a>, variables and methods' scopes are within the current function. <a href="http://www.amazon.com/Pro-JavaScript-Design-Patterns-Object-Oriented/dp/159059908X" title="Pro JavaScript Design Patterns: The Essentials of Object-Oriented JavaScript Programming">&quot;Additionally, functions run in the scope that they are defined in, not the one they are executed in.&quot;</a> <em>To read more on scopes, check out <a href="https://scotch.io/bar-talk/4-javascript-design-patterns-you-should-know">4 Javascript Design Patterns You Should Know</a></em>. The 'this' object references the present function context and used in several ways. For instance, it can be bound to the window (globally scoped).</p>
<pre><code class="language-javascript">this.globalVar = {
    myGlobalVarsMethod: function (){
        // Implementation
    }
};

console.log(this.globalVar); // { myGlobalVarsMethod: [Function] }</code></pre>
<p>And variables can be bound to the containing function, like so:</p>
<pre><code class="language-javascript">this.globalVariable = 'globalVariable';
function globalFunction (){
    this.innerVariable = 'innerVariable';
    console.log(this.globalVariable === undefined); // true
    console.log(this.innerVariable === 'innerVariable'); // true
    return {
        innerFunction: function () {
            console.log(this.globalVariable === undefined); // true
            console.log(this.innerVariable === undefined); // true
        }
    }
}

globalFunction().innerFunction();</code></pre>
<p>There are separate 'this' objects bound to each invoking function. <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode">Strict mode</a> seeks to secure applications by throwing exceptions/erros (<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypeError">TypeErrors</a>) if variables are undefined. In production environments strict mode is preferred; however, I purposefully opt out for the rest of this article to avoid thrown errors. Here is a simple example of strict mode:</p>
<pre><code class="language-javascript">this.globalVar = 'globalVar';

function nonStrictFunctionTest () {
    return function () {
        console.log(this.globalVar); // undefined
    }
}

function strictFunctionTest () {
    'use strict'; // Strict Mode
    return function () {
        console.log(this.globalVar); // TypeError: Cannot read property 'globalVar' of undefined
    }
}

nonStrictFunctionTest()();
strictFunctionTest()();</code></pre>
<p>Unbeknownst to many Javascript developers, there is an <em>arguments</em> object created within a function. It is an <em>Array-like</em> object (only having the property length). <em>Arguments</em> has three main properties, namely, <strong>callee</strong> (the invoking method), <strong>length</strong>, and <strong>caller</strong> (the reference to invoked function).</p>
<p>Declaring a variable <em>arguments</em> inside a function replaces/overrides the primary <em>arguments</em> object.</p>
<p>The following showcases the <em>arguments</em> object:</p>
<pre><code class="language-javascript">function fn (){
    console.log(typeof arguments); // [object Object]
    console.log(arguments[0]); // DeathStar
    console.log(arguments[1]); // Tatooine
    arguments.push("Naboo"); // TypeError: undefined is not a function
    var arguments = "Star Wars";
    console.log(arguments[5]); // W
}

fn("DeathStar", "Tatooine");</code></pre>
<p>To create an array with the <em>arguments</em>, take this route:</p>
<pre><code class="language-javascript">var args = Array.prototype.slice.call(arguments);</code></pre>
<h2>Call/Apply</h2>
<p>Both <em>call</em> and <em>apply</em> are used to invoke a method on an object. In contrasting to using the dot operator, <em>call</em> and <em>apply</em> both accept <em>this</em> as the first argument. As described above, every function maintains a specific scope in which it is defined. Therefore, you must take into account the function's scope when invoked on the object.</p>
<p>Mozilla's <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/apply">apply</a> and <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/call">call</a> signatures are, respectively, as follows:</p>
<pre><code class="language-javascript">fun.apply(thisArg, [argsArray])
fun.call(thisArg[, arg1[, arg2[, ...]]])</code></pre>
<p>By explicitly passing <em>thisArg</em>, the invoking function can access or modify objects in the particular context. The following example clarifies <em>call</em>'s use.</p>
<pre><code class="language-javascript">this.lightSaberColor = 'none';

var darthVader = {
    team: 'Empire',
    lightSaberColor: 'Red'
};

var printLightSaberColor = function(){
    console.log(this.lightSaberColor);

}

printLightSaberColor() // none
printLightSaberColor.call(darthVader); // Red
printLightSaberColor.apply(darthVader); // Red</code></pre>
<p>Notice that the first invocation defaults to the global scope (window), however, the second one resolves to darthVader.</p>
<p>The main difference between using <em>call</em> and <em>apply</em> is their signature. <em>Call</em> requires an explicit list of arguments separately passed in, whereas apply requires an array consisting of the arguments. I remember it by this mnemonic: &quot;<strong>A</strong>pply uses an <strong>A</strong>rray.&quot; <em>Apply</em> is more suitable when your program is not aware of the number of arguments.</p>
<p><a href="https://en.wikipedia.org/wiki/Currying">Currying</a> (partial function application) is a functional programming use case for <em>call</em> and <em>apply</em>. Currying allows us to create functions that return functions requiring a subset of arguments with predetermined conditions. Here is a currying function:</p>
<pre><code class="language-javascript">var curry = function(fun) {

  // nothing to curry. return function
  if (arguments.length &amp;lt; 1) {
    return this;
  }

  // Create an array with the functions arguments
  var args = Array.prototype.slice.call(arguments, 1);
  return function() {

    // *Apply* fn with fn's arguments
    return fun.apply(this, args.concat(Array.prototype.slice.call(arguments, 0)));
  };
};

// Creating function that already predefines adding 1 to a
function addOneToNumber(a) {
    console.log(1 + a);
}

// addOneCurried is of function
var addOneCurried = curry(addOneToNumber);
console.log(addOneCurried(10)); // 11</code></pre>
<p>Even though <em>arguments</em> is not an array, <em>Array.prototype.slice</em> can transform Array-like objects to new arrays.</p>
<h2>Bind</h2>
<p>The <em>bind</em> method is used to invoke methods while explicitly specifying <em>this</em>. Similar to <em>call</em> and <em>apply</em>, scoping <strong>matters</strong>. It is useful for when you need to <em>bind</em> an object to a function's <em>this</em> object.</p>
<p>Below is <em>bind</em>'s <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind">signature</a>:</p>
<pre><code class="language-javascript">fun.bind(thisArg[, arg1[, arg2[, ...]]])</code></pre>
<p>In layman's terms, we are taking function <em>fun</em> and passing <em>thisArg</em> through it. Essentially, whenever <em>this</em> is called in <em>fun</em>, it is referring to <em>thisArg</em>. Let's take a closer look at a simple example:</p>
<pre><code class="language-javascript">var lukeSkywalker = {
    mother: 'Padme Amidala',
    father: 'Anakin Skywalker'.
}

var getFather = function(){
    console.log(this.father);
}

getFather(); // undefined
getFather.bind(lukeSkywalker)(); // Anakin Skywalker
getFather(lukeSkywalker); // undefined</code></pre>
<p>The first <code>getFather()</code> returns undefined because the <em>father</em> attribute is not set on <em>this</em>. Then what is <em>this</em>? It is the global window object since we did not explicitly set it! The second <code>getFather()</code> returns &quot;Anakin Skywalker&quot; because lukeSkywalker is <code>getFather()</code>'s <em>this</em>. Many Java/C++ developers would assume the last <code>getFather()</code> call would return the desired result - though once again, <em>this</em> is bound to <em>global</em>.</p>
<p>Here is the implementation of <em>bind</em>:</p>
<pre><code class="language-javascript">Function.prototype.bind = function(scope) {
  var _that = this;

  return function() {
    return _that.apply(scope, arguments);
  }
}</code></pre>
<p>Consequent to Javascript's lexical scoping, the returned function's <em>this</em> object is different to <em>bind</em>'s. Hence, <strong>_that</strong> is set to *this* to maintain the correct scope. Otherwise, <code>this.apply(scope, arguments)</code>would be undefined.</p>
<h2>Map</h2>
<p>Javascript's <em>map</em> function is a functional programming technique for iterating over an array while transforming each element. It creates a new array with the 'modified' elements returned in a callback. I mention modifying or transforming elements, though if the elements are objects (not primitives), good practice dictates cloning the object rather than physically altering the original one.</p>
<p>Here is the method signature:</p>
<pre><code class="language-javascript">arr.map(callback[, thisArg])</code></pre>
<p>The callback method has three parameters, namely, <strong>currentValue</strong>, <strong>index</strong>, and <strong>array</strong>.</p>
<p>Here is a simple example of <em>map</em>:</p>
<pre><code class="language-javascript">function Jedi(name) {
    this.name = name;
}

var kit = new Jedi('Kit');
var count = new Jedi('Count');
var mace = new Jedi('Mace');

var jedis = [kit, count, mace];

var lastNames = ['Fisto', 'Dooku', 'Windu'];

var jedisWithFullNames = jedis.map(function(currentValue, index, array) {
    var clonedJedi = (JSON.parse(JSON.stringify(currentValue))) // Clone currentValue
    clonedJedi.name = currentValue.name + " " + lastNames[index];
    return clonedJedi;
});

jedisWithFullNames.map(function(currentValue) {
    console.log(currentValue.name);
});

/**
Output:
Kit Fisto
Count Dooku
Mace Windu
*/</code></pre>
<p>With an understanding of what <em>map</em> does, take a look at its implementation:</p>
<pre><code class="language-javascript">Array.prototype.map = function (fun, thisArg) {
    if(typeof fun !== 'function') {
        throw new Error("The first argument must be of type function");
    }
    var arr = [];
    thisArg = (thisArg) ? thisArg : this;

    thisArg.forEach(function(element) {
        arr[arr.length] = fun.call(thisArgs, element);
    });

    return arr;
}</code></pre>
<p><em>[Note: this is a simple implementation. To see ECMAscript 5's full implementation, check out its <a href="https://es5.github.io/#x15.4.4.19">spec</a>.]</em></p>
<h2>Filter</h2>
<p>The <em>filter</em> method is another array behavior. Similar to <em>map</em>, <em>filter</em> returns a new array and accepts a function and an optional <em>thisArg</em>. However, the returned array contains only elements that fit a certain condition tested in the callback function. The callback function must return a boolean - returning <strong>true</strong> signals the element to be accepted and inserted into the returned array.</p>
<p>There are many use cases for <em>filter</em>, including picking the even integers, selecting objects with a particular property, or choosing valid phone numbers.</p>
<p>Here is the method signature:</p>
<pre><code class="language-javascript">arr.filter(callback[, thisArg])</code></pre>
<p>Once again, <em>thisArg</em> is optional and the callback function accepts three paramters, <strong>currentValue</strong>, <strong>index</strong>, and <strong>array</strong>.</p>
<p>Here is an example of <em>filter</em>:</p>
<pre><code class="language-javascript">function Person(name, side) {
    this.name = name;
    this.side = side;
}

var hanSolo = new Person('Han Solo','Rebels');
var bobaFett = new Person('Boba Fett','Empire');
var princessLeia = new Person('Princess Leia', 'Rebels');

var people = [hanSolo, bobaFett, princessLeia];

var enemies = people.filter(function (currentValue, index, array) {
    return currentValue.side === 'Empire';
})
.map(function(currentValue) {
    console.log(currentValue.name + " fights for the " + currentValue.side + ".");
});

/**
Output:
Boba Fett fights for the Empire.
*/</code></pre>
<p>Interestingly, array methods are chainable to create fun and complex operations.</p>
<p>Lastly, lets take a look at <em>filter</em>'s implementation:</p>
<pre><code class="language-javascript">Array.prototype.filter = function(fun, thisArg) {
    if(typeof fun !== 'function') {
        throw new Error("The first argument must be of type function");
    }
    var arr = [];
    thisArg = (thisArg) ? thisArg : this;

    thisArg.forEach(function(element) {
      if (fun.call(thisArg, element)) {
        arr[arr.length] = element;
      }
    });
    return arr;
};</code></pre>
<p><em>[Here is the spec for ECMAscript's <a href="http://www.ecma-international.org/ecma-262/5.1/#sec-15.4.4.20">implementation</a>]</em></p>
<h2>Conclusion</h2>
<p>There are many more native functions that prove useful though these happen to be the most confusing. It is worth reviewing every method on <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Arrays</a> and <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function">Functions</a>.</p>
<p>Hopefully, this gives an insight into Javascript's internals and clarifies Javascript's confusing lexical scope. Call, apply, and bind are tricky to grasp though it becomes more fluid with practice. Try to implement map and filter whenever possible while avoiding traditional looping techniques.</p>
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>The Factory Pattern</h1>
		<div class="post-wrapper">
			
			<p>This pattern focuses on object creation but differs from other patterns in the <a href="http://carldanley.com/javascript-design-patterns/#creational-design-patterns">creation category</a> in that it does not require a constructor function. The factory pattern generally supplies an interface for developers to create new objects through the use of the factory rather than invoking the <code>new</code> operator on an object. Imagine that you needed a car door so you might goto a car factory that produces the product you're interested in and ask it to give you what you need. The factory then supervises the creation of the new car door (or object) and gives it to you. This example paints a good picture for how the factory pattern works; you simply ask it for a type of component, it instantiates the component (given it exists), and returns you what you were looking for.</p>

<p>This article is part of a series called <a href="http://carldanley.com/javascript-design-patterns/">JavaScript Design Patterns</a>.</p>

<h2>Advantages</h2>

<ul>  
<li>Makes complex object creation easy through an interface that can bootstrap this process for you</li>  
<li>Great for generating different objects based on the environment</li>  
<li>Practical for components that require similar instantiation or methods</li>  
<li>Great for decoupling components by bootstrapping the instantiation of a different object to carry out work for particular instances</li>  
</ul>

<h2>Disadvantages</h2>

<ul>  
<li>Unit testing can be difficult as a direct result of the object creation process being hidden by the factory methods</li>  
</ul>

<h2>Example</h2>
<pre>function CarDoor( options ) {
  this.color = options.color || 'red';
  this.side = options.side || 'right';
  this.hasPowerWindows = options.hasPowerWindows || true;
}

function CarSeat( options ) {
  this.color = options.color || 'gray';
  this.material = options.material || 'leather';
  this.isReclinable = options.isReclinable || true;
}

function CarPartFactory() {}
CarPartFactory.prototype.createPart = function createCarPart( options ) {
  var parentClass = null;
  
  if( options.partType === 'door' ) {
    parentClass = CarDoor;
  } else if( options.partType === 'seat' ) {
    parentClass = CarSeat;
  }
  
  if( parentClass === null ) {
    return false;
  }
  
  return new parentClass( options );
}

// example usage
var myPartFactory = new CarPartFactory();
var seat = myPartFactory.createPart( {
  partType : 'seat',
  material : 'leather',
  color : 'blue',
  isReclinable : false
} );

// outputs: true
console.log( seat instanceof CarSeat );

// outputs a CarSeat object with material "leather", color "blue", isReclinable "false"
console.log( seat );</pre>
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>The Observer Pattern</h1>
		<div class="post-wrapper">
			
			 <p>This pattern implements a single object (the subject) that maintains a reference to a collection of objects (known as "observers") and broadcasts notifications when a change to state occurs. When we don't want to observe an object, we simply remove it from the collection of objects being observed. The observer pattern is similar to both the pub/sub implementation and the <a href="http://carldanley.com/js-mediator-pattern/">mediator pattern</a> but still different in purpose &amp; theory and worth mentioning. Study the example below for a good idea of what's happening behind the scenes.</p>

<p>This article is part of a series called <a href="http://carldanley.com/javascript-design-patterns/">JavaScript Design Patterns</a>.</p>

<h2>Advantages</h2>

<ul>  
<li>Requires deeper-level thinking of the relationship between the various components of an application</li>  
<li>Helps us pinpoint dependencies</li>  
<li>Excellent at decoupling objects which often promotes smaller, reusable components</li>  
</ul>

<h2>Disadvantages</h2>

<ul>  
<li>Checking the integrity of your application can become difficult</li>  
<li>Switching a subscriber from one publisher to another can be costly</li>  
</ul>

<h2>Example</h2>

<pre>// build the Subject base class
var Subject = ( function( window, undefined ) {

  function Subject() {
    this._list = [];
  }

  // this method will handle adding observers to the internal list
  Subject.prototype.observe = function observeObject( obj ) {
    console.log( 'added new observer' );
    this._list.push( obj );
  };
  
  Subject.prototype.unobserve = function unobserveObject( obj ) {
    for( var i = 0, len = this._list.length; i < len; i++ ) {
      if( this._list[ i ] === obj ) {
        this._list.splice( i, 1 );
        console.log( 'removed existing observer' );
        return true;
      }
    }
    return false;
  };
  
  Subject.prototype.notify = function notifyObservers() {
    var args = Array.prototype.slice.call( arguments, 0 );
    for( var i = 0, len = this._list.length; i < len; i++ ) {
      this._list[ i ].update.apply( null, args );
    }
  };

  return Subject;

} )( window );

// setup an object that fetchs stocks
function StockGrabber() {
  
  var subject = new Subject();
  
  this.addObserver = function addObserver( newObserver ) {
    subject.observe( newObserver );
  };
  
  this.removeObserver = function removeObserver( deleteObserver ) {
    subject.unobserve( deleteObserver );
  };
  
  this.fetchStocks = function fetchStocks() {
    // fake fetching the stocks
    var stocks = {
      aapl : 167.00,
      goog : 243.67,
      msft : 99.34
    };
    
    // notify our observers of the stock change
    subject.notify( stocks );
  };
  
}

// define a couple of different observers
var StockUpdaterComponent = {
  update : function() {
    console.log( '"update" called on StockUpdater with: ', arguments );
  }
};
var StockChartsComponent = {
  update : function() {
    console.log( '"update" called on StockCharts with: ', arguments );
  }
};

// example usage
var stockApp = new StockGrabber();
stockApp.addObserver( StockUpdaterComponent );
stockApp.fetchStocks(); // console logs: "update" called on StockUpdater with...
stockApp.addObserver( StockChartsComponent );
stockApp.fetchStocks(); // console logs: "update" called on StockUpdater with... "update" called on StockCarts with...
stockApp.removeObserver( StockUpdaterComponent );
stockApp.fetchStocks(); // console logs: "update" called on StockCharts with...
stockApp.removeObserver( StockChartsComponent );
stockApp.fetchStocks(); // does nothing; no observers</pre>

<p>In the example above, the <code>Subject</code> object becomes a base class from which we build an example stock tracking application. You can see that the <code>StockGrabber</code> object uses the <code>Subject</code> object internally to handle notifications to other components of the application such as the <code>StockUpdaterComponent</code> and the <code>StockChartsComponent</code>.</p>
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>Pub/Sub JavaScript Object</h1>
		<div class="post-wrapper">
			<p>There are three keys to effective AJAX-driven websites:  <a href="https://davidwalsh.name/event-delegate">event delegation</a>, <a href="https://davidwalsh.name/mootools-history">History management</a>, and effective app-wide communication with pub/sub.  This blog employs of all of these techniques, and I thought I'd share the simplest of them:  a tiny pub/sub module I use on this site.</p>

<p>If you've not used pub/sub before, the gist is that you publish to a topic and anyone can subscribe, much like the way a radio works: a radio station broadcasts (publishes) and anyone can listen (subscribes).  This is excellent for highly modular web applications; it's a license to globally communicate without attaching to any specific object.</p>

<h2>The JavaScript</h2>

<p>The module itself is super tiny but massively useful:</p>

<pre class="js">
var events = (function(){
  var topics = {};
  var hOP = topics.hasOwnProperty;

  return {
    subscribe: function(topic, listener) {
      // Create the topic's object if not yet created
      if(!hOP.call(topics, topic)) topics[topic] = [];

      // Add the listener to queue
      var index = topics[topic].push(listener) -1;

      // Provide handle back for removal of topic
      return {
        remove: function() {
          delete topics[topic][index];
        }
      };
    },
    publish: function(topic, info) {
      // If the topic doesn't exist, or there's no listeners in queue, just leave
      if(!hOP.call(topics, topic)) return;

      // Cycle through topics queue, fire!
      topics[topic].forEach(function(item) {
      		item(info != undefined ? info : {});
      });
    }
  };
})();
</pre>

<p>Publishing to a topic:</p>

<pre class="js">
events.publish('/page/load', {
	url: '/some/url/path' // any argument
});
</pre>

<p>...and subscribing to said topic in order to be notified of events:</p>

<pre class="js">
var subscription = events.subscribe('/page/load', function(obj) {
	// Do something now that the event has occurred
});

// ...sometime later where I no longer want subscription...
subscription.remove();
</pre>

<p>I use pub/sub religiously on this website and this object has done me a world of good.  I have one topic that fires upon each AJAX page load, and several subscriptions fire during that event (ad re-rendering, comment re-rendering, social button population, etc.).  Evaluate your application and see where you might be able to use pub/sub!</p>
			
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>JavaScript Design Patterns</h1>
		<div class="post-wrapper">
			
            <blockquote>"One of the most important aspects of writing maintainable code is being able to notice the recurring themes in that code and optimize them. This is an area where knowledge of design patterns can prove invaluable." - Addy Osmani</blockquote>

<p>In modern day JavaScript, it's easy to pursue the development of large scale JavaScript applications. We are constantly writing more and more complex web apps that thrive on the latest frameworks and libraries. It's easy for a developer to use four or more libraries in one project. Often though, we tend to overlook some of the core principles involved in the creation of these libraries. </p>

<p>It's important to understand the significance of how and why your favorite libraries are written the way they are.</p>

<p>Having structured, reusable code makes for an easily maintainable code base that helps us to prevent repeating ourselves. JavaScript design patterns don't solve every design problem but they do, however, provide a clear approach that provides stability and in some cases security, for our web apps.</p>

<h2>Why are design patterns important?</h2>

<p>Design patterns are established ways of programming that help you facilitate scalable, easily maintainable and highly decoupled code, all of which are extremely important concepts when engineering large JavaScript applications. When a design pattern is implemented correctly, it makes the code base easier for others to grok. Having an established pattern in play helps to keep your code clean and promotes a declarative method for you and your team to follow.</p>

<blockquote>"The implementation of a design pattern per day keeps the angry developer away." - Old Chinese proverb</blockquote>

<p>Let's take a look at some reasons as to why design patterns are extremely useful.</p>

<ul>  
<li>Patterns are an easy way to refer to a very specific implementation of code while avoiding the additional discussion it would take to get everyone on the same page if the vocabulary used for patterns didn't exist.</li>  
<li>Patterns can help to thwart minor issues that can create major problems later down the road.</li>  
<li>Patterns exemplify a level of sophistication that can provide both performance boosts and reduction of excess memory usage.</li>  
<li>Patterns are established through rigorous testing which means they are, for the most part, "tried and true" and do aid in solving a particular type of problem.</li>  
</ul>

<h2>Categories of Design Patterns</h2>

<p>There are numerous ways we can categorize all of the design patterns but for the sake of brevity, the three most popular are: <a href="#creational-design-patterns">creational</a>, <a href="#structural-design-patterns">structural</a> &amp; <a href="behavioral-design-patterns">behavioral</a>. Creational focuses on object creation (imagine that). Structural focuses on object composition. Behavioral focuses on communication between objects. While no single implementation of these types of design patterns are perfect, it's important to understand that being familiar with all of them can educate you to make an informed decision based on the needs of your application. Take some time to review the following tables as they summarize the methods that each design pattern implements.</p>

<h3 id="creational-design-patterns"><a href="#creational-design-patterns">#</a> Creational Design Patterns</h3>

<p>Creational design patterns deal directly with object initialization procedures focusing on the creation of situation-specific objects. Without thinking about how objects are created, a level of complexity can be added to the design of an application. Creational design patterns work to solve this problem by adding a layer to the object creation process.</p>

<p><img src="/content/images/2016/02/chrome_2016-02-13_17-41-21-1.png" alt=""></p>

<p><small style="padding: 0 0 0 10px;"><i>Image Credit: <a href="http://addyosmani.com/resources/essentialjsdesignpatterns/book/#summarytabledesignpatterns">http://addyosmani.com/resources/essentialjsdesignpatterns/book/#summarytabledesignpatterns</a></i></small></p>

<h3 id="structural-design-patterns"><a href="#structural-design-patterns">#</a> Structural Design Patterns</h3>

<p>Structural design patterns are ones that focus on easing the relationship between different components of an application. They help to provide stability by ensuring that if one part of the app changes, the entire thing doesn't need to as well.</p>

<p><img src="/content/images/2016/02/chrome_2016-02-13_17-41-37-1.png" alt=""></p>

<p><small style="padding: 0 0 0 10px;"><i>Image Credit: <a href="http://addyosmani.com/resources/essentialjsdesignpatterns/book/#summarytabledesignpatterns">http://addyosmani.com/resources/essentialjsdesignpatterns/book/#summarytabledesignpatterns</a></i></small></p>

<h3 id="behavioral-design-patterns"><a href="#behavioral-design-patterns">#</a> Behavioral Design Patterns</h3>

<p>Behavioral design patterns emphasize flexibility through the identification of common communication patterns between various objects.</p>

<p><img src="/content/images/2016/02/chrome_2016-02-13_17-41-54-1.png" alt=""></p>

<p><small style="padding: 0 0 0 10px;"><i>Image Credit: <a href="http://addyosmani.com/resources/essentialjsdesignpatterns/book/#summarytabledesignpatterns">http://addyosmani.com/resources/essentialjsdesignpatterns/book/#summarytabledesignpatterns</a></i></small></p>

<p>If you've made it this far, you should have a pretty basic understanding of the different design patterns and what they do. Please feel free to refer back to these tables at any time as a point of reference; they're perfect for jogging your memory on a slow Monday morning.</p>

<h2>Modern Day JavaScript Design Patterns</h2>

<p>Below is a list of each JavaScript design pattern I've had the opportunity to write about with breakdowns on various aspects of that pattern such as their advantages and disadvantages. Browse away!</p>

<p><a href="http://carldanley.com/js-module-pattern/">The Module Pattern</a> <br>
<a href="http://carldanley.com/js-revealing-module-pattern/">The Revealing Module Pattern</a> <br>
<a href="http://carldanley.com/js-singleton-pattern/">The Singleton Pattern</a> <br>
<a href="http://carldanley.com/js-observer-pattern/">The Observer Pattern</a> <br>
<a href="http://carldanley.com/js-mediator-pattern/">The Mediator Pattern</a> <br>
<a href="http://carldanley.com/js-prototype-pattern/">The Prototype Pattern</a> <br>
<a href="http://carldanley.com/js-facade-pattern/">The Facade Pattern</a> <br>
<a href="http://carldanley.com/js-factory-pattern/">The Factory Pattern</a></p>

<h2>Closing Thoughts</h2>

<p>The idea behind this article, and the individual pattern articles listed above, originated from my hopes to thoroughly understand modern day JavaScript design patterns. Thanks to <a href="https://twitter.com/addyosmani">Addy Osmani</a> (and the others involved) for writing the book "Learning JavaScript Design Patterns" which has vastly improved my understanding (and opinions) of the many design pattern implementations. If you have any questions, please feel free to drop a comment as I would be happy to help wherever I can.</p>

<p>I mentioned this before but I feel like it's worth mentioning again as a conclusive note: there is no one design pattern that is perfect but rather the use of multiple design patterns can help to facilitate a better approach to the web applications you write.</p>

<blockquote>"You have your way. I have my way. As for the right way, the correct way, and the only way, it does not exist." - Friedrich Nietzsche</blockquote>
        
			
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>Decoupling JavaScript applications using the Publish/Subscribe pattern</h1>
		<div class="post-wrapper">
			
    <p>Design patterns are a great tool for developers, providing us with generalised
and reusable solutions to common problems in software development. In this
post we'll see one of the more valuable patterns for modern applications, the
Publish/Subscribe pattern and how to use it in JavaScript applications.</p>

<h2 id="the-problem">The problem</h2>
<p>Let me use one of the most common features in modern web applications to
introduce the problem: sending notification emails.
Let's say we're building an e-commerce site and we'd like to send a
notification email to the customer when they make a purchase. A simple
solution, and probably the most common one, could be something like this:</p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">Order</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">params</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">params</span> <span class="o">=</span> <span class="nx">params</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">Order</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">save</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// save order</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Order saved"</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">sendEmail</span><span class="p">();</span>
  <span class="p">},</span>

  <span class="nx">sendEmail</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">mailer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Mailer</span><span class="p">();</span>
    <span class="nx">mailer</span><span class="p">.</span><span class="nx">sendPurchaseEmail</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">params</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">Mailer</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{};</span>

<span class="nx">Mailer</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">sendPurchaseEmail</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">params</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Email sent to "</span> <span class="o">+</span> <span class="nx">params</span><span class="p">.</span><span class="nx">userEmail</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="o">&gt;</span> <span class="kd">var</span> <span class="nx">order</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Order</span><span class="p">({</span> <span class="nx">userEmail</span><span class="o">:</span> <span class="s1">'john@gmail.com'</span>  <span class="p">})</span>
<span class="o">&gt;</span> <span class="nx">order</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
<span class="o">&gt;</span> <span class="s2">"Order saved"</span>
<span class="o">&gt;</span> <span class="s2">"Email sent to john@gmail.com"</span></code></pre></div>

<p>You got the idea, right? This code has a few problems. Probably the most
important one is that <code>Order</code> and <code>Mailer</code> are tightly coupled. Usually
you know two components are coupled when a change to one requires a change in
the other one, and that's the case. If we want to change the name of the
<code>sendPurchaseEmail</code> method or their params, we'll have to change <code>Order</code>
implementation as well. This change may look something pretty straightforward,
but in a large application this bad practice means having a tightly coupled
application where a small change can easily end up in a waterfall of changes.</p>

<p>Another problem you'll find using that approach is that you'll have to mock lot
of stuff in your tests, becoming a nightmare in large applications.</p>

<p>So now that we know the problems of this approach, let's have a look at how we
can improve this code using the <strong>Publish/Subscribe</strong> pattern.</p>

<h2 id="first-things-first-whats-the-publishsubscribe-pattern">First things first: what's the Publish/Subscribe pattern?</h2>
<p>The <a href="https://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern">publish-subscribe pattern</a>, also known as pub/sub pattern, is defined as follows:</p>

<p><em>In software architecture, publishsubscribe is a messaging pattern where
senders of messages, called publishers, do not program the messages to be sent
directly to specific receivers, called subscribers. Instead, published messages
are characterized into classes, without knowledge of what, if any, subscribers
there may be. Similarly, subscribers express interest in one or more classes,
and only receive messages that are of interest, without knowledge of what, if
any, publishers there are.</em></p>

<p>This pattern uses an event system that sits between the objects wishing to
receive notifications (subscribers) and the objects firing the events (the
publishers). This event system allows code to define application specific events
which can pass arguments containing values needed by the subscriber. The goal
is to avoid dependencies between the subscriber and the publisher.</p>

<h2 id="using-the-pubsub-pattern-in-plain-javascript-applications">Using the pub/sub pattern in plain JavaScript applications</h2>
<p>Now that we know how the pub/sub pattern works, we can use it to improve the
code shown above. Let's start creating our event system.</p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">EventBus</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">topics</span><span class="o">:</span> <span class="p">{},</span>

  <span class="nx">subscribe</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">topic</span><span class="p">,</span> <span class="nx">listener</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// create the topic if not yet created</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">topics</span><span class="p">[</span><span class="nx">topic</span><span class="p">])</span> <span class="k">this</span><span class="p">.</span><span class="nx">topics</span><span class="p">[</span><span class="nx">topic</span><span class="p">]</span> <span class="o">=</span> <span class="p">[];</span>

    <span class="c1">// add the listener</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">topics</span><span class="p">[</span><span class="nx">topic</span><span class="p">].</span><span class="nx">push</span><span class="p">(</span><span class="nx">listener</span><span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">publish</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">topic</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// return if the topic doesn't exist, or there are no listeners</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">topics</span><span class="p">[</span><span class="nx">topic</span><span class="p">]</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">topics</span><span class="p">[</span><span class="nx">topic</span><span class="p">].</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>

    <span class="c1">// send the event to all listeners</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">topics</span><span class="p">[</span><span class="nx">topic</span><span class="p">].</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">listener</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">listener</span><span class="p">(</span><span class="nx">data</span> <span class="o">||</span> <span class="p">{});</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">};</span></code></pre></div>

<p>This is a simple implementation of the pub/sub pattern, you can find some
libraries that make a full implementation of the pattern like
<a href="http://radio.uxder.com/">Radio.js</a>,
<a href="http://amplifyjs.com/api/pubsub/">Amplify.js</a> and many others.</p>

<p>Now we can use our brand new <code>EventBus</code> object to send messages between objects</p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="o">&gt;</span> <span class="nx">EventBus</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">,</span> <span class="nx">alert</span><span class="p">);</span>
<span class="o">&gt;</span> <span class="nx">EventBus</span><span class="p">.</span><span class="nx">publish</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">,</span> <span class="s1">'Hello World!'</span><span class="p">);</span></code></pre></div>

<p>Now let's see how to use the <code>EventBus</code> to decouple <code>Order</code> and <code>Mailer</code></p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">Mailer</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">EventBus</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="s1">'order/new'</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">sendPurchaseEmail</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">Mailer</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">sendPurchaseEmail</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">userEmail</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Sent email to "</span> <span class="o">+</span> <span class="nx">userEmail</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">Order</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">params</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">params</span> <span class="o">=</span> <span class="nx">params</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">Order</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">saveOrder</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">EventBus</span><span class="p">.</span><span class="nx">publish</span><span class="p">(</span><span class="s1">'order/new'</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">userEmail</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="o">&gt;</span> <span class="kd">var</span> <span class="nx">mailer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Mailer</span><span class="p">();</span>
<span class="o">&gt;</span> <span class="kd">var</span> <span class="nx">order</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Order</span><span class="p">({</span><span class="nx">userEmail</span><span class="o">:</span> <span class="s1">'john@gmail.com'</span><span class="p">});</span>
<span class="o">&gt;</span> <span class="nx">order</span><span class="p">.</span><span class="nx">saveOrder</span><span class="p">();</span>
<span class="o">&gt;</span> <span class="s2">"Sent email to john@gmail.com"</span></code></pre></div>

<p>You can see how <code>Order</code> and <code>Mailer</code> don't know anything about each other. Now
we can change the implementation of both functions without caring about the
impact of the changes, it's just a matter of preserving the events we're firing
or listening to. Furthermore we can test both functions in isolation without
the need of mock objects, which is always a great thing.</p>

<h2 id="using-the-pubsub-pattern-in-backbone-applications">Using the pub/sub pattern in Backbone applications</h2>
<p>Backbone provides a way to send, and listen to events using the
<code>Backbone.Events</code> module, that makes the pub/sub implementation pretty
straightforward, we just have to mix <code>Backbone.Events</code> into an empty object
like so:</p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">EventBus</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span><span class="nx">Backbone</span><span class="p">.</span><span class="nx">Events</span><span class="p">);</span></code></pre></div>

<p>Then we just use the standard <code>trigger</code> and <code>on</code> methods to publish and
subscribe to messages. Let's see the whole implementation:</p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">EventBus</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Events</span><span class="p">);</span>

<span class="nx">Foo</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Model</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">sayHello</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="s2">"Hello Wordl!"</span>
    <span class="nx">EventBus</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">'event'</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="nx">Bar</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Model</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">EventBus</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'event'</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">callbackMethod</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
  <span class="p">};</span>

  <span class="nx">callbackMethod</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">};</span>
<span class="p">});</span></code></pre></div>

<p>Pretty much the same as the example above for plain JavaScript applications
except here instead of using <code>publish</code> and <code>subscribe</code>, we are using <code>trigger</code>
and <code>on</code>.</p>

<h2 id="conclusion">Conclusion</h2>
<p>At HouseTrip we make extensive use of this pattern. Our main app is a quite
large Rails app using Backbone throughout the front-end. Our Backbone views and models
generate lots of events, and these events sometimes involve more events. Using
the pub/sub pattern prevents us from having a tightly coupled system that
would be tough to maintain and test.</p>

<p>Regardless of the language or framework, tightly coupled systems are a common
problem in modern web applications. We, as developers,
should be able to create modular and reusable code and the Publish/Subscribe
pattern plays an important role in creating better applications, loosely coupled,
flexible, scalable and easy to test.</p>
			
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>Why I should use publish/subscribe in JavaScript</h1>
		<div class="post-wrapper">
			
      <p>This post is inspired by <a href="http://stackoverflow.com/questions/13512949/why-would-one-use-the-publish-subscribe-pattern-in-js-jquery/13513915#13513915" target="_blank">my answer at StackOverflow</a>.</p>

<p>So why we should use publish/subscribe? Why it is useful? Is it making our work harder or it makes our application better?</p>

<p>And the answer</p>

<p>It's all about loose coupling and single responsibility, which goes hand to hand with MV* (MVC/MVP/MVVM) patterns in JavaScript which are very modern in the last few years.</p>

<p><a href="https://en.wikipedia.org/wiki/Loose_coupling" target="_blank">Loose coupling</a> is an Object-oriented principle in which each component of the system knows it's responsibility and don't care about the other components (or at least tries to not care about them as much as possible). Loosing coupling is a good thing because you can easily reuse the different modules. You're not coupled with the interfaces of other modules. Using publish/subscribe you're only coupled with the publish/subscribe interface which is not a big deal  just two methods. So if you decide to reuse a module in different project you can just copy and paste it and it'll probably work or at least you won't need much effort to make it work.</p>

<p>As talking about loose coupling we should mention the <a href="https://en.wikipedia.org/wiki/Separation_of_concerns" target="_blank">separation of concerns</a>. If you're building an application using MV* architectural pattern you have always a Model(s) and a View(s). The Model is the business part of the application. You can reuse it in different applications, so it's not a good idea to couple it with the View of a single application, where you want to show it, because usually in the different applications you have different views. So it's a good idea to use publish/subscribe for the Model-View communication. When your Model changes it publish an event, the View catch it and update itself. You don't have any overhead from the publish/subscribe, it helps you for the decoupling. In the same manner you can keep your application logic into the Controller for example (MVVM, MVP it's not exactly a Controller) and keep the View as simple as possible. When your View changes (or the user click on something, for example) it just publish a new event, the Controller catch it and decides what to do. If you are familiar with the <a href="https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller" target="_blank">MVC</a> pattern or with <a href="https://en.wikipedia.org/wiki/MVVM" target="_blank">MVVM</a> in the Microsoft technologies (WPF/Silverlight) you can think for the publish/subscribe like the <a href="https://en.wikipedia.org/wiki/Observer_pattern" target="_blank">Observer pattern</a>. This approach is used in frameworks like Backbone.js, Knockout.js (MVVM).</p>

<p>Here is an example:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">//Model</span>
<span class="kd">function</span> <span class="nx">Book</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">isbn</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">isbn</span> <span class="o">=</span> <span class="nx">isbn</span><span class="p">;</span>
<span class="p">}</span>
   
<span class="kd">function</span> <span class="nx">BookCollection</span><span class="p">(</span><span class="nx">books</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">books</span> <span class="o">=</span> <span class="nx">books</span><span class="p">;</span>
<span class="p">}</span>
    
<span class="nx">BookCollection</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addBook</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">book</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">books</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">book</span><span class="p">);</span>
    <span class="nx">$</span><span class="p">.</span><span class="nx">publish</span><span class="p">(</span><span class="s1">'book-added'</span><span class="p">,</span> <span class="nx">book</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">book</span><span class="p">;</span>
<span class="p">}</span>
    
<span class="nx">BookCollection</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">removeBook</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">book</span><span class="p">)</span> <span class="p">{</span>
   <span class="kd">var</span> <span class="nx">removed</span><span class="p">;</span>
   <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">book</span> <span class="o">===</span> <span class="s1">'number'</span><span class="p">)</span> <span class="p">{</span>
       <span class="nx">removed</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">books</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">book</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
   <span class="p">}</span>
   <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">books</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">books</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">===</span> <span class="nx">book</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">removed</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">books</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
      <span class="p">}</span>
   <span class="p">}</span>
   <span class="nx">$</span><span class="p">.</span><span class="nx">publish</span><span class="p">(</span><span class="s1">'book-removed'</span><span class="p">,</span> <span class="nx">removed</span><span class="p">);</span>
   <span class="k">return</span> <span class="nx">removed</span><span class="p">;</span>
<span class="p">}</span>
    
<span class="c1">//View</span>
<span class="kd">var</span> <span class="nx">BookListView</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
 
   <span class="kd">function</span> <span class="nx">removeBook</span><span class="p">(</span><span class="nx">book</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">'#'</span> <span class="o">+</span> <span class="nx">book</span><span class="p">.</span><span class="nx">isbn</span><span class="p">).</span><span class="nx">remove</span><span class="p">();</span>
   <span class="p">}</span>
 
   <span class="kd">function</span> <span class="nx">addBook</span><span class="p">(</span><span class="nx">book</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">'#bookList'</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s1">'&lt;div id="'</span> <span class="o">+</span> <span class="nx">book</span><span class="p">.</span><span class="nx">isbn</span> <span class="o">+</span> <span class="s1">'"&gt;
  '</span> <span class="o">+</span> <span class="nx">book</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">'
&lt;/div&gt;'</span><span class="p">);</span>
   <span class="p">}</span>
  
   <span class="k">return</span> <span class="p">{</span>
      <span class="na">init</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
         <span class="nx">$</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="s1">'book-removed'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">book</span><span class="p">)</span> <span class="p">{</span>
             <span class="nx">removeBook</span><span class="p">(</span><span class="nx">book</span><span class="p">);</span>
         <span class="p">});</span>
         <span class="nx">$</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="s1">'book-aded'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">book</span><span class="p">)</span> <span class="p">{</span>
             <span class="nx">addBook</span><span class="p">(</span><span class="nx">book</span><span class="p">);</span>
         <span class="p">});</span>
      <span class="p">}</span>
   <span class="p">}</span>
<span class="p">}());</span></code></pre></figure>

<p>Another example. If you don't like the MV* approach you can use something a little different (there's an intersection between the one I'll describe next and the last mentioned). Just structure your application in different modules. For example look at Twitter.</p>

<p><img src="http://blog.mgechev.com/slides/javascript-patterns/images/twitter.png" class="aligncenter" width="650"></p>

<p>If you look at the interface you simply have different boxes. You can think of each box as different module. For example you can post a tweet. This action requires update of few modules. Firstly it has to update your profile data (upper left box) but it also has to update your timeline. Of course, you can keep references to both modules and update them separately using their public interface but it's easier (and better) to just publish an event. This will make the modification of your application easier because of loosing coupling. If you develop new module which depends on new tweets you can just subscribe to the publish-tweet event and handle it. This approach is very useful and can make your application very decoupled. You can reuse your modules very easy.</p>

<p>Here is a basic example of the last approach (this is not original twitter code it's just a sample by me):</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">Twitter</span><span class="p">.</span><span class="nx">Timeline</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
   <span class="kd">var</span> <span class="nx">tweets</span> <span class="o">=</span> <span class="p">[];</span>
   <span class="kd">function</span> <span class="nx">publishTweet</span><span class="p">(</span><span class="nx">tweet</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">tweets</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">tweet</span><span class="p">);</span>
      <span class="c1">//publishing the tweet</span>
   <span class="p">};</span>
   <span class="k">return</span> <span class="p">{</span>
      <span class="na">init</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
         <span class="nx">$</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="s1">'tweet-posted'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
             <span class="nx">publishTweet</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
         <span class="p">});</span>
      <span class="p">}</span>
   <span class="p">};</span>
<span class="p">}());</span>

<span class="kd">var</span> <span class="nx">Twitter</span><span class="p">.</span><span class="nx">TweetPoster</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
   <span class="k">return</span> <span class="p">{</span>
       <span class="na">init</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
           <span class="nx">$</span><span class="p">(</span><span class="s1">'#postTweet'</span><span class="p">).</span><span class="nx">bind</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
              <span class="kd">var</span> <span class="nx">tweet</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#tweetInput'</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
               <span class="nx">$</span><span class="p">.</span><span class="nx">publish</span><span class="p">(</span><span class="s1">'tweet-posted'</span><span class="p">,</span> <span class="nx">tweet</span><span class="p">);</span>
           <span class="p">});</span>
       <span class="p">}</span>
   <span class="p">};</span>
<span class="p">}());</span></code></pre></figure>

<p>For this approach there's very good talk by <a href="http://www.nczonline.net/" target="_blank">Nicholas Zakas</a>. For the first MV* approach the best articles and books, I know, are published by <a href=" http://addyosmani.com/blog/" target="_blank">Addy Osmani</a>.</p>

<p>Drawbacks. You have to be careful about the excessive use of publish/subscribe. If you've got hundreds of events it can become very confusing to manage all of them. You may also have collisions if you're not using namespacing (or not using it in the right way). An advanced implementation of mediator which looks much like an publish/subscribe can be found here https://github.com/ajacksified/Mediator.js. It has namespacing and feature like event bubbling which, of course, can be interrupted. Another drawback of the publish/subscribe is the hard unit testing, it may become difficult to isolate the different functions in the modules and test them independently.</p>

      
    
			
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>The Facade Pattern</h1>
		<div class="post-wrapper">
			
			 <p>The purpose of the facade pattern is to conceal the underlying complexity of the code by using an anonymous function as an extra layer. Internal subroutines are never exposed but rather invoked through a <a href="http://www.merriam-webster.com/dictionary/facade">facade</a> which makes this pattern secure in that it never exposes anything to the developers working with it. The facade pattern is both extremely interesting and very useful for adding an extra layer of security to your already minified code. This pattern is extremely useful when coupled with the <a href="http://carldanley.com/js-revealing-module-pattern/">revealing module pattern</a>.</p>

<p>This article is part of a series called <a href="http://carldanley.com/javascript-design-patterns/">JavaScript Design Patterns</a>.</p>

<h2>Advantages</h2>

<ul>  
<li>Enhances security for your web application</li>  
<li>Works well in combination with other patterns</li>  
<li>Easy to implement</li>  
<li>Makes it easy to patch internals</li>  
<li>Provides a simpler public interface</li>  
<li>Proven useful for other major libraries such as jQuery</li>  
</ul>

<h2>Disadvantages</h2>

<p>There aren't any real drawbacks as it provides a unified interface to a set of interfaces in a subsystem. As a result, you aren't forced to make any unwanted compromises, thus a win-win. One possible note worth mentioning is that a developer must decide whether the implicit cost of implementation is really worth the abstraction (though this is generally a small footprint).</p>

<h2>Examples</h2>
<pre>// a simple facade that masks the various browser-specific methods
function addEvent( element, event, callback ) {
  
  if( window.addEventListener ) {
    element.addEventListener( event, callback, false );
  } else if( document.attachEvent ) {
    element.attachEvent( 'on' + event, callback );
  } else {
    element[ 'on' + event ] = callback;
  }
  
}</pre>

<p>The above is a basic example of the facade pattern.</p>

<pre>var MyModule = ( function( window, undefined ) {

  // revealing module pattern ftw
  function MyModule() {
    
    function someMethod() {
      alert( 'some method' );
    }
    
    function someOtherMethod() {
      alert( 'some other method' );
    }
    
    // expose publicly available methods
    return {
      
      // in our normal revealing module pattern, we'd do the following:
      someMethod : someMethod,
      
      // in the facade pattern, we mask the internals so no one has direct access by doing this:
      someMethod : function() {
        someMethod();
      }
      
    };
    
  }
  
} )( window );</pre>

<p>The above is a more advanced version of the facade pattern that adds security to internal methods.</p>
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>JavaScript Design Patterns: Facade </h1>
		<div class="post-wrapper">
			
			
        <p>In our 4<sup>th</sup> installment of the JavaScript Design Patterns Series, we'll be taking a look at the Facade pattern. Whether you know it or not, I can almost guarantee that you've used the Facade pattern if you've been programming in any language for more than a second (that might be a bit of a hyperbole, but you'll forgive me, right?). You can define the Facade pattern as a piece of code that simplifies a more complex interface. You can pretty much call any form of abstraction a facade. Have you ever made a named function that had more than one line of code within it? Yup, that's technically an example of the Facade pattern.<a id="more"></a></p>

<p><img src="/wp-content/uploads/facade_structure.png" alt="Facade Stucture Example" title="Facade Stucture Example"></p>
<p>Before we get too much further though, I want to remind you of the other members within this JavaScript Design Patterns series. It all started with the <a href="/javascript/javascript-design-patterns-singleton/" title="JavaScript Design Patterns: Singleton">Singleton</a> and then moved on to the <a href="/javascript/javascript-design-patterns-bridge/" title="JavaScript Design Patterns: Bridge">Bridge</a> pattern. The final precursor to this pattern was the <a href="/javascript/javascript-design-patterns-composite/" title="JavaScript Design Patterns: Composite">Composite</a>.</p>
<h2 id="Back_to_Business_with_some_Examples"><a href="#Back_to_Business_with_some_Examples" class="headerlink" title="Back to Business with some Examples"></a>Back to Business with some Examples</h2><p>Getting back on course with the Facade, I'll be throwing some examples at you that demonstrate its intention quite well. Let's start it off with <a href="http://www.jquery.com" title="jQuery JavaScript Library" target="_blank" rel="external">jQuery</a>. If you don't know what jQuery is, then you have been living in a box and you haven't read any of my previous posts (you should probably do that some time). jQuery and other JavaScript libraries, such as <a href="http://prototypejs.org/" title="Prototype JavaScript Library" target="_blank" rel="external">Prototype</a> and <a href="http://developer.yahoo.com/yui/" title="YUI JavaScript Library" target="_blank" rel="external">YUI</a>, essentially serve as a group of facades to make our lives as programmers easier. They turn complex code (usually containing some bit of feature detection to make sure they use the correct code for the browser it is being run on) and hand it to you as a single function call.</p>
<p>Another great example that has nothing to do with JavaScript programming is application shortcuts, such as the ones on your computer's desktop. All you do is (double-)click it and it jumps through several levels of folder structure to open/execute a file.</p>
<h2 id="JavaScript_Coding_Example"><a href="#JavaScript_Coding_Example" class="headerlink" title="JavaScript Coding Example"></a>JavaScript Coding Example</h2><p>I know that the concept of the facade is pretty simple to grasp and that you may not necessarily need a JavaScript coding example, but there are those out there who care more about the code and understand much more easily that way. Not to mention that any JavaScript article without some code is just completely lame and should be ripped from its place on the internet.</p>
<p>We'll start with a simple event listener example. Most people know that adding an event listener is not a simple ordeal unless they're planning on having their code work on a tiny subset of browsers. You have to test multiple methods in order to make sure they're using the right one for the browser that's currently running the code. In this code example we just add this feature detection into a function that we call upon to run this annoying code for us:</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addEvent</span>(<span class="params">element, type, func</span>) </span>{</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">window</span>.addEventListener) {</span><br><span class="line">        element.addEventListener(type, func, <span class="literal">false</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">window</span>.attachEvent) {</span><br><span class="line">        element.attachEvent(<span class="string">'on'</span>+type, func);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> {</span><br><span class="line">        element[<span class="string">'on'</span>+type] = func;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>It's that simple! I kinda wish all the code samples I have to write were this easy, but if that were true it wouldn't be any fun and you wouldn't read this site, would you? I didn't think so. In light of that fact, I figured I'd show you something with a wee bit more complexity. Let's just say that originally your code looked a little something like this:</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> foo = <span class="built_in">document</span>.getElementById(<span class="string">'foo'</span>);</span><br><span class="line">    foo.style.color = <span class="string">'red'</span>;</span><br><span class="line">    foo.style.width = <span class="string">'150px'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bar = <span class="built_in">document</span>.getElementById(<span class="string">'bar'</span>);</span><br><span class="line">    bar.style.color = <span class="string">'red'</span>;</span><br><span class="line">    bar.style.width = <span class="string">'150px'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> baz = <span class="built_in">document</span>.getElementById(<span class="string">'baz'</span>);</span><br><span class="line">    baz.style.color = <span class="string">'red'</span>;</span><br><span class="line">    baz.style.width = <span class="string">'150px'</span>;</span><br></pre></td></tr></tbody></table></figure>
<p>Lame! You're doing the exact same thing to each one of those elements! I think there's something we can do to make this a little easier on our parts. Maybe a little something like this:</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setStyle</span>(<span class="params">elements, property, value</span>) </span>{</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>, length = elements.length; i &lt; length; i++) {</span><br><span class="line">        <span class="built_in">document</span>.getElementById(elements[i]).style[property] = value;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// Now you can write this:</span></span><br><span class="line">setStyle([<span class="string">'foo'</span>, <span class="string">'bar'</span>, <span class="string">'baz'</span>], <span class="string">'color'</span>, <span class="string">'red'</span>);</span><br><span class="line">setStyle([<span class="string">'foo'</span>, <span class="string">'bar'</span>, <span class="string">'baz'</span>], <span class="string">'width'</span>, <span class="string">'150px'</span>);</span><br></pre></td></tr></tbody></table></figure>
<p>Do you think we're golden? Come on! We're JavaScript programmers! Let's put our brains to some real use and come up with something that really shines. Maybe we can set all of the styles in one call too. Check it out:</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setStyles</span>(<span class="params">elements, styles</span>) </span>{</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>, length = elements.length; i &lt; length; i++) {</span><br><span class="line">        <span class="keyword">var</span> element = <span class="built_in">document</span>.getElementById(elements[i]);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> property <span class="keyword">in</span> styles) {</span><br><span class="line">            element.style[property] = styles[property];</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//Now you can just write this:</span></span><br><span class="line">setStyles([<span class="string">'foo'</span>, <span class="string">'bar'</span>, <span class="string">'baz'</span>], {</span><br><span class="line">    color: <span class="string">'red'</span>,</span><br><span class="line">    width: <span class="string">'150px'</span></span><br><span class="line">});</span><br></pre></td></tr></tbody></table></figure>
<p>That code could actually save us a lot of time if we have a lot of elements that we want to style the same way.</p>
<h2 id="Concluding_the_JavaScript_Goodness"><a href="#Concluding_the_JavaScript_Goodness" class="headerlink" title="Concluding the JavaScript Goodness"></a>Concluding the JavaScript Goodness</h2><p>Well that's about all I have for this episode of JavaScript Design Patterns. I hope you enjoyed the pleasure of my company. If you did (or didn't) go ahead and tell me about your experiences with a comment below. Also, if you could find it in your heart to be so kind, maybe you could spread the word about this humble little blog throughout the social interwebs by using the share buttons that you'll run into on your way down to the comments section. Seriously, that would make my day/week/month.</p>
<p><strong>JavaScript Design Patterns series:</strong><br></p><ul><li><a href="/javascript/javascript-design-patterns-singleton/" title="JavaScript Design Patterns: Singleton">Singleton Pattern</a></li><li><a href="/javascript/javascript-design-patterns-bridge/" title="JavaScript Design Patterns: Bridge">Bridge Pattern</a></li><li><a href="/javascript/javascript-design-patterns-composite/" title="JavaScript Design Patterns: Composite">Composite Pattern</a></li><li><a href="/javascript/javascript-design-patterns-facade/" title="JavaScript Design Patterns: Facade">Facade Pattern</a></li><li><a href="/javascript/javascript-design-patterns-adapter/" title="JavaScript Design Patterns: Adapter">Adapter Pattern</a></li><li><a href="/javascript/javascript-design-patterns-decorator/" title="JavaScript Design Patterns: Decorator">Decorator Pattern</a></li><li><a href="/javascript/javascript-design-patterns-factory/" title="JavaScript Design Patterns: Factory">Factory Pattern Part 1</a></li><li><a href="/javascript/javascript-design-patterns-factory-part-2/" title="JavaScript Design Patterns: Factory Part 2">Factory Pattern Part 2</a></li><li><a href="/javascript/javascript-design-patterns-proxy/" title="JavaScript Design Patterns: Proxy">Proxy Pattern</a></li><li><a href="/javascript/javascript-design-patterns-observer/" title="JavaScript Design Patterns: Observer">Observer Pattern</a></li><li><a href="/javascript/javascript-design-patterns-command/" title="JavaScript Design Patterns: Command">Command Pattern</a></li><li><a href="/javascript/javascript-design-patterns-chain-of-responsibility/" title="JavaScript Design Patterns: Chain of Responsibility">Chain of Responsibility Pattern</a></li></ul>

      
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>Method Chaining in JavaScript</h1>
		<div class="post-wrapper">
		<p>Method chaining is a common pattern in the JavaScript world. This tutorial will provide a brief explanation of what method chaining is, give a real world example of how jQuery uses method chaining, and teach you how to add method chaining to your own classes. Let's get started.</p><h2 id="what-is-method-chaining-">What is Method Chaining?</h2><p>Method chaining is a technique that can be used to simplify code in scenarios that involve calling multiple functions on the same object consecutively. This is an example of how you can use method chaining when using jQuery.</p><pre><code class="lang-javascript"><div class="highlight"><pre><span class="cm">/** Example of method chaining in jQuery */</span>


<span class="c1">//////////////////////////</span>
<span class="c1">// WITHOUT METHOD CHAINING</span>

<span class="kd">var</span> <span class="nx">$div</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#my-div'</span><span class="p">);</span>         <span class="c1">// assign to var</span>

<span class="nx">$div</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">'background'</span><span class="p">,</span> <span class="s1">'blue'</span><span class="p">);</span>  <span class="c1">// set BG</span>
<span class="nx">$div</span><span class="p">.</span><span class="nx">height</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>                <span class="c1">// set height</span>
<span class="nx">$div</span><span class="p">.</span><span class="nx">fadeIn</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>                <span class="c1">// show element</span>


<span class="c1">///////////////////////</span>
<span class="c1">// WITH METHOD CHAINING</span>

<span class="nx">$</span><span class="p">(</span><span class="s1">'#my-div'</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s1">'background'</span><span class="p">,</span> <span class="s1">'blue'</span><span class="p">).</span><span class="nx">height</span><span class="p">(</span><span class="mi">100</span><span class="p">).</span><span class="nx">fadeIn</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>

<span class="c1">// often broken to multiple lines:</span>
<span class="nx">$</span><span class="p">(</span><span class="s1">'#my-div'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">'background'</span><span class="p">,</span> <span class="s1">'blue'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">height</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">fadeIn</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
</pre></div>

</code></pre><p>As you can see, using method chaining can tidy up code quite a bit, however some developers dislike the visual style of method chaining and choose not to use it.</p><h2 id="understanding-method-chaining">Understanding Method Chaining</h2><p>For our example, we will define a custom class with a few methods to call. Let's create a <code>Kitten</code> class:</p><pre><code class="lang-javascript"><div class="highlight"><pre><span class="c1">// define the class</span>
<span class="kd">var</span> <span class="nx">Kitten</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s1">'Garfield'</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="s1">'brown'</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">gender</span> <span class="o">=</span> <span class="s1">'male'</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">Kitten</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setName</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">Kitten</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setColor</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">color</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="nx">color</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">Kitten</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setGender</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">gender</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">gender</span> <span class="o">=</span> <span class="nx">gender</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">Kitten</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">save</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
    <span class="s1">'saving '</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">', the '</span> <span class="o">+</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">color</span> <span class="o">+</span> <span class="s1">' '</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">gender</span> <span class="o">+</span> <span class="s1">' kitten...'</span>
  <span class="p">);</span>

  <span class="c1">// save to database here...</span>
<span class="p">};</span>
</pre></div>

</code></pre><p>Now, let's instantiate a kitten object from our class and call its methods.</p><pre><code class="lang-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">bob</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Kitten</span><span class="p">();</span>

<span class="nx">bob</span><span class="p">.</span><span class="nx">setName</span><span class="p">(</span><span class="s1">'Bob'</span><span class="p">);</span>
<span class="nx">bob</span><span class="p">.</span><span class="nx">setColor</span><span class="p">(</span><span class="s1">'black'</span><span class="p">);</span>
<span class="nx">bob</span><span class="p">.</span><span class="nx">setGender</span><span class="p">(</span><span class="s1">'male'</span><span class="p">);</span>

<span class="nx">bob</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>

<span class="c1">// OUTPUT:</span>
<span class="c1">// &gt; saving Bob, the black male kitten...</span>
</pre></div>

</code></pre><p>Wouldn't it be better if we could get rid of some of this repetition? Method chaining would be perfect for this. The only problem is that currently this won't work. Here is why:</p><pre><code class="lang-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">bob</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Kitten</span><span class="p">();</span>

<span class="nx">bob</span><span class="p">.</span><span class="nx">setName</span><span class="p">(</span><span class="s1">'Bob'</span><span class="p">).</span><span class="nx">setColor</span><span class="p">(</span><span class="s1">'black'</span><span class="p">);</span>

<span class="c1">// ERROR:</span>
<span class="c1">// &gt; Uncaught TypeError: Cannot call method 'setColor' of undefined</span>
</pre></div>

</code></pre><p>To better understand why this doesn't work, we will rearrange the code above slightly.</p><pre><code class="lang-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">bob</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Kitten</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">tmp</span> <span class="o">=</span> <span class="nx">bob</span><span class="p">.</span><span class="nx">setName</span><span class="p">(</span><span class="s1">'Bob'</span><span class="p">);</span>
<span class="nx">tmp</span><span class="p">.</span><span class="nx">setColor</span><span class="p">(</span><span class="s1">'black'</span><span class="p">);</span>

<span class="c1">// ERROR:</span>
<span class="c1">// &gt; Uncaught TypeError: Cannot call method 'setColor' of undefined</span>
</pre></div>

</code></pre><p>This returns the same error. This is because the <code>setName()</code> function doesn't return a value, so <code>tmp</code> is assigned the value of <code>undefined</code>. The typical way to enable method chaining is to return the current object at the end of every function.</p><h2 id="implementing-method-chaining">Implementing Method Chaining</h2><p>Let's rewrite the <code>Kitten</code> class with the ability to chain methods.</p><pre><code class="lang-javascript"><div class="highlight"><pre><span class="c1">// define the class</span>
<span class="kd">var</span> <span class="nx">Kitten</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s1">'Garfield'</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="s1">'brown'</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">gender</span> <span class="o">=</span> <span class="s1">'male'</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">Kitten</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setName</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">Kitten</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setColor</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">color</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="nx">color</span><span class="p">;</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">Kitten</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setGender</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">gender</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">gender</span> <span class="o">=</span> <span class="nx">gender</span><span class="p">;</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">Kitten</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">save</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
    <span class="s1">'saving '</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">', the '</span> <span class="o">+</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">color</span> <span class="o">+</span> <span class="s1">' '</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">gender</span> <span class="o">+</span> <span class="s1">' kitten...'</span>
  <span class="p">);</span>

  <span class="c1">// save to database here...</span>

  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>

</code></pre><p>Now, if we rerun the previous snippet, the variable <code>tmp</code> will reference the same object as the variable <code>bob</code>, like so:</p><pre><code class="lang-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">bob</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Kitten</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">tmp</span> <span class="o">=</span> <span class="nx">bob</span><span class="p">.</span><span class="nx">setName</span><span class="p">(</span><span class="s1">'Bob'</span><span class="p">);</span>
<span class="nx">tmp</span><span class="p">.</span><span class="nx">setColor</span><span class="p">(</span><span class="s1">'black'</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">tmp</span> <span class="o">===</span> <span class="nx">bob</span><span class="p">);</span>

<span class="c1">// OUTPUT:</span>
<span class="c1">// &gt; true</span>
</pre></div>

</code></pre><p>To shorten this even more, we do not even need to create the variable <code>bob</code>. Here are two examples with and without method chaining on our new class:</p><pre><code class="lang-javascript"><div class="highlight"><pre><span class="c1">///////////////////</span>
<span class="c1">// WITHOUT CHAINING</span>

<span class="kd">var</span> <span class="nx">bob</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Kitten</span><span class="p">();</span>

<span class="nx">bob</span><span class="p">.</span><span class="nx">setName</span><span class="p">(</span><span class="s1">'Bob'</span><span class="p">);</span>
<span class="nx">bob</span><span class="p">.</span><span class="nx">setColor</span><span class="p">(</span><span class="s1">'black'</span><span class="p">);</span>
<span class="nx">bob</span><span class="p">.</span><span class="nx">setGender</span><span class="p">(</span><span class="s1">'male'</span><span class="p">);</span>

<span class="nx">bob</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>

<span class="c1">// OUTPUT:</span>
<span class="c1">// &gt; saving Bob, the black male kitten...</span>


<span class="c1">///////////////////</span>
<span class="c1">// WITH CHAINING</span>

<span class="k">new</span> <span class="nx">Kitten</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">setName</span><span class="p">(</span><span class="s1">'Bob'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">setColor</span><span class="p">(</span><span class="s1">'black'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">setGender</span><span class="p">(</span><span class="s1">'male'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">save</span><span class="p">();</span>

<span class="c1">// OUTPUT:</span>
<span class="c1">// &gt; saving Bob, the black male kitten...</span>
</pre></div>

</code></pre><p>By using method chaining we end up with much cleaner code that is easier to understand.</p><h2 id="conclusion">Conclusion</h2><p>That's it! Method chaining can be a very useful technique to have in your bag of programming tools. If you have any questions, let me know in the comments below.</p><hr><p><em><a href="https://plus.google.com/116591626596369246536/posts">Martin Mauchauffée</a> and <a href="https://plus.google.com/u/0/105471318664923408342">Manu Delgado Diaz</a> pointed out that this is also known as the <a href="http://en.wikipedia.org/wiki/Fluent_interface">Fluent Interface</a> pattern.</em></p><p><em><a href="https://plus.google.com/u/0/+%D0%AE%D1%80%D0%B8%D0%B9%D0%A2%D0%B0%D1%80%D0%B0%D0%B1%D0%B0%D0%BD%D1%8C%D0%BA%D0%BE/posts">???? ??????????</a> came up with a great way to automate the addition of <code>return this;</code>. Check out his <code>chainify()</code> function in this <a href="http://jsfiddle.net/tarabyte/4C4Lu/">Fiddle</a></em></p>	
			
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>JavaScript Design Patterns: Singleton </h1>
		<div class="post-wrapper">
			
        <p>This is the first in what should be a pretty long series about JavaScript design patterns. In 1995, Erich Game, Richard Helm, Ralph Johnson and John Vlissides (known as the Gang of Four) published <em>Design Patterns: Elements of Reusable Object-Oriented Software</em>, a book cataloging recurring solutions to common dilemmas in software architecture and design. It also started a common vocabulary for referring to these solutions. If you'd like to know more you can find it on <a href="http://en.wikipedia.org/wiki/Design_Patterns" title="Design Patterns book on Wikipedia" target="_blank" rel="external">Wikipedia</a>.<a id="more"></a></p>
<p>That book's example implementations of each of the solutions were written in C++ and Smalltalk, which are quite different than JavaScript. Another book  <a href="/projsdp/" title="Buy Pro JavaScript Design Patterns"><em>Pro JavaScript Design Patterns</em></a>  was written to bring many of those patterns into the context of JavaScript. My hope is to present a lot of the knowledge from that book here, but not so much that I get sued just enough to keep you interested and possibly get you to buy the book. If you do buy the book, let them know it was because I referred you. Maybe they'll provide me a bit of compensation (probably not, but here's hoping).</p>
<h2 id="All_Alone_with_the_Singleton"><a href="#All_Alone_with_the_Singleton" class="headerlink" title="All Alone with the Singleton"></a>All Alone with the Singleton</h2><p>In JavaScript, the singleton is extremely simple and could possibly be excluded from the designation of singleton, but it does technically work similarly to a singleton, so it's still useful to know. The singleton groups code into a single object so that you don't need to instantiate a new one object whenever you need its resources, which allows you to have global access to those resources.</p>
<p>In JavaScript, the singleton is used mostly for namespacing and reducing the number of global variables that your application creates. This pattern is probably more useful in JavaScript than in any other language due to the high risk of using global variables in your code and the singleton's ability to namespace those variables.</p>
<h2 id="A_Basic_Singleton"><a href="#A_Basic_Singleton" class="headerlink" title="A Basic Singleton"></a>A Basic Singleton</h2><p>This is the most basic and easiest to understand implementation of the singleton in JavaScript. It is simply an object literal with methods and attributes, supposedly grouped by some type of relation to one another.</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Singleton = {</span><br><span class="line">    attr: <span class="number">1</span>,</span><br><span class="line">    another_attr: <span class="string">'value'</span>,</span><br><span class="line"></span><br><span class="line">    method: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{...},</span><br><span class="line">    another_method: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{...}</span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure>
<p>Since it is an object literal, it doesn't need to be instantiated and there is then only one copy of the object. This allows access to all of the methods and attributes from a single global object, as demonstrated below:</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Singleton.attr += <span class="number">1</span>;</span><br><span class="line">Singleton.method();</span><br><span class="line">...</span><br></pre></td></tr></tbody></table></figure>
<h2 id="JavaScript_Namespacing"><a href="#JavaScript_Namespacing" class="headerlink" title="JavaScript Namespacing"></a>JavaScript Namespacing</h2><p>One of the uses of the singleton pattern in JavaScript is namespacing. With languages like Java and C#, namespacing is built into the language and is required. Creating these namespaces/packages organizes the code into logical chunks. This is a great reason to use the singleton pattern in JavaScript along with the fact that using namespaces moves your code from the global context to the new singleton, leading to fewer accidental overwrites and bugs.</p>
<p>Using a singleton for namespacing is quite simple. Once again you can just create an object literal:</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Namespace = {</span><br><span class="line">    Util: {</span><br><span class="line">        util_method1: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{...},</span><br><span class="line">        util_method2: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{...}</span><br><span class="line">    },</span><br><span class="line">    Ajax: {</span><br><span class="line">        ajax_method: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{...}</span><br><span class="line">    },</span><br><span class="line">    some_method: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{...}</span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure>
<p>As you can see, now if you want to use a utility method, then you can find it somewhere under <code>Namespace.Util</code>, like what is shown in the next snippet. Of course, as shown by the <code>some_method</code> function, the methods don't have to be buried multiple layers into the singleton.</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Namespace.Util.util_method1();</span><br><span class="line">Namespace.Ajax.ajax_method();</span><br><span class="line">Namespace.some_method();</span><br></pre></td></tr></tbody></table></figure>
<p>Normally you might just have all of these methods as global functions, which means there is a much higher possibility that they would get overwritten, especially if it a name as simple as <code>get</code>, which might not be all that uncommon. You could take namespacing one step further and add all of your variables and functions to this singleton to further remove chances of your code being tampered with.</p>
<h2 id="Page-Specific_JavaScript_Code"><a href="#Page-Specific_JavaScript_Code" class="headerlink" title="Page-Specific JavaScript Code"></a>Page-Specific JavaScript Code</h2><p>In many cases, some pages of a site run different JavaScript code than other pages. You can use the singleton namespacing technique to encapsulate page-specific code and have it run when the page is finished loading:</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Namespace.homepage = {</span><br><span class="line">    init: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{...},</span><br><span class="line">    method1: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{...},</span><br><span class="line">    method2: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{...}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">Namespace.contactpage = {</span><br><span class="line">    init: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{...},</span><br><span class="line">    method1: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{...},</span><br><span class="line">    method2: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{...}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">Namespace.pageutil = {</span><br><span class="line">    getPageName: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</span><br><span class="line">        <span class="comment">// somehow return the identifier for the current page</span></span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> pageName = Namespace.pageutil.getPageName();</span><br><span class="line"><span class="built_in">window</span>.onload = Namespace[pageName].init;</span><br></pre></td></tr></tbody></table></figure>
<p>This can be especially useful for adding code for validating different forms that appear on different pages. You can even keep functionality that is used on multiple forms in another part of the namespace, like I did with <code>Namespace.pageutil.getPageName</code>. This is slightly different than what I was referring to because the <code>getPageName</code> method isn't really used by the page-specific code, but is actually used to find the reference to the correct page's code.</p>
<h2 id="More_with_Pro_JavaScript_Design_Patterns"><a href="#More_with_Pro_JavaScript_Design_Patterns" class="headerlink" title="More with Pro JavaScript Design Patterns"></a>More with Pro JavaScript Design Patterns</h2><p>The book  <em>Pro JavaScript Design Patterns</em>  goes into much more about the singleton pattern. Other than the fact that I compressed 6 pages from the book into this comparatively small blog post, it also goes into creating private variables through the use of closures, Lazy Instantiation, and Branching. As I insinuated from the start, I don't want to copy the book to much because I want to peek your interest enough to make you want to buy the book, which benefits us both by helping them financially while persuading them not to sue me. Not to mention that a single blog post should not encompass the same amount of material as an entire chapter in a book.</p>
<p>If you thought this was helpful or you just plain liked the article, please spread the word using the social sharing buttons below the post. Small town guys like me don't get big without the help of users like you. Thanks!</p>


      
			
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>JavaScript Design Patterns: Composite </h1>
		<div class="post-wrapper">
			
        <p>My last post was about the <a href="/javascript/javascript-design-patterns-bridge/" title="JavaScript Design Patterns: Bridge on joezimjs.com">Bridge Design Pattern</a>, which continued the JavaScript Design Patterns series that started off with the <a href="/javascript/javascript-design-patterns-singleton/" title="JavaScript Design Patterns: Singleton on joezimjs.com">Singleton</a>. Today we've moved onto the Composite Pattern. Composites are quite useful. By definition of the word composite, Composites are _composed _of multiple parts to create one whole entity.<a id="more"></a></p>
<p>These are the two main benefits that the Composite pattern provides:</p>
<p>You can treat the whole collection of objects the same way you would treat any of the individual objects in the collection. Functions executed on the composite are passed down to each of the children to be executed. On large collections, this becomes very beneficial (though also may be misleading, because you may not realize how large the collection is and therefore not understand how much performance may suffer).</p>
<p>It organizes the objects into a tree structure, and since each composite object contains a method to get its children, you can hide the implementation and organize the children in any way you wish.</p>
<h2 id="Structure_of_the_composite_pattern"><a href="#Structure_of_the_composite_pattern" class="headerlink" title="Structure of the composite pattern"></a>Structure of the composite pattern</h2><p>In the Composite patterns hierarchy, there are two types of objects: leaf and composite. The image below shows an example of the Composite's structure. It is recursive, which is what gives this pattern its power. The difference between the composite objects and the leaves are that leaves do not have any children, while the very essence of a composite is that it has children.</p>
<p><img src="/wp-content/uploads/composite_structure.png" alt="Composite Design Pattern Structure" title="Composite Design Pattern Structure"></p>
<h2 id="Examples_of_the_Composite_Pattern"><a href="#Examples_of_the_Composite_Pattern" class="headerlink" title="Examples of the Composite Pattern"></a>Examples of the Composite Pattern</h2><p>There a number of somewhat common examples of the Composite pattern. If you've ever used a PC, you've more than likely seen a frequently used implementation of this pattern: the file structure. Consider every disk/drive and folder to be a composite object and every file to be a leaf. When you try to delete a folder, it'll not only delete that folder, but also every other folder and file contained within it. You really don't get a much better example than that.</p>
<p>Another example that is a special type of composite is the Binary Tree. If you do not know what that is, you may want to see this <a href="http://en.wikipedia.org/wiki/Binary_search_tree" title="Wikipedia article on the Binary Search Tree" target="_blank" rel="external">Wikipedia article on the Binary Tree</a>. It is special because each node can contain at most 2 children. Also the leaf and composite pieces are exactly the same. Composites represent an end value, just like the leaves and the leaves can become composites at any time by giving them children. It is also optimized to be primarily used to search through sortable data.</p>
<p>If you look around, I'm sure you'll see some more examples. You might even see some implemented using JavaScript.</p>
<h2 id="Our_JavaScript_Example_of_the_Composite_Pattern"><a href="#Our_JavaScript_Example_of_the_Composite_Pattern" class="headerlink" title="Our JavaScript Example of the Composite Pattern"></a>Our JavaScript Example of the Composite Pattern</h2><p>To demonstrate the Composite pattern to you using JavaScript, I will use neither of the above examples. Instead I will make an image gallery. It is actually quite similar to the file system example, except that this in no way needs to reflect the place in which the images are stored or organized on the drive and is really only intended to have a certain number of levels. See the image below:</p>
<p><img src="/wp-content/uploads/gallery_structure.png" alt="Gallery Example's Structure" title="Gallery Example's Structure"></p>
<p>Notice that in my image, all of the images are contained within composites on the Gallery level. This is by no means necessary, nor will it be enforced in the code, but it is ideally how the images are to be organized.</p>
<p>Each of the objects in the hierarchy needs to implement a certain interface. Since JavaScript does not have interfaces we just need to make sure we implement certain methods. Below is the list of methods and what they do:</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Composite-Specific Methods</strong></td>
<td></td>
</tr>
<tr>
<td><code>add</code></td>
<td>add a child node to this composite</td>
</tr>
<tr>
<td><code>remove</code></td>
<td>remove a child node from this composite (or one in a deeper level)</td>
</tr>
<tr>
<td><code>getChild</code></td>
<td>returns a child object</td>
</tr>
<tr>
<td><strong>Gallery-Specific Methods</strong></td>
<td></td>
</tr>
<tr>
<td><code>hide</code></td>
<td>hides the composite and all of its children</td>
</tr>
<tr>
<td><code>show</code></td>
<td>shows the composite and all of its children</td>
</tr>
<tr>
<td><strong>Helper Methods</strong></td>
<td></td>
</tr>
<tr>
<td><code>getElement</code></td>
<td>get the HTML element of the node</td>
</tr>
</tbody>
</table>
<p>First I'll show the JavaScript for implementing GalleryComposite using this interface. It may be worth noting that I will being using the <a href="http://jquery.com" title="jQuery JavaScript Library" target="_blank" rel="external">jQuery JavaScript library</a> to help me out with some of the DOM work.</p>
<pre>
 var GalleryComposite = function (heading, id) {
    this.children = [];

    this.element = $('<div id="' + id + '" class="composite-gallery"></div>')
        .append('<h2>' + heading + '</h2>');
}

GalleryComposite.prototype = {
    add: function (child) {
        this.children.push(child);
        this.element.append(child.getElement());
    },

    remove: function (child) {
        for (var node, i = 0; node = this.getChild(i); i++) {
            if (node == child) {
                this.children.splice(i, 1);
                this.element.detach(child.getElement());
                return true;
            }

            if (node.remove(child)) {
                return true;
            }
        }

        return false;
    },

    getChild: function (i) {
        return this.children[i];
    },

    hide: function () {
        for (var node, i = 0; node = this.getChild(i); i++) {
            node.hide();
        }

        this.element.hide(0);
    },

    show: function () {
        for (var node, i = 0; node = this.getChild(i); i++) {
            node.show();
        }

        this.element.show(0);
    },

    getElement: function () {
        return this.element;
    }
}

</pre>
<p>Next we'll implement the images using GalleryImage:</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> GalleryImage = <span class="function"><span class="keyword">function</span> (<span class="params">src, id</span>) </span>{</span><br><span class="line">    <span class="keyword">this</span>.children = [];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.element = $(<span class="string">'&lt;img /&gt;'</span>)</span><br><span class="line">        .attr(<span class="string">'id'</span>, id)</span><br><span class="line">        .attr(<span class="string">'src'</span>, src);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">GalleryImage.prototype = {</span><br><span class="line">    <span class="comment">// Due to this being a leaf, it doesn't use these methods,</span></span><br><span class="line">    <span class="comment">// but must implement them to count as implementing the</span></span><br><span class="line">    <span class="comment">// Composite interface</span></span><br><span class="line">    add: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{ },</span><br><span class="line"></span><br><span class="line">    remove: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{ },</span><br><span class="line"></span><br><span class="line">    getChild: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{ },</span><br><span class="line"></span><br><span class="line">    hide: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">        <span class="keyword">this</span>.element.hide(<span class="number">0</span>);</span><br><span class="line">    },</span><br><span class="line"></span><br><span class="line">    show: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">        <span class="keyword">this</span>.element.show(<span class="number">0</span>);</span><br><span class="line">    },</span><br><span class="line"></span><br><span class="line">    getElement: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.element;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>Notice that the GalleryImage class doesn't do anything in the <code>add</code>, <code>remove</code>, and <code>getChild</code> functions. Since it is the leaf class, it doesn't contain any children, so it doesn't do anything for these methods. However, we do need to include those functions in order to comply with the Interface we set up. After all, the composite objects don't know that it's a leaf and might try calling those methods.</p>
<p>Now that the classes are set up, we'll write a bit of JavaScript code that utilizes those classes to create and show a real gallery. Though this example only shows the use of three of the methods shown above, you could extend this code to create a dynamic gallery, where users could add and remove images and folders easily.</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> container = <span class="keyword">new</span> GalleryComposite(<span class="string">''</span>, <span class="string">'allgalleries'</span>);</span><br><span class="line"><span class="keyword">var</span> gallery1 = <span class="keyword">new</span> GalleryComposite(<span class="string">'Gallery 1'</span>, <span class="string">'gallery1'</span>);</span><br><span class="line"><span class="keyword">var</span> gallery2 = <span class="keyword">new</span> GalleryComposite(<span class="string">'Gallery 2'</span>, <span class="string">'gallery2'</span>);</span><br><span class="line"><span class="keyword">var</span> image1 = <span class="keyword">new</span> GalleryImage(<span class="string">'image1.jpg'</span>, <span class="string">'img1'</span>);</span><br><span class="line"><span class="keyword">var</span> image2 = <span class="keyword">new</span> GalleryImage(<span class="string">'image2.jpg'</span>, <span class="string">'img2'</span>);</span><br><span class="line"><span class="keyword">var</span> image3 = <span class="keyword">new</span> GalleryImage(<span class="string">'image3.jpg'</span>, <span class="string">'img3'</span>);</span><br><span class="line"><span class="keyword">var</span> image4 = <span class="keyword">new</span> GalleryImage(<span class="string">'image4.jpg'</span>, <span class="string">'img4'</span>);</span><br><span class="line"></span><br><span class="line">gallery1.add(image1);</span><br><span class="line">gallery1.add(image2);</span><br><span class="line"></span><br><span class="line">gallery2.add(image3);</span><br><span class="line">gallery2.add(image4);</span><br><span class="line"></span><br><span class="line">container.add(gallery1);</span><br><span class="line">container.add(gallery2);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Make sure to add the top container to the body,</span></span><br><span class="line"><span class="comment">// otherwise it'll never show up.</span></span><br><span class="line">container.getElement().appendTo(<span class="string">'body'</span>);</span><br><span class="line">container.show();</span><br></pre></td></tr></tbody></table></figure>
<p>You can demo the code on the <a href="/composite-pattern-demo-page/" title="Composite Pattern Demo Page">Composite Pattern Demo Page</a>. You can view the source code of that page to see that none of the albums or images were premade using HTML, but were all added to the DOM via our JavaScript code.</p>
<h2 id="Benefits_and_Drawbacks_of_the_Composite_Pattern"><a href="#Benefits_and_Drawbacks_of_the_Composite_Pattern" class="headerlink" title="Benefits and Drawbacks of the Composite Pattern"></a>Benefits and Drawbacks of the Composite Pattern</h2><p>You can see the amazing benefits of always being able to just call a function on a top level object and have the results happen to any or all of the nodes in the composite structure. The code becomes much easier to use. Also the objects in the composite are loosely coupled because they all just follow the same interface. Finally, the composite gives a nice structure to the objects, rather than keeping them all in separate variables or in an array.</p>
<p>However, as mentioned earlier, the composite pattern can be deceptive. Making a call to a single function may be so easy that you might not realize the adverse effect it'll have on performance if the composite grows rather large.</p>
<p>The Composite pattern is a powerful tool, but as many know, with great power comes great responsibility. Use JavaScript's Composite pattern wisely and you'll be one step closer to becoming a JavaScript guru. If you thought this was helpful or you just plain liked the article, please spread the word using the social sharing buttons below the post. Thanks!</p>
<p><strong>JavaScript Design Patterns series:</strong><br></p>

      
			
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>A Beginner's Guide to Currying in Functional JavaScript</h1>
		<div class="post-wrapper">
			
			><p>Currying, or partial application, is one of the functional techniques that can sound confusing to people familiar with more traditional ways of writing JavaScript. But when applied properly, it can actually make your functional JavaScript more readable.</p>
<h2>More Readable And More Flexible</h2>
<p>One of the advantages touted for functional JavaScript is shorter, tighter code that gets right to the point in the fewest lines possible, and with less repetition. Sometimes this can come at the expense of readability; until you're familiar with the way the functional programming works, code written in this way can be harder to read and understand.</p>
<p>If you've come across the term currying before, but never knew what it meant, you can be forgiven for thinking of it as some exotic, spicy technique that you didn't need to bother about. But currying is actually a very simple concept, and it addresses some familiar problems when dealing with function arguments, while opening up a range of flexible options for the developer.</p>
<h2 id="what-is-currying">What Is Currying?</h2>
<div class='ArticleBox u-inline'><h3 class='ArticleBox_header t-bg'>
                    <span class='ArticleBox_icon fa fa-pencil'></span> More from this author
                 </h3><div class='ArticleBox_content'><ul class='ArticleBox_list t-list'><li><a href='https://www.sitepoint.com/introducing-scrum/?utm_source=sitepoint&amp;utm_medium=relatedinline&amp;utm_term=javascript&amp;utm_campaign=relatedauthor'>Power Up Your Team by Using Scrum Properly</a></li><li><a href='https://www.sitepoint.com/map-reduce-functional-javascript/?utm_source=sitepoint&amp;utm_medium=relatedinline&amp;utm_term=javascript&amp;utm_campaign=relatedauthor'>Using Map and Reduce in Functional JavaScript</a></li><li><a href='https://www.sitepoint.com/why-choose-scrum-for-web-and-mobile-development/?utm_source=sitepoint&amp;utm_medium=relatedinline&amp;utm_term=javascript&amp;utm_campaign=relatedauthor'>Why Choose Scrum for Web and Mobile Development</a></li></ul></div></div>
<p>Briefly, currying is a way of constructing functions that allows partial application of a function's arguments. What this means is that you can pass all of the arguments a function is expecting and get the result, or pass a subset of those arguments and get a function back that's waiting for the rest of the arguments. It really is that simple.</p>
<p>Currying is elemental in languages such as Haskell and Scala, which are built around functional concepts. JavaScript has functional capabilities, but currying isn't built in by default (at least not in current versions of the language). But we already know some functional tricks, and we can make currying work for us in JavaScript, too.</p>
<p>To give you a sense of how this could work, let's create our first curried function in JavaScript, using familiar syntax to build up the currying functionality that we want. As an example, let's imagine a function that greets somebody by name. We all know how to create a simple greet function that takes a name and a greeting, and logs the greeting with the name to the console:</p>
<pre><code>var greet = function(greeting, name) {
  console.log(greeting + ", " + name);
};
greet("Hello", "Heidi"); //"Hello, Heidi"
</code></pre>
<p>This function requires both the name and the greeting to be passed as arguments in order to work properly. But we could rewrite this function using simple nested currying, so that the basic function only requires a greeting, and it returns another function that takes the name of the person we want to greet. </p>
<h2 id="our-first-curry">Our First Curry</h2>
<pre><code>var greetCurried = function(greeting) {
  return function(name) {
    console.log(greeting + ", " + name);
  };
};
</code></pre>
<p>This tiny adjustment to the way we wrote the function lets us create a new function for any type of greeting, and pass that new function the name of the person that we want to greet:</p>
<pre><code>var greetHello = greetCurried("Hello");
greetHello("Heidi"); //"Hello, Heidi"
greetHello("Eddie"); //"Hello, Eddie"
</code></pre>
<p>We can also call the original curried function directly, just by passing each of the parameters in a separate set of parentheses, one right after the other:</p>
<pre><code>greetCurried("Hi there")("Howard"); //"Hi there, Howard"
</code></pre>
<p>Why not try this out in your browser?</p>

<h2 id="curry-all-the-things">Curry All the Things!</h2>
<p>The cool thing is, now that we have learned how to modify our traditional function to use this approach for dealing with arguments, we can do this with as many arguments as we want:</p>
<pre><code>var greetDeeplyCurried = function(greeting) {
  return function(separator) {
    return function(emphasis) {
      return function(name) {
        console.log(greeting + separator + name + emphasis);
      };
    };
  };
};
</code></pre>
<p>We have the same flexibility with four arguments as we have with two. No matter how far the nesting goes, we can create new custom functions to greet as many people as we choose in as many ways as suits our purposes:</p>
<pre><code>var greetAwkwardly = greetDeeplyCurried("Hello")("...")("?");
greetAwkwardly("Heidi"); //"Hello...Heidi?"
greetAwkwardly("Eddie"); //"Hello...Eddie?"
</code></pre>
<p>What's more, we can pass as many parameters as we like when creating custom variations on our original curried function, creating new functions that are able to take the appropriate number of additional parameters, each passed separately in its own set of parentheses:</p>
<pre><code>var sayHello = greetDeeplyCurried("Hello")(", ");
sayHello(".")("Heidi"); //"Hello, Heidi."
sayHello(".")("Eddie"); //"Hello, Eddie."
</code></pre>
<p>And we can define subordinate variations just as easily:</p>
<pre><code>var askHello = sayHello("?");
askHello("Heidi"); //"Hello, Heidi?"
askHello("Eddie"); //"Hello, Eddie?"
</code></pre>

<h2 id="currying-traditional-functions">Currying Traditional Functions</h2>
<p>You can see how powerful this approach is, especially if you need to create a lot of very detailed custom functions. The only problem is the syntax. As you build these curried functions up, you need to keep nesting returned functions, and call them with new functions that require multiple sets of parentheses, each containing its own isolated argument. It can get messy.</p>
<p>To address that problem, one approach is to create a quick and dirty currying function that will take the name of an existing function that was written without all the nested returns. A currying function would need to pull out the list of  arguments for that function, and use those to return a curried version of the original function:</p>
<pre><code>var curryIt = function(uncurried) {
  var parameters = Array.prototype.slice.call(arguments, 1);
  return function() {
    return uncurried.apply(this, parameters.concat(
      Array.prototype.slice.call(arguments, 0)
    ));
  };
};
</code></pre>
<p>To use this, we pass it the name of a function that takes any number of arguments, along with as many of the arguments as we want to pre-populate. What we get back is a function that's waiting for the remaining arguments:</p>
<pre><code>var greeter = function(greeting, separator, emphasis, name) {
  console.log(greeting + separator + name + emphasis);
};
var greetHello = curryIt(greeter, "Hello", ", ", ".");
greetHello("Heidi"); //"Hello, Heidi."
greetHello("Eddie"); //"Hello, Eddie."
</code></pre>
<p>And just as before, we're not limited in terms of the number of arguments we want to use when building derivative functions from our curried original function:</p>
<pre><code>var greetGoodbye = curryIt(greeter, "Goodbye", ", ");
greetGoodbye(".", "Joe"); //"Goodbye, Joe."
</code></pre>

<h2 id="getting-serious-about-currying">Getting Serious about Currying</h2>
<p>Our little currying function may not handle all of the edge cases, such as missing or optional parameters, but it does a reasonable job as long as we stay strict about the syntax for passing arguments. </p>
<p>Some functional JavaScript libraries such as <a href="http://ramdajs.com/">Ramda</a> have more flexible currying functions that can break out the parameters required for a function, and allow you to pass them individually or in groups to create custom curried variations. If you want to use currying extensively, this is probably the way to go.</p>
<p>Regardless of how you choose to add currying to your programming, whether you just want to use nested parentheses or you prefer to include a more robust carrying function, coming up with a consistent naming convention for your curried functions will help make your code more readable. Each derived variation of a function should have a name that makes it clear how it behaves, and what arguments it's expecting.</p>
<h2 id="argument-order">Argument Order</h2>
<p>One thing that's important to keep in mind when currying is the order of the arguments. Using the approach we've described, you obviously want the argument that you're most likely to replace from one variation to the next to be the last argument passed to the original function. </p>
<p>Thinking ahead about argument order will make it easier to plan for currying, and apply it to your work. And considering the order of your arguments in terms of least to most likely to change is not a bad habit to get into anyway when designing functions.</p>
<h2 id="conclusion">Conclusion</h2>
<p>Currying is an incredibly useful technique from functional JavaScript. It allows you to generate a library of small, easily configured functions that behave consistently, are quick to use, and that can be understood when reading your code. Adding currying to your coding practice will encourage the use of partially applied functions throughout your code, avoiding a lot of potential repetition, and may help get you into better habits about naming and dealing with function arguments.</p>
<p>If you enjoyed, this post, you might also like some of the others from the series:</p>
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>Higher-Order Functions in JavaScript</h1>
		<div class="post-wrapper">
			<p>One of the characteristics of JavaScript that makes it well-suited for functional programming is the fact that it can accept higher-order functions. A higher-order function is a function that can take another function as an argument, or that returns a function as a result. </p>
<h2 id="first-class-functions">First Class Functions</h2>
<p>You may have heard it said that JavaScript treats functions as first-class citizens. What this means is that functions in JavaScript are treated as objects. They have the type <code>Object</code>, they can be assigned as the value of a variable, and they can be passed and returned just like any other reference variable. </p>
<p>This native ability gives JavaScript special powers when it comes to functional programming. Because functions are objects, the language supports a very natural approach to functional programming. In fact, it's so natural, that I'll bet you've been using it without even thinking about it.</p>
<h2 id="taking-functions-as-arguments">Taking Functions as Arguments</h2>
<p>If you've done much web-based JavaScript programming or front-end development, you've probably come across functions that use a callback. A callback is a function that gets executed at the end of an operation, once all of the other operations of been completed. Usually this callback function is passed in as the last argument in the function. Frequently, it's defined inline as an anonymous function.</p>
<div class='ArticleBox u-inline'><h3 class='ArticleBox_header t-bg'>
                    <span class='ArticleBox_icon fa fa-pencil'></span> More from this author
                 </h3><div class='ArticleBox_content'><ul class='ArticleBox_list t-list'><li><a href='https://www.sitepoint.com/introducing-scrum/?utm_source=sitepoint&amp;utm_medium=relatedinline&amp;utm_term=javascript&amp;utm_campaign=relatedauthor'>Power Up Your Team by Using Scrum Properly</a></li><li><a href='https://www.sitepoint.com/map-reduce-functional-javascript/?utm_source=sitepoint&amp;utm_medium=relatedinline&amp;utm_term=javascript&amp;utm_campaign=relatedauthor'>Using Map and Reduce in Functional JavaScript</a></li><li><a href='https://www.sitepoint.com/why-choose-scrum-for-web-and-mobile-development/?utm_source=sitepoint&amp;utm_medium=relatedinline&amp;utm_term=javascript&amp;utm_campaign=relatedauthor'>Why Choose Scrum for Web and Mobile Development</a></li></ul></div></div>
<p>Since JavaScript is single-threaded, meaning that only one operation happens at a time,  each operation that's going to happen is queued along this single thread. The strategy of passing in a function to be executed after the rest of the parent function's operations are complete is one of the basic characteristics of languages that support higher-order functions. It allows for asynchronous behavior, so a script can continue executing while waiting for a result. The ability to pass a callback function is critical when dealing with resources that may return a result after an undetermined period of time. </p>
<p>This is very useful in a web programming environment, where a script may send an Ajax request off to a server, and then need to handle the response whenever it arrives, with no knowledge in advance of network latency or processing time on the server. Node.js frequently uses callbacks to make the most efficient use of server resources. This approach is also useful in the case of an app that waits for user input before performing a function.</p>
<p>For example, consider this snippet of simple JavaScript that adds an event listener to a button. </p>
<pre><code class='language-javascript'>&lt;button id=&quot;clicker&quot;&gt;So Clickable&lt;/button&gt;

document.getElementById(&quot;clicker&quot;).addEventListener(&quot;click&quot;, function() {
  alert(&quot;you triggered &quot; + this.id);
});</code></pre>
<p>This script uses an anonymous inline function to display an alert. But it could just as easily have used a separately defined function, and passed that named function to the <code>addEventListener</code> method</p>
<pre><code class='language-javascript'>var proveIt = function() {
  alert(&quot;you triggered &quot; + this.id);
};

document.getElementById(&quot;clicker&quot;).addEventListener(&quot;click&quot;, proveIt);</code></pre>
<p>Note that we passed <code>proveIt</code> and not <code>proveIt()</code> to our <code>addEventListener</code> function. When you pass a function by name without parentheses, you are passing the function object itself. When you pass it with parentheses, you are passing the result of executing that function.</p>
<p>Our little <code>proveIt()</code> function is structurally independent of the code around it, always returning the <code>id</code> of whatever element was triggered. This bit of code could exist in any context in which you wanted to display an alert with the <code>id</code> of an element, and could be called with any event listener.</p>
<p>The ability to replace an inline function with a separately defined and named function opens up a world of possibilities. As we try to develop pure functions that don't alter external data, and return the same result for the same input every time, we now have one of the essential tools to help us develop a library of small, targeted functions that can be used generically in any application. </p>
<h2 id="returning-functions-as-results">Returning Functions as Results</h2>
<p>In addition to taking functions as arguments, JavaScript allows functions to return other functions as a result. This makes perfect sense, since functions are simply objects, they can be returned the same as any other value.</p>
<p>But what does it mean to return a function as a result? Defining a function as the return value of another function allows you to create functions that can be used as templates to create new functions. That opens the door to another world of functional JavaScript magic. </p>
<p>For example, imagine you've gotten tired of reading all of these articles about the specialness of <em>Millennials</em>, and you decide you want to replace the word <em>Millennials</em> with the phrase <em>Snake People</em> every time it occurs. Your impulse might be simply to write a function that performed that text replacement on any text you passed to it:</p>
<pre><code class='language-javascript'>var snakify = function(text) {
  return text.replace(/millenials/ig, &quot;Snake People&quot;);
};
console.log(snakify(&quot;The Millenials are always up to something.&quot;));
// The Snake People are always up to something.</code></pre>
<p>That works, but it's pretty specific to this one situation. You're also tired of hearing about the <em>Baby Boomers</em>. You'd like to make a custom function for them as well. But even with such a simple function, you don't want to have to repeat the code that you've written:</p>
<pre><code class='language-javascript'>var hippify = function(text) {
  return text.replace(/baby boomers/ig, &quot;Aging Hippies&quot;);
};
console.log(hippify(&quot;The Baby Boomers just look the other way.&quot;));
// The Aging Hippies just look the other way.</code></pre>
<p>But what if a you decided that you wanted to do something fancier to preserve case in the original string? You would have to modify both of your new functions to do this. That's a hassle, and it makes your code more brittle and harder to read. </p>
<p>What you really want is the flexibility to be able to replace any term with any other term in a template function, and define that behavior as a foundational function from which you could spawn a whole race of custom functions. </p>
<p>With the ability to return functions instead of values, JavaScript offers up ways to make that scenario much more convenient:</p>
<pre><code class='language-javascript'>var attitude = function(original, replacement, source) {
  return function(source) {
    return source.replace(original, replacement);
  };
};

var snakify = attitude(/millenials/ig, &quot;Snake People&quot;);
var hippify = attitude(/baby boomers/ig, &quot;Aging Hippies&quot;);

console.log(snakify(&quot;The Millenials are always up to something.&quot;));
// The Snake People are always up to something.
console.log(hippify(&quot;The Baby Boomers just look the other way.&quot;));
// The Aging Hippies just look the other way.</code></pre>
<p>What we've done is isolate the code that does the actual work into a versatile and extensible <code>attitude</code> function that encapsulates all of the work needed to modify any input string using an original phrase and a replacement phrase with some attitude. </p>
<p>Defining a new function as a reference to the <code>attitude</code> function, pre-populated with the first two arguments it takes, allows the new function to take whatever argument you pass it and use that as the source text in the internal function returned by the <code>attutide</code> function.</p>
<p>We're taking advantage here of the fact that JavaScript functions don't care whether they are passed the same number of arguments as they were originally defined to take. If an argument is missing, the function will just treat the missing arguments as undefined. </p>
<p>On the other hand, that additional argument can be passed in later when the function being called has been defined in the way we just demonstrated, as a reference to a function returned from another function with an argument (or more) left undefined.</p>
<p>Go over that a few times if you need to, so you fully understand what's happening. We're creating a template function that returns another function. Then we're defining that newly returned function, minus one attribute, as a custom implementation of the template function.  All the functions created this way will inherit the same working code from the template function, but can be predefined with different default arguments.  </p>
<h2 id="its-what-youre-already-doing">It's What You're Already Doing</h2>
<p>Higher-order functions are so basic to the way JavaScript works, you're already using them. Every time you pass an anonymous function or a callback, you're actually taking the value that the passed function returns, and using that as an argument for another function. </p>
<p>The ability of functions to return other functions extends the convenience of JavaScript, allowing us to create custom named functions to perform specialized tasks with shared template code. Each of these little functions can inherit any improvements made in the original code down the road, which helps us avoid code duplication, and keeps our source clean and readable. </p>
<p>As an added bonus, if you make sure your functions are pure, so that they don't alter external values and they always return the same value for any given input, you put yourself in a good position to create test suites to verify that your code changes don't break anything you're relying on when you update your template functions.</p>
<p>Start thinking about ways you can take advantage of this approach in your own projects. One of the great things about JavaScript is that you can mix functional techniques right in with the code you're already familiar with. Try some experiments. You may be surprised how easily a little work with higher-order functions can improve your code.</p>
			
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>The Final Steps to Mastering JavaScript's this Keyword</h1>
		<div class="post-wrapper">
			<p>In a <a href="http://www.sitepoint.com/inner-workings-javascripts-this-keyword/">previous article</a> we learned the fundamentals of using JavaScript's <code>this</code> keyword properly. We saw that the crucial factor in determining what <code>this</code> refers to, is to find out the current execution context. However, this task can be a bit tricky in situations where the context gets changed in a way we don't expect. In this article I will highlight when this might happen and what we can do to remedy it.</p>
<h2 id="fixing-common-issues">Fixing Common Issues</h2>
<p>In this section we'll explore some of the most common issues arising from the use of the <code>this</code> keyword and  we'll learn how to fix them.</p>
<h3 id="1-using-this-in-extracted-methods">1. Using <code>this</code> in Extracted Methods</h3>
<p>One of the most common mistakes that people make is when trying to assign an object's method to a variable and expecting that <code>this</code> will still point to the original object. As we can see from the following example, that simply doesn't work.</p>
<pre><code class='language-javascript'>var car = {
  brand: &quot;Nissan&quot;,
  getBrand: function(){
    console.log(this.brand);
  }
};

var getCarBrand = car.getBrand;

getCarBrand();   // output: undefined</code></pre>

<p>Even though <code>getCarBrand</code> appears to be a reference to <code>car.getBrand()</code>, in fact, it's just another reference to <code>getBrand()</code> itself. We already know that the call-site is what matters in determining the context, and here, the call-site is <code>getCarBrand()</code>, which is a plain and simple function call.</p>
<p>To prove that <code>getCarBrand</code> points to a baseless function (one which isn't bound to any specific object), just add <code>alert(getCarBrand);</code> to the bottom of the code and you'll see the following output:</p>
<pre><code class='language-javascript'>function(){
  console.log(this.brand);
}</code></pre>
<p><code>getCarBrand</code> holds just a plain function, which is no longer a method of the <code>car</code> object. So, in this case, <code>this.brand</code> actually translates to <code>window.brand</code>, which is, of course, <code>undefined</code>. </p>
<p>If we extract a method from an object, it becomes a plain function again. Its connection to the object is severed, and it no longer works as intended. In other words, an extracted function is not bound to the object it was taken from.</p>
<p>So how can we remedy this? Well, if we want to keep the reference to the original object, we need to explicitly bind the <code>getBrand()</code> function to the <code>car</code> object when we assign it to the <code>getCarBrand</code> variable. We can do this by using the <a href="https://developer.mozilla.org/de/docs/Web/JavaScript/Reference/Global_Objects/Function/bind">bind() method</a>.</p>
<pre><code class='language-javascript'>var getCarBrand = car.getBrand.bind(car);
getCarBrand();   // output: Nissan</code></pre>
<p>Now, we get the proper output, because we successfully redefine the context to what we want it to be.</p>
<h3 id="2-this-used-in-callbacks">2 <code>this</code> Used in Callbacks</h3>
<p>The next issue occurs when we pass a method (that uses <code>this</code> as a parameter) to be used as a callback function. For example:</p>
<pre><code class='language-javascript'>&lt;button id=&quot;btn&quot; type=&quot;button&quot;&gt;Get the car's brand&lt;/button&gt;

var car = {
  brand: &quot;Nissan&quot;,
  getBrand: function(){
    console.log(this.brand);
  }
};

var el = document.getElementById(&quot;btn&quot;);
el.addEventListener(&quot;click&quot;, car.getBrand);</code></pre>

<p>Even though we use <code>car.getBrand</code>, we actually only get the function <code>getBrand()</code> which is attached to the <code>button</code> object. </p>
<p>Passing a parameter to a function is an implicit assignment, so what happens here is almost the same as in the previous example. The difference is that now <code>car.getBrand</code> is not explicitly assigned, but implicitly. And the result is pretty much the samewhat we get is a plain function, bound to the <code>button</code> object. </p>
<p>In other words, when we execute a method on an object, which is different from the object upon which the method was originally defined, the <code>this</code> keyword no longer refers to the original object, rather to the object that invokes the method. </p>
<p>With reference to our example: we are executing <code>car.getBrand</code> on <code>el</code> (the button element), not the <code>car</code> object, upon which it was originally defined. Consequently, <code>this</code> no longer refers to <code>car</code>, rather to <code>el</code>.</p>
<p>If we want to keep the reference to the original object intact, again, we need to explicitly bind the <code>getBrand()</code> function to the <code>car</code> object by using the <code>bind()</code> method.</p>
<pre><code class='language-javascript'>el.addEventListener(&quot;click&quot;, car.getBrand.bind(car));</code></pre>
<p>Now, everything works as expected.</p>
<h3 id="3-this-used-inside-closures">3 <code>this</code> Used Inside Closures</h3>
<p>Another instance when <code>this</code>'s context can be mistaken is when we use <code>this</code> inside of <a href="http://www.sitepoint.com/demystifying-javascript-closures-callbacks-iifes/">a closure</a>. Consider the following example:</p>
<pre><code class='language-javascript'>var car = {
  brand: &quot;Nissan&quot;,
  getBrand: function(){
    var closure = function(){
      console.log(this.brand);
    };
    return closure();
  }
};

car.getBrand();   // output: undefined</code></pre>

<p>Here, the output we get is <code>undefined</code>, because closure functions (inner functions) don't have access to the <code>this</code> variable of outer functions. The net result is that <code>this.brand</code> is equal to <code>window.brand</code>, because <code>this</code> in inner functions is bound to the global object.</p>
<p>To fix this issue, we need to keep <code>this</code> bound to the <code>getBrand()</code> function.</p>
<pre><code class='language-javascript'>var car = {
  brand: &quot;Nissan&quot;,
  getBrand: function(){
    var closure = function(){
      console.log(this.brand);
    }.bind(this);
    return closure();
  }
};

car.getBrand();   // output: Nissan</code></pre>

<p>This binding is equivalent to <code>car.getBrand.bind(car)</code>.</p>
<p>Another popular method to fix closures, is to assign the <code>this</code> value to another variable, thus preventing the unwanted change.</p>
<pre><code class='language-javascript'>var car = {
  brand: &quot;Nissan&quot;,
  getBrand: function(){
    var self = this;
    var closure = function(){
      console.log(self.brand);
    };
    return closure();
  }
};

car.getBrand();   // output: Nissan</code></pre>

<p>Here, the value of <code>this</code> can be assigned to <code>_this</code>, <code>that</code>, <code>self</code>, <code>me</code>, <code>my</code>, <code>context</code>, an object's pseudo name, or whatever else works for you. The main point is to keep a reference to the original object. </p>
<h2 id="ecmascript-6-to-the-rescue">ECMAScript 6 to the Rescue</h2>
<p>In the previous example we saw a primer on what is known as &#8220;lexical <code>this</code>&#8220;when we set the <code>this</code> value to another variable. In ECMAScript 6 we can use the similar, but more elegant, technique, applicable via the new arrow functions.</p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions">Arrow-functions</a> are created not by the <code>function</code> keyword, but by the so-called fat arrow operator (<code>=&gt;</code>).  Unlike regular functions, arrow functions take the <code>this</code> value from their immediate enclosing scope. The lexical binding of an arrow function can't be overridden, even with the <code>new</code> operator.</p>
<p>Let's now see how arrow function can be used to substitute the <code>var self = this;</code> statement.</p>
<pre><code class='language-javascript'>var car = {
  brand: &quot;Nissan&quot;,
  getBrand: function(){
    // the arrow function keeps the scope of &quot;this&quot; lexical
    var closure = () =&gt; {   
      console.log(this.brand);
    };
    return closure();
  }
};

car.getBrand();   // output: Nissan</code></pre>

<h2 id="what-you-need-to-remember-about-this">What You Need to Remember About <code>this</code></h2>
<p>We saw that the <code>this</code> keyword, like every other mechanism, follows some simple rules, and if we know them well, then we can use that mechanism with more confidence. So, let's quickly recap what we have learned (from this and from the previous article):</p>
<ul>
<li><code>this</code> refers to the global object in the following cases: 
<ul>
<li>in the outermost context, outside of any function block</li>
<li>in functions that are not methods of objects</li>
<li>in functions that are not object constructors</li>
</ul>
</li>
<li>When a function is called as a property on a parent object, <code>this</code> refers to the parent object.</li>
<li>When a function is called using <code>call()</code> or <code>apply()</code>, or <code>bind()</code>, <code>this</code> refers to the first argument passed to these methods. If the first argument is <code>null</code> or not an object, <code>this</code> refers to the global object.</li>
<li>When a function is called with the <code>new</code> operator, <code>this</code> refers to the newly created object.</li>
<li>When an arrow function (introduced in ECMAScript 6) is used, <code>this</code> relies on lexical scope and refers to the parent object.</li>
</ul>
<p>Knowing these straight and simple rules, we can easily predict what <code>this</code> will point to, and if it's not what we want, we know which methods we can use to fix it.</p>
<h2 id="summary">Summary</h2>
<p>JavaScript's <code>this</code> keyword is a tricky concept to master, but with enough practice, master it you can. I hope that this article and my previous article, serve as good basis for your understanding and prove to be a valuable reference the next time <code>this</code> is causing you headaches.</p>
			
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>An Introduction to Functional Programming in JavaScript</h1>
		<div class="post-wrapper">
			
			
<p>For me, in many ways, 2011 has been the year of the rediscovery of JavaScript. I have been programming in JavaScript
  for many years (like most other programmers) but now I've come to appreciate JavaScript the language a little
  better.</p>
<p>2011 was also when I had to dig into Scala. Thus I was compelled to implement more solutions in a functional
  manner. </p>
<p>Like many programmers unfamiliar with Functional Programming or others familiar with Functional Programming but more
  comfortable with Object Oriented Programming, it was daunting at first. </p>
<p>But persist through and one starts to see the benefits of Functional Programming (or at least understand it enough
  and execute your projects).</p>
<p>If you're looking for a quick start in Functional Programming, JavaScript is the perfect language for you. Here's
  why:</p>
<ul>
  <li>Almost all programmers have tweaked and / or written JavaScript code at some point of time  hence there should be
    a certain familiarity
  </li>
  <li>JavaScript comes as close to a standardized programming language we'll get  it's the only programming language
    available across all web browsers
  </li>
  <li>JavaScript comes with a very familiar C like syntax and should be readable to most programmers</li>
  <li>Functions have always been first class members in JavaScript, support for Functional Programming is very good and
    in many ways JavaScript has been ahead of its time
  </li>
  <li>JavaScript doesn't have Java like Class based Object Oriented Programming support so in many ways you're forced to
    be Functional in JavaScript
  </li>
</ul>
<p>These should be enough reasons, so without meandering any further in the introduction, I present <em>Functional
  Programming with JavaScript</em>:</p>
<hr>
<h2>Functions in JavaScript</h2>
<p>Almost everyone reading would have seen <strong>function declarations</strong> in JavaScript. However JavaScript lets
  you explicitly express functions as objects.</p>
<p>In fact, all <strong>function declarations</strong> are automatically converted to <strong>function
  expressions</strong> and hoisted. </p>
<p>By <strong>hoisting</strong>, the converted function expression is automatically placed in the beginning and thus is
  available in lines before it has been declared.</p>
<p>
  <link rel="stylesheet" href="https://assets-cdn.github.com/assets/gist-embed-73f377772c960197b2c1164d46034c3a289474497809f5014ad77b507a7d6c96.css"></p><div id="gist1519440" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-gistfile1-js" class="file">
    

  <div itemprop="text" class="blob-wrapper data type-javascript">
      <table class="highlight tab-size js-file-line-container" data-tab-size="8">
      <tbody><tr>
        <td id="file-gistfile1-js-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-gistfile1-js-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k">function</span> <span class="pl-en">justAFunction</span>() {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-gistfile1-js-LC2" class="blob-code blob-code-inner js-file-line">  <span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-s"><span class="pl-pds">"</span>functions can be declared<span class="pl-pds">"</span></span>);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-gistfile1-js-LC3" class="blob-code blob-code-inner js-file-line">}</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-gistfile1-js-LC4" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-gistfile1-js-LC5" class="blob-code blob-code-inner js-file-line"><span class="pl-k">var</span> <span class="pl-en">justAnotherFunction</span> <span class="pl-k">=</span> <span class="pl-k">function</span> () {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-gistfile1-js-LC6" class="blob-code blob-code-inner js-file-line">  <span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-s"><span class="pl-pds">"</span>functions can be expressed as objects<span class="pl-pds">"</span></span>);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-gistfile1-js-LC7" class="blob-code blob-code-inner js-file-line">};</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-gistfile1-js-LC8" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-gistfile1-js-LC9" class="blob-code blob-code-inner js-file-line"><span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-s"><span class="pl-pds">"</span>All functions are objects of type 'function'<span class="pl-pds">"</span></span>);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-gistfile1-js-LC10" class="blob-code blob-code-inner js-file-line"><span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-k">typeof</span> justAFunction);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-gistfile1-js-LC11" class="blob-code blob-code-inner js-file-line"><span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-k">typeof</span> justAnotherFunction);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-gistfile1-js-LC12" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L13" class="blob-num js-line-number" data-line-number="13"></td>
        <td id="file-gistfile1-js-LC13" class="blob-code blob-code-inner js-file-line"><span class="pl-c">// This function is available through hoisting</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L14" class="blob-num js-line-number" data-line-number="14"></td>
        <td id="file-gistfile1-js-LC14" class="blob-code blob-code-inner js-file-line"><span class="pl-c">// although it will be declared later</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L15" class="blob-num js-line-number" data-line-number="15"></td>
        <td id="file-gistfile1-js-LC15" class="blob-code blob-code-inner js-file-line"><span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-k">typeof</span> justAFunctionThatWillBeHoisted); </td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L16" class="blob-num js-line-number" data-line-number="16"></td>
        <td id="file-gistfile1-js-LC16" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L17" class="blob-num js-line-number" data-line-number="17"></td>
        <td id="file-gistfile1-js-LC17" class="blob-code blob-code-inner js-file-line"><span class="pl-k">function</span> <span class="pl-en">justAFunctionThatWillBeHoisted</span>() {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L18" class="blob-num js-line-number" data-line-number="18"></td>
        <td id="file-gistfile1-js-LC18" class="blob-code blob-code-inner js-file-line">  <span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-s"><span class="pl-pds">"</span>Function declarations are automatically hoisted to the top<span class="pl-pds">"</span></span>);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L19" class="blob-num js-line-number" data-line-number="19"></td>
        <td id="file-gistfile1-js-LC19" class="blob-code blob-code-inner js-file-line">}</td>
      </tr>
</tbody></table>

  </div>

  </div>
  
</div>

      </div>
      <div class="gist-meta">
        <a href="https://gist.github.com/Srirangan/1519440/raw/c1ef5aa568a5ad187939f4fe7ea342a92504cc19/gistfile1.js" style="float:right">view raw</a>
        <a href="https://gist.github.com/Srirangan/1519440#file-gistfile1-js">gistfile1.js</a>
        hosted with ? by <a href="https://github.com">GitHub</a>
      </div>
    </div>
</div>

  <link rel="stylesheet" href="https://gist.github.com/stylesheets/gist/embed.css">
<p></p>
<p></p>
<hr>
<p>JavaScript functions are also different in the sense that each function, regardless of how it is defined, has dynamic
  arguments and a dynamic context.</p>
<p>A JavaScript function can, of course, access its arguments by their variable names. </p>
<p>By dynamic arguments, I mean, in the function body, we are provided an <strong>arguments</strong> array which contain
  all the arguments sequentially in the order they were passed. This means any function can be called with any set of
  arguments, thus giving us a lot of flexibility.</p>
<p>By dynamic context, I am refering to the <strong>this</strong> object. Typically the <strong>this</strong> object
  defaults sensibly to the context of the function. However it is possible to explicitly call a function with a user
  defined <strong>this</strong> / context object.</p>
<p>
  <link rel="stylesheet" href="https://assets-cdn.github.com/assets/gist-embed-73f377772c960197b2c1164d46034c3a289474497809f5014ad77b507a7d6c96.css"></p><div id="gist1519443" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-gistfile1-js" class="file">
    

  <div itemprop="text" class="blob-wrapper data type-javascript">
      <table class="highlight tab-size js-file-line-container" data-tab-size="8">
      <tbody><tr>
        <td id="file-gistfile1-js-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-gistfile1-js-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k">var</span> <span class="pl-en">logArguments</span> <span class="pl-k">=</span> <span class="pl-k">function</span> () {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-gistfile1-js-LC2" class="blob-code blob-code-inner js-file-line">  <span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-v">arguments</span>);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-gistfile1-js-LC3" class="blob-code blob-code-inner js-file-line">};</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-gistfile1-js-LC4" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-gistfile1-js-LC5" class="blob-code blob-code-inner js-file-line"><span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-s"><span class="pl-pds">"</span>All functions can have dynamic arguments<span class="pl-pds">"</span></span>);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-gistfile1-js-LC6" class="blob-code blob-code-inner js-file-line"><span class="pl-en">logArguments</span>(<span class="pl-s"><span class="pl-pds">"</span>hello<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>world<span class="pl-pds">"</span></span>);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-gistfile1-js-LC7" class="blob-code blob-code-inner js-file-line"><span class="pl-en">logArguments</span>(<span class="pl-s"><span class="pl-pds">"</span>hello<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>world<span class="pl-pds">"</span></span>, <span class="pl-c1">42</span>, [<span class="pl-s"><span class="pl-pds">"</span>huh<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>wtf!<span class="pl-pds">"</span></span>], {hello<span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>world<span class="pl-pds">"</span></span>});</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-gistfile1-js-LC8" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-gistfile1-js-LC9" class="blob-code blob-code-inner js-file-line"><span class="pl-k">var</span> <span class="pl-en">logThis</span> <span class="pl-k">=</span> <span class="pl-k">function</span> () {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-gistfile1-js-LC10" class="blob-code blob-code-inner js-file-line">  <span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-v">this</span>);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-gistfile1-js-LC11" class="blob-code blob-code-inner js-file-line">};</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-gistfile1-js-LC12" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L13" class="blob-num js-line-number" data-line-number="13"></td>
        <td id="file-gistfile1-js-LC13" class="blob-code blob-code-inner js-file-line"><span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-s"><span class="pl-pds">"</span>All functions can have dynamic contexts / 'this' objects<span class="pl-pds">"</span></span>);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L14" class="blob-num js-line-number" data-line-number="14"></td>
        <td id="file-gistfile1-js-LC14" class="blob-code blob-code-inner js-file-line"><span class="pl-en">logThis</span>();</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L15" class="blob-num js-line-number" data-line-number="15"></td>
        <td id="file-gistfile1-js-LC15" class="blob-code blob-code-inner js-file-line"><span class="pl-smi">logThis</span>.<span class="pl-c1">apply</span>({yo<span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>baby!<span class="pl-pds">"</span></span>});</td>
      </tr>
</tbody></table>

  </div>

  </div>
  
</div>

      </div>
      <div class="gist-meta">
        <a href="https://gist.github.com/Srirangan/1519443/raw/1848f10d1ce61337f859d1a8d7caa805e97d4ead/gistfile1.js" style="float:right">view raw</a>
        <a href="https://gist.github.com/Srirangan/1519443#file-gistfile1-js">gistfile1.js</a>
        hosted with ? by <a href="https://github.com">GitHub</a>
      </div>
    </div>
</div>

  <link rel="stylesheet" href="https://gist.github.com/stylesheets/gist/embed.css">
<p></p>
<p></p>
<p>Notice how <code>functionName.apply()</code> allows us to explicitly set the context and pass arguments.</p>
<hr>
<p>I must point out that JavaScript presents us with <strong>functional scoping</strong> instead of <strong>block
  scoping</strong> (C, C++ etc.). This usually becomes more relevant when you need to implement Object Oriented patterns
  in JavaScript but more on that in a later blog post.</p>
<p>Another trick for you is the capability to define <strong>self-executing anonymous function</strong>. These can be
  creatively used to implement modular namespaces / packages. Here are some examples:</p>
<p>
  <link rel="stylesheet" href="https://assets-cdn.github.com/assets/gist-embed-73f377772c960197b2c1164d46034c3a289474497809f5014ad77b507a7d6c96.css"></p><div id="gist1519445" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-gistfile1-js" class="file">
    

  <div itemprop="text" class="blob-wrapper data type-javascript">
      <table class="highlight tab-size js-file-line-container" data-tab-size="8">
      <tbody><tr>
        <td id="file-gistfile1-js-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-gistfile1-js-LC1" class="blob-code blob-code-inner js-file-line">(<span class="pl-k">function</span> (<span class="pl-smi">name</span>) {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-gistfile1-js-LC2" class="blob-code blob-code-inner js-file-line">  <span class="pl-en">console</span>.<span class="pl-c1">log</span>(name <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span> functions can be auto-executed on definition<span class="pl-pds">"</span></span>)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-gistfile1-js-LC3" class="blob-code blob-code-inner js-file-line">})(<span class="pl-s"><span class="pl-pds">"</span>Anonymous<span class="pl-pds">"</span></span>);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-gistfile1-js-LC4" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-gistfile1-js-LC5" class="blob-code blob-code-inner js-file-line"><span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-s"><span class="pl-pds">"</span>JavaScript provides functional scoping instead of block scoping<span class="pl-pds">"</span></span>);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-gistfile1-js-LC6" class="blob-code blob-code-inner js-file-line">(<span class="pl-k">function</span> () {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-gistfile1-js-LC7" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">if</span> (<span class="pl-c1">true</span>) {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-gistfile1-js-LC8" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">var</span> x <span class="pl-k">=</span> <span class="pl-c1">true</span>;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-gistfile1-js-LC9" class="blob-code blob-code-inner js-file-line">    <span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-s"><span class="pl-pds">"</span>Is 'x' available inside the block? <span class="pl-pds">"</span></span> <span class="pl-k">+</span> x);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-gistfile1-js-LC10" class="blob-code blob-code-inner js-file-line">  }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-gistfile1-js-LC11" class="blob-code blob-code-inner js-file-line">  <span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-s"><span class="pl-pds">"</span>Is 'x' available outside the block? <span class="pl-pds">"</span></span> <span class="pl-k">+</span> x);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-gistfile1-js-LC12" class="blob-code blob-code-inner js-file-line">})();</td>
      </tr>
</tbody></table>

  </div>

  </div>
  
</div>

      </div>
      <div class="gist-meta">
        <a href="https://gist.github.com/Srirangan/1519445/raw/f19d1984e6d52e9316ea8a1477019f430ec29adb/gistfile1.js" style="float:right">view raw</a>
        <a href="https://gist.github.com/Srirangan/1519445#file-gistfile1-js">gistfile1.js</a>
        hosted with ? by <a href="https://github.com">GitHub</a>
      </div>
    </div>
</div>

  <link rel="stylesheet" href="https://gist.github.com/stylesheets/gist/embed.css">
<p></p>
<p></p>
<hr>
<h2>Higher Order Functions</h2>
<p>We know functions in JavaScript are nothing but objects. Does this mean functions can be passed around as arguments
  to other functions? And can one function return another function?</p>
<p>The answer to both questions is Yes. And such functions which taking in other functions are arguments and / or
  return functions are typically called <strong>higher order functions</strong>.</p>
<p>In the example below, we will define a higher order function <code>forEach</code>. This function takes in two
  arguments: a <code>list</code> and an <code>action</code>. The first argument list is an array containing containing
  objects and the second argument action is a function that will be invoked for each item in list.</p>
<p>
  <link rel="stylesheet" href="https://assets-cdn.github.com/assets/gist-embed-73f377772c960197b2c1164d46034c3a289474497809f5014ad77b507a7d6c96.css"></p><div id="gist1519447" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-gistfile1-js" class="file">
    

  <div itemprop="text" class="blob-wrapper data type-javascript">
      <table class="highlight tab-size js-file-line-container" data-tab-size="8">
      <tbody><tr>
        <td id="file-gistfile1-js-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-gistfile1-js-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k">var</span> <span class="pl-en">forEach</span> <span class="pl-k">=</span> <span class="pl-k">function</span> (<span class="pl-smi">list</span>, <span class="pl-smi">action</span>) {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-gistfile1-js-LC2" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">for</span> (<span class="pl-k">var</span> i <span class="pl-k">=</span> <span class="pl-c1">0</span>; i <span class="pl-k">&lt;</span> <span class="pl-smi">list</span>.<span class="pl-c1">length</span>; i<span class="pl-k">++</span>) {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-gistfile1-js-LC3" class="blob-code blob-code-inner js-file-line">    <span class="pl-en">action</span>(list[i]);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-gistfile1-js-LC4" class="blob-code blob-code-inner js-file-line">  }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-gistfile1-js-LC5" class="blob-code blob-code-inner js-file-line">};</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-gistfile1-js-LC6" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-gistfile1-js-LC7" class="blob-code blob-code-inner js-file-line"><span class="pl-k">var</span> <span class="pl-en">logItem</span> <span class="pl-k">=</span> <span class="pl-k">function</span> (<span class="pl-smi">item</span>) {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-gistfile1-js-LC8" class="blob-code blob-code-inner js-file-line">  <span class="pl-en">console</span>.<span class="pl-c1">log</span>(item);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-gistfile1-js-LC9" class="blob-code blob-code-inner js-file-line">};</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-gistfile1-js-LC10" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-gistfile1-js-LC11" class="blob-code blob-code-inner js-file-line"><span class="pl-k">var</span> listOfThings <span class="pl-k">=</span> [<span class="pl-s"><span class="pl-pds">"</span>soap<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>candle<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>deer<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>wine<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>bread<span class="pl-pds">"</span></span>];</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-gistfile1-js-LC12" class="blob-code blob-code-inner js-file-line"><span class="pl-k">var</span> anotherListOfThings <span class="pl-k">=</span> [<span class="pl-s"><span class="pl-pds">"</span>grapes<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>apples<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>beer<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>pizza<span class="pl-pds">"</span></span>];</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L13" class="blob-num js-line-number" data-line-number="13"></td>
        <td id="file-gistfile1-js-LC13" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L14" class="blob-num js-line-number" data-line-number="14"></td>
        <td id="file-gistfile1-js-LC14" class="blob-code blob-code-inner js-file-line"><span class="pl-en">forEach</span>(listOfThings, logItem);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L15" class="blob-num js-line-number" data-line-number="15"></td>
        <td id="file-gistfile1-js-LC15" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L16" class="blob-num js-line-number" data-line-number="16"></td>
        <td id="file-gistfile1-js-LC16" class="blob-code blob-code-inner js-file-line"><span class="pl-en">forEach</span>(anotherListOfThings, <span class="pl-k">function</span> (<span class="pl-smi">item</span>) {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L17" class="blob-num js-line-number" data-line-number="17"></td>
        <td id="file-gistfile1-js-LC17" class="blob-code blob-code-inner js-file-line">  <span class="pl-en">console</span>.<span class="pl-c1">log</span>(item <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>'s length is <span class="pl-pds">"</span></span> <span class="pl-k">+</span> <span class="pl-smi">item</span>.<span class="pl-c1">length</span>);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L18" class="blob-num js-line-number" data-line-number="18"></td>
        <td id="file-gistfile1-js-LC18" class="blob-code blob-code-inner js-file-line">});</td>
      </tr>
</tbody></table>

  </div>

  </div>
  
</div>

      </div>
      <div class="gist-meta">
        <a href="https://gist.github.com/Srirangan/1519447/raw/9390ed697c99d6005d9c437769db91b36f73eb03/gistfile1.js" style="float:right">view raw</a>
        <a href="https://gist.github.com/Srirangan/1519447#file-gistfile1-js">gistfile1.js</a>
        hosted with ? by <a href="https://github.com">GitHub</a>
      </div>
    </div>
</div>

  <link rel="stylesheet" href="https://gist.github.com/stylesheets/gist/embed.css">
<p></p>
<p></p>
<p>The simple example above shows how a named function <code>logItem</code> and an <code>anonymous function</code> are
  being passed as arguments to the higher order function <code>forEach</code>.</p>
<hr>
<h2>Map / Reduce Implementations</h2>
<p>In the example above, we saw how the <code>forEach</code> algorithm was expressed as a function and reused multiple
  times as an when required. We avoided repeating loops and thus made the code more readable.</p>
<p>This is one of the prime reasons to write functional code. If done correctly, you'll be able to abstract out complex
  algorithms, replace it with a nice function call and keep code condensed and readable.</p>
<p>To further stress this idea, we need a better example. For each was too simple an algorithm to abstract. Let's try
  implementing higher order functions for <strong>Map and Reduce algorithms</strong>.</p>
<p>We start with the Map function. What is the map function? Our <code>map</code> function should allow the user to
  perform a particular action over each item of a <code>list</code>, and then return a <code>result</code> list
  containing results of actions performed on each list item.</p>
<p>Simple enough, show me the code!</p>
<p>
  <link rel="stylesheet" href="https://assets-cdn.github.com/assets/gist-embed-73f377772c960197b2c1164d46034c3a289474497809f5014ad77b507a7d6c96.css"></p><div id="gist1519448" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-gistfile1-js" class="file">
    

  <div itemprop="text" class="blob-wrapper data type-javascript">
      <table class="highlight tab-size js-file-line-container" data-tab-size="8">
      <tbody><tr>
        <td id="file-gistfile1-js-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-gistfile1-js-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k">var</span> <span class="pl-en">forEach</span> <span class="pl-k">=</span> <span class="pl-k">function</span> (<span class="pl-smi">list</span>, <span class="pl-smi">action</span>) {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-gistfile1-js-LC2" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">for</span> (<span class="pl-k">var</span> i <span class="pl-k">=</span> <span class="pl-c1">0</span>; i <span class="pl-k">&lt;</span> <span class="pl-smi">list</span>.<span class="pl-c1">length</span>; i<span class="pl-k">++</span>) {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-gistfile1-js-LC3" class="blob-code blob-code-inner js-file-line">    <span class="pl-en">action</span>(list[i]);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-gistfile1-js-LC4" class="blob-code blob-code-inner js-file-line">  }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-gistfile1-js-LC5" class="blob-code blob-code-inner js-file-line">};</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-gistfile1-js-LC6" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-gistfile1-js-LC7" class="blob-code blob-code-inner js-file-line"><span class="pl-k">var</span> <span class="pl-en">map</span> <span class="pl-k">=</span> <span class="pl-k">function</span> (<span class="pl-smi">mappingFunction</span>, <span class="pl-smi">list</span>) {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-gistfile1-js-LC8" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">var</span> result <span class="pl-k">=</span> [];</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-gistfile1-js-LC9" class="blob-code blob-code-inner js-file-line">  <span class="pl-en">forEach</span>(list, <span class="pl-k">function</span> (<span class="pl-smi">item</span>) {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-gistfile1-js-LC10" class="blob-code blob-code-inner js-file-line">    <span class="pl-smi">result</span>.<span class="pl-c1">push</span>(<span class="pl-en">mappingFunction</span>(item));</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-gistfile1-js-LC11" class="blob-code blob-code-inner js-file-line">  });</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-gistfile1-js-LC12" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">return</span> result;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L13" class="blob-num js-line-number" data-line-number="13"></td>
        <td id="file-gistfile1-js-LC13" class="blob-code blob-code-inner js-file-line">};</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L14" class="blob-num js-line-number" data-line-number="14"></td>
        <td id="file-gistfile1-js-LC14" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L15" class="blob-num js-line-number" data-line-number="15"></td>
        <td id="file-gistfile1-js-LC15" class="blob-code blob-code-inner js-file-line"><span class="pl-k">var</span> <span class="pl-en">doubleIt</span> <span class="pl-k">=</span> <span class="pl-k">function</span> (<span class="pl-smi">item</span>) {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L16" class="blob-num js-line-number" data-line-number="16"></td>
        <td id="file-gistfile1-js-LC16" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">if</span> (<span class="pl-k">typeof</span> item <span class="pl-k">===</span> <span class="pl-s"><span class="pl-pds">"</span>number<span class="pl-pds">"</span></span>) {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L17" class="blob-num js-line-number" data-line-number="17"></td>
        <td id="file-gistfile1-js-LC17" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">return</span> item <span class="pl-k">*</span> <span class="pl-c1">2</span>;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L18" class="blob-num js-line-number" data-line-number="18"></td>
        <td id="file-gistfile1-js-LC18" class="blob-code blob-code-inner js-file-line">  }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L19" class="blob-num js-line-number" data-line-number="19"></td>
        <td id="file-gistfile1-js-LC19" class="blob-code blob-code-inner js-file-line">};</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L20" class="blob-num js-line-number" data-line-number="20"></td>
        <td id="file-gistfile1-js-LC20" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L21" class="blob-num js-line-number" data-line-number="21"></td>
        <td id="file-gistfile1-js-LC21" class="blob-code blob-code-inner js-file-line"><span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-en">map</span>(doubleIt, [<span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>, <span class="pl-c1">4</span>, <span class="pl-s"><span class="pl-pds">"</span>WTF<span class="pl-pds">"</span></span>]));</td>
      </tr>
</tbody></table>

  </div>

  </div>
  
</div>

      </div>
      <div class="gist-meta">
        <a href="https://gist.github.com/Srirangan/1519448/raw/6fd620f556d02e7875cf3faffacb325eca588b09/gistfile1.js" style="float:right">view raw</a>
        <a href="https://gist.github.com/Srirangan/1519448#file-gistfile1-js">gistfile1.js</a>
        hosted with ? by <a href="https://github.com">GitHub</a>
      </div>
    </div>
</div>

  <link rel="stylesheet" href="https://gist.github.com/stylesheets/gist/embed.css">
<p></p>
<p></p>
<p>Notice we reuse the <code>forEach</code> function from the previous example. Our <code>map</code> function takes in
  two arguments, the first one being the <code>mappingFunction</code> that is to be applied on every item of the second
  argument <code>list</code>.</p>
<p>The implementation for <code>map</code> is straightforward. We prepare an array result, iterate through the list,
  call the <code>mappingFunction</code> for each item in <code>list</code>, push the result in the result array return
  it when all done.</p>
<p>As an example, we are calling map function and passing the function <code>doubleIt</code> as the
  <code>mapperFunction</code> on each item of an anonymous list.</p>
<p>Time for the <code>reduce</code> function. What is the reduce algorithm? The <code>reduce</code> function will be
  given a <code>combine</code> function, a <code>base</code> value and a <code>list</code>. We need to apply the <code>combine</code>
  function on the base value and each value in the list and finally return the result. In short, Reduce function takes
  in a list, combines it and gives us a single result.</p>
<p>
  <link rel="stylesheet" href="https://assets-cdn.github.com/assets/gist-embed-73f377772c960197b2c1164d46034c3a289474497809f5014ad77b507a7d6c96.css"></p><div id="gist1519449" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-gistfile1-js" class="file">
    

  <div itemprop="text" class="blob-wrapper data type-javascript">
      <table class="highlight tab-size js-file-line-container" data-tab-size="8">
      <tbody><tr>
        <td id="file-gistfile1-js-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-gistfile1-js-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k">var</span> <span class="pl-en">forEach</span> <span class="pl-k">=</span> <span class="pl-k">function</span> (<span class="pl-smi">list</span>, <span class="pl-smi">action</span>) {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-gistfile1-js-LC2" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">for</span> (<span class="pl-k">var</span> i <span class="pl-k">=</span> <span class="pl-c1">0</span>; i <span class="pl-k">&lt;</span> <span class="pl-smi">list</span>.<span class="pl-c1">length</span>; i<span class="pl-k">++</span>) {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-gistfile1-js-LC3" class="blob-code blob-code-inner js-file-line">    <span class="pl-en">action</span>(list[i]);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-gistfile1-js-LC4" class="blob-code blob-code-inner js-file-line">  }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-gistfile1-js-LC5" class="blob-code blob-code-inner js-file-line">};</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-gistfile1-js-LC6" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-gistfile1-js-LC7" class="blob-code blob-code-inner js-file-line"><span class="pl-k">var</span> <span class="pl-en">reduce</span> <span class="pl-k">=</span> <span class="pl-k">function</span> (<span class="pl-smi">combine</span>, <span class="pl-smi">base</span>, <span class="pl-smi">list</span>) {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-gistfile1-js-LC8" class="blob-code blob-code-inner js-file-line">  <span class="pl-en">forEach</span>(list, <span class="pl-k">function</span> (<span class="pl-smi">item</span>) {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-gistfile1-js-LC9" class="blob-code blob-code-inner js-file-line">    base <span class="pl-k">=</span> <span class="pl-en">combine</span>(base, item);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-gistfile1-js-LC10" class="blob-code blob-code-inner js-file-line">  });</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-gistfile1-js-LC11" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">return</span> base;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-gistfile1-js-LC12" class="blob-code blob-code-inner js-file-line">};</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L13" class="blob-num js-line-number" data-line-number="13"></td>
        <td id="file-gistfile1-js-LC13" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L14" class="blob-num js-line-number" data-line-number="14"></td>
        <td id="file-gistfile1-js-LC14" class="blob-code blob-code-inner js-file-line"><span class="pl-k">var</span> <span class="pl-en">countNegativeNumbers</span> <span class="pl-k">=</span> <span class="pl-k">function</span> (<span class="pl-smi">negativeNumbersTillNow</span>, <span class="pl-smi">currentNumber</span>) {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L15" class="blob-num js-line-number" data-line-number="15"></td>
        <td id="file-gistfile1-js-LC15" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">if</span> (<span class="pl-k">typeof</span> currentNumber <span class="pl-k">===</span> <span class="pl-s"><span class="pl-pds">"</span>number<span class="pl-pds">"</span></span> <span class="pl-k">&amp;&amp;</span> currentNumber <span class="pl-k">&lt;</span> <span class="pl-c1">0</span>) {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L16" class="blob-num js-line-number" data-line-number="16"></td>
        <td id="file-gistfile1-js-LC16" class="blob-code blob-code-inner js-file-line">    negativeNumbersTillNow <span class="pl-k">+=</span> <span class="pl-c1">1</span>;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L17" class="blob-num js-line-number" data-line-number="17"></td>
        <td id="file-gistfile1-js-LC17" class="blob-code blob-code-inner js-file-line">  }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L18" class="blob-num js-line-number" data-line-number="18"></td>
        <td id="file-gistfile1-js-LC18" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">return</span> negativeNumbersTillNow;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L19" class="blob-num js-line-number" data-line-number="19"></td>
        <td id="file-gistfile1-js-LC19" class="blob-code blob-code-inner js-file-line">};</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L20" class="blob-num js-line-number" data-line-number="20"></td>
        <td id="file-gistfile1-js-LC20" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L21" class="blob-num js-line-number" data-line-number="21"></td>
        <td id="file-gistfile1-js-LC21" class="blob-code blob-code-inner js-file-line"><span class="pl-k">var</span> initialCount <span class="pl-k">=</span> <span class="pl-c1">0</span>;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L22" class="blob-num js-line-number" data-line-number="22"></td>
        <td id="file-gistfile1-js-LC22" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L23" class="blob-num js-line-number" data-line-number="23"></td>
        <td id="file-gistfile1-js-LC23" class="blob-code blob-code-inner js-file-line"><span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-en">reduce</span>(countNegativeNumbers, initialCount, [<span class="pl-c1">1</span>, <span class="pl-k">-</span><span class="pl-c1">1</span>, <span class="pl-c1">0</span>, <span class="pl-c1">45</span>, <span class="pl-s"><span class="pl-pds">"</span>-42<span class="pl-pds">"</span></span>, <span class="pl-k">-</span><span class="pl-c1">42</span>]));</td>
      </tr>
</tbody></table>

  </div>

  </div>
  
</div>

      </div>
      <div class="gist-meta">
        <a href="https://gist.github.com/Srirangan/1519449/raw/fef3a8bbb47e85708c387b1538ce8c815d516dda/gistfile1.js" style="float:right">view raw</a>
        <a href="https://gist.github.com/Srirangan/1519449#file-gistfile1-js">gistfile1.js</a>
        hosted with ? by <a href="https://github.com">GitHub</a>
      </div>
    </div>
</div>

  <link rel="stylesheet" href="https://gist.github.com/stylesheets/gist/embed.css">
<p></p>
<p></p>
<p>This solution again makes use of the previous create <code>forEach</code> function. Our <code>reduce</code> function
  is simple, it iterates through the <code>list</code>, applies <code>combine</code> on <code>base</code> and each list
  item, stores the result in base and returns it after completion.</p>
<p>As a usage example, we use <code>reduce</code> to get a count of the negative numbers in a list.</p>
<p>These two examples are fairly simple and still show us how, with functional programming, we can effectively abstract
  out algorithms as functions, use them as and when required and still retain simplicility and readability in the
  code.</p>
<hr>
<h2>Closures in JavaScript</h2>
<p>If you've heard of Functional Programming, there's a very good chance you've also heard about
  <strong>closures</strong>. They are often mentioned in the same breath.</p>
<p>But what are closures? Think of closures as a composite of two things:</p>
<ol>
  <li>A function being returned by another function</li>
  <li>A closed environment in which this returned function is forced to execute</li>
</ol>
<p>This is what a closure is.</p>
<p>In our first example of a closure implementation, we have <code>getAreaFunction</code> which reads the shape argument
  and returns an appropriate area function.</p>
<p>
  <link rel="stylesheet" href="https://assets-cdn.github.com/assets/gist-embed-73f377772c960197b2c1164d46034c3a289474497809f5014ad77b507a7d6c96.css"></p><div id="gist1519450" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-gistfile1-js" class="file">
    

  <div itemprop="text" class="blob-wrapper data type-javascript">
      <table class="highlight tab-size js-file-line-container" data-tab-size="8">
      <tbody><tr>
        <td id="file-gistfile1-js-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-gistfile1-js-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k">const</span> <span class="pl-c1">CIRCLE</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>circle<span class="pl-pds">"</span></span>;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-gistfile1-js-LC2" class="blob-code blob-code-inner js-file-line"><span class="pl-k">const</span> <span class="pl-c1">SQUARE</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>square<span class="pl-pds">"</span></span>;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-gistfile1-js-LC3" class="blob-code blob-code-inner js-file-line"><span class="pl-k">const</span> <span class="pl-c1">RECTANGLE</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>rectangle<span class="pl-pds">"</span></span>;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-gistfile1-js-LC4" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-gistfile1-js-LC5" class="blob-code blob-code-inner js-file-line"><span class="pl-k">var</span> <span class="pl-en">getAreaFunction</span> <span class="pl-k">=</span> <span class="pl-k">function</span> (<span class="pl-smi">shape</span>) {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-gistfile1-js-LC6" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">return</span> <span class="pl-k">function</span> () {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-gistfile1-js-LC7" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">switch</span> (shape) {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-gistfile1-js-LC8" class="blob-code blob-code-inner js-file-line">      <span class="pl-k">case</span> CIRCLE<span class="pl-k">:</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-gistfile1-js-LC9" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> <span class="pl-c1">Math</span>.<span class="pl-c1">PI</span> <span class="pl-k">*</span> <span class="pl-v">arguments</span>[<span class="pl-c1">0</span>] <span class="pl-k">*</span> <span class="pl-v">arguments</span>[<span class="pl-c1">0</span>];</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-gistfile1-js-LC10" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">break</span>;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-gistfile1-js-LC11" class="blob-code blob-code-inner js-file-line">      <span class="pl-k">case</span> SQUARE<span class="pl-k">:</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-gistfile1-js-LC12" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> <span class="pl-v">arguments</span>[<span class="pl-c1">0</span>] <span class="pl-k">*</span> <span class="pl-v">arguments</span>[<span class="pl-c1">0</span>];</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L13" class="blob-num js-line-number" data-line-number="13"></td>
        <td id="file-gistfile1-js-LC13" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">break</span>;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L14" class="blob-num js-line-number" data-line-number="14"></td>
        <td id="file-gistfile1-js-LC14" class="blob-code blob-code-inner js-file-line">      <span class="pl-k">case</span> RECTANGLE<span class="pl-k">:</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L15" class="blob-num js-line-number" data-line-number="15"></td>
        <td id="file-gistfile1-js-LC15" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> <span class="pl-v">arguments</span>[<span class="pl-c1">0</span>] <span class="pl-k">*</span> <span class="pl-v">arguments</span>[<span class="pl-c1">1</span>];</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L16" class="blob-num js-line-number" data-line-number="16"></td>
        <td id="file-gistfile1-js-LC16" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">break</span>;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L17" class="blob-num js-line-number" data-line-number="17"></td>
        <td id="file-gistfile1-js-LC17" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L18" class="blob-num js-line-number" data-line-number="18"></td>
        <td id="file-gistfile1-js-LC18" class="blob-code blob-code-inner js-file-line">  };</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L19" class="blob-num js-line-number" data-line-number="19"></td>
        <td id="file-gistfile1-js-LC19" class="blob-code blob-code-inner js-file-line">};</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L20" class="blob-num js-line-number" data-line-number="20"></td>
        <td id="file-gistfile1-js-LC20" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L21" class="blob-num js-line-number" data-line-number="21"></td>
        <td id="file-gistfile1-js-LC21" class="blob-code blob-code-inner js-file-line"><span class="pl-k">var</span> getAreaOfCircle <span class="pl-k">=</span> <span class="pl-en">getAreaFunction</span>(<span class="pl-c1">CIRCLE</span>);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L22" class="blob-num js-line-number" data-line-number="22"></td>
        <td id="file-gistfile1-js-LC22" class="blob-code blob-code-inner js-file-line"><span class="pl-k">var</span> getAreaOfSquare <span class="pl-k">=</span> <span class="pl-en">getAreaFunction</span>(<span class="pl-c1">SQUARE</span>);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L23" class="blob-num js-line-number" data-line-number="23"></td>
        <td id="file-gistfile1-js-LC23" class="blob-code blob-code-inner js-file-line"><span class="pl-k">var</span> getAreaOfRectangle <span class="pl-k">=</span> <span class="pl-en">getAreaFunction</span>(<span class="pl-c1">RECTANGLE</span>);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L24" class="blob-num js-line-number" data-line-number="24"></td>
        <td id="file-gistfile1-js-LC24" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L25" class="blob-num js-line-number" data-line-number="25"></td>
        <td id="file-gistfile1-js-LC25" class="blob-code blob-code-inner js-file-line"><span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-en">getAreaOfCircle</span>(<span class="pl-c1">50</span>));</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L26" class="blob-num js-line-number" data-line-number="26"></td>
        <td id="file-gistfile1-js-LC26" class="blob-code blob-code-inner js-file-line"><span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-en">getAreaOfSquare</span>(<span class="pl-c1">50</span>));</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L27" class="blob-num js-line-number" data-line-number="27"></td>
        <td id="file-gistfile1-js-LC27" class="blob-code blob-code-inner js-file-line"><span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-en">getAreaOfRectangle</span>(<span class="pl-c1">50</span>, <span class="pl-c1">20</span>));</td>
      </tr>
</tbody></table>

  </div>

  </div>
  
</div>

      </div>
      <div class="gist-meta">
        <a href="https://gist.github.com/Srirangan/1519450/raw/16f036616198096a66ea180cf725d272395cb7d7/gistfile1.js" style="float:right">view raw</a>
        <a href="https://gist.github.com/Srirangan/1519450#file-gistfile1-js">gistfile1.js</a>
        hosted with ? by <a href="https://github.com">GitHub</a>
      </div>
    </div>
</div>

  <link rel="stylesheet" href="https://gist.github.com/stylesheets/gist/embed.css">
<p></p>
<p></p>
<p>Notice how <code>getAreaFunction</code> returns an anonymous function. This returned function contains a switch case
  on shape which is available in the <em>environment</em>.</p>
<p>Finally, of course, we see how to use the closure as a <em>function factory</em> to get area functions for different
  types of shapes.</p>
<hr>
<p>In our second closure example, we see how closures are used to implement private class members in JavaScript.</p>
<p>
  <link rel="stylesheet" href="https://assets-cdn.github.com/assets/gist-embed-73f377772c960197b2c1164d46034c3a289474497809f5014ad77b507a7d6c96.css"></p><div id="gist1519451" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-gistfile1-js" class="file">
    

  <div itemprop="text" class="blob-wrapper data type-javascript">
      <table class="highlight tab-size js-file-line-container" data-tab-size="8">
      <tbody><tr>
        <td id="file-gistfile1-js-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-gistfile1-js-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k">const</span> <span class="pl-c1">CIRCLE</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>circle<span class="pl-pds">"</span></span>;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-gistfile1-js-LC2" class="blob-code blob-code-inner js-file-line"><span class="pl-k">const</span> <span class="pl-c1">SQUARE</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>square<span class="pl-pds">"</span></span>;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-gistfile1-js-LC3" class="blob-code blob-code-inner js-file-line"><span class="pl-k">const</span> <span class="pl-c1">RECTANGLE</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>rectangle<span class="pl-pds">"</span></span>;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-gistfile1-js-LC4" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-gistfile1-js-LC5" class="blob-code blob-code-inner js-file-line"><span class="pl-k">var</span> <span class="pl-en">getAreaFunction</span> <span class="pl-k">=</span> <span class="pl-k">function</span> (<span class="pl-smi">shape</span>) {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-gistfile1-js-LC6" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">return</span> <span class="pl-k">function</span> () {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-gistfile1-js-LC7" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">switch</span> (shape) {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-gistfile1-js-LC8" class="blob-code blob-code-inner js-file-line">      <span class="pl-k">case</span> CIRCLE<span class="pl-k">:</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-gistfile1-js-LC9" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> <span class="pl-c1">Math</span>.<span class="pl-c1">PI</span> <span class="pl-k">*</span> <span class="pl-v">arguments</span>[<span class="pl-c1">0</span>] <span class="pl-k">*</span> <span class="pl-v">arguments</span>[<span class="pl-c1">0</span>];</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-gistfile1-js-LC10" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">break</span>;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-gistfile1-js-LC11" class="blob-code blob-code-inner js-file-line">      <span class="pl-k">case</span> SQUARE<span class="pl-k">:</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-gistfile1-js-LC12" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> <span class="pl-v">arguments</span>[<span class="pl-c1">0</span>] <span class="pl-k">*</span> <span class="pl-v">arguments</span>[<span class="pl-c1">0</span>];</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L13" class="blob-num js-line-number" data-line-number="13"></td>
        <td id="file-gistfile1-js-LC13" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">break</span>;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L14" class="blob-num js-line-number" data-line-number="14"></td>
        <td id="file-gistfile1-js-LC14" class="blob-code blob-code-inner js-file-line">      <span class="pl-k">case</span> RECTANGLE<span class="pl-k">:</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L15" class="blob-num js-line-number" data-line-number="15"></td>
        <td id="file-gistfile1-js-LC15" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> <span class="pl-v">arguments</span>[<span class="pl-c1">0</span>] <span class="pl-k">*</span> <span class="pl-v">arguments</span>[<span class="pl-c1">1</span>];</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L16" class="blob-num js-line-number" data-line-number="16"></td>
        <td id="file-gistfile1-js-LC16" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">break</span>;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L17" class="blob-num js-line-number" data-line-number="17"></td>
        <td id="file-gistfile1-js-LC17" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L18" class="blob-num js-line-number" data-line-number="18"></td>
        <td id="file-gistfile1-js-LC18" class="blob-code blob-code-inner js-file-line">  };</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L19" class="blob-num js-line-number" data-line-number="19"></td>
        <td id="file-gistfile1-js-LC19" class="blob-code blob-code-inner js-file-line">};</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L20" class="blob-num js-line-number" data-line-number="20"></td>
        <td id="file-gistfile1-js-LC20" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L21" class="blob-num js-line-number" data-line-number="21"></td>
        <td id="file-gistfile1-js-LC21" class="blob-code blob-code-inner js-file-line"><span class="pl-k">var</span> <span class="pl-en">Shape</span> <span class="pl-k">=</span> <span class="pl-k">function</span> (<span class="pl-smi">type</span>) {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L22" class="blob-num js-line-number" data-line-number="22"></td>
        <td id="file-gistfile1-js-LC22" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">var</span> area <span class="pl-k">=</span> <span class="pl-en">getAreaFunction</span>(type);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L23" class="blob-num js-line-number" data-line-number="23"></td>
        <td id="file-gistfile1-js-LC23" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">return</span> {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L24" class="blob-num js-line-number" data-line-number="24"></td>
        <td id="file-gistfile1-js-LC24" class="blob-code blob-code-inner js-file-line">    <span class="pl-en">getArea</span><span class="pl-k">:</span><span class="pl-k">function</span> () {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L25" class="blob-num js-line-number" data-line-number="25"></td>
        <td id="file-gistfile1-js-LC25" class="blob-code blob-code-inner js-file-line">      <span class="pl-k">return</span> <span class="pl-c1">Math</span>.<span class="pl-c1">round</span>(<span class="pl-c1">Number</span>(<span class="pl-smi">area</span>.<span class="pl-c1">apply</span>(<span class="pl-v">this</span>, <span class="pl-v">arguments</span>)));</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L26" class="blob-num js-line-number" data-line-number="26"></td>
        <td id="file-gistfile1-js-LC26" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L27" class="blob-num js-line-number" data-line-number="27"></td>
        <td id="file-gistfile1-js-LC27" class="blob-code blob-code-inner js-file-line">  };</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L28" class="blob-num js-line-number" data-line-number="28"></td>
        <td id="file-gistfile1-js-LC28" class="blob-code blob-code-inner js-file-line">};</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L29" class="blob-num js-line-number" data-line-number="29"></td>
        <td id="file-gistfile1-js-LC29" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L30" class="blob-num js-line-number" data-line-number="30"></td>
        <td id="file-gistfile1-js-LC30" class="blob-code blob-code-inner js-file-line"><span class="pl-k">var</span> aCircle <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">Shape</span>(<span class="pl-c1">CIRCLE</span>);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L31" class="blob-num js-line-number" data-line-number="31"></td>
        <td id="file-gistfile1-js-LC31" class="blob-code blob-code-inner js-file-line"><span class="pl-k">var</span> aSquare <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">Shape</span>(<span class="pl-c1">SQUARE</span>);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L32" class="blob-num js-line-number" data-line-number="32"></td>
        <td id="file-gistfile1-js-LC32" class="blob-code blob-code-inner js-file-line"><span class="pl-k">var</span> aRectangle <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">Shape</span>(<span class="pl-c1">RECTANGLE</span>);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L33" class="blob-num js-line-number" data-line-number="33"></td>
        <td id="file-gistfile1-js-LC33" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L34" class="blob-num js-line-number" data-line-number="34"></td>
        <td id="file-gistfile1-js-LC34" class="blob-code blob-code-inner js-file-line"><span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-smi">aCircle</span>.<span class="pl-en">getArea</span>(<span class="pl-c1">50</span>));</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L35" class="blob-num js-line-number" data-line-number="35"></td>
        <td id="file-gistfile1-js-LC35" class="blob-code blob-code-inner js-file-line"><span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-smi">aSquare</span>.<span class="pl-en">getArea</span>(<span class="pl-c1">50</span>));</td>
      </tr>
      <tr>
        <td id="file-gistfile1-js-L36" class="blob-num js-line-number" data-line-number="36"></td>
        <td id="file-gistfile1-js-LC36" class="blob-code blob-code-inner js-file-line"><span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-smi">aRectangle</span>.<span class="pl-en">getArea</span>(<span class="pl-c1">50</span>, <span class="pl-c1">20</span>));</td>
      </tr>
</tbody></table>

  </div>

  </div>
  
</div>

      </div>
      <div class="gist-meta">
        <a href="https://gist.github.com/Srirangan/1519451/raw/cce62d6c5500d88f5302fd8c71502cd711135e67/gistfile1.js" style="float:right">view raw</a>
        <a href="https://gist.github.com/Srirangan/1519451#file-gistfile1-js">gistfile1.js</a>
        hosted with ? by <a href="https://github.com">GitHub</a>
      </div>
    </div>
</div>

  <link rel="stylesheet" href="https://gist.github.com/stylesheets/gist/embed.css">
<p></p>
<p></p>
<p>I'll not explain Object Oriented Programming implementations in JavaScript as part of this post. They aren't complex
  but are different, surely worthy of a dedicated post.</p>
<p>If you're already familiar with OOP concepts and their implementations in JavaScript, note how the class
  <code>Shape</code> (which is, yes, expressed as a function) contains a private function <code>area</code> and isn't
  exposed.</p>
<p>Instead an instance function <code>getArea</code> is available which does internally make use of the private function
  <code>area</code>.</p>
<p>This is one of the most common use-cases of closures in JavaScript.</p>
<hr>
<p>Another classic use-case for closures in JavaScript is to avoid the annoying problem that crops up every time you try
  to set event handlers within a loop.</p>
<p>Consider the following example:</p>
<p>
  <link rel="stylesheet" href="https://assets-cdn.github.com/assets/gist-embed-73f377772c960197b2c1164d46034c3a289474497809f5014ad77b507a7d6c96.css"></p><div id="gist1519452" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-gistfile1-html" class="file">
    

  <div itemprop="text" class="blob-wrapper data type-html">
      <table class="highlight tab-size js-file-line-container" data-tab-size="8">
      <tbody><tr>
        <td id="file-gistfile1-html-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-gistfile1-html-LC1" class="blob-code blob-code-inner js-file-line">&lt;<span class="pl-ent">div</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>redBox1<span class="pl-pds">"</span></span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>redBox<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">div</span>&gt;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-html-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-gistfile1-html-LC2" class="blob-code blob-code-inner js-file-line">&lt;<span class="pl-ent">div</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>redBox2<span class="pl-pds">"</span></span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>redBox<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">div</span>&gt;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-html-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-gistfile1-html-LC3" class="blob-code blob-code-inner js-file-line">&lt;<span class="pl-ent">div</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>redBox3<span class="pl-pds">"</span></span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>redBox<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">div</span>&gt;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-html-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-gistfile1-html-LC4" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-gistfile1-html-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-gistfile1-html-LC5" class="blob-code blob-code-inner js-file-line">&lt;<span class="pl-ent">div</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>greenBox1<span class="pl-pds">"</span></span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>greenBox<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">div</span>&gt;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-html-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-gistfile1-html-LC6" class="blob-code blob-code-inner js-file-line">&lt;<span class="pl-ent">div</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>greenBox2<span class="pl-pds">"</span></span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>greenBox<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">div</span>&gt;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-html-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-gistfile1-html-LC7" class="blob-code blob-code-inner js-file-line">&lt;<span class="pl-ent">div</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>greenBox3<span class="pl-pds">"</span></span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>greenBox<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">div</span>&gt;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-html-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-gistfile1-html-LC8" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-gistfile1-html-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-gistfile1-html-LC9" class="blob-code blob-code-inner js-file-line"><span class="pl-s1">&lt;<span class="pl-ent">script</span>&gt;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-html-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-gistfile1-html-LC10" class="blob-code blob-code-inner js-file-line"><span class="pl-s1">  (<span class="pl-k">function</span> () {</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-html-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-gistfile1-html-LC11" class="blob-code blob-code-inner js-file-line"><span class="pl-s1">    <span class="pl-k">for</span> (<span class="pl-k">var</span> i <span class="pl-k">=</span> <span class="pl-c1">1</span>; i <span class="pl-k">&lt;=</span> <span class="pl-c1">3</span>; i<span class="pl-k">++</span>) {</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-html-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-gistfile1-html-LC12" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-html-L13" class="blob-num js-line-number" data-line-number="13"></td>
        <td id="file-gistfile1-html-LC13" class="blob-code blob-code-inner js-file-line"><span class="pl-s1">      <span class="pl-k">var</span> redBoxId <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>redBox<span class="pl-pds">"</span></span> <span class="pl-k">+</span> i;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-html-L14" class="blob-num js-line-number" data-line-number="14"></td>
        <td id="file-gistfile1-html-LC14" class="blob-code blob-code-inner js-file-line"><span class="pl-s1">      <span class="pl-c1">document</span>.<span class="pl-c1">getElementById</span>(redBoxId).<span class="pl-en">onclick</span> <span class="pl-k">=</span> <span class="pl-k">function</span> () {</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-html-L15" class="blob-num js-line-number" data-line-number="15"></td>
        <td id="file-gistfile1-html-LC15" class="blob-code blob-code-inner js-file-line"><span class="pl-s1">        <span class="pl-en">console</span>.<span class="pl-c1">log</span>(redBoxId <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span> was clicked<span class="pl-pds">"</span></span>);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-html-L16" class="blob-num js-line-number" data-line-number="16"></td>
        <td id="file-gistfile1-html-LC16" class="blob-code blob-code-inner js-file-line"><span class="pl-s1">      };</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-html-L17" class="blob-num js-line-number" data-line-number="17"></td>
        <td id="file-gistfile1-html-LC17" class="blob-code blob-code-inner js-file-line"><span class="pl-s1"></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-html-L18" class="blob-num js-line-number" data-line-number="18"></td>
        <td id="file-gistfile1-html-LC18" class="blob-code blob-code-inner js-file-line"><span class="pl-s1">      <span class="pl-k">var</span> greenBoxId <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>greenBox<span class="pl-pds">"</span></span> <span class="pl-k">+</span> i;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-html-L19" class="blob-num js-line-number" data-line-number="19"></td>
        <td id="file-gistfile1-html-LC19" class="blob-code blob-code-inner js-file-line"><span class="pl-s1">      <span class="pl-c1">document</span>.<span class="pl-c1">getElementById</span>(greenBoxId).<span class="pl-smi">onclick</span> <span class="pl-k">=</span> (<span class="pl-k">function</span> (<span class="pl-smi">greenBoxId</span>) {</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-html-L20" class="blob-num js-line-number" data-line-number="20"></td>
        <td id="file-gistfile1-html-LC20" class="blob-code blob-code-inner js-file-line"><span class="pl-s1">        <span class="pl-k">return</span> <span class="pl-k">function</span> () {</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-html-L21" class="blob-num js-line-number" data-line-number="21"></td>
        <td id="file-gistfile1-html-LC21" class="blob-code blob-code-inner js-file-line"><span class="pl-s1">          <span class="pl-en">console</span>.<span class="pl-c1">log</span>(greenBoxId <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span> was clicked<span class="pl-pds">"</span></span>);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-html-L22" class="blob-num js-line-number" data-line-number="22"></td>
        <td id="file-gistfile1-html-LC22" class="blob-code blob-code-inner js-file-line"><span class="pl-s1">        }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-html-L23" class="blob-num js-line-number" data-line-number="23"></td>
        <td id="file-gistfile1-html-LC23" class="blob-code blob-code-inner js-file-line"><span class="pl-s1">      })(greenBoxId);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-html-L24" class="blob-num js-line-number" data-line-number="24"></td>
        <td id="file-gistfile1-html-LC24" class="blob-code blob-code-inner js-file-line"><span class="pl-s1">    }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-html-L25" class="blob-num js-line-number" data-line-number="25"></td>
        <td id="file-gistfile1-html-LC25" class="blob-code blob-code-inner js-file-line"><span class="pl-s1">  })();</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-html-L26" class="blob-num js-line-number" data-line-number="26"></td>
        <td id="file-gistfile1-html-LC26" class="blob-code blob-code-inner js-file-line"><span class="pl-s1">&lt;/<span class="pl-ent">script</span>&gt;</span></td>
      </tr>
</tbody></table>

  </div>

  </div>
  
</div>

      </div>
      <div class="gist-meta">
        <a href="https://gist.github.com/Srirangan/1519452/raw/5b57ba824d1ea61e12541b83a33e98b03e20cadb/gistfile1.html" style="float:right">view raw</a>
        <a href="https://gist.github.com/Srirangan/1519452#file-gistfile1-html">gistfile1.html</a>
        hosted with ? by <a href="https://github.com">GitHub</a>
      </div>
    </div>
</div>

  <link rel="stylesheet" href="https://gist.github.com/stylesheets/gist/embed.css">
<p></p>
<p></p>
<p>In the for loop, we first assign an <code>onclick</code> handler to all the red boxes. However, thanks to functional
  scoping, all three red boxes have onclick handlers with <code>redBoxId</code> value 3.</p>
<p>However for green boxes we assign <code>onclick</code> handlers in a slightly different manner. We have a self
  executing anonymous function which returns another function which then is assigned as the onclick handler.</p>
<p>Due to functional scopes, each <code>onclick</code> handler for the green boxes have correct values for <code>greenBoxId</code>.
</p>
<hr>
<p>I realize this has been a fairly lengthy post. Will end it now. Hopefully this would have served as a good enough
  introduction to Functional Programming concepts and their corresponding implementations in JavaScript.</p>
<p>All code available on <a href="https://github.com/Srirangan/javascript-playground/tree/master/functional-javascript">GitHub</a>.
</p>

		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>An Introduction to Functional JavaScript</h1>
		<div class="post-wrapper">
			<p>You've heard that JavaScript is a functional language, or at least that it's capable of supporting functional programming. But what is functional programming? And for that matter, if you're going to start comparing programming paradigms in general, how is a functional approach different from the JavaScript that you've always written?</p>
<p>Well, the good news is that JavaScript isn't picky when it comes to paradigms. You can mix your imperative, object-oriented, prototypal, and functional code as you see fit, and still get the job done. But the bad news is what that means for your code. JavaScript can support a wide range of programming styles simultaneously within the same codebase, so it's up to you to make the right choices for maintainability, readability, and performance.</p>
<div class='ArticleBox u-inline'><h3 class='ArticleBox_header t-bg'>
                    <span class='ArticleBox_icon fa fa-pencil'></span> More from this author
                 </h3><div class='ArticleBox_content'><ul class='ArticleBox_list t-list'><li><a href='https://www.sitepoint.com/introducing-scrum/?utm_source=sitepoint&amp;utm_medium=relatedinline&amp;utm_term=javascript&amp;utm_campaign=relatedauthor'>Power Up Your Team by Using Scrum Properly</a></li><li><a href='https://www.sitepoint.com/map-reduce-functional-javascript/?utm_source=sitepoint&amp;utm_medium=relatedinline&amp;utm_term=javascript&amp;utm_campaign=relatedauthor'>Using Map and Reduce in Functional JavaScript</a></li><li><a href='https://www.sitepoint.com/why-choose-scrum-for-web-and-mobile-development/?utm_source=sitepoint&amp;utm_medium=relatedinline&amp;utm_term=javascript&amp;utm_campaign=relatedauthor'>Why Choose Scrum for Web and Mobile Development</a></li></ul></div></div>
<p>Functional JavaScript doesn't have to take over an entire project in order to add value. Learning a little about the functional approach can help guide some of the decisions you make as you build your projects, regardless of the way you prefer to structure your code. Learning some functional patterns and techniques can put you well on your way to writing cleaner and more elegant JavaScript regardless of your preferred approach.</p>
<h2 id="imperative-javascript">Imperative JavaScript</h2>
<p>JavaScript first gained popularity as an in-browser language, used primarily for adding simple hover and click effects to elements on a web page. For years, that's most of what people knew about it, and that contributed to the bad reputation JavaScript earned early on.</p>
<p>As developers struggled to match the flexibility of JavaScript against the intricacy of the browser document object model (DOM), actual JavaScript code often looked something like this in the real world:</p>
<pre><code class='language-javascript'>var result;
function getText() {
  var someText = prompt(&quot;Give me something to capitalize&quot;);
  capWords(someText);
  alert(result.join(&quot; &quot;));
};
function capWords(input) {
  var counter;
  var inputArray = input.split(&quot; &quot;);
  var transformed = &quot;&quot;;
  result = [];
  for (counter = 0; counter &lt; inputArray.length; counter++) {
    transformed = [
      inputArray[counter].charAt(0).toUpperCase(), 
      inputArray[counter].substring(1)
    ].join(&quot;&quot;);
    result.push(transformed);
  }
};
document.getElementById(&quot;main_button&quot;).onclick = getText;</code></pre>
<p>So many things are going on in this little snippet of code. Variables are being defined on the global scope. Values are being passed around and modified by functions. DOM methods are being mixed with native JavaScript. The function names are not very descriptive, and that's due in part to the fact that the whole thing relies on a context that may or may not exist. But if you happened to run this in a browser inside an HTML document that defined a <code>&lt;button id="main_button"&gt;</code>, you might get prompted for some text to work with, and then see the an <code>alert</code> with first letter of each of the words in that text capitalized.</p>
<p>Imperative code like this is written to be read and executed from top to bottom (give or take a little <a href="http://www.sitepoint.com/demystifying-javascript-variable-scope-hoisting/">variable hoisting</a>). But there are some improvements we could make to clean it up and make it more readable by taking advantage of JavaScript's object-oriented nature.</p>
<h2 id="object-oriented-javascript">Object-Oriented JavaScript</h2>
<p>After a few years, developers started to notice the problems with imperative coding in a shared environment like the browser. Global variables from one snippet of JavaScript clobbered global variables set by another. The order in which the code was called affected the results in ways that could be unpredictable, especially given the delays introduced by network connections and rendering times.</p>
<p>Eventually, some better practices emerged to help encapsulate JavaScript code and make it play better with the DOM. An updated variation of the same code above, written to an object-oriented standard, might look something like this:</p>
<pre><code class='language-javascript'>(function() {
  &quot;use strict&quot;;
  var SomeText = function(text) {
    this.text = text;
  };
  SomeText.prototype.capify = function(str) {
    var firstLetter = str.charAt(0);
    var remainder = str.substring(1);
    return [firstLetter.toUpperCase(), remainder].join(&quot;&quot;);
  };
  SomeText.prototype.capifyWords = function() {
    var result = [];
    var textArray = this.text.split(&quot; &quot;);
    for (var counter = 0; counter &lt; textArray.length; counter++) {
      result.push(this.capify(textArray[counter]));
    }
    return result.join(&quot; &quot;);
  };

  document.getElementById(&quot;main_button&quot;).addEventListener(&quot;click&quot;, function(e) {
    var something = prompt(&quot;Give me something to capitalize&quot;);
    var newText = new SomeText(something);
    alert(newText.capifyWords());
  });
}());</code></pre>
<p>In this object-oriented version, the constructor function simulates a class to model the object we want. Methods live on the new object's prototype to keep memory use low. And all of the code is isolated in an anonymous immediately-invoked function expression so it doesn't litter the global scope. There's even a <code>"use strict"</code> directive to take advantage of the latest JavaScript engine, and the old-fashioned <code>onclick</code> method has been replaced with a shiny new <code>addEventListener</code>, because who uses IE8 or earlier anymore? A script like this would likely be inserted at the end of the <code>&lt;body&gt;</code> element on an HTML document, to make sure all the DOM had been loaded before it was processed so the <code>&lt;button&gt;</code> it relies on would be available. </p>
<p>But despite all this reconfiguration, there are still many artifacts of the same imperative style that led us here. The methods in the constructor function rely on variables that are scoped to the parent object. There's a looping construct for iterating across all the members of the array of strings. There's a <code>counter</code> variable that serves no purpose other than to increment the progress through the <code>for</code> loop. And there are methods that produce the side effect of modifying variables that exist outside of their own definitions. All of this makes the code more brittle, less portable, and makes it harder to test the methods outside of this narrow context.</p>
<h2 id="functional-javascript">Functional JavaScript</h2>
<p>The object-oriented approach is much cleaner and more modular than the imperative approach we started with, but let's see if we can improve it by addressing some of the drawbacks we discussed. It would be great if we could find ways to take advantage of JavaScript's built-in ability to treat functions as first-class objects so that our code could be cleaner, more stable, and easier to repurpose.</p>
<pre><code class='language-javascript'>(function() {
  &quot;use strict&quot;;
  var capify = function(str) {
    return [str.charAt(0).toUpperCase(), str.substring(1)].join(&quot;&quot;);
  };
  var processWords = function(fn, str) {
    return str.split(&quot; &quot;).map(fn).join(&quot; &quot;);
  };
  document.getElementById(&quot;main_button&quot;).addEventListener(&quot;click&quot;, function(e) {
    var something = prompt(&quot;Give me something to capitalize&quot;);
    alert(processWords(capify, something));
  });
}());</code></pre>
<p>Did you notice how much shorter this version is? We're only defining two functions: <code>capify</code> and <code>processWords</code>. Each of these functions is pure, meaning that they don't rely on the state of the code they're called from. The functions don't create side effects that alter variables outside of themselves. There is one and only one result a function returns for any given set of arguments. Because of these improvements, the new functions are very easy to test, and could be snipped right out of this code and used elsewhere without any modifications. </p>
<p>There might have been one keyword in there that you wouldn't recognize unless you've peeked at some functional code before. We took advantage of the new <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/map">map method</a> on <code>Array</code> to apply a function to each element of the temporary array we created when we split our string. <code>Map</code> is just one of a handful of convenience methods we were given when modern browsers and server-side JavaScript interpreters implemented the ECMAscript 5 standards. Just using <code>map</code> here, in place of a <code>for</code> loop, eliminated the <code>counter</code> variable and helped make our code much cleaner and easier to read.</p>
<h2 id="start-thinking-functionally">Start Thinking Functionally</h2>
<p>You don't have to abandon everything you know to take advantage of the functional paradigm. You can get started thinking about your JavaScript in a functional way by considering a few questions when you write your next program:</p>
<ul>
<li>Are my functions dependent on the context in which they are called, or are they pure and independent? </li>
<li>Can I write these functions in such a way that I could depend on them always returning the same result for a given input?</li>
<li>Am I sure that my functions don't modify anything outside of themselves?</li>
<li>If I wanted to use these functions in another program, would I need to make changes to them?</li>
</ul>
<p>This introduction barely scratches the surface of functional JavaScript, but I hope it whets your appetite to learn more.</p>
			
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>Functional Programming</h1>
		<div class="post-wrapper">
			


<div class="banner">This file is part of the <strong>first
edition</strong> of Eloquent JavaScript. Consider reading the <a href="http://eloquentjavascript.net"><strong>second edition</strong></a>
instead.</div>

<h1><span class="number">Chapter 6: </span>Functional Programming</h1><div class="block"><p><a class="paragraph" href="#p406bc0550dba7201" name="p406bc0550dba7201"> ¶ </a>As programs get bigger, they also become more complex and harder to
understand. We all think ourselves pretty clever, of course, but we
are mere human beings, and even a moderate amount of chaos tends to
baffle us. And then it all goes downhill. Working on something you do
not really understand is a bit like cutting random wires on those
time-activated bombs they always have in movies. If you are lucky, you
might get the right one ? especially if you are the hero of the movie
and strike a suitably dramatic pose ? but there is always the
possibility of blowing everything up.</p><p><a class="paragraph" href="#p61d9c58b7ccd55b" name="p61d9c58b7ccd55b"> ¶ </a>Admittedly, in most cases, breaking a program does not cause any large
explosions. But when a program, by someone's ignorant tinkering, has
degenerated into a ramshackle mass of errors, reshaping it into
something sensible is a terrible labour ? sometimes you might just as
well start over.</p><p><a class="paragraph" href="#pe323e5622f00be3" name="pe323e5622f00be3"> ¶ </a><a name="key1"></a>Thus, the programmer is always looking for ways to keep
the complexity of his programs as low as possible. An important way to
do this is to try and make code more abstract. When writing a program,
it is easy to get sidetracked into small details at every point. You
come across some little issue, and you deal with it, and then proceed
to the next little problem, and so on. This makes the code read like a
grandmother's tale.</p><blockquote>Yes, dear, to make pea soup you will need split peas, the dry kind.
And you have to soak them at least for a night, or you will have to
cook them for hours and hours. I remember one time, when my dull son
tried to make pea soup. Would you believe he hadn't soaked the peas?
We almost broke our teeth, all of us. Anyway, when you have soaked
the peas, and you'll want about a cup of them per person, and pay
attention because they will expand a bit while they are soaking, so
if you aren't careful they will spill out of whatever you use to
hold them, so also use plenty water to soak in, but as I said, about
a cup of them, when they are dry, and after they are soaked you cook
them in four cups of water per cup of dry peas. Let it simmer for
two hours, which means you cover it and keep it barely cooking, and
then add some diced onions, sliced celery stalk, and maybe a carrot
or two and some ham. Let it all cook for a few minutes more, and it
is ready to eat.</blockquote><p><a class="paragraph" href="#p2f9bf5e014dcdc06" name="p2f9bf5e014dcdc06"> ¶ </a>Another way to describe this recipe:</p><blockquote>Per person: one cup dried split peas, half a chopped onion, half a
carrot, a celery stalk, and optionally ham.<br><br>Soak peas overnight, simmer them for two hours in four cups of water
(per person), add vegetables and ham, and cook for ten more minutes.</blockquote><p><a class="paragraph" href="#p4abdc642ee7bc293" name="p4abdc642ee7bc293"> ¶ </a>This is shorter, but if you don't know how to soak peas you'll surely
screw up and put them in too little water. But how to soak peas can be
looked up, and that is the trick. If you assume a certain basic
knowledge in the audience, you can talk in a language that deals with
bigger concepts, and express things in a much shorter and clearer way.
This, more or less, is what abstraction is.</p><p><a class="paragraph" href="#p2bfd98498baedead" name="p2bfd98498baedead"> ¶ </a>How is this far-fetched recipe story relevant to programming? Well,
obviously, the recipe is the program. Furthermore, the basic knowledge
that the cook is supposed to have corresponds to the functions and
other constructs that are available to the programmer. If you remember
the introduction of this book, things like <code>while</code> make it easier to
build loops, and in <a href="chapter4.html">chapter 4</a> we wrote some simple functions in order to
make other functions shorter and more straightforward. Such tools,
some of them made available by the language itself, others built by
the programmer, are used to reduce the amount of uninteresting details
in the rest of the program, and thus make that program easier to work
with.</p></div><hr><div class="block"><p><a class="paragraph" href="#p1029fd844bd24fc8" name="p1029fd844bd24fc8"> ¶ </a><a name="key2"></a>Functional programming, which is the subject
of this chapter, produces abstraction through clever ways of combining
functions. A programmer armed with a repertoire of fundamental
functions and, more importantly, the knowledge on how to use them, is
much more effective than one who starts from scratch. Unfortunately, a
standard JavaScript environment comes with deplorably few essential
functions, so we have to write them ourselves or, which is often
preferable, make use of somebody else's code (more on that in
<a href="chapter9.html">chapter 9</a>).</p><p><a class="paragraph" href="#p5b2b16eeb6c201d1" name="p5b2b16eeb6c201d1"> ¶ </a>There are other popular approaches to abstraction, most notably
object-oriented programming, the subject of <a href="chapter8.html">chapter 8</a>.</p></div><hr><div class="block"><p><a class="paragraph" href="#p755f4be241af5b12" name="p755f4be241af5b12"> ¶ </a>One ugly detail that, if you have any good taste at all, must be
starting to bother you is the endlessly repeated <code>for</code> loop going over
an array: <code>for (var i = 0; i &lt; something.length; i++) ...</code>. Can this
be abstracted?</p><p><a class="paragraph" href="#p6dce7810233c1f28" name="p6dce7810233c1f28"> ¶ </a>The problem is that, whereas most functions just take some values,
combine them, and return something, such a loop contains a piece of
code that it must execute. It is easy to write a function that goes
over an array and prints out every element:</p><pre class="code not-run"><button type="button" title="Run this code" class="codebutton run"></button><button title="Load this code into the console" type="button" class="codebutton load"></button><span class="keyword">function</span> <span class="variable">printArray</span>(<span class="variabledef">array</span>) {
  <span class="keyword">for</span> (<span class="keyword">var</span> <span class="variabledef">i</span> = <span class="atom">0</span>; <span class="localvariable">i</span> &lt; <span class="localvariable">array</span>.<span class="property">length</span>; <span class="localvariable">i</span>++)
    <span class="variable">print</span>(<span class="localvariable">array</span>[<span class="localvariable">i</span>]);
}</pre><p><a class="paragraph" href="#p5e43c3fda6edbd78" name="p5e43c3fda6edbd78"> ¶ </a>But what if we want to do something else than print? Since 'doing
something' can be represented as a function, and functions are also
values, we can pass our action as a function value:</p><pre class="code not-run"><button type="button" title="Run this code" class="codebutton run"></button><button title="Load this code into the console" type="button" class="codebutton load"></button><span class="keyword">function</span> <span class="variable">forEach</span>(<span class="variabledef">array</span>, <span class="variabledef">action</span>) {
  <span class="keyword">for</span> (<span class="keyword">var</span> <span class="variabledef">i</span> = <span class="atom">0</span>; <span class="localvariable">i</span> &lt; <span class="localvariable">array</span>.<span class="property">length</span>; <span class="localvariable">i</span>++)
    <span class="localvariable">action</span>(<span class="localvariable">array</span>[<span class="localvariable">i</span>]);
}

<span class="variable">forEach</span>([<span class="string">"Wampeter"</span>, <span class="string">"Foma"</span>, <span class="string">"Granfalloon"</span>], <span class="variable">print</span>);</pre><p><a class="paragraph" href="#p5c6ce2b695bd142d" name="p5c6ce2b695bd142d"> ¶ </a>And by making use of an anonymous function, something just like a
<code>for</code> loop can be written with less useless details:</p><pre class="code not-run"><button type="button" title="Run this code" class="codebutton run"></button><button title="Load this code into the console" type="button" class="codebutton load"></button><span class="keyword">function</span> <span class="variable">sum</span>(<span class="variabledef">numbers</span>) {
  <span class="keyword">var</span> <span class="variabledef">total</span> = <span class="atom">0</span>;
  <span class="variable">forEach</span>(<span class="localvariable">numbers</span>, <span class="keyword">function</span> (<span class="variabledef">number</span>) {
    <span class="localvariable">total</span> += <span class="localvariable">number</span>;
  });
  <span class="keyword">return</span> <span class="localvariable">total</span>;
}
<span class="variable">show</span>(<span class="variable">sum</span>([<span class="atom">1</span>, <span class="atom">10</span>, <span class="atom">100</span>]));</pre><p><a class="paragraph" href="#p22480fe89f06c197" name="p22480fe89f06c197"> ¶ </a>Note that the variable <code>total</code> is visible inside the anonymous
function because of the lexical scoping rules. Also note that this
version is hardly shorter than the <code>for</code> loop and requires a rather
clunky <code>});</code> at its end ? the brace closes the body of the anonymous
function, the parenthesis closes the function call to <a name="key3"></a><code>forEach</code>, and
the semicolon is needed because this call is a statement.</p><p><a class="paragraph" href="#p58553fdda22a0049" name="p58553fdda22a0049"> ¶ </a>You do get a variable bound to the current element in the array,
<code>number</code>, so there is no need to use <code>numbers[i]</code> anymore, and when
this array is created by evaluating some expression, there is no need
to store it in a variable, because it can be passed to <code>forEach</code>
directly.</p><p><a class="paragraph" href="#p551f69c843687e97" name="p551f69c843687e97"> ¶ </a>The cat-code in <a href="chapter4.html">chapter 4</a> contains a piece like this:</p><pre class="preformatted">var paragraphs = mailArchive[mail].split("\n");
for (var i = 0; i &lt; paragraphs.length; i++)
  handleParagraph(paragraphs[i]);</pre><p><a class="paragraph" href="#pffb217033b4c9e0" name="pffb217033b4c9e0"> ¶ </a>This can now be written as...</p><pre class="preformatted">forEach(mailArchive[mail].split("\n"), handleParagraph);</pre><p><a class="paragraph" href="#p75cea5d2d73e38c4" name="p75cea5d2d73e38c4"> ¶ </a>On the whole, using more abstract (or 'higher level') constructs
results in more information and less noise: The code in <code>sum</code> reads
'<em>for each number in numbers add that number to the total</em>', instead
of... '<em>there is this variable that starts at zero, and it counts
upward to the length of the array called numbers, and for every value
of this variable we look up the corresponding element in the array and
add this to the total</em>'.</p></div><hr><div class="block"><p><a class="paragraph" href="#p177cb39381c8ab4" name="p177cb39381c8ab4"> ¶ </a>What <code>forEach</code> does is take an algorithm, in this case 'going over an
array', and abstract it. The 'gaps' in the algorithm, in this case,
what to do for each of these elements, are filled by functions which
are passed to the algorithm function.</p><p><a class="paragraph" href="#p3d4f511f55eb429c" name="p3d4f511f55eb429c"> ¶ </a>Functions that operate on other functions are called <a name="key4"></a>higher-order
functions. By operating on functions, they can talk about actions on
a whole new level. The <code>makeAddFunction</code> function from <a href="chapter3.html">chapter 3</a> is
also a higher-order function. Instead of taking a function value as an
argument, it produces a new function.</p><p><a class="paragraph" href="#p95f3cd5d57a5d96" name="p95f3cd5d57a5d96"> ¶ </a>Higher-order functions can be used to generalise many algorithms that
regular functions can not easily describe. When you have a repertoire
of these functions at your disposal, it can help you think about your
code in a clearer way: Instead of a messy set of variables and loops,
you can decompose algorithms into a combination of a few fundamental
algorithms, which are invoked by name, and do not have to be typed out
again and again.</p><p><a class="paragraph" href="#p5541a4757333b993" name="p5541a4757333b993"> ¶ </a>Being able to write <em>what</em> we want to do instead of <em>how</em> we do it
means we are working at a higher level of abstraction. In practice,
this means shorter, clearer, and more pleasant code.</p></div><hr><div class="block"><p><a class="paragraph" href="#p59860b27992bc7e4" name="p59860b27992bc7e4"> ¶ </a>Another useful type of higher-order function <em>modifies</em> the function
value it is given:</p><pre class="code not-run"><button type="button" title="Run this code" class="codebutton run"></button><button title="Load this code into the console" type="button" class="codebutton load"></button><span class="keyword">function</span> <span class="variable">negate</span>(<span class="variabledef">func</span>) {
  <span class="keyword">return</span> <span class="keyword">function</span>(<span class="variabledef">x</span>) {
    <span class="keyword">return</span> !<span class="localvariable">func</span>(<span class="localvariable">x</span>);
  };
}
<span class="keyword">var</span> <span class="variable">isNotNaN</span> = <span class="variable">negate</span>(<span class="variable">isNaN</span>);
<span class="variable">show</span>(<span class="variable">isNotNaN</span>(<span class="atom">NaN</span>));</pre><p><a class="paragraph" href="#p6604314a4be645ae" name="p6604314a4be645ae"> ¶ </a>The function returned by <code>negate</code> feeds the argument it is given to
the original function <code>func</code>, and then negates the result. But what if
the function you want to negate takes more than one argument? You can
get access to any arguments passed to a function with the <code>arguments</code>
array, but how do you call a function when you do not know how many
arguments you have?</p><p><a class="paragraph" href="#p254e0cc081a6d7df" name="p254e0cc081a6d7df"> ¶ </a>Functions have a method called <a name="key5"></a><code>apply</code>, which is used for situations
like this. It takes two arguments. The role of the first argument will
be discussed in <a href="chapter8.html">chapter 8</a>, for now we just use <code>null</code> there. The second
argument is an array containing the arguments that the function must
be applied to.</p><pre class="code not-run"><button type="button" title="Run this code" class="codebutton run"></button><button title="Load this code into the console" type="button" class="codebutton load"></button><span class="variable">show</span>(<span class="variable">Math</span>.<span class="property">min</span>.<span class="property">apply</span>(<span class="atom">null</span>, [<span class="atom">5</span>, <span class="atom">6</span>]));

<span class="keyword">function</span> <span class="variable">negate</span>(<span class="variabledef">func</span>) {
  <span class="keyword">return</span> <span class="keyword">function</span>() {
    <span class="keyword">return</span> !<span class="localvariable">func</span>.<span class="property">apply</span>(<span class="atom">null</span>, <span class="localvariable">arguments</span>);
  };
}</pre><p><a class="paragraph" href="#p4cbc103f8e1c6a70" name="p4cbc103f8e1c6a70"> ¶ </a>Unfortunately, on the Internet Explorer browser a lot of built-in
functions, such as <code>alert</code>, are not <em>really</em> functions... or
something. They report their type as <code>"object"</code> when given to the
<code>typeof</code> operator, and they do not have an <code>apply</code> method. Your own
functions do not suffer from this, they are always real functions.</p></div><hr><div class="block"><p><a class="paragraph" href="#p43bea35b65e9846c" name="p43bea35b65e9846c"> ¶ </a>Let us look at a few more basic algorithms related to arrays. The
<code>sum</code> function is really a variant of an algorithm which is usually
called <a name="key6"></a><code>reduce</code> or <code>fold</code>:</p><pre class="code not-run"><button type="button" title="Run this code" class="codebutton run"></button><button title="Load this code into the console" type="button" class="codebutton load"></button><span class="keyword">function</span> <span class="variable">reduce</span>(<span class="variabledef">combine</span>, <span class="variabledef">base</span>, <span class="variabledef">array</span>) {
  <span class="variable">forEach</span>(<span class="localvariable">array</span>, <span class="keyword">function</span> (<span class="variabledef">element</span>) {
    <span class="localvariable">base</span> = <span class="localvariable">combine</span>(<span class="localvariable">base</span>, <span class="localvariable">element</span>);
  });
  <span class="keyword">return</span> <span class="localvariable">base</span>;
}

<span class="keyword">function</span> <span class="variable">add</span>(<span class="variabledef">a</span>, <span class="variabledef">b</span>) {
  <span class="keyword">return</span> <span class="localvariable">a</span> + <span class="localvariable">b</span>;
}

<span class="keyword">function</span> <span class="variable">sum</span>(<span class="variabledef">numbers</span>) {
  <span class="keyword">return</span> <span class="variable">reduce</span>(<span class="variable">add</span>, <span class="atom">0</span>, <span class="localvariable">numbers</span>);
}</pre><p><a class="paragraph" href="#p3a26d72d5d539372" name="p3a26d72d5d539372"> ¶ </a><code>reduce</code> combines an array into a single value by repeatedly using a
function that combines an element of the array with a base value. This
is exactly what <code>sum</code> did, so it can be made shorter by using
<code>reduce</code>... except that addition is an operator and not a function in
JavaScript, so we first had to put it into a function.</p><p><a class="paragraph" href="#p1e327ea6dfd8d5a9" name="p1e327ea6dfd8d5a9"> ¶ </a>The reason <code>reduce</code> takes the function as its first argument instead
of its last, as in <code>forEach</code>, is partly that this is tradition ?
other languages do it like that ? and partly that this allows us to
use a particular trick, which will be discussed at the end of this
chapter. It does mean that, when calling <code>reduce</code>, writing the
reducing function as an anonymous function looks a bit weirder,
because now the other arguments follow after the function, and the
resemblance to a normal <code>for</code> block is lost entirely.</p></div><hr><div class="block"><a name="exercise1"></a><div class="exercisenum">Ex. 6.1</div><div class="exercise"><p><a class="paragraph" href="#p60c55bb8b0ec0f52" name="p60c55bb8b0ec0f52"> ¶ </a>Write a function <code>countZeroes</code>, which takes an array of numbers as its
argument and returns the amount of zeroes that occur in it. Use
<code>reduce</code>.</p><p><a class="paragraph" href="#pc668a5d771065b3" name="pc668a5d771065b3"> ¶ </a>Then, write the higher-order function <code>count</code>, which takes an array
and a test function as arguments, and returns the amount of elements
in the array for which the test function returned <code>true</code>. Re-implement
<code>countZeroes</code> using this function.</p></div><div class="toggle">[show solution]</div><div style="display: none;" class="solution"><div title="Hide the solution." class="solutionarrow">×</div><pre class="code not-run"><button type="button" title="Run this code" class="codebutton run"></button><button title="Load this code into the console" type="button" class="codebutton load"></button><span class="keyword">function</span> <span class="variable">countZeroes</span>(<span class="variabledef">array</span>) {
  <span class="keyword">function</span> <span class="variabledef">counter</span>(<span class="variabledef">total</span>, <span class="variabledef">element</span>) {
    <span class="keyword">return</span> <span class="localvariable">total</span> + (<span class="localvariable">element</span> === <span class="atom">0</span> ? <span class="atom">1</span> : <span class="atom">0</span>);
  }
  <span class="keyword">return</span> <span class="variable">reduce</span>(<span class="localvariable">counter</span>, <span class="atom">0</span>, <span class="localvariable">array</span>);
}</pre><p><a class="paragraph" href="#p543f21adae0dab0c" name="p543f21adae0dab0c"> ¶ </a><a name="key7"></a>The weird part, with the question mark and the colon, uses a
new operator. In <a href="chapter2.html">chapter 2</a> we have seen unary and binary operators.
This one is ternary ? it acts on three values. Its effect resembles
that of <code>if</code>/<code>else</code>, except that, where <code>if</code> conditionally executes
statements, this one conditionally chooses expressions. The first
part, before the question mark, is the condition. If this condition is
<code>true</code>, the expression after the question mark is chosen, <code>1</code> in this
case. If it is <code>false</code>, the part after the colon, <code>0</code> in this case, is
chosen.</p><p><a class="paragraph" href="#p588c930c925024a1" name="p588c930c925024a1"> ¶ </a>Use of this operator can make some pieces of code much shorter. When
the expressions inside it get very big, or you have to make more
decisions inside the conditional parts, just using plain <code>if</code> and
<code>else</code> is usually more readable.</p><p><a class="paragraph" href="#p29cfd0dde807fe3b" name="p29cfd0dde807fe3b"> ¶ </a>Here is the solution that uses a <code>count</code> function, with a function
that produces equality-testers included to make the final
<code>countZeroes</code> function even shorter:</p><pre class="code not-run"><button type="button" title="Run this code" class="codebutton run"></button><button title="Load this code into the console" type="button" class="codebutton load"></button><span class="keyword">function</span> <span class="variable">count</span>(<span class="variabledef">test</span>, <span class="variabledef">array</span>) {
  <span class="keyword">return</span> <span class="variable">reduce</span>(<span class="keyword">function</span>(<span class="variabledef">total</span>, <span class="variabledef">element</span>) {
    <span class="keyword">return</span> <span class="localvariable">total</span> + (<span class="localvariable">test</span>(<span class="localvariable">element</span>) ? <span class="atom">1</span> : <span class="atom">0</span>);
  }, <span class="atom">0</span>, <span class="localvariable">array</span>);
}

<span class="keyword">function</span> <span class="variable">equals</span>(<span class="variabledef">x</span>) {
  <span class="keyword">return</span> <span class="keyword">function</span>(<span class="variabledef">element</span>) {<span class="keyword">return</span> <span class="localvariable">x</span> === <span class="localvariable">element</span>;};
}

<span class="keyword">function</span> <span class="variable">countZeroes</span>(<span class="variabledef">array</span>) {
  <span class="keyword">return</span> <span class="variable">count</span>(<span class="variable">equals</span>(<span class="atom">0</span>), <span class="localvariable">array</span>);
}</pre></div></div><hr><div class="block"><p><a class="paragraph" href="#p487fc5acce55439c" name="p487fc5acce55439c"> ¶ </a>One other generally useful 'fundamental algorithm' related to arrays
is called <a name="key8"></a><code>map</code>. It goes over an array, applying a function to every
element, just like <code>forEach</code>. But instead of discarding the values
returned by function, it builds up a new array from these values.</p><pre class="code not-run"><button type="button" title="Run this code" class="codebutton run"></button><button title="Load this code into the console" type="button" class="codebutton load"></button><span class="keyword">function</span> <span class="variable">map</span>(<span class="variabledef">func</span>, <span class="variabledef">array</span>) {
  <span class="keyword">var</span> <span class="variabledef">result</span> = [];
  <span class="variable">forEach</span>(<span class="localvariable">array</span>, <span class="keyword">function</span> (<span class="variabledef">element</span>) {
    <span class="localvariable">result</span>.<span class="property">push</span>(<span class="localvariable">func</span>(<span class="localvariable">element</span>));
  });
  <span class="keyword">return</span> <span class="localvariable">result</span>;
}

<span class="variable">show</span>(<span class="variable">map</span>(<span class="variable">Math</span>.<span class="property">round</span>, [<span class="atom">0.01</span>, <span class="atom">2</span>, <span class="atom">9.89</span>, <span class="variable">Math</span>.<span class="property">PI</span>]));</pre><p><a class="paragraph" href="#pfbaec59a02a1d15" name="pfbaec59a02a1d15"> ¶ </a>Note that the first argument is called <code>func</code>, not <code>function</code>, this
is because <code>function</code> is a keyword and thus not a valid variable name.</p></div><hr><div class="block"><p><a class="paragraph" href="#p72845d53f6f05268" name="p72845d53f6f05268"> ¶ </a>There once was, living in the deep mountain forests of Transylvania, a
recluse. Most of the time, he just wandered around his mountain,
talking to trees and laughing with birds. But now and then, when the
pouring rain trapped him in his little hut, and the howling wind made
him feel unbearably small, the recluse felt an urge to write
something, wanted to pour some thoughts out onto paper, where they
could maybe grow bigger than he himself was.</p><p><a class="paragraph" href="#p518bcf1e2791bb49" name="p518bcf1e2791bb49"> ¶ </a>After failing miserably at poetry, fiction, and philosophy, the
recluse finally decided to write a technical book. In his youth, he
had done some computer programming, and he figured that if he could
just write a good book about that, fame and recognition would surely
follow.</p><p><a class="paragraph" href="#p4838ad8fb26c0acd" name="p4838ad8fb26c0acd"> ¶ </a>So he wrote. At first he used fragments of tree bark, but that turned
out not to be very practical. He went down to the nearest village and
bought himself a laptop computer. After a few chapters, he realised he
wanted to put the book in HTML format, in order to put it on his
web-page...</p></div><hr><div class="block"><p><a class="paragraph" href="#p6f89de8af6edd388" name="p6f89de8af6edd388"> ¶ </a>Are you familiar with HTML? It is the method used to add mark-up to
pages on the web, and we will be using it a few times in this book, so
it would be nice if you know how it works, at least generally. If you
are a good student, you could go search the web for a good
introduction to HTML now, and come back here when you have read it.
Most of you probably are lousy students, so I will just give a short
explanation and hope it is enough.</p><p><a class="paragraph" href="#p5595eff2a86b5d87" name="p5595eff2a86b5d87"> ¶ </a><a name="key9"></a>HTML stands for 'HyperText Mark-up Language'. An HTML document is
all text. Because it must be able to express the structure of this
text, information about which text is a heading, which text is purple,
and so on, a few characters have a special meaning, somewhat like
backslashes in JavaScript strings. The 'less than' and 'greater than'
characters are used to create '<a name="key10"></a>tags'. A tag gives extra information
about the text in the document. It can stand on its own, for example
to mark the place where a picture should appear in the page, or it can
contain text and other tags, for example when it marks the start and
end of a paragraph.</p><p><a class="paragraph" href="#p28225fb69550a84c" name="p28225fb69550a84c"> ¶ </a>Some tags are compulsory, a whole HTML document must always be
contained in between <code>html</code> tags. Here is an example of an HTML
document:</p><pre class="preformatted">&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;A quote&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;h1&gt;A quote&lt;/h1&gt;
    &lt;blockquote&gt;
      &lt;p&gt;The connection between the language in which we
      think/program and the problems and solutions we can imagine
      is very close.  For this reason restricting language
      features with the intent of eliminating programmer errors is
      at best dangerous.&lt;/p&gt;
      &lt;p&gt;-- Bjarne Stroustrup&lt;/p&gt;
    &lt;/blockquote&gt;
    &lt;p&gt;Mr. Stroustrup is the inventor of the C++ programming
    language, but quite an insightful person nevertheless.&lt;/p&gt;
    &lt;p&gt;Also, here is a picture of an ostrich:&lt;/p&gt;
    &lt;img src="img/ostrich.png"/&gt;
  &lt;/body&gt;
&lt;/html&gt;</pre><p><a class="paragraph" href="#p23bb63064e929324" name="p23bb63064e929324"> ¶ </a>Elements that contain text or other tags are first opened with
<code>&lt;tagname&gt;</code>, and afterwards finished with <code>&lt;/tagname&gt;</code>. The <code>html</code>
element always contains two children: <code>head</code> and <code>body</code>. The first
contains information <em>about</em> the document, the second contains the
actual document.</p><p><a class="paragraph" href="#p6e09739d3bcd5a53" name="p6e09739d3bcd5a53"> ¶ </a>Most tag names are cryptic abbreviations. <code>h1</code> stands for 'heading 1',
the biggest kind of heading. There are also <code>h2</code> to <code>h6</code> for
successively smaller headings. <code>p</code> means 'paragraph', and <code>img</code> stands
for 'image'. The <code>img</code> element does not contain any text or other
tags, but it does have some extra information,
<code>src="img/ostrich.png"</code>, which is called an '<a name="key11"></a>attribute'. In this
case, it contains information about the image file that should be
shown here.</p><p><a class="paragraph" href="#p61592ab96ad6b347" name="p61592ab96ad6b347"> ¶ </a>Because <code>&lt;</code> and <code>&gt;</code> have a special meaning in HTML documents, they can
not be written directly in the text of the document. If you want to
say '<code>5 &lt; 10</code>' in an HTML document, you have to write '<code>5 &amp;lt; 10</code>',
where '<code>lt</code>' stands for 'less than'. '<code>&amp;gt;</code>' is used for '<code>&gt;</code>', and
because these codes also give the ampersand character a special
meaning, a plain '<code>&amp;</code>' is written as '<code>&amp;amp;</code>'.</p><p><a class="paragraph" href="#p62a06dc7ccbbe1d4" name="p62a06dc7ccbbe1d4"> ¶ </a>Now, those are only the bare basics of HTML, but they should be enough
to make it through this chapter, and later chapters that deal with
HTML documents, without getting entirely confused.</p></div><hr><div class="block"><p><a class="paragraph" href="#p18cbb1fe1ccd441e" name="p18cbb1fe1ccd441e"> ¶ </a>The JavaScript console has a function <code>viewHTML</code> that can be used to
look at HTML documents. I stored the example document above in the
variable <code>stroustrupQuote</code>, so you can view it by executing the
following code:</p><pre class="code not-run"><button type="button" title="Run this code" class="codebutton run"></button><button title="Load this code into the console" type="button" class="codebutton load"></button><span class="variable">viewHTML</span>(<span class="variable">stroustrupQuote</span>);</pre><p><a class="paragraph" href="#p44328054845e46ab" name="p44328054845e46ab"> ¶ </a>If you have some kind of pop-up blocker installed or integrated in
your browser, it will probably interfere with <code>viewHTML</code>, which tries
to show the HTML document in a new window or tab. Try to configure the
blocker to allow pop-ups from this site.</p></div><hr><div class="block"><p><a class="paragraph" href="#p15c5e14addbc1388" name="p15c5e14addbc1388"> ¶ </a>So, picking up the story again, the recluse wanted to have his book in
HTML format. At first he just wrote all the tags directly into his
manuscript, but typing all those less-than and greater-than signs made
his fingers hurt, and he constantly forgot to write <code>&amp;amp;</code> when he
needed an <code>&amp;</code>. This gave him a headache. Next, he tried to write the
book in Microsoft Word, and then save it as HTML. But the HTML that
came out of that was fifteen times bigger and more complicated than it
had to be. And besides, Microsoft Word gave him a headache.</p><p><a class="paragraph" href="#p1156d30627166a36" name="p1156d30627166a36"> ¶ </a>The solution that he eventually came up with was this: He would write
the book as plain text, following some simple rules about the way
paragraphs were separated and the way headings looked. Then, he would
write a program to convert this text into precisely the HTML that he
wanted.</p><p><a class="paragraph" href="#p231e5049ecd8f592" name="p231e5049ecd8f592"> ¶ </a>The rules are this:</p><ol><li>Paragraphs are separated by blank lines.</li><li>A paragraph that starts with a '%' symbol is a header. The more '%' symbols, the smaller the header.</li><li>Inside paragraphs, pieces of text can be emphasised by putting them between asterisks.</li><li>Footnotes are written between braces.</li></ol></div><hr><div class="block"><p><a class="paragraph" href="#p7427e734fe433eef" name="p7427e734fe433eef"> ¶ </a>After he had struggled painfully with his book for six months, the
recluse had still only finished a few paragraphs. At this point, his
hut was struck by lightning, killing him, and forever putting his
writing ambitions to rest. From the charred remains of his laptop, I
could recover the following file:</p><pre class="preformatted">% The Book of Programming

%% The Two Aspects

Below the surface of the machine, the program moves. Without effort,
it expands and contracts. In great harmony, electrons scatter and
regroup. The forms on the monitor are but ripples on the water. The
essence stays invisibly below.

When the creators built the machine, they put in the processor and the
memory. From these arise the two aspects of the program.

The aspect of the processor is the active substance. It is called
Control. The aspect of the memory is the passive substance. It is
called Data.

Data is made of merely bits, yet it takes complex forms. Control
consists only of simple instructions, yet it performs difficult
tasks. From the small and trivial, the large and complex arise.

The program source is Data. Control arises from it. The Control
proceeds to create new Data. The one is born from the other, the
other is useless without the one. This is the harmonious cycle of
Data and Control.

Of themselves, Data and Control are without structure. The programmers
of old moulded their programs out of this raw substance. Over time,
the amorphous Data has crystallised into data types, and the chaotic
Control was restricted into control structures and functions.

%% Short Sayings

When a student asked Fu-Tzu about the nature of the cycle of Data and
Control, Fu-Tzu replied 'Think of a compiler, compiling itself.'

A student asked 'The programmers of old used only simple machines and
no programming languages, yet they made beautiful programs. Why do we
use complicated machines and programming languages?'. Fu-Tzu replied
'The builders of old used only sticks and clay, yet they made
beautiful huts.'

A hermit spent ten years writing a program. 'My program can compute
the motion of the stars on a 286-computer running MS DOS', he proudly
announced. 'Nobody owns a 286-computer or uses MS DOS anymore.',
Fu-Tzu responded.

Fu-Tzu had written a small program that was full of global state and
dubious shortcuts. Reading it, a student asked 'You warned us against
these techniques, yet I find them in your program. How can this be?'
Fu-Tzu said 'There is no need to fetch a water hose when the house is
not on fire.'{This is not to be read as an encouragement of sloppy
programming, but rather as a warning against neurotic adherence to
rules of thumb.}

%% Wisdom

A student was complaining about digital numbers. 'When I take the root
of two and then square it again, the result is already inaccurate!'.
Overhearing him, Fu-Tzu laughed. 'Here is a sheet of paper. Write down
the precise value of the square root of two for me.'

Fu-Tzu said 'When you cut against the grain of the wood, much strength
is needed. When you program against the grain of a problem, much code
is needed.'

Tzu-li and Tzu-ssu were boasting about the size of their latest
programs. 'Two-hundred thousand lines', said Tzu-li, 'not counting
comments!'. 'Psah', said Tzu-ssu, 'mine is almost a *million* lines
already.' Fu-Tzu said 'My best program has five hundred lines.'
Hearing this, Tzu-li and Tzu-ssu were enlightened.

A student had been sitting motionless behind his computer for hours,
frowning darkly. He was trying to write a beautiful solution to a
difficult problem, but could not find the right approach. Fu-Tzu hit
him on the back of his head and shouted '*Type something!*' The student
started writing an ugly solution. After he had finished, he suddenly
understood the beautiful solution.

%% Progression

A beginning programmer writes his programs like an ant builds her
hill, one piece at a time, without thought for the bigger structure.
His programs will be like loose sand. They may stand for a while, but
growing too big they fall apart{Referring to the danger of internal
inconsistency and duplicated structure in unorganised code.}.

Realising this problem, the programmer will start to spend a lot of
time thinking about structure. His programs will be rigidly
structured, like rock sculptures. They are solid, but when they must
change, violence must be done to them{Referring to the fact that
structure tends to put restrictions on the evolution of a program.}.

The master programmer knows when to apply structure and when to leave
things in their simple form. His programs are like clay, solid yet
malleable.

%% Language

When a programming language is created, it is given syntax and
semantics. The syntax describes the form of the program, the semantics
describe the function. When the syntax is beautiful and the semantics
are clear, the program will be like a stately tree. When the syntax is
clumsy and the semantics confusing, the program will be like a bramble
bush.

Tzu-ssu was asked to write a program in the language called Java,
which takes a very primitive approach to functions. Every morning, as
he sat down in front of his computer, he started complaining. All day
he cursed, blaming the language for all that went wrong. Fu-Tzu
listened for a while, and then reproached him, saying 'Every language
has its own way. Follow its form, do not try to program as if you
were using another language.'</pre></div><hr><div class="block"><p><a class="paragraph" href="#p897b23e06210d6e" name="p897b23e06210d6e"> ¶ </a>To honour the memory of our good recluse, I would like to finish his
HTML-generating program for him. A good approach to this problem goes
like this:</p><ol><li>Split the file into paragraphs by cutting it at every empty line.</li><li>Remove the '%' characters from header paragraphs and mark them as headers.</li><li>Process the text of the paragraphs themselves, splitting them into normal parts, emphasised parts, and footnotes.</li><li>Move all the footnotes to the bottom of the document, leaving numbers<span class="footref">1</span> in their place.</li><li>Wrap each piece into the correct HTML tags.</li><li>Combine everything into a single HTML document.</li></ol><p><a class="paragraph" href="#p3639dfda43aa90ef" name="p3639dfda43aa90ef"> ¶ </a>This approach does not allow footnotes inside emphasised text, or vice
versa. This is kind of arbitrary, but helps keep the example code
simple. If, at the end of the chapter, you feel like an extra
challenge, you can try to revise the program to support 'nested'
mark-up.</p><p><a class="paragraph" href="#pa5c8ea56e8f40" name="pa5c8ea56e8f40"> ¶ </a>The whole manuscript, as a string value, is available on this page
by calling <code>recluseFile</code> function.</p></div><hr><div class="block"><p><a class="paragraph" href="#p3ea6f2079f69683b" name="p3ea6f2079f69683b"> ¶ </a>Step 1 of the algorithm is trivial. A blank line is what you get when
you have two newlines in a row, and if you remember the <code>split</code> method
that strings have, which we saw in <a href="chapter4.html">chapter 4</a>, you will realise that this
will do the trick:</p><pre class="code not-run"><button type="button" title="Run this code" class="codebutton run"></button><button title="Load this code into the console" type="button" class="codebutton load"></button><span class="keyword">var</span> <span class="variable">paragraphs</span> = <span class="variable">recluseFile</span>().<span class="property">split</span>(<span class="string">"\n\n"</span>);
<span class="variable">print</span>(<span class="string">"Found "</span>, <span class="variable">paragraphs</span>.<span class="property">length</span>, <span class="string">" paragraphs."</span>);</pre></div><hr><div class="block"><a name="exercise2"></a><div class="exercisenum">Ex. 6.2</div><div class="exercise"><p><a class="paragraph" href="#p7a03749a314f5c0e" name="p7a03749a314f5c0e"> ¶ </a>Write a function <code>processParagraph</code> that, when given a paragraph
string as its argument, checks whether this paragraph is a header. If
it is, it strips off the '%' characters and counts their number. Then,
it returns an object with two properties, <code>content</code>, which contains
the text inside the paragraph, and <code>type</code>, which contains the tag that
this paragraph must be wrapped in, <code>"p"</code> for regular paragraphs,
<code>"h1"</code> for headers with one '%', and <code>"hX"</code> for headers with <code>X</code> '%'
characters.</p><p><a class="paragraph" href="#p43476b9b9ff201a7" name="p43476b9b9ff201a7"> ¶ </a>Remember that strings have a <code>charAt</code> method that can be used to look
at a specific character inside them.</p></div><div class="toggle">[show solution]</div><div style="display: none;" class="solution"><div title="Hide the solution." class="solutionarrow">×</div><pre class="code not-run"><button type="button" title="Run this code" class="codebutton run"></button><button title="Load this code into the console" type="button" class="codebutton load"></button><span class="keyword">function</span> <span class="variable">processParagraph</span>(<span class="variabledef">paragraph</span>) {
  <span class="keyword">var</span> <span class="variabledef">header</span> = <span class="atom">0</span>;
  <span class="keyword">while</span> (<span class="localvariable">paragraph</span>.<span class="property">charAt</span>(<span class="atom">0</span>) == <span class="string">"%"</span>) {
    <span class="localvariable">paragraph</span> = <span class="localvariable">paragraph</span>.<span class="property">slice</span>(<span class="atom">1</span>);
    <span class="localvariable">header</span>++;
  }

  <span class="keyword">return</span> {<span class="property">type</span>: (<span class="localvariable">header</span> == <span class="atom">0</span> ? <span class="string">"p"</span> : <span class="string">"h"</span> + <span class="localvariable">header</span>),
          <span class="property">content</span>: <span class="localvariable">paragraph</span>};
}

<span class="variable">show</span>(<span class="variable">processParagraph</span>(<span class="variable">paragraphs</span>[<span class="atom">0</span>]));</pre></div></div><hr><div class="block"><p><a class="paragraph" href="#pa7f3dc1b71f0aa4" name="pa7f3dc1b71f0aa4"> ¶ </a>This is where we can try out the <code>map</code> function we saw earlier.</p><pre class="code not-run"><button type="button" title="Run this code" class="codebutton run"></button><button title="Load this code into the console" type="button" class="codebutton load"></button><span class="keyword">var</span> <span class="variable">paragraphs</span> = <span class="variable">map</span>(<span class="variable">processParagraph</span>,
                     <span class="variable">recluseFile</span>().<span class="property">split</span>(<span class="string">"\n\n"</span>));</pre><p><a class="paragraph" href="#p12974fd2c85f79a" name="p12974fd2c85f79a"> ¶ </a>And <em>bang</em>, we have an array of nicely categorised paragraph objects.
We are getting ahead of ourselves though, we forgot step 3 of the
algorithm:</p><blockquote>Process the text of the paragraphs themselves, splitting them into
normal parts, emphasised parts, and footnotes.</blockquote><p><a class="paragraph" href="#p37365c2089df721d" name="p37365c2089df721d"> ¶ </a>Which can be decomposed into:</p><ol><li>If the paragraph starts with an asterisk, take off the emphasised part and store it.</li><li>If the paragraph starts with an opening brace, take off the footnote and store it.</li><li>Otherwise, take off the part until the first emphasised part or footnote, or until the end of the string, and store it as normal text.</li><li>If there is anything left in the paragraph, start at 1 again.</li></ol></div><hr><div class="block"><a name="exercise3"></a><div class="exercisenum">Ex. 6.3</div><div class="exercise"><p><a class="paragraph" href="#p71cc2e8ae802b37f" name="p71cc2e8ae802b37f"> ¶ </a>Build a function <code>splitParagraph</code> which, given a paragraph string,
returns an array of paragraph fragments. Think of a good way to
represent the fragments.</p><p><a class="paragraph" href="#p69e4f58fb69971b5" name="p69e4f58fb69971b5"> ¶ </a>The method <code>indexOf</code>, which searches for a character or sub-string in
a string and returns its position, or <code>-1</code> if not found, will probably
be useful in some way here.</p><p><a class="paragraph" href="#p3ee6676215ac600b" name="p3ee6676215ac600b"> ¶ </a>This is a tricky algorithm, and there are many not-quite-correct or
way-too-long ways to describe it. If you run into problems, just think
about it for a minute. Try to write inner functions that perform the
smaller actions that make up the algorithm.</p></div><div class="toggle">[show solution]</div><div style="display: none;" class="solution"><div title="Hide the solution." class="solutionarrow">×</div><p><a class="paragraph" href="#pbb40d1f6f95d6da" name="pbb40d1f6f95d6da"> ¶ </a>Here is one possible solution:</p><pre class="code not-run"><button type="button" title="Run this code" class="codebutton run"></button><button title="Load this code into the console" type="button" class="codebutton load"></button><span class="keyword">function</span> <span class="variable">splitParagraph</span>(<span class="variabledef">text</span>) {
  <span class="keyword">function</span> <span class="variabledef">indexOrEnd</span>(<span class="variabledef">character</span>) {
    <span class="keyword">var</span> <span class="variabledef">index</span> = <span class="localvariable">text</span>.<span class="property">indexOf</span>(<span class="localvariable">character</span>);
    <span class="keyword">return</span> <span class="localvariable">index</span> == -<span class="atom">1</span> ? <span class="localvariable">text</span>.<span class="property">length</span> : <span class="localvariable">index</span>;
  }

  <span class="keyword">function</span> <span class="variabledef">takeNormal</span>() {
    <span class="keyword">var</span> <span class="variabledef">end</span> = <span class="variable">reduce</span>(<span class="variable">Math</span>.<span class="property">min</span>, <span class="localvariable">text</span>.<span class="property">length</span>,
                     <span class="variable">map</span>(<span class="localvariable">indexOrEnd</span>, [<span class="string">"*"</span>, <span class="string">"{"</span>]));
    <span class="keyword">var</span> <span class="variabledef">part</span> = <span class="localvariable">text</span>.<span class="property">slice</span>(<span class="atom">0</span>, <span class="localvariable">end</span>);
    <span class="localvariable">text</span> = <span class="localvariable">text</span>.<span class="property">slice</span>(<span class="localvariable">end</span>);
    <span class="keyword">return</span> <span class="localvariable">part</span>;
  }

  <span class="keyword">function</span> <span class="variabledef">takeUpTo</span>(<span class="variabledef">character</span>) {
    <span class="keyword">var</span> <span class="variabledef">end</span> = <span class="localvariable">text</span>.<span class="property">indexOf</span>(<span class="localvariable">character</span>, <span class="atom">1</span>);
    <span class="keyword">if</span> (<span class="localvariable">end</span> == -<span class="atom">1</span>)
      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="variable">Error</span>(<span class="string">"Missing closing '"</span> + <span class="localvariable">character</span> + <span class="string">"'"</span>);
    <span class="keyword">var</span> <span class="variabledef">part</span> = <span class="localvariable">text</span>.<span class="property">slice</span>(<span class="atom">1</span>, <span class="localvariable">end</span>);
    <span class="localvariable">text</span> = <span class="localvariable">text</span>.<span class="property">slice</span>(<span class="localvariable">end</span> + <span class="atom">1</span>);
    <span class="keyword">return</span> <span class="localvariable">part</span>;
  }

  <span class="keyword">var</span> <span class="variabledef">fragments</span> = [];

  <span class="keyword">while</span> (<span class="localvariable">text</span> != <span class="string">""</span>) {
    <span class="keyword">if</span> (<span class="localvariable">text</span>.<span class="property">charAt</span>(<span class="atom">0</span>) == <span class="string">"*"</span>)
      <span class="localvariable">fragments</span>.<span class="property">push</span>({<span class="property">type</span>: <span class="string">"emphasised"</span>,
                      <span class="property">content</span>: <span class="localvariable">takeUpTo</span>(<span class="string">"*"</span>)});
    <span class="keyword">else</span> <span class="keyword">if</span> (<span class="localvariable">text</span>.<span class="property">charAt</span>(<span class="atom">0</span>) == <span class="string">"{"</span>)
      <span class="localvariable">fragments</span>.<span class="property">push</span>({<span class="property">type</span>: <span class="string">"footnote"</span>,
                      <span class="property">content</span>: <span class="localvariable">takeUpTo</span>(<span class="string">"}"</span>)});
    <span class="keyword">else</span>
      <span class="localvariable">fragments</span>.<span class="property">push</span>({<span class="property">type</span>: <span class="string">"normal"</span>,
                      <span class="property">content</span>: <span class="localvariable">takeNormal</span>()});
  }
  <span class="keyword">return</span> <span class="localvariable">fragments</span>;
}</pre><p><a class="paragraph" href="#p345940589e670c12" name="p345940589e670c12"> ¶ </a>Note the over-eager use of <code>map</code> and <code>reduce</code> in the <code>takeNormal</code>
function. This is a chapter about functional programming, so program
functionally we will! Can you see how this works? The <code>map</code> produces
an array of positions where the given characters were found, or the
end of the string if they were not found, and the <code>reduce</code> takes the
minimum of them, which is the next point in the string that we have to
look at.</p><p><a class="paragraph" href="#p69d4e54010e82198" name="p69d4e54010e82198"> ¶ </a>If you'd write that out without mapping and reducing you'd get
something like this:</p><pre class="preformatted">var nextAsterisk = text.indexOf("*");
var nextBrace = text.indexOf("{");
var end = text.length;
if (nextAsterisk != -1)
  end = nextAsterisk;
if (nextBrace != -1 &amp;&amp; nextBrace &lt; end)
  end = nextBrace;</pre><p><a class="paragraph" href="#p8c0367fd215c195" name="p8c0367fd215c195"> ¶ </a>Which is even more hideous. Most of the time, when a decision has to
be made based on a series of things, even if there are only two of
them, writing it as array operations is nicer than handling every
value in a separate <code>if</code> statement. (Fortunately, <a href="chapter10.html">chapter 10</a> describes
an easier way to ask for the first occurrence of 'this or that
character' in a string.)</p><p><a class="paragraph" href="#p3bc46f0ef5a06a22" name="p3bc46f0ef5a06a22"> ¶ </a>If you wrote a <code>splitParagraph</code> that stored fragments in a different
way than the solution above, you might want to adjust it, because the
functions in the rest of the chapter assume that fragments are objects
with <code>type</code> and <code>content</code> properties.</p></div></div><hr><div class="block"><p><a class="paragraph" href="#p8d8dfc9fda5e96b" name="p8d8dfc9fda5e96b"> ¶ </a>We can now wire <code>processParagraph</code> to also split the text inside the
paragraphs, my version can be modified like this:</p><pre class="code not-run"><button type="button" title="Run this code" class="codebutton run"></button><button title="Load this code into the console" type="button" class="codebutton load"></button><span class="keyword">function</span> <span class="variable">processParagraph</span>(<span class="variabledef">paragraph</span>) {
  <span class="keyword">var</span> <span class="variabledef">header</span> = <span class="atom">0</span>;
  <span class="keyword">while</span> (<span class="localvariable">paragraph</span>.<span class="property">charAt</span>(<span class="atom">0</span>) == <span class="string">"%"</span>) {
    <span class="localvariable">paragraph</span> = <span class="localvariable">paragraph</span>.<span class="property">slice</span>(<span class="atom">1</span>);
    <span class="localvariable">header</span>++;
  }

  <span class="keyword">return</span> {<span class="property">type</span>: (<span class="localvariable">header</span> == <span class="atom">0</span> ? <span class="string">"p"</span> : <span class="string">"h"</span> + <span class="localvariable">header</span>),
          <span class="property">content</span>: <span class="variable">splitParagraph</span>(<span class="localvariable">paragraph</span>)};
}</pre><p><a class="paragraph" href="#p1dc03c0bced024ba" name="p1dc03c0bced024ba"> ¶ </a>Mapping that over the array of paragraphs gives us an array of
paragraph objects, which in turn contain arrays of fragment objects.
The next thing to do is to take out the footnotes, and put references
to them in their place. Something like this:</p><pre class="code not-run"><button type="button" title="Run this code" class="codebutton run"></button><button title="Load this code into the console" type="button" class="codebutton load"></button><span class="keyword">function</span> <span class="variable">extractFootnotes</span>(<span class="variabledef">paragraphs</span>) {
  <span class="keyword">var</span> <span class="variabledef">footnotes</span> = [];
  <span class="keyword">var</span> <span class="variabledef">currentNote</span> = <span class="atom">0</span>;

  <span class="keyword">function</span> <span class="variabledef">replaceFootnote</span>(<span class="variabledef">fragment</span>) {
    <span class="keyword">if</span> (<span class="localvariable">fragment</span>.<span class="property">type</span> == <span class="string">"footnote"</span>) {
      <span class="localvariable">currentNote</span>++;
      <span class="localvariable">footnotes</span>.<span class="property">push</span>(<span class="localvariable">fragment</span>);
      <span class="localvariable">fragment</span>.<span class="property">number</span> = <span class="localvariable">currentNote</span>;
      <span class="keyword">return</span> {<span class="property">type</span>: <span class="string">"reference"</span>, <span class="property">number</span>: <span class="localvariable">currentNote</span>};
    }
    <span class="keyword">else</span> {
      <span class="keyword">return</span> <span class="localvariable">fragment</span>;
    }
  }

  <span class="variable">forEach</span>(<span class="localvariable">paragraphs</span>, <span class="keyword">function</span>(<span class="variabledef">paragraph</span>) {
    <span class="localvariable">paragraph</span>.<span class="property">content</span> = <span class="variable">map</span>(<span class="localvariable">replaceFootnote</span>,
                            <span class="localvariable">paragraph</span>.<span class="property">content</span>);
  });

  <span class="keyword">return</span> <span class="localvariable">footnotes</span>;
}     </pre><p><a class="paragraph" href="#p1945e2a9469001e7" name="p1945e2a9469001e7"> ¶ </a>The <code>replaceFootnote</code> function is called on every fragment. When it
gets a fragment that should stay where it is, it just returns it, but
when it gets a footnote, it stores this footnote in the <code>footnotes</code>
array, and returns a reference to it instead. In the process, every
footnote and reference is also numbered.</p></div><hr><div class="block"><p><a class="paragraph" href="#p17175caf68cc7e1d" name="p17175caf68cc7e1d"> ¶ </a>That gives us enough tools to extract the information we need from the
file. All that is left now is generating the correct HTML.</p><p><a class="paragraph" href="#p749d0d61d6a10c1c" name="p749d0d61d6a10c1c"> ¶ </a>A lot of people think that concatenating strings is a great way to
produce HTML. When they need a link to, for example, a site where you
can play the game of Go, they will do:</p><pre class="code not-run"><button type="button" title="Run this code" class="codebutton run"></button><button title="Load this code into the console" type="button" class="codebutton load"></button><span class="keyword">var</span> <span class="variable">url</span> = <span class="string">"http://www.gokgs.com/"</span>;
<span class="keyword">var</span> <span class="variable">text</span> = <span class="string">"Play Go!"</span>;
<span class="keyword">var</span> <span class="variable">linkText</span> = <span class="string">"&lt;a href=\""</span> + <span class="variable">url</span> + <span class="string">"\"&gt;"</span> + <span class="variable">text</span> + <span class="string">"&lt;/a&gt;"</span>;
<span class="variable">print</span>(<span class="variable">linkText</span>);</pre><p><a class="paragraph" href="#p747f2492516f6ec8" name="p747f2492516f6ec8"> ¶ </a>(Where <code>a</code> is the tag used to create links in HTML documents.) ... Not
only is this clumsy, but when the string <code>text</code> happens to include an
angular bracket or an ampersand, it is also wrong. Weird things will
happen on your website, and you will look embarrassingly amateurish.
We wouldn't want that to happen. A few simple HTML-generating
functions are easy to write. So let us write them.</p></div><hr><div class="block"><p><a class="paragraph" href="#p6fa1925fa79b3a64" name="p6fa1925fa79b3a64"> ¶ </a>The secret to successful HTML generation is to treat your HTML
document as a data structure instead of a flat piece of text.
JavaScript's objects provide a very easy way to model this:</p><pre class="code not-run"><button type="button" title="Run this code" class="codebutton run"></button><button title="Load this code into the console" type="button" class="codebutton load"></button><span class="keyword">var</span> <span class="variable">linkObject</span> = {<span class="property">name</span>: <span class="string">"a"</span>,
                  <span class="property">attributes</span>: {<span class="property">href</span>: <span class="string">"http://www.gokgs.com/"</span>},
                  <span class="property">content</span>: [<span class="string">"Play Go!"</span>]};</pre><p><a class="paragraph" href="#p556c15128bc138bf" name="p556c15128bc138bf"> ¶ </a>Each HTML element contains a <code>name</code> property, giving the name of the
tag it represents. When it has attributes, it also contains an
<code>attributes</code> property, which contains an object in which the
attributes are stored. When it has content, there is a <code>content</code>
property, containing an array of other elements contained in this
element. Strings play the role of pieces of text in our HTML document,
so the array <code>["Play Go!"]</code> means that this link has only one element
inside it, which is a simple piece of text.</p><p><a class="paragraph" href="#p436b8a0933ca40c3" name="p436b8a0933ca40c3"> ¶ </a>Typing in these objects directly is clumsy, but we don't have to do
that. We provide a shortcut function to do this for us:</p><pre class="code not-run"><button type="button" title="Run this code" class="codebutton run"></button><button title="Load this code into the console" type="button" class="codebutton load"></button><span class="keyword">function</span> <span class="variable">tag</span>(<span class="variabledef">name</span>, <span class="variabledef">content</span>, <span class="variabledef">attributes</span>) {
  <span class="keyword">return</span> {<span class="property">name</span>: <span class="localvariable">name</span>, <span class="property">attributes</span>: <span class="localvariable">attributes</span>, <span class="property">content</span>: <span class="localvariable">content</span>};
}</pre><p><a class="paragraph" href="#p1ecda8e342d6e46b" name="p1ecda8e342d6e46b"> ¶ </a>Note that, since we allow the <code>attributes</code> and <code>content</code> of an element
to be undefined if they are not applicable, the second and third
argument to this function can be left off when they are not needed.</p><p><a class="paragraph" href="#p4cba4588483f2724" name="p4cba4588483f2724"> ¶ </a><code>tag</code> is still rather primitive, so we write shortcuts for common
types of elements, such as links, or the outer structure of a simple
document:</p><pre class="code not-run"><button type="button" title="Run this code" class="codebutton run"></button><button title="Load this code into the console" type="button" class="codebutton load"></button><span class="keyword">function</span> <span class="variable">link</span>(<span class="variabledef">target</span>, <span class="variabledef">text</span>) {
  <span class="keyword">return</span> <span class="variable">tag</span>(<span class="string">"a"</span>, [<span class="localvariable">text</span>], {<span class="property">href</span>: <span class="localvariable">target</span>});
}

<span class="keyword">function</span> <span class="variable">htmlDoc</span>(<span class="variabledef">title</span>, <span class="variabledef">bodyContent</span>) {
  <span class="keyword">return</span> <span class="variable">tag</span>(<span class="string">"html"</span>, [<span class="variable">tag</span>(<span class="string">"head"</span>, [<span class="variable">tag</span>(<span class="string">"title"</span>, [<span class="localvariable">title</span>])]),
                      <span class="variable">tag</span>(<span class="string">"body"</span>, <span class="localvariable">bodyContent</span>)]);
}</pre></div><hr><div class="block"><a name="exercise4"></a><div class="exercisenum">Ex. 6.4</div><div class="exercise"><p><a class="paragraph" href="#p55aadeef2bce3455" name="p55aadeef2bce3455"> ¶ </a>Looking back at the example HTML document if necessary, write an
<code>image</code> function which, when given the location of an image file, will
create an <code>img</code> HTML element.</p></div><div class="toggle">[show solution]</div><div style="display: none;" class="solution"><div title="Hide the solution." class="solutionarrow">×</div><pre class="code not-run"><button type="button" title="Run this code" class="codebutton run"></button><button title="Load this code into the console" type="button" class="codebutton load"></button><span class="keyword">function</span> <span class="variable">image</span>(<span class="variabledef">src</span>) {
  <span class="keyword">return</span> <span class="variable">tag</span>(<span class="string">"img"</span>, [], {<span class="property">src</span>: <span class="localvariable">src</span>});
}</pre></div></div><hr><div class="block"><p><a class="paragraph" href="#p6f2629dff438f71e" name="p6f2629dff438f71e"> ¶ </a>When we have created a document, it will have to be reduced to a
string. But building this string from the data structures we have been
producing is very straightforward. The important thing is to remember
to transform the special characters in the text of our document...</p><pre class="code not-run"><button type="button" title="Run this code" class="codebutton run"></button><button title="Load this code into the console" type="button" class="codebutton load"></button><span class="keyword">function</span> <span class="variable">escapeHTML</span>(<span class="variabledef">text</span>) {
  <span class="keyword">var</span> <span class="variabledef">replacements</span> = [[<span class="string">/&amp;/g</span>, <span class="string">"&amp;amp;"</span>], [<span class="string">/"/g</span>, <span class="string">"&amp;quot;"</span>],
                      [<span class="string">/&lt;/g</span>, <span class="string">"&amp;lt;"</span>], [<span class="string">/&gt;/g</span>, <span class="string">"&amp;gt;"</span>]];
  <span class="variable">forEach</span>(<span class="localvariable">replacements</span>, <span class="keyword">function</span>(<span class="variabledef">replace</span>) {
    <span class="localvariable">text</span> = <span class="localvariable">text</span>.<span class="property">replace</span>(<span class="localvariable">replace</span>[<span class="atom">0</span>], <span class="localvariable">replace</span>[<span class="atom">1</span>]);
  });
  <span class="keyword">return</span> <span class="localvariable">text</span>;
}</pre><p><a class="paragraph" href="#p20c7007a4d92929f" name="p20c7007a4d92929f"> ¶ </a>The <code>replace</code> method of strings creates a new string in which all
occurrences of the pattern in the first argument are replaced by the
second argument, so <code>"Borobudur".replace(/r/g, "k")</code> gives
<code>"Bokobuduk"</code>. Don't worry about the pattern syntax here ? we'll get
to that in <a href="chapter10.html">chapter 10</a>. The <code>escapeHTML</code> function puts the different
replacements that have to be made into an array, so that it can loop
over them and apply them to the argument one by one.</p><p><a class="paragraph" href="#p3c2403698fee1561" name="p3c2403698fee1561"> ¶ </a>Double quotes are also replaced, because we will also be using this
function for the text inside the attributes of HTML tags. Those will
be surrounded by double quotes, and thus must not have any double
quotes inside of them.</p><p><a class="paragraph" href="#p76723fc7e0f72bae" name="p76723fc7e0f72bae"> ¶ </a>Calling replace four times means the computer has to go over the whole
string four times to check and replace its content. This is not very
efficient. If we cared enough, we could write a more complex version
of this function, something that resembles the <code>splitParagraph</code>
function we saw earlier, to go over it only once. For now, we are too
lazy for this. Again, <a href="chapter10.html">chapter 10</a> shows a much better way to do this.</p></div><hr><div class="block"><p><a class="paragraph" href="#p597f66cdb5f3e27e" name="p597f66cdb5f3e27e"> ¶ </a>To turn an HTML element object into a string, we can use a recursive
function like this:</p><pre class="code not-run"><button type="button" title="Run this code" class="codebutton run"></button><button title="Load this code into the console" type="button" class="codebutton load"></button><span class="keyword">function</span> <span class="variable">renderHTML</span>(<span class="variabledef">element</span>) {
  <span class="keyword">var</span> <span class="variabledef">pieces</span> = [];

  <span class="keyword">function</span> <span class="variabledef">renderAttributes</span>(<span class="variabledef">attributes</span>) {
    <span class="keyword">var</span> <span class="variabledef">result</span> = [];
    <span class="keyword">if</span> (<span class="localvariable">attributes</span>) {
      <span class="keyword">for</span> (<span class="keyword">var</span> <span class="variabledef">name</span> <span class="keyword">in</span> <span class="localvariable">attributes</span>) 
        <span class="localvariable">result</span>.<span class="property">push</span>(<span class="string">" "</span> + <span class="localvariable">name</span> + <span class="string">"=\""</span> +
                    <span class="variable">escapeHTML</span>(<span class="localvariable">attributes</span>[<span class="localvariable">name</span>]) + <span class="string">"\""</span>);
    }
    <span class="keyword">return</span> <span class="localvariable">result</span>.<span class="property">join</span>(<span class="string">""</span>);
  }

  <span class="keyword">function</span> <span class="variabledef">render</span>(<span class="variabledef">element</span>) {
    <span class="comment">// Text node</span>
    <span class="keyword">if</span> (typeof <span class="localvariable">element</span> == <span class="string">"string"</span>) {
      <span class="localvariable">pieces</span>.<span class="property">push</span>(<span class="variable">escapeHTML</span>(<span class="localvariable">element</span>));
    }
    <span class="comment">// Empty tag</span>
    <span class="keyword">else</span> <span class="keyword">if</span> (!<span class="localvariable">element</span>.<span class="property">content</span> || <span class="localvariable">element</span>.<span class="property">content</span>.<span class="property">length</span> == <span class="atom">0</span>) {
      <span class="localvariable">pieces</span>.<span class="property">push</span>(<span class="string">"&lt;"</span> + <span class="localvariable">element</span>.<span class="property">name</span> +
                  <span class="localvariable">renderAttributes</span>(<span class="localvariable">element</span>.<span class="property">attributes</span>) + <span class="string">"/&gt;"</span>);
    }
    <span class="comment">// Tag with content</span>
    <span class="keyword">else</span> {
      <span class="localvariable">pieces</span>.<span class="property">push</span>(<span class="string">"&lt;"</span> + <span class="localvariable">element</span>.<span class="property">name</span> +
                  <span class="localvariable">renderAttributes</span>(<span class="localvariable">element</span>.<span class="property">attributes</span>) + <span class="string">"&gt;"</span>);
      <span class="variable">forEach</span>(<span class="localvariable">element</span>.<span class="property">content</span>, <span class="localvariable">render</span>);
      <span class="localvariable">pieces</span>.<span class="property">push</span>(<span class="string">"&lt;/"</span> + <span class="localvariable">element</span>.<span class="property">name</span> + <span class="string">"&gt;"</span>);
    }
  }

  <span class="localvariable">render</span>(<span class="localvariable">element</span>);
  <span class="keyword">return</span> <span class="localvariable">pieces</span>.<span class="property">join</span>(<span class="string">""</span>);
}</pre><p><a class="paragraph" href="#p2dbe0143b8e2e574" name="p2dbe0143b8e2e574"> ¶ </a>Note the <code>in</code> loop that extracts the properties from a JavaScript
object in order to make HTML tag attributes out of them. Also note
that in two places, arrays are being used to accumulate strings, which
are then joined into a single result string. Why didn't I just start
with an empty string and then add the content to it with the <code>+=</code>
operator?</p><p><a class="paragraph" href="#p4c819786485d39b0" name="p4c819786485d39b0"> ¶ </a>It turns out that creating new strings, especially big strings, is
quite a lot of work. Remember that JavaScript string values never
change. If you concatenate something to them, a new string is created,
the old ones stay intact. If we build up a big string by concatenating
lots of little strings, new strings have to be created at every step,
only to be thrown away when the next piece is concatenated to them.
If, on the other hand, we store all the little strings in an array and
then join them, only <em>one</em> big string has to be created.</p></div><hr><div class="block"><p><a class="paragraph" href="#p4e3b2805efaaea64" name="p4e3b2805efaaea64"> ¶ </a>So, let us try out this HTML generating system...</p><pre class="code not-run"><button type="button" title="Run this code" class="codebutton run"></button><button title="Load this code into the console" type="button" class="codebutton load"></button><span class="variable">print</span>(<span class="variable">renderHTML</span>(<span class="variable">link</span>(<span class="string">"http://www.nedroid.com"</span>, <span class="string">"Drawings!"</span>)));</pre><p><a class="paragraph" href="#p506d9a82709880b0" name="p506d9a82709880b0"> ¶ </a>That seems to work.</p><pre class="code not-run"><button type="button" title="Run this code" class="codebutton run"></button><button title="Load this code into the console" type="button" class="codebutton load"></button><span class="keyword">var</span> <span class="variable">body</span> = [<span class="variable">tag</span>(<span class="string">"h1"</span>, [<span class="string">"The Test"</span>]),
            <span class="variable">tag</span>(<span class="string">"p"</span>, [<span class="string">"Here is a paragraph, and an image..."</span>]),
            <span class="variable">image</span>(<span class="string">"img/sheep.png"</span>)];
<span class="keyword">var</span> <span class="variable">doc</span> = <span class="variable">htmlDoc</span>(<span class="string">"The Test"</span>, <span class="variable">body</span>);
<span class="variable">viewHTML</span>(<span class="variable">renderHTML</span>(<span class="variable">doc</span>));</pre><p><a class="paragraph" href="#p3276b3e80a052310" name="p3276b3e80a052310"> ¶ </a>Now, I should probably warn you that this approach is not perfect.
What it actually renders is <a name="key12"></a>XML, which is similar to HTML, but more
structured. In simple cases, such as the above, this does not cause
any problems. However, there are some things, which are correct XML,
but not proper HTML, and these might confuse a browser that is trying
to show the documents we create. For example, if you have an empty
<code>script</code> tag (used to put JavaScript into a page) in your document,
browsers will not realise that it is empty and think that everything
after it is JavaScript. (In this case, the problem can be fixed by
putting a single space inside of the tag, so that it is no longer
empty, and gets a proper closing tag.)</p></div><hr><div class="block"><a name="exercise5"></a><div class="exercisenum">Ex. 6.5</div><div class="exercise"><p><a class="paragraph" href="#p1e0ef833450fc1f3" name="p1e0ef833450fc1f3"> ¶ </a>Write a function <code>renderFragment</code>, and use that to implement another
function <code>renderParagraph</code>, which takes a paragraph object (with the
footnotes already filtered out), and produces the correct HTML element
(which might be a paragraph or a header, depending on the <code>type</code>
property of the paragraph object).</p><p><a class="paragraph" href="#p1f0861c7ed9d1bfa" name="p1f0861c7ed9d1bfa"> ¶ </a>This function might come in useful for rendering the footnote
references:</p><pre class="code not-run"><button type="button" title="Run this code" class="codebutton run"></button><button title="Load this code into the console" type="button" class="codebutton load"></button><span class="keyword">function</span> <span class="variable">footnote</span>(<span class="variabledef">number</span>) {
  <span class="keyword">return</span> <span class="variable">tag</span>(<span class="string">"sup"</span>, [<span class="variable">link</span>(<span class="string">"#footnote"</span> + <span class="localvariable">number</span>,
                          <span class="variable">String</span>(<span class="localvariable">number</span>))]);
}</pre><p><a class="paragraph" href="#p794dcad4550f2084" name="p794dcad4550f2084"> ¶ </a>A <code>sup</code> tag will show its content as 'superscript', which means it
will be smaller and a little higher than other text. The target of the
link will be something like <code>"#footnote1"</code>. Links that contain a '#'
character refer to 'anchors' within a page, and in this case we will
use them to make it so that clicking on the footnote link will take
the reader to the bottom of the page, where the footnotes live.</p><p><a class="paragraph" href="#p72966e0371d3b74" name="p72966e0371d3b74"> ¶ </a>The tag to render emphasised fragments with is <code>em</code>, and normal text
can be rendered without any extra tags.</p></div><div class="toggle">[show solution]</div><div style="display: none;" class="solution"><div title="Hide the solution." class="solutionarrow">×</div><pre class="code not-run"><button type="button" title="Run this code" class="codebutton run"></button><button title="Load this code into the console" type="button" class="codebutton load"></button><span class="keyword">function</span> <span class="variable">renderParagraph</span>(<span class="variabledef">paragraph</span>) {
  <span class="keyword">return</span> <span class="variable">tag</span>(<span class="localvariable">paragraph</span>.<span class="property">type</span>, <span class="variable">map</span>(<span class="variable">renderFragment</span>,
                                 <span class="localvariable">paragraph</span>.<span class="property">content</span>));
}

<span class="keyword">function</span> <span class="variable">renderFragment</span>(<span class="variabledef">fragment</span>) {
  <span class="keyword">if</span> (<span class="localvariable">fragment</span>.<span class="property">type</span> == <span class="string">"reference"</span>)
    <span class="keyword">return</span> <span class="variable">footnote</span>(<span class="localvariable">fragment</span>.<span class="property">number</span>);
  <span class="keyword">else</span> <span class="keyword">if</span> (<span class="localvariable">fragment</span>.<span class="property">type</span> == <span class="string">"emphasised"</span>)
    <span class="keyword">return</span> <span class="variable">tag</span>(<span class="string">"em"</span>, [<span class="localvariable">fragment</span>.<span class="property">content</span>]);
  <span class="keyword">else</span> <span class="keyword">if</span> (<span class="localvariable">fragment</span>.<span class="property">type</span> == <span class="string">"normal"</span>)
    <span class="keyword">return</span> <span class="localvariable">fragment</span>.<span class="property">content</span>;
}</pre></div></div><hr><div class="block"><p><a class="paragraph" href="#p260d6cceac205754" name="p260d6cceac205754"> ¶ </a>We are almost finished. The only thing that we do not have a rendering
function for yet are the footnotes. To make the <code>"#footnote1"</code> links
work, an anchor must be included with every footnote. In HTML, an
anchor is specified with an <code>a</code> element, which is also used for links.
In this case, it needs a <code>name</code> attribute, instead of an <code>href</code>.</p><pre class="code not-run"><button type="button" title="Run this code" class="codebutton run"></button><button title="Load this code into the console" type="button" class="codebutton load"></button><span class="keyword">function</span> <span class="variable">renderFootnote</span>(<span class="variabledef">footnote</span>) {
  <span class="keyword">var</span> <span class="variabledef">number</span> = <span class="string">"["</span> + <span class="localvariable">footnote</span>.<span class="property">number</span> + <span class="string">"] "</span>;
  <span class="keyword">var</span> <span class="variabledef">anchor</span> = <span class="variable">tag</span>(<span class="string">"a"</span>, [<span class="localvariable">number</span>], {<span class="property">name</span>: <span class="string">"footnote"</span> + <span class="localvariable">footnote</span>.<span class="property">number</span>});
  <span class="keyword">return</span> <span class="variable">tag</span>(<span class="string">"p"</span>, [<span class="variable">tag</span>(<span class="string">"small"</span>, [<span class="localvariable">anchor</span>, <span class="localvariable">footnote</span>.<span class="property">content</span>])]);
}</pre><p><a class="paragraph" href="#p15ce2e41d5804dbd" name="p15ce2e41d5804dbd"> ¶ </a>Here, then, is the function which, when given a file in the correct
format and a document title, returns an HTML document:</p><pre class="code not-run"><button type="button" title="Run this code" class="codebutton run"></button><button title="Load this code into the console" type="button" class="codebutton load"></button><span class="keyword">function</span> <span class="variable">renderFile</span>(<span class="variabledef">file</span>, <span class="variabledef">title</span>) {
  <span class="keyword">var</span> <span class="variabledef">paragraphs</span> = <span class="variable">map</span>(<span class="variable">processParagraph</span>, <span class="localvariable">file</span>.<span class="property">split</span>(<span class="string">"\n\n"</span>));
  <span class="keyword">var</span> <span class="variabledef">footnotes</span> = <span class="variable">map</span>(<span class="variable">renderFootnote</span>,
                      <span class="variable">extractFootnotes</span>(<span class="localvariable">paragraphs</span>));
  <span class="keyword">var</span> <span class="variabledef">body</span> = <span class="variable">map</span>(<span class="variable">renderParagraph</span>, <span class="localvariable">paragraphs</span>).<span class="property">concat</span>(<span class="localvariable">footnotes</span>);
  <span class="keyword">return</span> <span class="variable">renderHTML</span>(<span class="variable">htmlDoc</span>(<span class="localvariable">title</span>, <span class="localvariable">body</span>));
}

<span class="variable">viewHTML</span>(<span class="variable">renderFile</span>(<span class="variable">recluseFile</span>(), <span class="string">"The Book of Programming"</span>));</pre><p><a class="paragraph" href="#p44b9e2a4b2c6f4ee" name="p44b9e2a4b2c6f4ee"> ¶ </a>The <a name="key13"></a><code>concat</code> method of an array can be used to concatenate another
array to it, similar to what the <code>+</code> operator does with strings.</p></div><hr><div class="block"><p><a class="paragraph" href="#p38be59fe5e85639c" name="p38be59fe5e85639c"> ¶ </a>In the chapters after this one, elementary higher-order functions like
<code>map</code> and <code>reduce</code> will always be available and will be used by code
examples. Now and then, a new useful tool is added to this. In
<a href="chapter9.html">chapter 9</a>, we develop a more structured approach to this set of
'basic' functions.</p></div><hr><div class="block"><p><a class="paragraph" href="#p56acbb13d5ed03ef" name="p56acbb13d5ed03ef"> ¶ </a>When using higher-order functions, it is often annoying that operators
are not functions in JavaScript. We have needed <code>add</code> or <code>equals</code>
functions at several points. Rewriting these every time, you will
agree, is a pain. From now on, we will assume the existence of an
object called <code>op</code>, which contains these functions:</p><pre class="code not-run"><button type="button" title="Run this code" class="codebutton run"></button><button title="Load this code into the console" type="button" class="codebutton load"></button><span class="keyword">var</span> <span class="variable">op</span> = {
  <span class="string">"+"</span>: <span class="keyword">function</span>(<span class="variabledef">a</span>, <span class="variabledef">b</span>){<span class="keyword">return</span> <span class="localvariable">a</span> + <span class="localvariable">b</span>;},
  <span class="string">"=="</span>: <span class="keyword">function</span>(<span class="variabledef">a</span>, <span class="variabledef">b</span>){<span class="keyword">return</span> <span class="localvariable">a</span> == <span class="localvariable">b</span>;},
  <span class="string">"==="</span>: <span class="keyword">function</span>(<span class="variabledef">a</span>, <span class="variabledef">b</span>){<span class="keyword">return</span> <span class="localvariable">a</span> === <span class="localvariable">b</span>;},
  <span class="string">"!"</span>: <span class="keyword">function</span>(<span class="variabledef">a</span>){<span class="keyword">return</span> !<span class="localvariable">a</span>;}
  <span class="comment">/* and so on */</span>
};</pre><p><a class="paragraph" href="#pfeabae2909dca1b" name="pfeabae2909dca1b"> ¶ </a>So we can write <code>reduce(op["+"], 0, [1, 2, 3, 4, 5])</code> to sum an array.
But what if we need something like <code>equals</code> or <code>makeAddFunction</code>, in
which one of the arguments already has a value? In that case we are
back to writing a new function again.</p><p><a class="paragraph" href="#p7748cd15a29a68dd" name="p7748cd15a29a68dd"> ¶ </a>For cases like that, something called '<a name="key14"></a>partial application' is
useful. You want to create a new function that already knows some of
its arguments, and treats any additional arguments it is passed as
coming after these fixed arguments. This can be done by making
creative use of the <code>apply</code> method of a function:</p><pre class="code not-run"><button type="button" title="Run this code" class="codebutton run"></button><button title="Load this code into the console" type="button" class="codebutton load"></button><span class="keyword">function</span> <span class="variable">asArray</span>(<span class="variabledef">quasiArray</span>, <span class="variabledef">start</span>) {
  <span class="keyword">var</span> <span class="variabledef">result</span> = [];
  <span class="keyword">for</span> (<span class="keyword">var</span> <span class="variabledef">i</span> = (<span class="localvariable">start</span> || <span class="atom">0</span>); <span class="localvariable">i</span> &lt; <span class="localvariable">quasiArray</span>.<span class="property">length</span>; <span class="localvariable">i</span>++)
    <span class="localvariable">result</span>.<span class="property">push</span>(<span class="localvariable">quasiArray</span>[<span class="localvariable">i</span>]);
  <span class="keyword">return</span> <span class="localvariable">result</span>;
}

<span class="keyword">function</span> <span class="variable">partial</span>(<span class="variabledef">func</span>) {
  <span class="keyword">var</span> <span class="variabledef">fixedArgs</span> = <span class="variable">asArray</span>(<span class="localvariable">arguments</span>, <span class="atom">1</span>);
  <span class="keyword">return</span> <span class="keyword">function</span>(){
    <span class="keyword">return</span> <span class="localvariable">func</span>.<span class="property">apply</span>(<span class="atom">null</span>, <span class="localvariable">fixedArgs</span>.<span class="property">concat</span>(<span class="variable">asArray</span>(<span class="localvariable">arguments</span>)));
  };
}</pre><p><a class="paragraph" href="#pe9b122460ca0eee" name="pe9b122460ca0eee"> ¶ </a>We want to allow binding multiple arguments at the same time, so the
<code>asArray</code> function is necessary to make normal arrays out of the
<code>arguments</code> objects. It copies their content into a real array, so
that the <code>concat</code> method can be used on it. It also takes an optional
second argument, which can be used to leave out some arguments at the
start.</p><p><a class="paragraph" href="#p342f5837255ffd22" name="p342f5837255ffd22"> ¶ </a>Also note that it is necessary to store the <code>arguments</code> of the outer
function (<code>partial</code>) into a variable with another name, because
otherwise the inner function can not see them ? it has its own
<code>arguments</code> variable, which shadows the one of the outer function.</p><p><a class="paragraph" href="#p78f7fd1997c68fae" name="p78f7fd1997c68fae"> ¶ </a>Now <code>equals(10)</code> could be written as <code>partial(op["=="], 10)</code>, without
the need for a specialized <code>equals</code> function. And you can do things
like this:</p><pre class="code not-run"><button type="button" title="Run this code" class="codebutton run"></button><button title="Load this code into the console" type="button" class="codebutton load"></button><span class="variable">show</span>(<span class="variable">map</span>(<span class="variable">partial</span>(<span class="variable">op</span>[<span class="string">"+"</span>], <span class="atom">1</span>), [<span class="atom">0</span>, <span class="atom">2</span>, <span class="atom">4</span>, <span class="atom">6</span>, <span class="atom">8</span>, <span class="atom">10</span>]));</pre><p><a class="paragraph" href="#p53b9ce7b99d38fa4" name="p53b9ce7b99d38fa4"> ¶ </a>The reason <code>map</code> takes its function argument before its array argument
is that it is often useful to partially apply map by giving it a
function. This 'lifts' the function from operating on a single value
to operating on an array of values. For example, if you have an array
of arrays of numbers, and you want to square them all, you do this:</p><pre class="code not-run"><button type="button" title="Run this code" class="codebutton run"></button><button title="Load this code into the console" type="button" class="codebutton load"></button><span class="keyword">function</span> <span class="variable">square</span>(<span class="variabledef">x</span>) {<span class="keyword">return</span> <span class="localvariable">x</span> * <span class="localvariable">x</span>;}

<span class="variable">show</span>(<span class="variable">map</span>(<span class="variable">partial</span>(<span class="variable">map</span>, <span class="variable">square</span>), [[<span class="atom">10</span>, <span class="atom">100</span>], [<span class="atom">12</span>, <span class="atom">16</span>], [<span class="atom">0</span>, <span class="atom">1</span>]]));</pre></div><hr><div class="block"><p><a class="paragraph" href="#p185552a7e4f5ee01" name="p185552a7e4f5ee01"> ¶ </a>One last trick that can be useful when you want to combine functions
is <a name="key15"></a>function composition. At the start of this chapter I showed a
function <code>negate</code>, which applies the boolean <em>not</em> operator to the
result of calling a function:</p><pre class="code not-run"><button type="button" title="Run this code" class="codebutton run"></button><button title="Load this code into the console" type="button" class="codebutton load"></button><span class="keyword">function</span> <span class="variable">negate</span>(<span class="variabledef">func</span>) {
  <span class="keyword">return</span> <span class="keyword">function</span>() {
    <span class="keyword">return</span> !<span class="localvariable">func</span>.<span class="property">apply</span>(<span class="atom">null</span>, <span class="localvariable">arguments</span>);
  };
}</pre><p><a class="paragraph" href="#p63a12d097069c39a" name="p63a12d097069c39a"> ¶ </a>This is a special case of a general pattern: call function A, and then
apply function B to the result. Composition is a common concept in
mathematics. <a name="key16"></a>It can be caught in a higher-order function
like this:</p><pre class="code not-run"><button type="button" title="Run this code" class="codebutton run"></button><button title="Load this code into the console" type="button" class="codebutton load"></button><span class="keyword">function</span> <span class="variable">compose</span>(<span class="variabledef">func1</span>, <span class="variabledef">func2</span>) {
  <span class="keyword">return</span> <span class="keyword">function</span>() {
    <span class="keyword">return</span> <span class="localvariable">func1</span>(<span class="localvariable">func2</span>.<span class="property">apply</span>(<span class="atom">null</span>, <span class="localvariable">arguments</span>));
  };
}

<span class="keyword">var</span> <span class="variable">isUndefined</span> = <span class="variable">partial</span>(<span class="variable">op</span>[<span class="string">"==="</span>], <span class="atom">undefined</span>);
<span class="keyword">var</span> <span class="variable">isDefined</span> = <span class="variable">compose</span>(<span class="variable">op</span>[<span class="string">"!"</span>], <span class="variable">isUndefined</span>);
<span class="variable">show</span>(<span class="variable">isDefined</span>(<span class="variable">Math</span>.<span class="property">PI</span>));
<span class="variable">show</span>(<span class="variable">isDefined</span>(<span class="variable">Math</span>.<span class="property">PIE</span>));</pre><p><a class="paragraph" href="#p6fe822fa5221ce46" name="p6fe822fa5221ce46"> ¶ </a>Here we are defining new functions without using the <code>function</code>
keyword at all. This can be useful when you need to create a simple
function to give to, for example, <code>map</code> or <code>reduce</code>. However, when a
function becomes more complex than these examples, it is usually
shorter (not to mention more efficient) to just write it out with
<code>function</code>.</p></div><div class="navigation"><a href="chapter5.html">&lt;&lt; Previous chapter</a> | <a href="contents.html">Contents</a> | <a href="index.html">Cover</a> | <a href="chapter7.html">Next chapter &gt;&gt;</a></div><div class="footer">© <a href="mailto:marijnh@gmail.com">Marijn Haverbeke</a> (<a href="http://creativecommons.org/licenses/by/3.0/">license</a>), written March to July 2007, last modified on November 28 2013.</div>
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>Shuffling and Sorting JavaScript Arrays</h1>
		<div class="post-wrapper">
			<p>Its been said that there are only two hard problems in computer science: cache invalidation and naming things. To those, I might add a third: reordering and prioritizing things. Thankfully, a lot of brainpower has been expended on solving just those kinds of problems.
<p>Shuffling and sorting is often needed in scripts: ranking a series of recorded scores, for example, or randomly reordering values for use in a game. Unfortunately <a href="/Javascript" rel=tag>JavaScript</a> doesnt yet have a built-in <code>shuffle</code> method, and its <code>sort</code> method has a few quirks but both can be accomplished if you know how.<h2>Shuffling An Array</h2>
<p>I covered shuffling previously in <a href="/82/Recipes-for-Randomness-in-JavaScript">my article on recipes for randomness in JavaScript</a>: this version, known as the <a href="https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle#The_modern_algorithm">Durstenfeld shuffle</a>, is a high-performance variation:
<pre><code class="language-javascript">function shuffle(array) {
    for (var i = array.length - 1; i > 0; i--) {
        var j = Math.floor(Math.random() * (i + 1));
        var temp = array[i];
        array[i] = array[j];
        array[j] = temp;
    }
    return array;
}</code></pre>
<p>Given an <a href="/933/JavaScript-Arrays">array</a>:
<pre><code class="language-javascript">var flintstones = ["Pebbles", "Bam-Bam", "Wilma", "Fred"];</code></pre>
<p>We can shuffle it with:
<pre><code class="language-javascript">shuffle(flintstones);</code></pre>
<p>Which might produce (in the <a href="/767/Introducing-the-JavaScript-console">console</a>) something like:
<pre><code class="language-javascript">> ["Wilma", "Bam-Bam", "Fred", "Pebbles"]</code></pre>
<p>The result will always be randomly shuffled.
<h2>Sorting an Array</h2>
<p>You can use the <code>sort</code> method to sort an array:
<pre><code class="language-javascript">flintstones.sort();</code></pre>
<p>which will arrange the array elements in alphabetical order:
<pre><code class="language-javascript">> ["Bam-Bam", "Fred", "Pebbles", "Wilma"]</code></pre>
<p>However, things get tricky if we try to sort numerical information:
<pre><code class="language-javascript">var ranValues = [ 7, 11, 12, 15, 3, 1, 10 ];</code></pre>
<p>Sorting the array yields this rather confusing result:
<pre><code class="language-javascript">> [1, 10, 11, 12, 15, 3, 7]</code></pre>
<h3>Whats going on?</h3>
<p>By default, <code>sort</code> works in lexicographical order: i.e. a dictionary sort. <em>This includes numerals</em>: <code>sort</code> converts the numbers in the array to strings, then orders them to produce a result. In that system <code>3</code> comes immediately before <code>30</code>, yielding the strange result we see above.
<p>Fortunately, we can pass a <a href="/1033/Introduction-to-JavaScript-Functions"><em>function</em></a> into the <code>sort</code> method to control the sorting process. To sort numerals correctly use:
<pre><code class="language-javascript">sort(function(a,b){return a - b}) </code></pre>
<p>This function takes two values from the array, <code>a</code> and <code>b</code>. It will only return one of three values: <code>-1</code> means that <code>a</code> is less than <code>b</code>, and should be placed before it; <code>0</code> means that the values are equal, and no change should be applied, and <code>1</code> means that <code>a</code> should be placed <em>after</em> <code>b</code>. Applied to our array example produces the correct, expected result:
<pre><code class="language-javascript">ranValues.sort(function(a,b){return a - b});
> [1, 3, 7, 10, 11, 12, 15]</code></pre>
<p>To produce a <em>descending</em> sort, reverse the position of <code>a</code> and <code>b</code> in the function:
<pre><code class="language-javascript">ranValues.sort(function(a,b){return b - a});
> [15, 12, 11, 10, 7, 3, 1]</code></pre>
			
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>Events and Event Delegation</h1>
		<div class="post-wrapper">
		<p>http://jqfundamentals.com/chapter/events</p>
<p>jQuery makes it easy to respond to user interaction with a web page. This means that you can write code that runs when a user clicks on a certain part of the page, or when she moves her mouse over a form element. For example, this
code listens for a user to click on any <code>li</code> element in the page:

</p>
<pre><code>$( &#39;li&#39; ).click(function( event ) {
  console.log( &#39;clicked&#39;, $( this ).text() );
});</code></pre>
<p>The code above selects all list items on the page, then binds a handler function to the click event of each list item using jQuery&#39;s <code>.click()</code> method.

</p>
<p>Methods such as <code>.click()</code>, <code>.blur()</code>, <code>.change()</code>, and others are &quot;shorthand&quot;
methods for event binding. jQuery provides a number of these shorthand methods, each of which corresponds to a native DOM event:

</p>
<table class="table table-bordered">
  <thead>
    <tr>
      <th>Native Event Name</th>
      <th>Shorthand Method</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>click</td>
      <td><code>.click()</code></td>
    </tr>
    <tr>
      <td>keydown</td>
      <td><code>.keydown()</code></td>
    </tr>
    <tr>
      <td>keypress</td>
      <td><code>.keypress()</code></td>
    </tr>
    <tr>
      <td>keyup</td>
      <td><code>.keyup()</code></td>
    </tr>
    <tr>
      <td>mouseover</td>
      <td><code>.mouseover()</code></td>
    </tr>
    <tr>
      <td>mouseout</td>
      <td><code>.mouseout()</code></td>
    </tr>
    <tr>
      <td>mouseenter</td>
      <td><code>.mouseenter()</code></td>
    </tr>
    <tr>
      <td>mouseleave</td>
      <td><code>.mouseleave()</code></td>
    </tr>
    <tr>
      <td>scroll</td>
      <td><code>.scroll()</code></td>
    </tr>
    <tr>
      <td>focus</td>
      <td><code>.focus()</code></td>
    </tr>
    <tr>
      <td>blur</td>
      <td><code>.blur()</code></td>
    </tr>
    <tr>
      <td>resize</td>
      <td><code>.resize()</code></td>
    </tr>
  </tbody>
</table>


<p>Under the hood, all of the shorthand methods make use of jQuery&#39;s <code>.on()</code> method. You can use the <code>.on()</code> method in your own code; indeed, doing so gives you a lot more flexibility. When you use the <code>.on()</code> method, you pass the native event name as the first argument, and then the handler function as the second argument:

</p>
<pre><code>$( &#39;li&#39; ).on( &#39;click&#39;, function( event ) {
  console.log( &#39;clicked&#39;, $( this ).text() );
});</code></pre>
<p>Once you&#39;ve &quot;bound&quot; an event handler to an element, you can trigger that event
handler using jQuery as well.

</p>
<pre><code>$( &#39;li&#39; ).trigger( &#39;click&#39; );</code></pre>
<p>If the event you want to trigger has a shorthand method (see the table above), you can also trigger the event by simply calling the shorthand method:

</p>
<pre><code>$( &#39;li&#39; ).click();</code></pre>
<div class="alert alert-info">
  When you <code>.trigger()</code> an event, you only trigger event handlers that were bound with JavaScript &mdash; you don&#39;t trigger the default behavior of the event. For example, if you trigger the click event of an <code>a</code> element, it will not automatically navigate to the <code>href</code> of that element (though you could write code that would make it do so).
</div>

<p>Once you have bound an event, you can unbind the event using jQuery&#39;s <code>.off()</code> method. This will remove any event handlers that were bound to the specified event:

</p>
<pre><code>$( &#39;li&#39; ).off( &#39;click&#39; );</code></pre>
<h2>Namespaced events</h2>
<p>One advantage that <code>.on()</code> offers is the ability to use &quot;namespaced&quot; events.
When would you want to use namespaces? Consider a situation where you bind some events, and then want to <em>unbind</em> some of the handlers. As we just saw, you could do it this way:

</p>
<pre><code>```&lt;span class=&quot;caution&quot;&gt;caution&lt;/span&gt; antipattern
$( &#39;li&#39; ).on( &#39;click&#39;, function() {
  console.log( &#39;a list item was clicked&#39; );
});

$( &#39;li&#39; ).on( &#39;click&#39;, function() {
  registerClick();
  doSomethingElse();
});

$( &#39;li&#39; ).off( &#39;click&#39; );</code></pre>
<p>However, this will unbind <em>all</em> click handlers on all <code>li</code> elements, which isn&#39;t what we want. If you bind an event handler using a <em>namespaced event</em>, you can target that event handler specifically:

</p>
<pre><code>$( &#39;li&#39; ).on( &#39;click.logging&#39;, function() {
  console.log( &#39;a list item was clicked&#39; );
});

$( &#39;li&#39; ).on( &#39;click.analytics&#39;, function() {
  registerClick();
  doSomethingElse();
});

$( &#39;li&#39; ).off( &#39;click.logging&#39; );</code></pre>
<p>This code leaves our analytics-related click untouched, while unbinding our logging-related click.

</p>
<p>We can also use namespaces to trigger only certain events:

</p>
<pre><code>$( &#39;li&#39; ).trigger( &#39;click.logging&#39; );</code></pre>
<h2>Binding multiple events at once</h2>
<p>Another benefit of using <code>.on()</code> is the ability to bind to multiple events at
once. For example, you might want to run the same code when a user scrolls the
window or when a user resizes the window. The <code>.on()</code> method lets you pass both
events &mdash; in a space-separated string &mdash; followed by the function that you want
to handle both events:

</p>
<pre><code>$( &#39;input[type=&quot;text&quot;]&#39; ).on(&#39;focus blur&#39;, function() {
  console.log( &#39;The user focused or blurred the input&#39; );
});

$( window ).on( &#39;resize.foo scroll.bar&#39;, function() {
  console.log( &#39;The window has been resized or scrolled!&#39; );
});</code></pre>
<h2>Passing named functions as event handlers</h2>
<p>In all of our examples up until now, we&#39;ve been passing anonymous functions as event handlers. However, you can create a function ahead of time and store it in a variable, then pass that variable as the event handler. This is useful if you want to use the same handler for different events or events on different elements.

</p>
<pre><code>var handleClick = function() {
  console.log( &#39;something was clicked&#39; );
};

$( &#39;li&#39; ).on( &#39;click&#39;, handleClick );
$( &#39;h1&#39; ).on( &#39;click&#39;, handleClick );</code></pre>
<h2>The event object</h2>
<p>Whenever an event is triggered, the event handler function receives one
argument, an event object that is normalized across browsers. This object has
many <a href="http://api.jquery.com/category/events/event-object/">useful properties</a>,
including the following:

</p>
<pre><code>$( document ).on( &#39;click&#39;, function( event ) {
  console.log( event.type );    // The event type, eg. &quot;click&quot;
  console.log( event.which );   // The button or key that was pressed.
  console.log( event.target );  // The originating element.
  console.log( event.pageX );   // The document mouse X coordinate.
  console.log( event.pageY );   // The document mouse Y coordinate.
});</code></pre>
<h2>Inside the event handler</h2>
<p>When you specify a function to be used as an event handler, that function gets
access to the <em>raw DOM element</em> that initiated the event as <code>this</code>. If you want
to use jQuery to manipulate the element, you will need to pass it to <code>$()</code>:

</p>
<pre><code>$( &#39;input&#39; ).on( &#39;keydown&#39;, function( event ) {
  // this: The element on which the event handler was bound.
  // event: The event object.

  // Change the input element&#39;s background to red if backspace was
  // pressed, otherwise green.
  $( this ).css( &#39;background&#39;, event.which === 8 ? &#39;red&#39; : &#39;green&#39; );
});</code></pre>
<h2>Preventing the default action</h2>
<p>Often, you&#39;ll want to prevent the default action of an event; for example, you
may want to handle a click on an <code>a</code> element using AJAX, rather than triggering
a full page reload. Many developers achieve this by having the event handler
return <code>false</code>, but this actually has another side effect: it stops the
<em>propagation</em> of the event as well, which can have unintended consequences.
The right way to prevent the default behavior of an event is to call the
<code>.preventDefault()</code> method of the event object.

</p>
<pre><code>$( &#39;a&#39; ).on( &#39;click&#39;, function( event ) {
  // Prevent the default action.
  event.preventDefault();
  // Log stuff.
  console.log( &#39;I was just clicked!&#39; );
});</code></pre>
<p>This will allow the event to &quot;bubble,&quot; which we&#39;ll explore below.

</p>
<h2>Event bubbling</h2>
<p>Consider the following code:

</p>
<pre><code>$( &#39;*&#39; ).add( [ document, window ] ).on( &#39;click&#39;, function( event ) {
  event.preventDefault();
  console.log( this );
});</code></pre>
<p>It binds a click handler to all elements in a document (something you should
<em>never</em> do in real code), as well as to the <code>document</code> and <code>window</code>. What
happens when you click on an <code>a</code> element that&#39;s nested inside other elements?
In fact, the click event will be triggered for the <code>a</code> element as well as for
all of the elements that contain the <code>a</code> &mdash; all the way up to the <code>document</code>
and the <code>window</code>. (You can click on the <i class="icon-eye-open"></i> icon to
try it in the sandbox yourself.)

</p>
<p>This behavior is called event bubbling &mdash; the event is triggered on the element
on which the user clicked, and &mdash; unless you call <code>.stopPropagation()</code> on the
event object &mdash; the event is then triggered all the way up the DOM.

</p>
<p>You can see this more clearly when you consider the following markup:

</p>
<pre><code>&lt;a href=&quot;#foo&quot;&gt;&lt;span&gt;I am a Link!&lt;/span&gt;&lt;/a&gt;
&lt;a href=&quot;#bar&quot;&gt;&lt;b&gt;&lt;i&gt;I am another Link!&lt;/i&gt;&lt;/b&gt;&lt;/a&gt;</code></pre>
<p>And the following code:

</p>
<pre><code>$( &#39;a&#39; ).on( &#39;click&#39;, function( event ) {
  event.preventDefault();
  console.log( $( this ).attr( &#39;href&#39; ) );
});</code></pre>
<p>When you click on &quot;I am a Link!&quot;, you are not actually clicking on an <code>a</code>, but
rather on a <code>span</code> inside of an <code>a</code>. Nevertheless, the click event bubbles up
to the <code>a</code>, and the bound click handler fires.

</p>
<h2>Event delegation</h2>
<p>The bubbling behavior of events allows us to do &quot;event delegation&quot; &mdash; binding
handlers to high-level elements, and then detecting which low-level element
initiated the event. For example, we could bind an event to an unordered list,
and then determine which element initiated the event:

</p>
<pre><code>$( &#39;#my-unordered-list&#39; ).on( &#39;click&#39;, function( event ) {
  console.log( event.target ); // logs the element that initiated the event
});</code></pre>
<p>Of course, if our unordered list contains list items that contain other markup,
but we really only care about which list item was clicked, then this can get
messy in a hurry. Thankfully, jQuery provides a helper that lets us specify
which elements we care about, while still only binding to the high-level
element.

</p>
<pre><code>$( &#39;#my-unordered-list&#39; ).on( &#39;click&#39;, &#39;li&#39;, function( event ) {
  console.log( this ); // logs the list item that was clicked
});

$( &#39;&lt;li&gt;a new list item!&lt;/li&gt;&#39; ).appendTo( &#39;#my-unordered-list&#39; );</code></pre>
<p>Event delegation has two main benefits. First, it allows us to bind fewer event
handlers than we&#39;d have to bind if we were listening to clicks on individual
elements, which can be a big performance gain. Second, it allows us to bind to
parent elements &mdash; such as an unordered list &mdash; and know that our event
handlers will fire as expected <em>even if the contents of that parent element
change</em>.

</p>
<p>For example, this code adds a new list item after the event delegation is set
up; clicking on the new item works just fine, without any additional event
binding code.

</p>
<pre><code>$( &#39;#my-unordered-list&#39; ).on( &#39;click&#39;, &#39;li&#39;, function( event ) {
  console.log( this ); // logs the list item that was clicked
});

$( &#39;&lt;li&gt;a new list item!&lt;/li&gt;&#39; ).appendTo( &#39;#my-unordered-list&#39; );</code></pre>
<h2>Conclusion</h2>
<p>In this section, we took a look at various ways to listen for user interaction
with our page, including how we can use event delegation to more efficiently
set up event handlers. In the next section, we&#39;ll look at how we can animate
elements using jQuery&#39;s effects methods.
</p>
			
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>JavaScript Basics</h1>
		<div class="post-wrapper">
			
			<p>jQuery is built on top of JavaScript, a rich and expressive language in its own
right. This section covers the basic concepts of JavaScript, as well as some
frequent pitfalls for people who have not used JavaScript before. While it will
be of particular value to people with no programming experience, even people
who have used other programming languages may benefit from learning about some
of the peculiarities of JavaScript.

</p>
<p>Here&#39;s a simple JavaScript program that adds a message to the page:

</p>
<pre><code>// create a function that will greet a person,
// and assign the function to the `greet` variable
var greet = function( person, message ) {
  var greeting = &#39;Hello, &#39; + person + &#39;!&#39;;
  log( greeting + &#39; &#39; + message );
};

// use the function to greet Jory, passing in her
// name and the message we want to use
greet( &#39;Jory&#39;, &#39;Welcome to JavaScript&#39; );

// use the function to greet Rebecca, passing in her
// name and a different message
greet( &#39;Rebecca&#39;, &#39;Thanks for joining us&#39; );</code></pre>
<div class="alert">
  In the above example, we use a function called <code>log</code>. This is a helper function that is defined by the JavaScript that powers this site &mdash; it is not a built-in JavaScript function. You can use <code>log</code> in the built-in editor for this site, but you&#39;ll need to use <code>console.log</code> in your normal code, and then view the output in your browser&#39;s console.
</div>

<p>You can try running this program by clicking the <i class="icon-eye-open"></i>
and it will copy the code to the built-in editor automatically. Once it&#39;s
there, you can click the <i class="icon-play"></i> button to execute it; you
can also make changes to it. Press the <i class="icon-repeat"></i> button to
return to the original code.

</p>
<p>It&#39;s OK if you don&#39;t understand everything that&#39;s going on in this program; in the rest of this section, we&#39;ll talk about variables, functions, and several other building blocks of JavaScript.

</p>
<h2>A comment about comments</h2>
<p>Comments can be a useful tool for explaining what&#39;s happening in a piece of code. The contents of a comment will have no effect whatsoever on how your code runs. Some people like to heavily comment their code, while others prefer to include comments only to explain things that may not be immediately obvious.

</p>
<p>JavaScript allows for single-line and multi-line comments. A single-line comment begins with <code>//</code>; a multi-line comment begins with <code>/*</code> and ends with <code>*/</code>.

</p>
<pre><code>// This is a single line comment
var foo;

/*
  This is a multi-line comment. It can go on
  for several lines, like this.
 */</code></pre>
<p>You&#39;ll also sometimes see multi-line comments used for inline comments:

</p>
<pre><code>function cornify( unicorns /* integer */, rainbows /* integer */ ) {

}</code></pre>
<h2>The building blocks of JavaScript</h2>
<h3>Variables</h3>
<p>Variables are the way that we store values so we can use them later. Variables can contain any value &mdash; text, numbers, data (such as &quot;arrays&quot; and &quot;objects&quot;), even code (in the form of &quot;functions&quot;). We declare a variable using a <code>var</code> statement:

</p>
<pre><code>var myName = &#39;Rebecca&#39;;</code></pre>
<p>Variable names can be just about anything, as long as they don&#39;t begin with a number and don&#39;t include a hyphen.

</p>
<p>You can define one variable per statement:

</p>
<pre><code>var a = 1;
var b = &#39;two&#39;;</code></pre>
<p>You can also define multiple variables in a single statement, by separating them with commas:

</p>
<pre><code>var a = 1,
    b = &#39;two&#39;;</code></pre>
<p>Once you have assigned a value to a variable, you can use that variable whenever you want to get access to the value you stored.

</p>
<pre><code>log( myName ); // logs &#39;Rebecca&#39;</code></pre>
<p>Variables are a key ingredient in adhering to the <em>Don&#39;t Repeat Yourself</em> philosophy. If you need to use a value more than once, you probably want to store it in a variable.

</p>
<p>We&#39;ll talk more about variables in the next section, Functions.

</p>
<h3>Functions</h3>
<p>Functions are a fundamental building block of JavaScript programs; they provide a way that we can put small pieces of functionality in a neatly-wrapped package. For example, consider a function that adds two numbers:

</p>
<pre><code>function(a, b) {
  return a + b;
}</code></pre>
<p>This function takes two <strong>arguments</strong>, <code>a</code> and <code>b</code>. It adds them together, and returns the result.

</p>
<p>This is a valid bit of JavaScript, but as written, there&#39;s no way for us to <em>call</em> our function if we actually want to add two things. We can solve this by assigning our function to a variable:

</p>
<pre><code>var addTwoNumbers = function(a, b) {
  return a + b;
};</code></pre>
<p>What we&#39;ve done here is take a <strong>function expression</strong> and assign it to a variable. Now that we&#39;ve done this, we can call our function by using the name of the variable:

</p>
<pre><code>log( addTwoNumbers(1, 1) ); // logs 2</code></pre>
<p>We could also use a <strong>function declaration</strong> to give our function a name:

</p>
<pre><code>function addTwoNumbers(a, b) {
  return a + b;
}</code></pre>
<p>This lets us call our function just like we did before, but this approach should be used with caution, as explained <a href="http://javascriptweblog.wordpress.com/2010/07/06/function-declarations-vs-function-expressions/">in this post</a>.

</p>
<p>Bottom line: naming functions using the function declaration approach can have unexpected results if you don&#39;t fully understand a feature of JavaScript known as hoisting. The details of hoisting are beyond the scope of this guide, but for now we&#39;ll stick to assigning function expressions to variables.

</p>
<h4>Functions and variable scope</h4>
<p>Variables that are declared inside a function with a <code>var</code> statement are only available inside of the function; this is generally desirable, and all variables should be declared with a <code>var</code> statement unless they are intended to be <strong>global</strong> &mdash; that is, available anywhere in your code. This usually isn&#39;t what you want, unless you want it to be possible for other code to change the value of the variable.

</p>
<p>What does it mean that a variable is only accessible inside of a function? Give
the following code a try:

</p>
<pre><code>```&lt;span class=&quot;caution&quot;&gt;caution&lt;/span&gt; broken code
var myFunction = function() {
  var foo = &#39;bar&#39;;
};

myFunction();
log( typeof foo ); // logs undefined!</code></pre>
<p>In the example above, if we&#39;d tried to actually use <code>foo</code> outside of the function &mdash; rather than just checking its type &mdash; our browser would have reported an error, and any code after the line where we used <code>foo</code> would not run.

</p>
<p>The next example shows how we can have two variables with the same name, as long as each variable exists in a separate scope. In this example, we declare the variable <code>foo</code> and assign it the value <code>&#39;qux&#39;</code>; then, inside a function, we declare another variable named <code>foo</code>, and assign it the value <code>&#39;bar&#39;</code>. Notice how, outside of the function, the variable <code>foo</code> does not change, even when we create the variable <code>foo</code> inside the function.

</p>
<pre><code>var foo = &#39;qux&#39;;
var myFunction = function() {
  var foo = &#39;bar&#39;;
};

log( foo ); // logs &#39;qux&#39;
myFunction();
log( foo ); // still logs &#39;qux&#39;</code></pre>
<p>Despite the fact that both variables have the same name, JavaScript considers the two variables as completely separate entities. This is just one of many reasons that it&#39;s important to give your variables meaningful names.

</p>
<p>Variable scope is one of the fundamental concepts of JavaScript, and one of the
concepts that people struggle with often. It&#39;s important to remember that:

</p>
<ul>
<li>you should almost always declare variables with a <code>var</code> statement</li>
<li>variables declared inside of a function using a <code>var</code> statement are not
available outside of that function</li>
<li>variables declared without a <code>var</code> statement are always global</li>
</ul>
<p>Beware that variables that are not declared with the <code>var</code> keyword are
implicitly global! In the following example, the variable <code>a</code> is available outside the function because it wasn&#39;t declared with the <code>var</code> keyword &mdash; this is generally undesirable.

</p>
<pre><code>```&lt;span class=&quot;caution&quot;&gt;caution&lt;/span&gt; unsafe code
function test() {
  a = 1;
}

test();

log( a ); // logs 1</code></pre>
<h3>Objects</h3>
<p>As it turns out, most everything we work with in JavaScript is an object &mdash; in fact, there are only five kinds of values that are <em>not</em> objects:

</p>
<ul>
<li>strings (text)</li>
<li>booleans (true/false)</li>
<li>numbers</li>
<li><code>undefined</code></li>
<li><code>null</code></li>
</ul>
<p>These values are called <strong>primitives</strong>, but even some of these values can be treated as though they were objects &mdash; more on that in a minute. But what&#39;s an object? Let&#39;s look at an example of a simple object:

</p>
<pre><code>var person = {
  firstName : &#39;Boaz&#39;,
  lastName : &#39;Sender&#39;
};</code></pre>
<p>The object we&#39;ve created here has two <strong>properties</strong>: <code>firstName</code> and <code>lastName</code>. We&#39;ve created it using the &quot;object literal syntax&quot; &mdash; that is, by putting a set of key-value pairs in <code>{ }</code>. Note that, for each pair, there is a colon between the key and the value, and there is a comma between each pair. Note also that there is <em>not</em> a comma after the last key-value pair &mdash; if you accidentally include a comma after the last pair, you will get errors in older browsers.

</p>
<h4>Accessing properties</h4>
<p>We&#39;ve stored our object in a variable named <code>person</code>, which makes it easy to access its properties, using either <em>dot notation</em> or <em>bracket notation</em>.

</p>
<pre><code>var person = {
  firstName : &#39;Boaz&#39;,
  lastName : &#39;Sender&#39;
};

log( &#39;First name: &#39; + person.firstName );     // dot notation
log( &#39;Last name: &#39; + person[ &#39;lastName&#39; ] );  // bracket notation</code></pre>
<p>You&#39;ll notice that with bracket notation, we used a quoted string for the property name we were after; with dot notation, we just used the literal property name, without quotes. Bracket notation is a useful approach if, say, the name of the property you&#39;re after is stored in a variable:

</p>
<pre><code>var person = {
  firstName : &#39;Boaz&#39;,
  lastName : &#39;Sender&#39;
};

var prop = &#39;lastName&#39;;

log( &#39;Last name: &#39; + person[ prop ] );</code></pre>
<p>Once we&#39;ve created an object, we can modify its properties.

</p>
<pre><code>var person = {
  firstName : &#39;Boaz&#39;,
  lastName : &#39;Sender&#39;
};

person.firstName = &#39;Ben&#39;;
person.lastName = &#39;Alman&#39;;

log( &#39;First name: &#39; + person.firstName );
log( &#39;Last name: &#39; + person.lastName );</code></pre>
<p>This aspect of JavaScript is both blessing and curse. It means that objects are incredibly flexible, but it also means that there&#39;s no &quot;privacy.&quot; Any code can easily overwrite the value of a property of any object to which it has access &mdash; another reason why it&#39;s important to keep variables out of the global scope unless it&#39;s OK for other code to modify them.

</p>
<h4>Object methods</h4>
<p><strong>Methods</strong> of an object are just properties whose values are functions. Let&#39;s add a <code>.greet()</code> method to our <code>person</code> object:

</p>
<pre><code>var person = {
  firstName : &#39;Boaz&#39;,
  lastName : &#39;Sender&#39;,
  greet : function(name) {
    log( &#39;Hi, &#39; + name );
  }
};

person.greet( person.firstName );</code></pre>
<p>The <code>.greet()</code> method in the example above received a string, <code>name</code>, as its argument. When we called the method, though, we simply passed in the value of the <code>firstName</code> property of the <code>person</code> object. If we wanted a super-flexible <code>.greet()</code> method that could greet anyone, this might be what we want. But it probably makes more sense that the <code>.greet()</code> method will greet the particular person.

</p>
<h4>The meaning of <code>this</code></h4>
<p>Inside of a method &mdash; indeed, inside of any function &mdash; there is a special keyword available to us: <code>this</code>. It refers to the object that is the context in which the function was called.

</p>
<p>When we call <code>person.greet()</code>, the context object is <code>person</code> itself. This means that we can use <code>this</code> to access a property of the <code>person</code> object from directly within the <code>.greet()</code> method.

</p>
<div class="alert alert-info">
The meaning of <code>this</code> can be incredibly perplexing to new JavaScript developers, and you should take comfort in knowing that jQuery largely makes it so that you don&#39;t need to understand it for a while. However, no discussion of objects and methods is complete without talking about <code>this</code> at least a little. In short, if this section is confusing, feel free to skip to <a href="#objects-in-jquery">Objects in jQuery</a>, and come back to it when you&#39;re ready.
</div>

<p>Let&#39;s look at how we could use <code>this</code> in our method.

</p>
<pre><code>var person = {
  firstName : &#39;Boaz&#39;,
  lastName : &#39;Sender&#39;,
  greet : function() {
    log( &#39;Hi, &#39; + this.firstName );
  }
};

person.greet();</code></pre>
<p>Not so confusing so far, right? The confusion arises because <em>the meaning of <code>this</code> can change</em> &mdash; as mentioned above, it depends on the context in which the function was called! Consider the following code:

</p>
<pre><code>```&lt;span class=&quot;caution&quot;&gt;caution&lt;/span&gt; broken code
var person = {
  firstName : &#39;Boaz&#39;,
  lastName : &#39;Sender&#39;,
  greet : function() {
    log( &#39;Hi, &#39; + this.firstName );
  }
};

var sayIt = person.greet; // store the method in a variable

sayIt(); // logs &#39;Hi, undefined&#39; -- uh-oh</code></pre>
<p>When we store the <code>.greet()</code> method in a variable <code>sayIt</code> and then call <code>sayIt()</code>, the context object changes to the global <code>window</code> object, <em>not the <code>person</code> object</em>. Since the <code>window</code> object doesn&#39;t have a property <code>firstName</code>, we get <code>undefined</code> when we try to access it.

</p>
<p>What&#39;s a developer to do? First, be aware that storing object methods in variables can have unintended consequences for the meaning of <code>this</code>. Second, be aware that you can force the meaning of <code>this</code> to be what you want it to be, using the <code>.call()</code> or <code>.apply()</code> method on the function itself.

</p>
<pre><code>var person = {
  firstName : &#39;Boaz&#39;,
  lastName : &#39;Sender&#39;,
  greet : function() {
    log( &#39;Hi, &#39; + this.firstName );
  }
};

var sayIt = person.greet;

sayIt.call( person );</code></pre>
<p>Both <code>.call()</code> and the very similar <code>.apply()</code> method also let us pass arguments to the function we&#39;re invoking. Imagine if our greet method took some arguments; we could pass those arguments using <code>.call()</code> like this:

</p>
<pre><code>var person = {
  firstName : &#39;Boaz&#39;,
  lastName : &#39;Sender&#39;,
  greet : function(greeting, punctuation) {
    log( greeting + &#39;, &#39; + this.firstName + punctuation );
  }
};

var sayIt = person.greet;

sayIt.call( person, &#39;Hello&#39;, &#39;!!1!!1&#39; );</code></pre>
<p>We could do the same thing using <code>.apply()</code>, but we&#39;d pass the arguments within a single array instead of as separate arguments:

</p>
<pre><code>var person = {
  firstName : &#39;Boaz&#39;,
  lastName : &#39;Sender&#39;,
  greet : function(greeting, punctuation) {
    log( greeting + &#39;, &#39; + this.firstName + punctuation );
  }
};

var sayIt = person.greet;

sayIt.apply( person, [ &#39;Hello&#39;, &#39;!!1!!1&#39; ] );</code></pre>
<div class="alert alert-info">
For more details about <code>.call()</code> and <code>.apply()</code>, see the MDN documentation on <a href="https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call"><code>.call()</code></a> and <a href="https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply"><code>.apply()</code></a>.
</div>

<p><a name="objects-in-jquery"></a>
</p>
<h4>Objects in jQuery</h4>
<p>We&#39;ve barely scratched the surface of objects, but you now know the basics you&#39;ll need to know to work with objects as you learn jQuery. In basic jQuery, you&#39;ll mainly use objects to provide configuration options. For example, you can provide an object to change several CSS properties on an element at once:

</p>
<pre><code>$(&#39;#main&#39;).css({
  color: &#39;red&#39;,
  border: &#39;1px solid blue&#39;
});</code></pre>
<p>As far as <code>this</code>, jQuery tends to take control over its meaning. In the case of <a href="/chapter/events">event handlers</a>, <code>this</code> will refer to the element to which you bound the handler; in the case of <a href="/chapter/jquery-basics#explicit-iteration">iterating over a set of elements in a selection</a>, <code>this</code> will refer to the current element in the iteration. You shouldn&#39;t need to worry about understanding <code>this</code> too much during your initial learning &mdash; it&#39;s just a good thing to keep in mind as your learning continues.

</p>
<h4>Further reading</h4>
<p>The <a href="https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects">MDN JavaScript Guide</a> goes into detail about topics such as object prototypes, constructor functions, and deleting object properties.


</p>
<h3>Arrays</h3>
<p>Arrays are a type of object used to store lists of values. They are a handy way to store a set of related items of the same type (such as strings), though in reality, an array can include multiple types of items, including other arrays.

</p>
<p>The preferred way to create an array is to use the <em>array literal notation</em>:

</p>
<pre><code>var myArray = [ &#39;a&#39;, &#39;b&#39;, &#39;c&#39; ];</code></pre>
<div class="alert alert-info">
You will sometimes see code that creates an array using the <code>new Array(&#39;a&#39;, &#39;b&#39;, &#39;c&#39;)</code> construct. This is generally frowned upon among JavaScript developers; it provides no advantages over the literal construct, and has some disadvantages, such as the fact that <code>new Array(3)</code> will create an array with three undefined elements, rather than the array <code>[ 3 ]</code>.
</div>

<p>You can access properties of arrays (sometimes called <strong>elements</strong>) with the same bracket notation we used for objects. Each element is automatically given a name based on its position in the array. Be careful, though: the numbers start at zero! Lets look at an example array with three elements:

</p>
<pre><code>```&lt;span class=&quot;caution&quot;&gt;caution&lt;/span&gt; antipattern
var myArray = [ &#39;a&#39;, &#39;b&#39;, &#39;c&#39; ];
var firstItem = myArray[ &quot;0&quot; ]; // access the first item</code></pre>
<p>When retrieving array elements, it&#39;s usually much more convenient to use numbers to specify the <strong>index</strong> of the element you&#39;re after:

</p>
<pre><code>var myArray = [ &#39;a&#39;, &#39;b&#39;, &#39;c&#39; ];
var firstItem = myArray[ 0 ];

var secondItem = myArray[ 1 ]; // access the item at index 1
log( secondItem ); // logs &#39;b&#39;</code></pre>
<p>We can determine how many items are in an array by accessing an array&#39;s <code>length</code> property:

</p>
<pre><code>var myArray = [ &#39;a&#39;, &#39;b&#39;, &#39;c&#39; ];
var len = myArray.length;
log( len ); // logs 3</code></pre>
<h4><code>for</code> Loops: Iterating over Arrays</h4>
<p>Since we know how to get the length of an array, and we know that an array&#39;s first item is at index <code>0</code>, we can iterate over the items in an array using a <code>for</code> loop:

</p>
<pre><code>var myArray = [ &#39;a&#39;, &#39;b&#39;, &#39;c&#39; ];
var i;
var len = myArray.length;

// we&#39;ll use the variable i as our index; it starts at 0,
// and we increment it by 1 (using i++) until i is no longer
// less than the length of the array
for (i = 0; i &lt; len; i = i + 1) {
  log( &#39;item at index &#39; + i + &#39; is &#39; + myArray[ i ] );
}</code></pre>
<p>There is a whole lot more that you can do with arrays; for a complete reference, see the <a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/">Mozilla Developer Network&#39;s Array documentation</a>.

</p>
<h2>Logic and Truthiness</h2>
<p><a name="logic-and-truthiness"></a>

</p>
<p>JavaScript provides <code>if</code> and <code>else</code>, as well as the <em>ternary operator</em>, to allow us to do certain things only when certain conditions are met. JavaScript determines whether a condition is met by evaluating a value or an expression for its &quot;truthiness.&quot; Because JavaScript is a dynamically typed language, we can use any value or combination of values; however, the rules by which JavaScript determines whether a given value or expression is <code>true</code> or <code>false</code> can be confusing.

</p>
<p>Here&#39;s an example of a simple <code>if</code> statement in JavaScript. It evaluates the truthiness of the number <code>1</code>; because <code>1</code> is <strong>truthy</strong>, the code inside the block &mdash; delineated by <code>{</code> and <code>}</code> &mdash; will run.

</p>
<pre><code>if ( 1 ) {
  // this code will run!
  log( &#39;1 is truthy&#39; );
}</code></pre>
<p>As it turns out, most values in JavaScript are truthy &mdash; in fact, there are only five values in JavaScript that are <strong>falsy</strong>:

</p>
<ul>
<li><code>undefined</code> (the default value of declared variables that are not assigned a
value)</li>
<li><code>null</code></li>
<li><code>NaN</code> (&quot;not a number&quot;)</li>
<li><code>0</code> (the number zero)</li>
<li><code>&#39;&#39;</code> (an empty string)</li>
</ul>
<p>When we want to test whether a value is &quot;falsy,&quot; we can use the <code>!</code> operator:

</p>
<pre><code>var a = &#39;&#39;;

if ( !a ) {
  // this code will run if a is falsy
  log( &#39;a was falsy&#39; );
}</code></pre>
<p>The value <code>NaN</code> is a special case. Values that are <code>NaN</code> will evaluate to false
in a simple conditional expression:

</p>
<pre><code>var notANumber = &#39;four&#39; - &#39;five&#39;;

if ( !notANumber ) {
  // this code will run
  log( &#39;!notANumber was truthy&#39; );
}</code></pre>
<p>However, if we compare the value <code>NaN</code> to <code>false</code>, we get back a falsy value:

</p>
<pre><code>var notANumber = &#39;four&#39; - &#39;five&#39;;

if ( notANumber == false ) {
  // this code will not run!
  log( &#39;notANumber was falsy&#39; );
} else {
  // this code will run
  log( &#39;notANumber was truthy&#39; );
}</code></pre>
<p>It&#39;s important to remember that <em>all other values aside from the five values
listed above</em> are truthy. This includes empty arrays, empty objects, all
non-empty strings (including the string <code>&#39;0&#39;</code>), and all numbers other than <code>0</code>.

</p>
<div class="alert">
  It is possible to write single-line <code>if</code> and <code>else</code> statements without using curly braces. This practice is discouraged, as it can make code difficult to read and maintain. It is mentioned here simply because you may encounter it in others&#39; code.
</div>

<h3>Logical Operators</h3>
<p>Logical operators allow you to evaluate operands using AND (<code>&amp;&amp;</code>) and OR (<code>||</code>) operations.

</p>
<pre><code>var foo = 1;
var bar = 0;
var baz = 2;

foo || bar;     // returns 1, which is truthy
bar || foo;     // returns 1, which is truthy

foo &amp;&amp; bar;     // returns 0, which is falsy
foo &amp;&amp; baz;     // returns 2, which is truthy</code></pre>
<p>In the case of the <code>||</code> operator, the value returned is the first value that proves the statement truthy, or the last value. In the case of the <code>&amp;&amp;</code> operator, the value returned is the first value that proves the statement falsy, or the last value.

</p>
<p>You&#39;ll sometimes see logical operators used as a clever way to control code execution:

</p>
<pre><code>foo &amp;&amp; bar();   // runs bar() only if foo is truthy

var bar = baz || createBar();  // use baz as value for bar unless
                               // baz is falsy; in that case, create bar</code></pre>
<p>This style is elegant and pleasantly terse, but it can be difficult to read, especially for beginners. You should be aware of what it means if you come across it in code, but you may want to refrain from using this style at first, and use traditional <code>if</code> and <code>else</code> statements for clarity.

</p>
<h3>The Ternary Operator</h3>
<p>Often, you&#39;ll want to set a variable&#39;s value differently depending on whether a certain condition is true or false. Of course, you could achieve this with an <code>if</code> and <code>else</code> statement:

</p>
<pre><code>```&lt;span class=&quot;caution&quot;&gt;caution&lt;/span&gt; antipattern
var propertyName;

if (dim === &#39;width&#39;) {
  propertyName = &#39;clientWidth&#39;;
} else {
  propertyName = &#39;clientHeight&#39;;
}</code></pre>
<p>However, the ternary operator provides a much more succinct way of conditionally setting the value of a variable:

</p>
<pre><code>var propertyName = ( dim === &#39;width&#39; ) ? &#39;clientWidth&#39; : &#39;clientHeight&#39;;</code></pre>
<p>The statement before the <code>?</code> is evaluated for its truthiness. If it is truthy, the first value (<code>&#39;clientWidth&#39;</code>) is used as the value of the <code>propertyName</code> variable; otherwise, the second value (<code>&#39;clientHeight&#39;</code>) is used.


</p>
<h2>JavaScript gotchas</h2>
<p>In addition to variable scope and truthiness, there are many other gotchas in JavaScript. Let&#39;s take a look at a few of them.

</p>
<h3>Naming things</h3>
<p><a name="naming-things"></a>

</p>
<p>Valid names in JavaScript begin with a letter or certain symbols, followed by
zero or more letters, digits, underscores, or symbols. Names may not begin with
numbers, and may not include hyphens. Besides these rules, you can name your variables however you&#39;d like! All of these names are valid:

</p>
<ul>
<li><code>a</code></li>
<li><code>a1</code></li>
<li><code>foo_bar</code></li>
<li><code>fooBarBaz</code></li>
<li><code>$fooBar</code></li>
<li><code>_foo</code></li>
<li><code>__foo__</code></li>
</ul>
<p>There are some conventions that people use when naming things in JavaScript, but these are optional, and don&#39;t have any effect on how the code works:

</p>
<ul>
<li>Names that begin with <code>_</code> are usually &quot;private&quot; (more on this later).</li>
<li>Names that begin with uppercase letters are usually &quot;constructors,&quot; used to create new instances of objects (more on this later as well).</li>
<li>In code that uses jQuery, names that begin with <code>$</code> usually refer to jQuery objects.</li>
</ul>
<h3>Reserved words</h3>
<p><a name="reserved-words"></a>

</p>
<p>JavaScript reserves certain words for its own use; you should avoid using these
words for the names of things.

</p>
<pre>
abstract boolean break byte case catch char class const continue debugger
default delete do double else enum export extends false final finally float
for function goto if implements import in instanceof int interface long
native new null package private protected public return short static super
switch synchronized this throw throws transient true try typeof var
volatile void while with
</pre>

<p>If you must use one of these names as the name of an object property, you
should quote the property name:

</p>
<pre><code>var myObject = {
  &#39;class&#39;: &#39;tasty&#39;
};</code></pre>
<h3>Operations on numbers and strings</h3>
<p>Working with numbers in JavaScript can be a bit unpredictable, due to the way JavaScript represents numbers internally. For example, addition using decimals can have results that are close but not quite accurate:

</p>
<pre><code>log( 0.0001 + 0.0002 ); // 0.00030000000000000003</code></pre>
<p>This won&#39;t come up often when working with jQuery, but it&#39;s an important issue to be aware of, especially if you&#39;re working with decimal numbers like currency. If you&#39;re doing mathematical operations that require precision, you should convert values to integers before working with them, and convert them back when you&#39;re done.

</p>
<p>JavaScript is a loosely-typed language. If you try to do mathematical
operations using values that are not numbers, <em>JavaScript will not throw
errors</em>, and the result may not be what you&#39;d expect.

</p>
<pre><code>log( &#39;a&#39; + 2 );           // &#39;a2&#39;
log( &#39;4&#39; + 3 );           // &#39;43&#39;
log( &#39;five&#39; - &#39;4&#39; );      // NaN (not a number)
log( - &#39;1&#39; );             // -1
log( 1 + true );          // 2
log( 1 == true );         // true
log( 1 === true );        // false</code></pre>
<h2>Further reading</h2>
<p>We&#39;ve only scratched the surface of JavaScript. The Mozilla Developer Network
is an excellent resource for information about the JavaScript language,
particularly their <a href="https://developer.mozilla.org/en/JavaScript/Guide">JavaScript
Guide</a>. Specifically, you&#39;ll
do well to read the following articles:

</p>
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>Closures in JavaScript</h1>
		<div class="post-wrapper">
			<p>By now, you probably know all about
		<a class="blueEmphasis" href="//www.kirupa.com/html5/functions_in_javascript.htm">
		functions</a> and all the fun functiony things that they do. An 
		important part of working with functions, with JavaScript, and 
		(possibly) life in general is understanding the topic known as
		<strong>closures</strong>. Closures touch upon a gray area where 
		functions and 
		<a class="blueEmphasis" href="//www.kirupa.com/html5/variable_scope_js.htm">variable scope</a> intersect:</p>
		<p class="centerImageNoBorder">
		<img alt="green is the new gray" height="325" src="https://www.kirupa.com/images/gray_area_72.png" width="426"></p>
		<p>Now, 
		I am not going to say any more about closures, for this is something best explained by seeing code. Any words I add right now to define or 
		describe what closures are will only serve to confuse things. In the 
		following sections, we'll start off in familiar territory and then 
		slowly venture into hostile areas where closures can be found.</p>
		<p>Onwards!</p>
		<h2>Functions within Functions</h2>
		<p>The first thing we are going to do is really drill in on what 
		happens when you have functions within functions...and the inner function gets returned. 
		As part of that, let's do a quick review of functions.</p>
		<p>Take a 
		look at the following code:</p>
		<pre class="brush: js">function calculateRectangleArea(length, width) {
    return length * width;
}

var roomArea = calculateRectangleArea(10, 10);
alert(roomArea);</pre>
		<p>The <span class="inlineCode">calculateRectangleArea</span> function 
		takes two arguments and returns the multiplied value of those arguments 
		to whatever called it. In this example, the "whatever called it part" is 
		played by the <span class="inlineCode">roomArea</span> variable.</p>
		<p>After this code has run, the <span class="inlineCode">roomArea</span> 
		variable contains the result of multiplying 10 and 10...which is simply 
		100:</p>
		<p class="centerImageNoBorder">
		<img alt="the value is 100" height="62" src="https://www.kirupa.com/images/function_value_72.png" width="362"></p>
		<p>&nbsp;</p>
		<p>As you know, what a function returns can pretty much be anything. In 
		this case, we returned a number. You can very easily return some text 
		(aka a
		<a class="blueEmphasis" href="//www.kirupa.com/html5/strings_in_javascript.htm">
		String</a>), the <span class="inlineCode">undefined</span> value, a
		<a class="blueEmphasis" href="//www.kirupa.com/html5/a_deeper_look_at_objects_in_javascript.htm">
		custom object,</a> etc. As long as the code that is calling the function 
		knows what to do with what the function returns, you can do pretty much 
		whatever you want. You can even return another function. Let me rathole 
		on this a bit.</p>
		<p>Below is a very simple example of what I am talking about:</p>
		<pre class="brush: js">function youSayGoodBye() {

    alert("Good Bye!");

    function andISayHello() {
        alert("Hello!");
    }

    return andISayHello;
}</pre>
		<p>You can have functions that contain functions inside them. In this 
		example, we have our <span class="inlineCode">youSayGoodBye</span> function 
		that contains an <span class="inlineCode">alert</span> and another 
		function called <span class="inlineCode">andISayHello</span>:</p>
		<p class="centerImageNoBorder">
		<img alt="the outer and inner functions visualized" height="228" src="https://www.kirupa.com/images/visualization_inner_72.png" width="289"></p>
		<p>The interesting part is what the <span class="inlineCode">
		youSayGoodBye</span> function returns when it gets called. It returns 
		the <span class="inlineCode">andISayHello</span> function:</p>
		<pre class="brush: js, highlight:[9]">function youSayGoodBye() {

    alert("Good Bye!");

    function andISayHello() {
        alert("Hello!");
    }

    return andISayHello;
}</pre>
		<p>Let's go ahead and play this example out. To call this function, 
		initialize a variable that points to <span class="inlineCode">
		youSayGoodBye</span>:</p>
		<pre class="brush: js">var something = youSayGoodBye();</pre>
		<p>The moment this line of code runs, <strong>all of the code</strong> 
		inside your <span class="inlineCode">youSayGoodBye</span> function will 
		get run as well. This means, you will see a dialog (thanks to the
		<span class="inlineCode">alert</span>) that says <strong>Good Bye!</strong>:</p>
		<p class="centerImageNoBorder">
		<img alt="ahhh!!! pop-up dialog!" height="257" src="https://www.kirupa.com/images/goodbye_72.png" width="386"></p>
		<p>As part of running to completion, the <span class="inlineCode">
		andISayHello</span> function will be created and then returned as well. 
		At this 
		point, your <span class="inlineCode">something</span> variable only has 
		eyes for one thing, and that thing is the <span class="inlineCode">
		andISayHello</span> function:</p>
		<p class="centerImageNoBorder">
		<img alt="outer function go bye bye" height="166" src="https://www.kirupa.com/images/var_something_72.png" width="516"></p>
		<p class="centerImageNoBorder">&nbsp;</p>
		<p>The <span class="inlineCode">youSayGoodBye</span> outer function, 
		from the something variable's point of view, simply goes away. Because the <span class="inlineCode">something</span> 
		variable now points to a function, you can invoke this function by just 
		calling it using the open and close parentheses like you normally would:</p>
		<pre class="brush: js, highlight:[2]">var something = youSayGoodBye();
something();</pre>
		<p>When you do this, the returned inner function (aka
		<span class="inlineCode">andISayHello</span>) will execute. Just like 
		before, you will see a dialog appear, but this dialog will say <strong>Hello</strong>! - which is what 
		the <span class="inlineCode">alert</span> inside this function 
		specified:</p>
		<p class="centerImageNoBorder">
		<img alt="oh, hi!" height="257" src="https://www.kirupa.com/images/hello_72.png" width="386"></p>
		<p>All of this should be pretty straightforward and probably a review. 
		The only thing that you may have found new is realizing once a function 
		returns a value, it is no longer around. The only thing that remains is 
		the returned value. </p>
		<p>Ok, we are getting close to the promised hostile territory. In the 
		next section, we will extend what we've just seen by taking a look at 
		another example with a slight twist.</p>
		<h2>When the Inner Functions Aren't Self-Contained</h2>
		<p>In the previous example, your <span class="inlineCode">andISayHello</span> 
		inner function was self-contained and didn't rely on any 
		variables or state from the outer function:</p>
		<pre class="brush: js, highlight:[5,6,7]">function youSayGoodBye() {

    alert("Good Bye!");

    function andISayHello() {
        alert("Hello!");
    }

    return andISayHello;
}</pre>
		<p>In many real scenarios, very rarely will you run into a case like 
		this. You'll often have variables and data that is shared between the 
		outer function and the inner function. To highlight this, take a look at 
		the following:</p>
		<pre class="brush: js">function stopWatch() {
    var startTime = Date.now();

    function getDelay() {
        var elapsedTime = Date.now() - startTime;
        alert(elapsedTime);
    }

    return getDelay;
}</pre>
		<p>This example shows a very simple way of measuring the time it takes 
		to do something. Inside the <span class="inlineCode">stopWatch</span> 
		function, you have a <span class="inlineCode">startTime</span> variable 
		that is set to the value of <span class="inlineCode">Date.now()</span>:</p>
		<pre class="brush: js, highlight:[2]">function stopWatch() {
    var startTime = Date.now();

    function getDelay() {
        var elapsedTime = Date.now() - startTime;
        alert(elapsedTime);
    }

    return getDelay;
}</pre>
		<p>You also have an inner function called <span class="inlineCode">
		getDelay</span>:</p>
		<pre class="brush: js, highlight:[4,5,6,7]">function stopWatch() {
    var startTime = Date.now();

    function getDelay() {
        var elapsedTime = Date.now() - startTime;
        alert(elapsedTime);
    }

    return getDelay;
}</pre>
		<p>The <span class="inlineCode">getDelay</span> function displays a 
		dialog containing the difference in time between a new call to
		<span class="inlineCode">Date.now()</span> and the
		<span class="inlineCode">startTime</span> variable declared earlier.</p>
		<p>Getting back to the outer <span class="inlineCode">stopWatch</span> 
		function, the last thing that happens is that it returns the
		<span class="inlineCode">getDelay</span> function before exiting. As you 
		can see, the code you see here is very similar to the earlier example. 
		You have an outer function, you have an inner function, and you have the 
		outer function returning the inner function.</p>
		<p>Now, to see the <span class="inlineCode">stopWatch</span> function at 
		work, add the following lines of code:</p>
		<pre class="brush: js">var timer = stopWatch();

// do something that takes some time
for (var i = 0; i &lt; 1000000; i++) {
    var foo = Math.random() * 10000;
}
    
// invoke the returned function
timer();</pre>
		<p>If you run this example, you'll see a dialog displaying the number of 
		milliseconds it took between your <span class="inlineCode">timer</span> 
		variable getting initialized, your <span class="inlineCode">for</span> 
		loop running to completion, and the <span class="inlineCode">timer</span> 
		variable getting invoked as a function:</p>
		<p class="centerImageNoBorder">
		<img alt="the elapsed time" height="258" src="https://www.kirupa.com/images/elapsed_time_72.png" width="444"></p>
		<p>Basically, you have a stopwatch that you invoke, run some 
		long-running operation, and invoke again to see how long the 
		long-running operation took place.</p>
		<p>Now that you can see our little stopwatch example working, let's go 
		back to the <span class="inlineCode">stopWatch</span> function and see 
		what exactly is going on. Like I mentioned a few lines ago, a lot of 
		what you see is similar to the <span class="inlineCode">youSayGoodBye</span> 
		/ <span class="inlineCode">andISayHello</span> example. There is a twist 
		that makes this example different, and the important part to note is what happens 
		when the <span class="inlineCode">getDelay</span> function is returned 
		to the <span class="inlineCode">timer</span> variable.</p>
		<p>Here is an incomplete visualization of what this looks like:</p>
		<p class="centerImageNoBorder">
		<img alt="the timer" height="166" src="https://www.kirupa.com/images/timer_blah_72.png" width="512"></p>
		<p class="centerImageNoBorder">&nbsp;</p>
		<p>The <span class="inlineCode">stopWatch</span> outer function is no 
		longer in play, and the <span class="inlineCode">timer</span> variable 
		is bound to the <span class="inlineCode">getDelay</span> function. Now, 
		here is the twist. The <span class="inlineCode">getDelay</span> 
		function relies on the <span class="inlineCode">startTime</span> 
		variable that lives in the context of the outer <span class="inlineCode">
		stopWatch</span> function:</p>
		<pre class="brush: js, highlight:[2,5]">function stopWatch() {
    var startTime = Date.now();

    function getDelay() {
        var elapsedTime = Date.now() - startTime;
        alert(elapsedTime);
    }

    return getDelay;
}</pre>
		<p>When the outer <span class="inlineCode">stopWatch</span> function 
		goes away when <span class="inlineCode">getDelay</span> is returned to 
		the <span class="inlineCode">timer</span> variable, what happens in 
		the following line?</p>
		<pre class="brush:js, highlight:[2]">function getDelay() {
    var elapsedTime = Date.now() - startTime;
    alert(elapsedTime);
}</pre>
		<p>In this context, it would make sense if the <span class="inlineCode">startTime</span> 
		variable 
		is actually undefined, right? But, the example obviously worked, so 
		something else is going on here. That something else is the shy and 
		mysterious closure. Here is a look at what happens to make our
		<span class="inlineCode">startTime</span> variable actually store a 
		value and not be undefined.</p>
		<p>The JavaScript runtime that keeps track of all of your variables, 
		memory usage, references, and so on is really clever. In this example, 
		it detects that the inner function (<span class="inlineCode">getDelay</span>) 
		is relying on variables from the outer function (<span class="inlineCode">stopWatch</span>). 
		When that happens, the runtime ensures that any variables in the outer 
		function that are needed are still available to the inner function
		<strong>even if the outer function goes away</strong>.</p>
		<p>To visualize this properly, here is what the <span class="inlineCode">
		timer</span> variable looks like:</p>
		<p class="centerImageNoBorder">
		<img alt="getting hotter" height="185" src="https://www.kirupa.com/images/timer_closure_almost_72.png" width="472"></p>
		<p>It is still referring to the <span class="inlineCode">getDelay</span> 
		function, but the <span class="inlineCode">getDelay</span> function also 
		has access to the <span class="inlineCode">startTime</span> variable 
		that existed in the outer <span class="inlineCode">stopWatch</span> 
		function. 
		This inner function, because it <strong>enclosed</strong> relevant 
		variables from the outer function into its bubble (aka scope), is known as a <strong>closure</strong>:</p>
		<p class="centerImageNoBorder">
		<img alt="closure time" height="257" src="https://www.kirupa.com/images/timer_closure_72.png" width="472"></p>
		<p>To define the closure more formally, it is a <strong>newly created 
		function that also contains its variable context</strong>:</p>
		<p class="centerImageNoBorder">
		<img alt="the closure" height="176" src="https://www.kirupa.com/images/definition_closure_72.png" width="485"></p>
		<p>To review this one more time using our existing example, the <span class="inlineCode">startTime</span> variable gets the value 
		of <span class="inlineCode">Date.now</span> the moment the
		<span class="inlineCode">timer</span> variable gets initialized and the
		<span class="inlineCode">stopWatch</span> function runs. When the
		<span class="inlineCode">stopWatch</span> function returns the inner
		<span class="inlineCode">getDelay</span> function, the
		<span class="inlineCode">stopWatch</span> function goes away. What 
		doesn't go away are any shared variables inside <span class="inlineCode">
		stopWatch</span> that the inner function relies on. Those shared 
		variables are not destroyed. Instead, they are enclosed by the inner 
		function aka the closure.</p>
		<h2>Wrapping up Closures</h2>
		<p>By looking at closures through examples first, you really missed out 
		on a lot of boring definitions, theories, and hand waving. In all 
		seriousness, closures are very common in JavaScript. You will encounter 
		them in many subtle and not-so-subtle ways:</p>
		<p class="centerImageNoBorder">
		<img alt="you can even find them in movies" height="403" src="https://www.kirupa.com/images/closer_movie_72.gif" width="635"></p>
		<p>If there is only thing you take out of all of this, remember the 
		following: <strong>The most important thing closures do is allow 
		functions to keep on working even if their environment drastically 
		changes or disappears.</strong> Any variables that were in scope when 
		the function was created are enclosed and protected to ensure the 
		function still works. This behavior is essential for a very 
		dynamic language like JavaScript where you often create, modify, and 
		destroy things on the fly. Yay!</p>
		<p>
			
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>Immediately Invoked Function Expressions (aka IIFE)</h1>
		<div class="post-wrapper">
		<p>https://www.kirupa.com/html5/immediately_invoked_function_expressions_iife.htm</p>
<p>By now, you probably know enough about 
		<a class="blueEmphasis" href="//www.kirupa.com/html5/functions_in_javascript.htm">functions 
		in JavaScript</a> to be dangerously 
		productive. Functions allow you to group statements together. If you 
		give your function a name, you can re-use those grouped statements 
		a whole bunch of times:</p>
		<pre class="brush: js">function areYouLucky() {
    var foo = Math.round(Math.random() * 100);
    
    if (foo &gt; 50) {
        alert("You are lucky!");
    } else {
        alert("You are not lucky!");  
    }
}

// calling this function!
areYouLucky();</pre>
		<p>If you don't give your functions a name, that is totally cool as 
		well. They are known as <strong>anonymous</strong> functions, and they 
		look as follows:</p>
		<pre class="brush: js">// anonymous function #1
var isLucky = function() {
    var foo = Math.round(Math.random() * 100);
    
    if (foo &gt; 50) {
        return "You are lucky!";
    } else {
        return "You are not lucky!";
    }
};

var me = isLucky();
alert(me);


// anonymous function #2
window.setTimeout(function() {
    alert("Everything is awesome!!!");
}, 2000);</pre>
		<p>These anonymous functions can only be called if they are associated with a 
		variable as shown in the first example. They can also be called if they 
		are provided as part of another function (such as
		<span class="inlineCode">setTimeOut</span>) that knows what to do with 
		them.</p>
		<p>In this article, we are going to look at another function variation 
		known as an <strong>Immediately Invoked Function Expression</strong>. 
		Friends like us just call it <strong>IIFE</strong> (pronounced "iffy"). 
		At first, what it does might seem a bit boring and unnecessary. As we 
		get more familiar with it, I will describe some of its use cases and why 
		you may find yourself both seeing and using these IIFEs a whole lot. By 
		the end, IIFEs will probably still be very boring, but at least they 
		will seem quite useful and necessary...hopefully!</p>
		<p>Onwards!</p>
		<h3>Writing a Simple IIFE</h3>
		<p>To be very blunt, an IIFE is nothing more than a function surrounded 
		by a whole bunch of parenthesis that <strong>executes immediately</strong>. Before we do anything else, let's just 
		write an IIFE and prove to ourselves that it actually does whatever it 
		is supposed to do. Below is a 
		simple IIFE:</p>
		<pre class="brush: js">(function() {
    var shout = "I AM ALIVE!!!";
    alert(shout);
})();</pre>
		<p>Go ahead and add these few lines of code and preview it in your 
		browser. If everything worked properly, you will see <strong>I AM 
		ALIVE!!!</strong> displayed. If things didn't work properly and you 
		don't see that, make sure your many parentheses are in the correct 
		locations. The most common illness that afflicts IIFEs are mismatched or 
		misplaced parentheses! Anyway, now that you have created a working IIFE, lets peel back the layers 
		and look at what exactly is going on.</p>
		<p>First, you have your function with 
		the code you want to execute:</p>
		<pre class="brush: js">function() {
	var shout = "I AM ALIVE!!!";
	alert(shout);
}</pre>
		<p>This is just a simple anonymous function that displays some obnoxious 
		all-caps text. As this function stands, though, JavaScript has no idea 
		what to do with it. This function is invalid syntax. To get it more 
		valid, add the <span class="inlineCode">()</span> after the function 
		body:</p>
		<pre class="brush: js">function() {
	var shout = "I AM ALIVE!!!";
	alert(shout);
}()</pre>
		<p>Adding the <span class="inlineCode">()</span> generally means you 
		intend for whatever preceded the <span class="inlineCode">()</span> to 
		execute immediately. When you do this, JavaScript will still complain 
		because this is also not valid syntax. The reason is that you need to 
		tell JavaScript that this function you want to execute is actually an 
		expression. The easiest way to do that is to wrap <strong>your function 
		inside another pair of parentheses</strong>:</p>
		<pre class="brush: js">(function() {
    var shout = "I AM ALIVE!!!";
    alert(shout);
})();</pre>
		<p>Your entire function is now treated as an expression. Following this 
		with the <span class="inlineCode">()</span> you saw a few moments ago 
		allows your function expression to be executed. You could say that this
		<strong class="yellowEmphasis">function expression</strong> gets 
		executed (aka <strong class="yellowEmphasis">invoked</strong>) almost
		<strong class="yellowEmphasis">immediately</strong> once JavaScript 
		encounters it.</p>
		<h3>Writing an IIFE that Takes Arguments</h3>
		<p>At first, the most difficult thing to grasp about IIFE's is that they are 
		nothing more than simple functions. These simple functions just happen to wear all sorts 
		of crazy parentheses to help them execute immediately. Despite that, 
		there are some minor differences in how you work with IIFEs. Once major 
		minor difference is how you deal with passing in arguments, and so let's 
		address that next!</p>
		<p>The general structure for creating an IIFE that takes arguments is as follows:</p>
		<pre class="brush:js">(function(a, b) {
    /* code */
})(arg1, arg2);</pre>
		<p>Just like with any function call, the order of the arguments you pass 
		in maps to 
		the order of the arguments in your function signature.</p>
		<p>Here is a slightly fuller example:</p>
		<pre class="brush: js">(function(first, last) {
    alert("My name is " + last + ", " + first + " " + last + ".");

})("James", "Bond");</pre>
		<p>If you run this in your browser (or run it in your mind), what gets displayed is <strong>My name is Bond, James Bond. </strong>And with 
		this, you have learned the basics of how to write an IIFE. This is the 
		easy part. The more interesting (and difficult) part is figuring out 
		the cases when to use an IIFE.</p>
		<div class="callout">
		<h4>Quick Review of Scoping and Functions&nbsp;</h4>
		<p>To help make the next few sections digestible, let's review one 
		important detail. From the 
		<a class="blueEmphasis" href="//www.kirupa.com/html5/variable_scope_js.htm">Variable Scope</a> article, you learned that JavaScript doesnt 
		have the concept of block scoping. It only has lexical scope. This means 
		that variables declared inside a block such as an 
		<span class="inlineCode">if</span> statement or loop 
		will actually be accessible to the entire enclosing function:</p>
		<pre class="brush: js">function scopeDemo() {
    if (true) {
        var foo = "I know what you did last summer!";   
    }

    alert(foo); // totally exists!
}
scopeDemo();</pre>
		<p>As you can see in this example, the <span class="inlineCode">foo</span> variable, despite being stuck 
		inside the <span class="inlineCode">if</span> statement, is accessible 
		outside of it because your <span class="inlineCode">if</span> is not a 
		scopable block. This ability to have your "supposedly inner" variables 
		promoted and accessible to the entire enclosing function is known as
		<strong>variable hoisting</strong>!</p>
		</div>
		<h2>When to Use an IIFE</h2>
		<p>At this point, the value IIFEs bring to the table seems a little odd. 
		After all, what is so different about an IIFE compared to a function you 
		declare and call immediately like you have always done? 
		<strong class="greenEmphasis">The main difference is that 
		an IIFE leaves behind no evidence of its existence after it has run</strong>. 
		This is largely because 
		IIFEs are anonymous functions that are nameless. This means you can't 
		track them by examining variables. Because the code you put inside an 
		IIFE is actually inside a function, any variables you declare <strong>
		are local to that function</strong>.</p>
		<p class="callout">Putting all of this together, an IIFE 
		provides you with a very simple way of running code fully inside its own 
		bubble and then disappearing without a trace.</p>
		<p>Now that you know what makes IIFEs unique (and extremely confusing), 
		let's look at when you will need to use them.</p>
		<h3>Avoiding Code Collisions</h3>
		<p>One of the biggest advantages IIFEs bring is their ability to 
		insulate any code from outside interference. This is important if you 
		are writing code that will be used widely in someone else's 
		application. You want to ensure that any existing (or new) code 
		doesn't accidentally clobber over your variables or override functions 
		and methods. The way to ensure that such accidents don't happen is to 
		wrap all of your code inside an IIFE.</p>
		<p>For example, here is a version of the
		<a class="blueEmphasis" href="//www.kirupa.com/html5/creating_a_sweet_content_slider.htm">
		Sweet Content Slider</a> code wrapped into an IIFE:</p>
		<pre class="brush: js">(function() {
	// just querying the DOM...like a boss!
    var links = document.querySelectorAll(".itemLinks");
    var wrapper = document.querySelector("#wrapper");
    
    // the activeLink provides a pointer to the currently displayed item
    var activeLink = 0;
    
    // setup the event listeners
    for (var i = 0; i &lt; links.length; i++) {
        var link = links[i];
        link.addEventListener('click', setClickedItem, false);
        
        // identify the item for the activeLink
        link.itemID = i;
    }

    // set first item as active
    links[activeLink].classList.add("active");

    function setClickedItem(e) {
        removeActiveLinks();

        var clickedLink = e.target;
        activeLink = clickedLink.itemID;
        
        changePosition(clickedLink);
    }
	
    function removeActiveLinks() {
        for (var i = 0; i &lt; links.length; i++) {
            links[i].classList.remove("active");
        }
    }
    
    // Handle changing the slider position as well as ensure
    // the correct link is highlighted as being active
    function changePosition(link) {
    	var position = link.getAttribute("data-pos");
        wrapper.style.left = position;
        
        link.classList.add("active");
    }
})();</pre>
		<p>As highlighted in this example, just add the first and last line that 
		wraps everything you are doing into a function that gets immediately 
		executed. You don't have to make any additional modifications. Because 
		all of the code inside the IIFE runs in its own scope and disappears, 
		you don't have to worry about someone else creating their own copies of 
		things found in <strong>your</strong> code and breaking <strong>your</strong> 
		functionality.</p>
		<h3>Closures and Locking In State</h3>
		<p>There is an important detail about closures that I didn't highlight in the
		<a class="blueEmphasis" href="//www.kirupa.com/html5/closures_in_javascript.htm">
		Closures in JavaScript</a> article. That detail is that 
		<strong class="greenEmphasis">
		Closures store their outer values by referencing them. They don't 
		directly store the actual values.</strong> I am fairly certain that line 
		doesn't make much sense, so let's take a look at an example.</p>
		<p>Let's say we have a function called <span class="inlineCode">quotatious</span>:</p>
		<pre class="brush: js">function quotatious(names) {
    var quotes = [];
    
    for (var i = 0; i &lt; names.length; i++) {   
        
        var theFunction = function() {
            return "My name is " + names[i] + "!";
        }
        
        quotes.push(theFunction);
    }
    return quotes;
}</pre>
		<p>What this function does should seem pretty simple. It takes an array of 
		names and returns an array of functions that print out the name when 
		called. To use this function, add the following lines of code:</p>
		<pre class="brush: js">// our list of names
var people = ["Tony Stark", "John Rambo", "James Bond", "Rick James"];

// getting an array of functions
var peopleFunctions = quotatious(people);

// get the first function
var person = peopleFunctions[0];

// execute the first function
alert(person());</pre>
		<p>When the last line with the <span class="inlineCode">alert</span> 
		statement is executed, what would you expect to see? Because our
		<span class="inlineCode">person</span> variable is getting the first 
		item from the array of functions returned by <span class="inlineCode">
		peopleFunctions</span>, it would seem reasonable to expect "<strong>My name 
		is Tony Stark!</strong>" to appear.</p>
		<p>What you actually will see is the following:</p>
		<p class="centerImageNoBorder">
		<img alt="something is wrong here, right?" height="203" src="https://www.kirupa.com/html5/images/dialog_undefined_72.png" width="337"></p>
		<p>You will see <strong>undefined</strong> appearing instead of any 
		person's name from the <span class="inlineCode">people</span> array...much 
		less the supposedly correct value of Tony Stark. 
		What is going on here?</p>
		<p>What is going on is very subtle and highlighted in the following two 
		lines of code:</p>
		<pre class="brush: js, highlight:[4,7]">function quotatious(names) {
    var quotes = [];
    
    for (var i = 0; i &lt; names.length; i++) {   
        
        var theFunction = function() {
            return "My name is " + names[i] + "!";
        }
        
        quotes.push(theFunction);
    }
    return quotes;
}</pre>
		<p>Your <span class="inlineCode">theFunction</span> function relies 
		on the value of <span class="inlineCode">names[i]</span>. The value of
		<span class="inlineCode">i</span> is defined by the
		<span class="inlineCode">for</span> loop, and the
		<span class="inlineCode">for</span> loop is outside of the
		<span class="inlineCode">theFunction</span>'s scope. What you have is basically a closure with the <span class="inlineCode">theFunction</span> function 
		and the variable <span class="inlineCode">i</span> being an outer 
		variable:</p>
		<p class="centerImageNoBorder">
		<img alt="a closure" height="196" src="https://www.kirupa.com/html5/images/closure_example_72.png" width="369"></p>
		<p>Here is where the important detail I mentioned about closures comes 
		into play. The value of <span class="inlineCode">i</span> is never 
		locked into the <span class="inlineCode">theFunction</span> or the 
		closure. Its value is simply <strong>referenced</strong>. What you have 
		is something similar to this visualization:</p>
		<p class="centerImageNoBorder">
		<img alt="closure reference" height="243" src="https://www.kirupa.com/html5/images/closure_example_reference_72.png" width="437"></p>
		<p>Because the value of the <span class="inlineCode">i</span> variable is 
		actually referenced, the value of
		<span class="inlineCode">i</span> that your closures reference is 
		increased by one with each iteration of your
		<span class="inlineCode">for</span> loop. That isn't the behavior we want. We 
		want each function in the <span class="inlineCode">quotes</span> array 
		to store the value of <span class="inlineCode">i</span> that it had when 
		the function was first created. By the time our loop has fully run to 
		completion, the value of <span class="inlineCode">i</span> is <strong>4</strong>.</p>
		<p>Here is a visualization of what is going on:</p>
		<p class="centerImageNoBorder">
		<img alt="ah, now I see what is going on" height="422" src="https://www.kirupa.com/html5/images/closure_iife_problem_72.png" width="424"></p>
		<p>Because <span class="inlineCode">i</span> is <strong>4</strong> and 
		greater than the number of items 
		in the <span class="inlineCode">names</span> array input, you get <strong>undefined</strong> when the following 
		line executes with <span class="inlineCode">names[4]</span>:</p>
		<pre class="brush: js, highlight:[7]">function quotatious(names) {
    var quotes = [];
    
    for (var i = 0; i &lt; names.length; i++) {   
        
        var theFunction = function() {
            return "My name is " + names[i] + "!";
        }
        
        quotes.push(theFunction);
    }
    return quotes;
}</pre>
		<p>At this point, we understand what the code does and why it doesn't 
		work as it is currently written. The solution is to lock in the value of our outer variable, the 
		troublesome <span class="inlineCode">i</span>, inside the closure. This 
		will involve, as you might have guessed, the assistance of an IIFE.</p>
		<p>Below is the modified version of 
		the <span class="inlineCode">quotatious</span> function that does what 
		we want it to do:</p>
		<pre class="brush:js, highlight:[5, 10]">function quotatious(names) {
    var quotes = [];
    
    for (var i = 0; i &lt; names.length; i++) {   
        (function(index) {
            var theFunction = function() {
                return "My name is " + names[index] + "!";
            }
            quotes.push(theFunction);
        })(i);
    }
    return quotes;
}</pre>
		<p>Notice that the <span class="inlineCode">i</span> variable is passed 
		in as an argument to our IIFE. This argument, now referenced inside the 
		IIFE by the <span class="inlineCode">index</span> variable, <strong>is 
		local to whatever the function does</strong>. The state of what used to 
		be an outer variable is now locked in! This change ensures that the 
		function inside the <span class="inlineCode">quotes</span> array has its 
		own copy of the array index it needs so that the right person is being 
		referenced. You no longer have references to outer variables that change and cause 
		your code to break. W00t!</p>
		<div class="callout">
			<h4>Sometimes referencing outer variables is what you want!</h4>
			<p>&nbsp;I am most certainly not saying to always use an IIFE when 
			an outer variable changes after a closure has been created. There 
			may be times where you want your closure to work with the updated 
			value of an outer variable, so in those cases, don't use an IIFE to 
			lock-in the value.</p>
		</div>
		<h3>&nbsp;</h3>
		<h3>Making Things Private</h3>
		<p>In JavaScript, you dont have an easy, built-in way to limit the 
		visibility of variables and properties you end up creating. This means 
		it is difficult to have parts of your app hidden from other parts of 
		your app.</p>
		<p>Take a look at the following example that 
		highlights this problem:</p>
		<pre class="brush: js">var weakSauce = {
    secretCode: "Zorb!",

    checkCode: function (code) {
        if (this.secretCode == code) {
            alert("You are awesome!");   
        } else {
            alert("Try again!");   
        }
    }
};</pre>
		<p>You have an object called <span class="inlineCode">weakSauce</span> 
		that has two properties called <span class="inlineCode">secretCode</span> 
		and <span class="inlineCode">checkCode</span>. This is a very naive 
		password checker. When you pass in a code 
		value to the <span class="inlineCode">checkCode</span> function, it will 
		check if what you entered matches the value of <span class="inlineCode">
		secretCode</span>. If it matches, <strong>you are awesome</strong> will 
		get displayed. 
		If it isnt, <strong>you are still awesome</strong>despite what this 
		code will tell you.</p>
		<p>Now, here is where some privacy in your code may help. Nothing 
		prevents me, you, or someone who uses this code from checking the value 
		of <span class="inlineCode">secretCode</span> directly:</p>
		<pre class="brush: js">var bar = Object.create(weakSauce);
alert(bar.secretCode) // sigh :(</pre>
		<p>This is probably not what you intended when creating the
		<span class="inlineCode">secretCode</span> property. The reason isn't 
		because <span class="inlineCode">secretCode</span> is named with the 
		word <strong>secret</strong> in it. It is part of an implementation 
		detail that you may want to change at any time. The
		<span class="inlineCode">checkCode</span> function is what you would 
		intend people to use. Any other variable or property is fair game for 
		you to change whenever you want. If other pieces of code take a 
		dependency on implementation details, their code may break whenever you 
		make a change. That's why keeping some items private is important. That 
		is why the 
		<span class="inlineCode">secretCode</span> property 
		should be hidden to everything except the internals of the
		<span class="inlineCode">weakSauce</span> 
		object. In other languages, you could add an access modifier like
		<span class="inlineCode">private</span> to <span class="inlineCode">
		secretCode</span>, and that would be the end of this entire conversation. JavaScript isn't 
		like other languages. You have to jump through hoops to solve your 
		problem, and one such awesome hoop to is our friendly IIFE.</p>
		<p>By taking advantage of the local scope IIFEs 
		create, you can selectively choose what to expose or what not to expose. 
		Here is a version of the same example that works as we would like:</p>
		<pre class="brush: js">var awesomeSauce = (function () {
    var secretCode = "Zorb!";

    function privateCheckCode(code) {
        if (secretCode == code) {
            alert("You are awesome!");   
        } else {
            alert("Try again!");   
        }
    }

    // the public method we want to return
    return {
        checkCode: privateCheckCode
    };
})();</pre>
		<p>Let's repeat what we tried earlier with this new
		<span class="inlineCode">awesomeSauce</span> function:</p>
		<pre class="brush: js">var foo = Object.create(awesomeSauce);
alert(foo.secretCode); // undefined</pre>
		<p>This time around, you won't be able to access
		<span class="inlineCode">secretCode</span>. The reason is that the 
		contents of <span class="inlineCode">secretCode</span> are buried inside 
		the IIFE and not accessible publicly. In fact, the only thing that is 
		publicly exposed is what you have here:</p>
		<pre class="brush: js, highlight:[13,14,15]">var awesomeSauce = (function () {
    var secretCode = "Zorb!";

    function privateCheckCode(code) {
        if (secretCode == code) {
            alert("You are awesome!");   
        } else {
            alert("Try again!");   
        }
    }

    // the public method we want to return
    return {
        checkCode: privateCheckCode
    };
})();</pre>
		<p>By only returning the <span class="inlineCode">checkCode</span> 
		property that internally references the <span class="inlineCode">privateCheckCode</span> 
		function (which is a closure), you get all the functionality you 
		originally had while only exposing <span class="inlineCode">checkCode</span> 
		as the property in <span class="inlineCode">awesomeSauce</span> 
		that other parts of your app can safely access.</p>
		<p>There a more formal name for what I've just shown you here. It's 
		known as the <strong>Revealing Module Pattern</strong>, and there is a 
		ton of good stuff on the net about it. My favorite is the following
		<a class="blueEmphasis" href="http://addyosmani.com/resources/essentialjsdesignpatterns/book/#revealingmodulepatternjavascript" target="_blank">
		concise take of this pattern by Addy Osmani</a>.</p>
		<div class="callout">
			<h4>Remember, your JavaScript code is an open book!</h4>
			<p>While you may have just learned about a way to keep the internals 
			of your code private, it is only private to the typical code you 
			write. Unlike other languages, JavaScript's source is always fully 
			accessible. Even with obfuscation and other techniques, if your 
			browser can see your code, then anybody else with a few extra 
			seconds to spare can as well.</p>
			<p>For example, using the Chrome Developer Tools, I can easily inspect the 
			closure stored by <span class="inlineCode">checkCode</span> and 
			clearly see the value of the <span class="inlineCode">secretCode</span> 
			variable:</p>
			<p class="centerImage">
			<img alt="the closure is not private after all :(" height="351" src="https://www.kirupa.com/html5/images/chrome_closure_inspector.png" width="622"></p>
			<p>Essentially, what I'm trying to say is this - don't rely on 
			client-side JavaScript for dealing with things you truly want to 
			keep private. Instead, do what everyone else does and use some 
			server-side service that provides you with a private environment 
			where top secret things get done. The server then only returns the 
			things you want exposed publicly back to JavaScript.</p>
		</div>
		<h2>Conclusion</h2>
		<p>An <strong>IIFE</strong> (short for <strong>Immediately Invoked 
		Function Expression</strong>) is one of those bizarre things in 
		JavaScript that turns out to play a very useful role once you give it a 
		chance. The main reason you will need to 
		learn about IIFEs is because JavaScript lacks privacy. This problem becomes more annoying when 
		you are working on increasingly larger and more complex JavaScript apps 
		(who usually have increasingly larger and more complex closures), so the 
		local scope created by an IIFE is the ultimate blunt instrument for 
		solving all of your problems. As with all blunt instruments, do be 
		careful when using them.</p>
		<p>
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>For, While, and Do...While Loops in JavaScript</h1>
		<div class="post-wrapper">


		<p>When you are coding something, there will be times when you want to 
		repeat an action or run some code multiple times. For example, let's say 
		we have a function called <span class="inlineCode">saySomething</span> 
		that we want to repeatedly call 10 times.</p>
		<p>One way we could do this is by simply calling the function 10 times 
		using copy and paste:</p>
		<pre class="brush: js">saySomething();
saySomething();
saySomething();
saySomething();
saySomething();
saySomething();
saySomething();
saySomething();
saySomething();
saySomething();</pre>
		<p>This works and accomplishes what we set out to do, but...you 
		shouldn't do something like this. Duplicating code is never a good idea.</p>
		<p>Now, even if you decide to duplicate some code a few times manually, 
		this approach doesn't really work in practice. The number of times you 
		will need to duplicate your code will vary based on some external 
		factor such as the number of items in a collection of data, some result 
		from a web service call, the number of letters in a word, and various 
		other things that will keep changing. It won't always be a fixed number like <strong>10</strong>. 
		Often, the number of times you want to repeat some code could be very 
		VERY large. You don't want to copy and paste something a few hundred or 
		thousand times in order to repeat something. That would be terrible.</p>
		<p>What we need is a generic solution for repeating code with control 
		over how many times the code repeats. In JavaScript, this solution is 
		provided in the form of something known as a <strong>loop</strong>. 
		There are three kinds of loops you can create:</p>
		<ul>
			<li><span class="inlineCode">for</span> loops</li>
			<li><span class="inlineCode">while</span> loops</li>
			<li><span class="inlineCode">do...while</span> loops</li>
		</ul>
		<p>Each of these three loop variations allow you to specify the code 
		you want to repeat (aka loop) and a way to stop the repetition when a 
		condition is met. In the following sections, you'll learn all about 
		them.</p>
		<p>Onwards!</p>
		<h2>The <span class="inlineCode">for</span> Loop</h2>
		<p>One of the most common ways to create a loop is by using the <span class="inlineCode">
		for</span> statement to create a <strong><span class="auto-style2">for</span> loop</strong>. A 
		<span class="inlineCode">for</span> loop 
		allows you to repeatedly run some code until an expression you specify 
		returns <strong>false</strong>. That probably doesn't make a whole lot 
		of sense. To 
		help clarify this definition, let's look at an example.</p>
		<p>If we had to 
		translate our earlier <span class="inlineCode">saySomething</span> 
		example using <span class="inlineCode">for</span>, it would look as follows:</p>
		<pre class="brush: js">var count = 10;

for (var i = 0; i &lt; count; i++) {
	saySomething();
}

function saySomething() {
	document.writeln("hello!");
}</pre>
		<p>If you were to enter this 
		code inside some <span class="inlineCode">script</span> tags and preview 
		in your browser, this is what you would see:</p>
		<p class="centerImage">
		<img alt="hello! hello! hello!" height="346" src="https://www.kirupa.com/html5/images/loops_hello.png" width="534"></p>
		<p>The word <strong>hello!</strong> will be repeated ten times across 
		your page. This is made possible thanks to the
		<span class="inlineCode">for</span> loop, so we are gonna thank it back 
		by learning all about how it works. First, here is our star:</p>
		<pre class="brush: js, highlight:[1]">for (var i = 0; i &lt; count; i++) {
	saySomething();
}</pre>
		<p>This is a <span class="inlineCode">for</span> loop. It probably looks 
		very different from other statements you've seen so far, and that's 
		because...well, it is very different. To understand the differences, 
		let's generalize a <span class="inlineCode">for</span> loop into the 
		following form:</p>
		<dl class="kASHglobal">
			<dt><span class="kASHkwrd">for</span> <span class="kASHop">(</span><span class="kASHidn" style="background-color: #DDFCFF">start_point</span>;
			<span class="kASHwrd" style="color: #000000; background-color: #FFF9AB">
			expression</span>; 
			<span class="kASHidn" style="background-color: #FFDBFF">
			going_from_start_to_finish</span><span class="kASHop">)</span>
			<span class="kASHop">{</span></dt>
			<dl>
				<dt><span class="kASHcom">&nbsp; // code to execute</span></dt>
			</dl>
			<dt><span class="kASHop">}</span></dt>
		</dl>
		<p>This high-level view corresponds to the actual values from our example:</p>
		<dl class="kASHglobal">
			<dt><span class="kASHkwrd">for</span> <span class="kASHop">(</span><span class="kASHkwrd" style="background-color: #DDFCFF">var</span><span style="background-color: #DDFCFF">
			</span>
			<span class="kASHwrd" style="background-color: #DDFCFF">i</span><span style="background-color: #DDFCFF">
			</span> <span class="kASHop" style="background-color: #DDFCFF">=</span><span style="background-color: #DDFCFF">
			</span>
			<span class="kASHnum" style="background-color: #DDFCFF">0</span>; 
			<span class="kASHwrd" style="background-color: #FFF9AB">i</span><span style="background-color: #FFF9AB">
			</span>
			<span class="kASHop" style="background-color: #FFF9AB">&lt;</span><span style="background-color: #FFF9AB">
			</span> <span class="kASHnum" style="background-color: #FFF9AB">
			count</span>;
			<span class="kASHwrd" style="background-color: #FFDBFF">i</span><span class="kASHop"><span style="background-color: #FFDBFF">++</span>)</span>
			<span class="kASHop">{</span></dt>
			<dl>
				<dt><span class="kASHcom">&nbsp; saySomething();</span></dt>
			</dl>
			<dt><span class="kASHop">}</span></dt>
		</dl>
		<p>These three differently colored regions each play a very important 
		role in how your loop functions. In order to use a
		<span class="inlineCode">for</span> loop well, we must know what each 
		region accomplishes. That brings us to...</p>
		<h3>The Starting Point</h3>
		<p>In the first region, we define a
		<span style="background-color: #DDFCFF" class="blueEmphasis">starting point</span>. 
		A common starting point usually involves declaring and initializing a 
		variable. In our example, I create a new variable called
		<span class="inlineCode">i</span> and initialize it to the number
		<span class="inlineCode">0</span>:</p>
		<dl class="kASHglobal">
			<dt><span class="kASHkwrd" style="color: #CCCCCC">for</span>
			<span class="kASHop" style="color: #CCCCCC">(</span><span class="kASHkwrd">var</span>
			<span class="kASHwrd">i</span> <span class="kASHop">=</span>
			<span class="kASHnum">0</span>;<span style="color: #CCCCCC"> </span>
			<span class="kASHwrd" style="color: #CCCCCC">i</span>
			<span class="kASHop" style="color: #CCCCCC">&lt;</span>
			<span class="auto-style1">count</span><span style="color: #CCCCCC">;
			</span><span class="kASHwrd" style="color: #CCCCCC">i</span><span class="kASHop" style="color: #CCCCCC">++)</span>
			<span class="kASHop" style="color: #CCCCCC">{</span></dt>
			<dl>
				<dt><span class="kASHcom" style="color: #CCCCCC">&nbsp; saySomething();</span></dt>
			</dl>
			<dt><span class="kASHop" style="color: #CCCCCC">}</span></dt>
		</dl>
		<p>In case you are wondering, the variable name in these cases is 
		traditionally a single 
		letter...with <span class="inlineCode">i</span> being the most common. 
		The value you initialize this variable to is also traditionally 0. There 
		is one really good reason for using 0, and I'll explain that reason a 
		bit later.</p>
		<h3>How Long to Keep Looping</h3>
		<p>Once we define our starting point, in the next region we determine
		<span style="background-color: #FFF9AB" class="yellowEmphasis">how long to keep looping</span>. 
		This is handled by an expression that returns either
		<span class="inlineCode">true</span> or <span class="inlineCode">false</span>. 
		In our example, the condition is that our <span class="inlineCode">i</span> 
		variable is less than the value of <span class="inlineCode">count</span> 
		- which is <strong>10</strong>:</p>
		<dl class="kASHglobal">
			<dt><span class="kASHkwrd" style="color: #CCCCCC">for</span>
			<span class="kASHop" style="color: #CCCCCC">(</span><span class="kASHkwrd" style="color: #CCCCCC">var</span>
			<span class="kASHwrd" style="color: #CCCCCC">i</span>
			<span class="kASHop" style="color: #CCCCCC">=</span>
			<span class="kASHnum" style="color: #CCCCCC">0</span><span style="color: #CCCCCC">;
			</span><span class="kASHwrd">i</span> <span class="kASHop">&lt;</span>
			<span class="kASHwrd">count</span><span style="color: #CCCCCC">; </span>
			<span class="kASHwrd" style="color: #CCCCCC">i</span><span class="kASHop" style="color: #CCCCCC">++)</span>
			<span class="kASHop" style="color: #CCCCCC">{</span></dt>
			<dl>
				<dt><span class="kASHcom" style="color: #CCCCCC">&nbsp; saySomething();</span></dt>
			</dl>
			<dt><span class="kASHop" style="color: #CCCCCC">}</span></dt>
		</dl>
		<p>If our <span class="inlineCode">i</span> variable is less than 10, 
		this expression evaluates to <strong>true</strong> and our loop <strong>continues to 
		run</strong>. If our <span class="inlineCode">i</span> variable becomes equal to or greater than 
		10, 
		the condition is <strong>false</strong>, and our loop <strong>terminates</strong>. 
		Now, you may be wondering what causes our <span class="inlineCode">i</span> 
		variable to actually change. Well, that is covered next...</p>
		<h3>Reaching the End</h3>
		<p>So far, we've looked at our starting point. We also looked at the 
		expression that needs to be evaluate to <strong>false</strong> if we want to break our loop. What is 
		missing is the final region where we describe how to go 
		<span style="background-color: #FFDBFF" class="redEmphasis">from your 
		starting point to the stopping point</span>:</p>
		<dl class="kASHglobal">
			<dt><span class="kASHkwrd" style="color: #CCCCCC">for</span>
			<span class="kASHop" style="color: #CCCCCC">(</span><span class="kASHkwrd" style="color: #CCCCCC">var</span>
			<span class="kASHwrd" style="color: #CCCCCC">i</span>
			<span class="kASHop" style="color: #CCCCCC">=</span>
			<span class="kASHnum" style="color: #CCCCCC">0</span><span style="color: #CCCCCC">;
			</span><span class="kASHwrd" style="color: #CCCCCC">i</span>
			<span class="kASHop" style="color: #CCCCCC">&lt;</span>
			<span class="kASHnum" style="color: #CCCCCC">25</span><span style="color: #CCCCCC">;
			</span><span class="kASHwrd">i</span><span class="kASHop">++</span><span class="kASHop" style="color: #CCCCCC">)</span>
			<span class="kASHop" style="color: #CCCCCC">{</span></dt>
			<dl>
				<dt><span class="kASHcom" style="color: #CCCCCC">&nbsp; saySomething();</span></dt>
			</dl>
			<dt><span class="kASHop" style="color: #CCCCCC">}</span></dt>
		</dl>
		<p>In our example, at each iteration of our loop, we increment our
		<span class="inlineCode">i</span> variable by 1. In case you aren't 
		familiar with this syntax, the <span class="inlineCode">++</span> after
		<span class="inlineCode">i</span> means you increase whatever value the
		<span class="inlineCode">i</span> variable had by 1. Each time our loop 
		runs, whatever you specified here will execute. In this case, our
		<span class="inlineCode">i</span> value will increment.</p>
		<h3>Putting It All Together</h3>
		<p>Ok, now that we looked at each part of the for statement in greater 
		detail, let's run through it all at once to see what is going on. Our 
		full example, repeated from earlier, is as follows:</p>
		<pre class="brush: js">var count = 10;

for (var i = 0; i &lt; count; i++) {
	saySomething();
}

function saySomething() {
	document.write("hello!");
}</pre>
		<p>When our <span class="inlineCode">for</span> loop is initially hit, the
		<span class="inlineCode">i</span> variable is created and initialized to
		<strong>0</strong>. Next, our code checks if the value of
		<span class="inlineCode">i</span> is less than the value referenced by
		<span class="inlineCode">count</span>...which is <strong>10</strong>. At 
		this point, everything is green and whatever code is inside the loop 
		executes. In our case, that is the <span class="inlineCode">saySomething</span> 
		function. Once that is done, the last part of the for statement kicks 
		in. The <span class="inlineCode">i</span> variable is incremented by 1.</p>
		<p>Now, the loop starts all over again except the variable
		<span class="inlineCode">i</span> isn't re-initailized. It's value is 1, 
		and that means it passes the <span class="inlineCode">i &lt; count</span> 
		test. The <span class="inlineCode">saySomething</span> function is 
		called again, and the value of <span class="inlineCode">i</span> is 
		incremented again. Now, the <span class="inlineCode">i</span> variable's 
		value is 2.</p>
		<p>This whole process repeats until the value of
		<span class="inlineCode">i</span> equals <strong>10</strong>. At this 
		point, the <span class="inlineCode">i &lt; count</span> test will fail and 
		the loop will exit after having successfully executed the
		<span class="inlineCode">saySomething()</span> function 10 times.</p>
		<h2>Some <span class="inlineCode">for</span> Loop Examples</h2>
		<p>In the previous section, we dissected a 
		simple <span class="inlineCode">for</span> loop and labeled all of its 
		inner workings. The thing about <span class="inlineCode">for</span> 
		loops and most everything in JavaScript is that a simple example doesn't 
		always cover everything you might need. The best solution is to look at 
		some more examples of <span class="inlineCode">for</span> loops, and 
		that's what we are going to be doing in the next few sections.</p>
		<h3>Breaking a Loop</h3>
		<p>Sometimes, you may want to end your loop before it reaches 
		completion. The way you end a loop is by using the
		<span class="inlineCode">break</span> keyword. Below is an example:</p>
		<pre class="brush: js">for (var i = 0; i &lt; 100; i++) {
    document.writeln(i);

    if (i == 45) {
        break;
    }
}</pre>
		<p>When the value of <span class="inlineCode">i</span> equals <strong>45</strong>, 
		the <span class="inlineCode">break</span> keyword stops the loop from 
		continuing further. While this example was just a little bit contrived, 
		when you do run into a real-world case for ending your loop, you now 
		know what to do.</p>
		<h3>Skipping an Iteration</h3>
		<p>There will be moments when you want your loop to skip its current 
		iteration and move on to the next one. That is cleverly handled by the
		<span class="inlineCode">continue</span> keyword:</p>
		<pre class="brush: js">var floors = 28;

for (var i = 1; i &lt;= floors; i++) {
    if (i == 13) {
        // no floor here
        continue;
    }

    document.writeln("At floor: " + i + "&lt;br&gt;");
}</pre>
		<p>Unlike <span class="inlineCode">break</span> where your loop just 
		stops and goes home, <span class="inlineCode">continue</span> tells your 
		loop to stop and move on to the next iteration. You'll often find 
		yourself using <span class="inlineCode">continue</span> when handling 
		errors where you just want the loop to move on to the next item.</p>
		<h3>Going Backwards</h3>
		<p>There is no reason for why you have start at 0 and then increment 
		upward:</p>
		<pre class="brush: js">for (var i = 25; i &gt; 0; i--) {
	document.writeln("hello");
}</pre>
		<p>You can just as easily start high and then decrement until your loop 
		condition returns a false.</p>
		<p>You may have heard that doing something like this increases your 
		loop's performance. The jury is
		<a class="blueEmphasis" href="http://stackoverflow.com/questions/3520688/javascript-loop-performance-why-is-to-decrement-the-iterator-toward-0-faster-t" target="_blank">
		still out</a> on whether decrementing is actually faster than 
		incrementing, but feel free to experiment and see if you notice any 
		performance benefits.</p>
		<h3>You Don't Have to Use Numbers</h3>
		<p>When filling out your <span class="inlineCode">for</span> loop, you 
		don't have to only use numbers:</p>
		<pre class="brush: js">for (var i = "a"; i !="aaaaaaaa"; i += "a") {
	document.writeln("hmm...");
}</pre>
		<p>You can use anything you want as long as your loop will eventually 
		hit a point where it can end. Notice that in this example I am using the 
		letter <span class="inlineCode">a</span> as my currency for running this 
		loop.</p>
		<h3>Array! Array! Array!</h3>
		<p>One of the greatest love stories of all time is that between a data 
		structure known as an
		<a class="blueEmphasis" href="//www.kirupa.com/html5/arrays_javascript.htm">
		array</a> and the <strong>for</strong> loop:</p>
		<pre class="brush: js">var myArray = ["one", "two", "three"];
 
for (var i = 0; i &lt; myArray.length; i++) {
	document.writeln(myArray[i]);
}</pre>
		<p>An array is a collection of items. The way to enumerate and access 
		all of the items in an array requires some sort of a loop, and the
		<span class="inlineCode">for</span> loop is usually the chosen one.</p>
		<div class="callout">
			<h4>We're Jumping Ahead Here :(</h4>
			<p>I know we haven't looked at arrays in detail yet, so just glance 
			through the code and the explanations if you aren't too familiar 
			with them. I'll rehash some of this information when we formally 
			talk about arrays in the future.</p>
		</div>
		<p>Notice that my condition for how long we loop involves the array's 
		length (<span class="inlineCode">myArray.length</span>) as opposed to 
		some fixed value like 10. Also, the first item in an array is referenced 
		by the number 0. In fact, almost all first items in JavaScript are 
		referenced by a 0. That is why we initialize our loop counter, the
		<span class="inlineCode">i</span> variable, to <strong>0</strong> as 
		opposed to <strong>1</strong> or some other value.</p>
		<p>Anyway, I figured I would introduce you to the <strong>array</strong> 
		and <strong>for loop</strong> pair. How romantic!</p>
		<h3>Oh, No He Didn't!</h3>
		<p>Oh yes! Yes I did. I went there, took a picture, posted on Facebook, 
		and came back:</p>
		<pre class="brush: js">var i = 0;
var yay = true;
 
for (; yay;) {
	if (i == 10) {
		yay = false;
	}
	i++;
	document.writeln("weird");
}</pre>
		<p>You don't have to fill out the three sections of your
		<span class="inlineCode">for</span> loop in order to make it work. As 
		long as, in the end, you manage to satisfy the loop's terminating 
		condition, you can do whatever you want...just like I did.</p>
		<h2>The Other Loops</h2>
		<p>Living in the shadow of the beloved <span class="inlineCode">for</span> 
		loop are the <span class="inlineCode">while</span> and
		<span class="inlineCode">do...while</span> loop variants. These two 
		loops variants clearly serve a purpose, but I've never quite found what 
		that purpose is. Despite that, in the interest of completeness, let's 
		quickly look at both of them.</p>
		<h3>The <span class="inlineCode">while</span> Loop</h3>
		<p>The <span class="inlineCode">while</span> loop repeats some code 
		until its test condition (another expression) returns false:</p>
		<pre class="brush: js">var count = 0;
       
while (count &lt; 10) {
    document.writeln("looping away!");

    count++;
}</pre>
		<p>In this example, the condition is represented by the
		<span class="inlineCode">count &lt; 10</span> expression. With each 
		iteration, our loop increments the <span class="inlineCode">count</span> 
		value by <strong>1</strong>:</p>
		<pre class="brush: js, highlight:[3]">var count = 0;
       
while (count &lt; 10) {
    document.writeln("looping away!");

    count++;
}</pre>
		<p>Once the value of <span class="inlineCode">count</span> becomes
		<strong>10</strong>, the loop stops because the <span class="inlineCode">
		count &lt; 10</span> expression will return <strong>false</strong>. That's 
		all there is to the <span class="inlineCode">while</span> loop.</p>
		<h3>The <span class="inlineCode">do...while</span> Loop</h3>
		<p>Now, we get to the Meg Griffin of the loop variants. That would be 
		the <span class="inlineCode">do...while</span> loop whose purpose is 
		even less defined than <span class="inlineCode">while</span>. Where the
		<span class="inlineCode">while</span> loop had its conditional 
		expression first before the loop would execute, the
		<span class="inlineCode">do...while</span> loop has its conditional 
		expression at the end.</p>
		<p>Here is an example:</p>
		<pre class="brush: js">var count = 0;

do {
    count++;

    document.writeln("I don't know what I am doing here! &lt;br&gt;");
} while (count &lt; 10);</pre>
		<p>The main difference between a <span class="inlineCode">while</span> 
		loop and a <span class="inlineCode">do...while</span> loop is that the 
		contents of a <span class="inlineCode">while</span> loop could never get 
		executed if its conditional expression is <span class="inlineCode">false</span> 
		from the very beginning:</p>
		<pre class="brush: js">while (false) {
    document.writeln("Can't touch this!");
}</pre>
		<p>With a do...while loop, because the conditional expression is 
		evaluated only after one iteration, your loop's contents are guaranteed 
		to run at least once:</p>
		<pre class="brush: js">do {
    document.writeln("This code will run once!");
} while (false);</pre>
		<p>Yaaawwn! Anyway, there is just one last bit of information I need to 
		tell you before we move on. The <span class="inlineCode">break</span> 
		and <span class="inlineCode">continue</span> statements that we saw 
		earlier as part of the awesome for loop also work similarly when used 
		inside the <span class="inlineCode">while</span> and
		<span class="inlineCode">do...while</span> loop variants.</p>
		<h2>Conclusion</h2>
		<p>So there you have it - a look at <span class="inlineCode">for</span> 
		loops and how you can use them along with very basic coverage of the
		<span class="inlineCode">while</span> and <span class="inlineCode">
		do...while</span> loops. Right now, you may not see yourself using loops 
		a whole lot. As we start getting into more involved situations involving 
		collections of data, elements in your DOM, text manipulation, and other 
		stuff, you'll be using loops a whole lot more.</p>
		<p>
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		
		<!--=========================
			START : POST
		=============================-->
		<h1>Events in JavaScript</h1>
		<div class="post-wrapper">


	  <p>In case you haven't noticed, most applications and web 
					sites are pretty boring when left alone. They launch with 
					great fanfare and gusto, but the excitement they bring to 
					the table goes away very quickly if you don't start 
					interacting with them:</p>
		<p class="centerImageNoBorder">
		<img alt="can we go home?" height="427" src="https://www.kirupa.com/html5/images/boring_72.png" width="480"></p>
					<p>The reason for this is simple. Your applications exist to 
					react to things that you do to them. They have some built-in 
					motivation when you launch them to get themselves out of bed 
					and ready for the day. Everything else that they do 
					afterwards depends largely on what you tell them to do. This 
					is where things get really interesting.</p>
		<p>The way you tell your applications what to do is by having them react 
		to what are known as <strong>events</strong>. In this tutorial, we will 
		take an introductory look at what events are and how you can use them.</p>
		<p>Onwards!		</p>
		<h2>What are Events?</h2>
		<p>At a high level, everything you create can be modeled by the 
		following statement:</p>
		<p>&nbsp;</p>
		<p class="centerImageNoBorder">
		<img alt="when something happens" height="43" src="https://www.kirupa.com/html5/images/when_1_72.png" width="458"></p>
		<p>&nbsp;</p>
		<p>You can fill in the blanks in this statement in a bajillion different 
		ways. The first blank calls out something that happens. The second blank 
		describes the reaction to that. Here are some examples of this statement 
		filled out:</p>
		<p class="centerImageNoBorder">
			<img alt="examples" height="228" src="https://www.kirupa.com/html5/images/example_apps_72.png" width="579"></p>
		<p>This generic model applies to all of the code we've written together. 
		This model also applies to all of the code your favorite 
		developer/designer friends wrote for their applications. There is no way 
		of escaping this model, so...there is no point in resisting. Instead, 
		you need to learn to embrace the star of this model, the very talented 
		critter known as the <strong>event</strong>.</p>
		<p>An event is nothing more than a signal. It communicates that 
		something has just happened. This something could be a mouse click. It 
		could be a key press on your keyboard. It could be your window getting 
		resized. It could just be your document simply getting loaded. The thing 
		to take away is that your signal could be any hundreds of somethings 
		that are built-in to the JavaScript language...or custom somethings that 
		you created just for your app alone.</p>
		<p>Getting back to our model, events make up the first half:</p>
		<p class="centerImageNoBorder">
		<img alt="where events fit into all of this" height="317" src="https://www.kirupa.com/html5/images/event_half_72.png" width="461"></p>
		<p>Events define the thing that happens. They fire the signal. The 
		second part of the model is defined by the reaction to the event:</p>
		<p class="centerImageNoBorder">
		<img alt="reaction" height="174" src="https://www.kirupa.com/html5/images/react_half_72.png" width="519"></p>
		<p>After all, what good is a signal if there isn't someone somewhere 
		that is waiting for it and then takes the appropriate action?! Ok - now 
		that you have a high level overview of what events are, let's dive into 
		how events live in the nature reserve known as JavaScript.</p>
		<h2>Events and JavaScript</h2>
		<p>Given the importance of events, it should be no surprise to you that 
		JavaScript provides you with a lot of great support for working with 
		them. To work with events, there are two things you need to do:</p>
		<ol>
			<li>Listen for events</li>
			<li>React to events</li>
		</ol>
		<p>These two steps seem pretty simple, but never forget that we are 
		dealing with JavaScript here. The simplicity is just a smokescreen for 
		the depth of the trauma JavaScript will inflict upon you if you take a 
		wrong step. Maybe I am being overly dramatic here, but we'll find out 
		soon enough.</p>
					<h3>1. Listening for Events</h3>
		<p>To more bluntly state what I danced around earlier, almost everything you do 
		inside an application 
					results in an event getting fired. Sometimes, your 
					application will fire events automatically such as when 
					it loads. Sometimes your application will fire events as a 
					reaction to you actually interacting with it. The thing to 
		note is that your application is bombarded by 
					events constantly whether you intended to have them get 
					fired or not. Our task is to tell your application to listen 
		only to the events we care about.</p>
					<p>The thankless job of listening to the right event is 
					handled entirely by a function called
					<span class="inlineCode">addEventListener</span>. This 
					function is responsible for being eternally vigilant so that 
					it can notify another part of your application when an 
					interesting event gets fired.</p>
		<p>The way you use this function looks as follows:</p>
					<pre class="brush: js">source.addEventListener(eventName, eventHandler, false);</pre>
					<p>That's probably not very helpful, so let's dissect what 
					each part of this function means.</p>
		<h4>The Source</h4>
		<p>You call <span class="inlineCode">addEventListener</span> via an 
		element or object that you want to listen for events on. Typically, that 
		will be a DOM element, but it can also be your <span class="inlineCode">
		document</span>, <span class="inlineCode">window</span>, or any other 
		object that just happens to fire events.</p>
		<h4>The Event Name</h4>
		<p>The first argument you specify to the <span class="inlineCode">
		addEventListener</span> function is the name of the event you are 
		interested in listening to. The full list of events you have at your 
		disposal is simply too large to list here (go
		<a class="blueEmphasis" href="http://www.w3.org/TR/DOM-Level-3-Events/#events-module" target="_blank">
		here instead</a>), but some of the most common events you will encounter 
		are:</p>
<table id="smileysTable">
	<tr>
		<th class="auto-style1">Event</th>
		<th class="auto-style2">Event is fired...</th>
	</tr>
	<tr>
		<td class="auto-style1">
		<span class="inlineCode">click</span></td>
		<td>...when you press down and release the primary mouse button / 
		trackpad / etc.</td>
	</tr>
	<tr>
		<td class="auto-style1">
		<span class="inlineCode">mousemove</span></td>
		<td>...whenever your mouse cursor moves</td>
	</tr>
	<tr>
		<td class="auto-style1">
		<span class="inlineCode">mouseover</span></td>
		<td>...when you move the mouse cursor over an element. This is the event 
		you would use for detecting a hover!</td>
	</tr>
	<tr>
		<td class="auto-style1">
		<span class="inlineCode">mouseout</span></td>
		<td>...when your mouse cursor moves outside the boundaries of an 
		element.</td>
	</tr>
	<tr>
		<td class="auto-style1">
		<span class="inlineCode">dblclick</span></td>
		<td>...when you quickly click twice.</td>
	</tr>
	<tr>
		<td class="auto-style1">
		<span class="inlineCode">DOMContentLoaded</span></td>
		<td>...when your document's DOM has fully loaded. You can learn more 
		about this event in the
		<a class="blueEmphasis" href="//www.kirupa.com/html5/running_scripts_after_your_content_has_loaded.htm">
		following tutorial</a>. </td>
	</tr>
	<tr>
		<td class="auto-style1">
		<span class="inlineCode">load</span></td>
		<td>...when your entire document (DOM, external stuff like images, 
		scripts, etc.) have fully loaded.</td>
	</tr>
	<tr>
		<td class="auto-style1">
		<span class="inlineCode">keydown</span></td>
		<td>...when you press down on a key on your keyboard</td>
	</tr>
	<tr>
		<td class="auto-style1">
		<span class="inlineCode">keyup</span></td>
		<td>...when you release a key press on your keyboard</td>
	</tr>
	<tr>
		<td class="auto-style1">
		<span class="inlineCode">scroll</span></td>
		<td>...when an element is scrolled around</td>
	</tr>
	<tr>
		<td class="auto-style1">
		<span class="inlineCode">wheel</span> &amp;<br>&nbsp;
		<span class="inlineCode">DOMMouseScroll</span></td>
		<td>...everytime you use your mousewheel to scroll up or down</td>
	</tr>
</table>

		<p>In subsequent tutorials, we will look at a lot of these events in 
		greater detail. For now, just take a quick glance at the
		<span class="inlineCode">click</span> event, for we will be using 
		that one in a few moments.</p>
		<h4>The Event Handler</h4>
		<p>The second argument requires you to specify a function that will get 
		called when the event gets overheard. This function is very 
		affectionately known as the <strong>event handler</strong> by friends 
		and family. You'll learn a whole lot more about this function in a few 
		moments.</p>
		<h4>To Capture, or Not to Capture, That Is the Question!</h4>
		<p>The last argument is made up of either a <strong>true</strong> or a
		<strong>false</strong>. To fully help you understand the implications of 
		specifying either value, you are going to have to wait until the the
					<a class="blueEmphasis" href="//www.kirupa.com/html5/event_capturing_bubbling_javascript.htm">
					Event Bubbling and Capturing in JavaScript</a> tutorial. 
		This tutorial happens to be next in this series, so you won't be waiting 
		long.</p>
		<h4>Putting It All Together</h4>
		<p>Now that you've seen the <span class="inlineCode">addEventListener</span> 
		function and what it looks like, let's tie it all up with an example of 
		this function fully decked out:</p>
					<pre class="brush: js">document.addEventListener("click", changeColor, false);</pre>
					<p>Our <span class="inlineCode">addEventListener</span> in 
					this example is attached to the <span class="inlineCode">
					document</span> object. When a <span class="inlineCode">
					click</span> event is overheard, it calls the
					<span class="inlineCode">changeColor</span> function (aka 
					the event handler) to react to the event. This sets us up 
					nicely for the next section which is all about reacting to 
					events.</p>
		<h3>2. Reacting to Events</h3>
		<p>As you saw in the previous section, listening to events is handled by <span class="inlineCode">
		addEventListener</span>. What to do after an event is overheard is 
		handled by the event handler. I wasn't joking when I mentioned earlier 
		that an event handler 
		is nothing more than a function:</p>
		<pre class="brush: js">function normalAndBoring() {
    // I like hiking and puppies and other stuff!
}</pre>
		<p>The only distinction between a typical function and one that is 
		designated as the event handler is that your event handler function is 
		specifically called out by name in an <span class="inlineCode">
		addEventListener</span> call:</p>
		<pre class="brush: js, highlight:[3,4,5]">document.addEventListener("click", changeColor, false);

function changeColor() {
    // I am important!!!
}</pre>
		<p>Any code you place inside your event handler will execute when the 
		event your <span class="inlineCode">addEventListener</span> function 
		cares about gets overheard. It's all pretty simple!</p>
		<h2>A Simple Example</h2>
		<p>The best way to make sense of what we've learned so far is to see all of this fully working. 
		To play along, add the following markup and code 
		to an HTML document:</p>
		<pre class="brush: js, html-script:true">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Click Anywhere!&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;script&gt;
        document.addEventListener("click", changeColor, false);

        function changeColor() {
            document.body.style.backgroundColor = "#FFC926";
        }
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
		<p>If you preview your document in the browser, you will initially just 
		see a blank page:</p>
		<p class="centerImageNoBorder">
		<img alt="a blank page" height="360" src="https://www.kirupa.com/html5/images/blank_page_example_72.png" width="580"></p>
		<p>Things will change you when you click anywhere on the page, though. 
		Once you've completed your click, your page's background will change 
		from being white to a yellow-ish color:</p>
		<p class="centerImageNoBorder">
		<img alt="a blank and yellow page" height="386" src="https://www.kirupa.com/html5/images/blank_page_example_yellow_72.png" width="604"></p>
		<p>The reason for this is pretty easy to see why. Let's take a look at 
		the code:</p>
		<pre class="brush: js">document.addEventListener("click", changeColor, false);

function changeColor() {
    document.body.style.backgroundColor = "#FFC926";
}</pre>
		<p>The addEventListener call is identical to what you saw earlier, so 
		let's skip that one. Instead, pay attention to the
		<span class="inlineCode">changeColor</span> event handler.</p>
		<pre class="brush: js, highlight:[3,4,5]">document.addEventListener("click", changeColor, false);

function changeColor() {
    document.body.style.backgroundColor = "#FFC926";
}</pre>
		<p>This function gets called when the <span class="inlineCode">click</span> 
		event on the <span class="inlineCode">document</span> is overheard. When 
		this function gets called, it sets the background color of the body 
		element to a shade of yellow. Tying this back to the very beginning 
		where we generalized how applications work, this is what this example 
		looks like:</p>
		<p class="centerImageNoBorder">
		<img alt="tying it all back" height="128" src="https://www.kirupa.com/html5/images/model_text_example_72.png" width="488"></p>
		<p>If all of this makes complete sense to you, then that's great! You 
		just learned about one of the most important concepts you'll encounter. 
		We aren't done just yet. We let the event handler off the hook a little 
		too easily, so let's pay it one more visit.</p>
		<h2>The Event Arguments and the Event Type</h2>
		<p>Your event handler does more than just get called when an event gets 
		overheard by an event listener. It also provides access to the 
		underlying event object as part of its arguments. To access this 
		event object easily, we need to modify your event handler signature to support 
		this argument.</p>
		<p>Here is an example:</p>
		<pre class="brush: js, highlight:[1]">function myEventHandler(e) {
    // event handlery stuff
}</pre>
		<p>At this point, your event handler is still a plain ol' boring 
		function. It just happens to be a function that takes one argument...the 
		event argument! You can go with any valid identifier for the argument, 
		but I tend to go with <span class="inlineCode">e</span> because that is 
		what all the cool kids do. There is nothing technically wrong with 
		identifying your event as follows:</p>
		<pre class="brush:js, highlight:[1]">function myEventHandler(isNyanCatReal) { 
    // event handlery stuff
}</pre>
		<p>Anyway, the event argument points to an event object, and this object 
		is passed in as part of the event firing. There is a reason why we are 
		paying attention to what seems like a typical and boring occurence. This 
		event object contains properties that are <strong>relevant to 
		the event that was fired</strong>. An 
		event triggered by a mouse click will have different properties when 
		compared to an event triggered by your keyboard key press, a page load, 
		an animation, and a whole lot more. Most events will have their own 
		specialized behavior that you will rely on, and the event object is your 
		window into all of that uniqueness.</p>
		<p>Despite the variety of events and resulting event objects you can get, 
		there are certain properties that are common. This commonality is made 
		possible because all event 
		objects are derived from a base <span class="inlineCode">Event</span> 
		type (technically, an <span class="inlineCode">Interface</span>). Some 
		of the popular properties from the <span class="inlineCode">Event</span> 
		type that you will use are:</p>
		<ol>
			<li><span class="inlineCode">currentTarget</span></li>
			<li><span class="inlineCode">target</span></li>
			<li><span class="inlineCode">preventDefault</span></li>
			<li><span class="inlineCode">stopPropagation</span></li>
			<li><span class="inlineCode">type</span></li>
		</ol>
		<p>To fully understand what these properties do, we need to go a little 
		deeper in our understanding of events. We aren't there yet, so just know 
		that these properties exist. You'll be seeing them real soon in 
		subsequent tutorials.</p>
		<div class="callout">
			<h4>Removing an Event Listener</h4>
			<p>Sometimes, you will need to remove an event listener from an 
			element. The way you do that is by using <span class="inlineCode">
			addEventListener</span>'s arch-nemesis, the <span class="inlineCode">
			removeEventListener</span> function:</p>
					<pre class="brush: js">something.removeEventListener(eventName, eventHandler, false);</pre>
					<p>As you can see, this function takes the exact type of 
					arguments as an <span class="inlineCode">addEventListener</span> 
					function. The reason for that is simple. When you are 
					listening for an event on an element or object, JavaScript 
					uses the <span class="inlineCode">eventName</span>,
					<span class="inlineCode">eventHandler</span>, and the
					<strong>true</strong>/<strong>false</strong> value to 
					uniquely identify that event listener. To remove this event 
					listener, you need to specify the exact same arguments.</p>
			<p>Here is an example:</p>
			<pre class="brush: js, highlight:[2]">document.addEventListener("click", changeColor, false);
document.removeEventListener("click", changeColor, false);

function changeColor() {
    document.body.style.backgroundColor = "#FFC926";
}</pre>
			<p>The event listener we added in the first line is completely 
			neutralized by the <span class="inlineCode">removeEventListener</span> 
			call in the highlighted 2nd line. If the <span class="inlineCode">
			removeEventListener</span> call used any argument that was different 
			than what was specified with the corresponding
			<span class="inlineCode">addEventListener</span> call, then its 
			impact would be ignored and the event listening will continue.</p>
		</div>
					<h2>Conclusion</h2>
		<p>Well, that's 
					all there is to getting an introduction to events. Just 
		rememter that you have 
					your <span class="inlineCode">addEventListener</span> 
					function that allows you to register an event handler 
					function. This event handler function will get called when 
		the event your event listener is listening for gets fired. While we 
		touched base on a few other topics, they will make more sense when we 
		view them in the context of more advanced event-related topics that you 
		will see shortly.</p>
		<p>Once you are ready, I recommend you head over to learning more 
		about
					<a class="blueEmphasis" href="//www.kirupa.com/html5/event_capturing_bubbling_javascript.htm">
					Event Bubbling and Capturing</a>,
		<a class="blueEmphasis" href="//www.kirupa.com/html5/mouse_events_in_javascript.htm">
		Mouse Events in JavaScript</a>, or <a class="blueEmphasis" href="keyboard_events_in_javascript.htm">
		Keyboard Events in JavaScript</a>.</p>
		<p>
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>Functions in JavaScript</h1>
		<div class="post-wrapper">
			

	  <p>So far, all of the code weve written really contained no structure. 
		It was justthere:</p>
		<pre class="brush: js">alert("hello, world!");</pre>
		<p>There is nothing wrong with having code like this. This is especially 
		true if your code is made up of a single statement. Most of the time, 
		though, that will never be the case. Your code will rarely be this 
		simple when you are using JavaScript in the real world for real-worldy 
		things.</p>
		<p>Getting back to our text...to highlight this, let's say we want to display the distance 
		something has traveled:</p>
		<p class="centerImageNoBorder">
		<img alt="distance something has traveled" height="161" src="https://www.kirupa.com/html5/images/functions_example_72.png" width="448"></p>
		<p>If you remember from school, the distance is calculated by 
		multiplying the speed something has traveled by how long it took:</p>
		<p>&nbsp;</p>
		<p class="centerImageNoBorder">
		<img alt="what the distance and speed are" height="41" src="https://www.kirupa.com/html5/images/distance_speed_time_72.png" width="372"></p>
		<p>&nbsp;</p>
		<p>The JavaScript version of that will sorta look as follows:</p>
		<pre class="brush: js">var speed = 10;
var time = 5;
alert(speed * time);</pre>
		<p>We have two variables named <span class="inlineCode">speed</span> and
		<span class="inlineCode">time</span>, and they each store a number. The
		<span class="inlineCode">alert</span> function displays the result of 
		multiplying the values stored by the <span class="inlineCode">speed</span> 
		and <span class="inlineCode">time</span> variables. This is a pretty 
		literal translation of the distance equation you just saw.</p>
		<p>Lets say we want to calculate the distance for more values. Using 
		only what we&#39;ve seen so far, our code would look as follows:</p>
		<pre class="brush: js">var speed = 10;
var time = 5;
alert(speed * time);
&nbsp;
var speed1 = 85;
var time1 = 1.5;
alert(speed1 * time1);
&nbsp;
var speed2 = 12;
var time2 = 9;
alert(speed2 * time2);
&nbsp;
var speed3 = 42;
var time3 = 21;
alert(speed3 * time3);</pre>
		<p>I dont know about you, but this just looks 
		<a class="blueEmphasis" href="http://www.youtube.com/watch?v=jKTb5Nfyh1o" target="_blank">
		turrible</a>. Our code is 
		unnecessarily verbose and repetitive. Like I mentioned earlier when we 
		looked at
		<a class="blueEmphasis" href="//www.kirupa.com/html5/variables_in_javascript.htm">
		Variables</a>, repetition makes your code harder to maintain, 
		and it also wastes your time.</p>
		<p>This entire problem can be solved very easily by using what you'll be 
		seeing a lot of here, <strong>functions</strong>:<br></p>
		<pre class="brush: js">function showDistance(speed, time) {
	alert(speed * time);
}
&nbsp;
showDistance(10, 5);
showDistance(85, 1.5);
showDistance(12, 9);
showDistance(42, 21);</pre>
		<p>Dont worry too much about what this code does just yet. Just know that this smaller chunk of code 
		does everything all those many lines of code did earlier without all of 
		the negative side effects. We'll 
		learn all about functions and how they do all the sweet things that they 
		do starting...right...now!</p>
		<p>Onwards!</p>
		<h2>What is a Function?</h2>
		<p>At a very basic level, a function is nothing more than a wrapper for 
		some code. A function basically:</p>
		<ol>
			<li>Groups statements together</li>
			<li>Makes your code reusable</li>
		</ol>
		<p>You will rarely write or use code that doesn't involve functions, so 
		it's important that you get familiar with them and learn all about how 
		well they work.</p>
		<h2>A Simple Function</h2>
		<p>The best way to learn about function is just to just dive right in 
		and start using them, so let&#39;s start off by creating a very simple function. Creating a function is pretty easy. It just requires understanding 
		some little syntactical quirks like using weird parenthesis and brackets.</p>
		<p>Below is an example of what a very simple function looks like:</p>
		<pre class="brush:js">function sayHello() {
	alert("hello!");
}</pre>
		<p>Just having your function isn't enough, though. Your function needs 
		to actually be called, and you can do that by adding the following line 
		afterwards:</p>
		<pre class="brush:js, highlight:[4]">function sayHello() {
	alert("hello!");
}
sayHello();</pre>
		<p>If you typed all this in and preview your page in your browser, you 
		will see <strong>hello!</strong> displayed. The only thing that you need 
		to know right now is that your code works. Let's look at why the code 
		works next by breaking it up into individual chunks and looking at them 
		in greater detail.</p>
		<p>First you see the <span class="inlineCode">
		function</span> keyword leading things off:</p>
		<dl class="kASHglobal">
			<dt><span class="yellowEmphasis">function</span>
			<span class="kASHwrd">sayHello</span><span class="kASHop">()</span>
			<span class="kASHop">{</span></dt>
			<dl>
				<dt><span class="kASHwrd">alert</span><span class="kASHop">(</span><span class="kASHqt">"hello!"</span><span class="kASHop">)</span>;</dt>
			</dl>
			<dt><span class="kASHop">}</span></dt>
		</dl>
		<p>This keyword tells the JavaScript engine that lives deep inside your 
		browser to treat this entire block of code as something having to do 
		with functions. </p>
		<p>After the <span class="inlineCode">function</span> keyword, you 
		specify the actual name of the function followed by some opening and 
		closing parentheses, <span class="inlineCode">( )</span>:</p>
		<dl class="kASHglobal">
			<dt><span class="kASHkwrd">function</span>
			<span class="yellowEmphasis">sayHello()</span> <span class="kASHop">
			{</span></dt>
			<dl>
				<dt><span class="kASHwrd">alert</span><span class="kASHop">(</span><span class="kASHqt">"hello!"</span><span class="kASHop">)</span>;</dt>
			</dl>
			<dt><span class="kASHop">}</span></dt>
		</dl>
		<p>Rounding out your function declaration are the opening and closing 
		brackets that enclose any statements that you may have inside:</p>
		<dl class="kASHglobal">
			<dt><span class="kASHkwrd">function</span> <span class="kASHwrd">
			sayHello</span><span class="kASHop">()</span>
			<span class="yellowEmphasis">{</span></dt>
			<dl>
				<dt><span class="kASHwrd">alert</span><span class="kASHop">(</span><span class="kASHqt">"hello!"</span><span class="kASHop">)</span>;</dt>
			</dl>
			<dt><span class="yellowEmphasis">}</span></dt>
		</dl>
		<p>The final thing is the contents of your function - the statements that 
		make your function actually...functional:</p>
		<dl class="kASHglobal">
			<dt><span class="kASHkwrd">function</span> <span class="kASHwrd">
			sayHello</span><span class="kASHop">()</span> <span class="kASHop">{</span></dt>
			<dl>
				<dt><span class="yellowEmphasis">alert("hello!");</span></dt>
			</dl>
			<dt><span class="kASHop">}</span></dt>
		</dl>
		<p>In our case, the content is the <span class="inlineCode">alert</span> 
		function that displays a dialog with the word <strong>hello!</strong> 
		displayed.</p>
		<p>The last thing to look at is the function call:</p>
		<pre class="brush:js, highlight:[4]">function sayHello() {
	alert("hello!");
}
sayHello();</pre>
		<p>The function call is typically the name the function you want to
		<strong>call</strong> (aka <strong>invoke</strong>) followed again by 
		the parentheses. Without your function call, the function you created 
		doesn't do anything. It is the function call that wakes your function up 
		and makes it do things.</p>
		<p>Now, what you have just seen is a look at a very simple function. In 
		the next couple of sections, we are going to build on what you've just 
		learned and look at increasingly more realistic examples of functions.</p>
		<h2>Creating a Function that Takes Arguments</h2>
		<p>Like I mentioned earlier, the previous <span class="inlineCode">
		sayHello</span> example was quite simple:</p>
		<pre class="brush: js">function sayHello() {
	alert("hello!");
}
sayHello();</pre>
		<p>You call a function, and the function does something. That 
		simplification by itself is not out of the ordinary. All functions work 
		just like that. What is different is the details on how functions get 
		invoked, where they get their data from, and so on. The first such 
		detail we are going to look at involves functions that take <strong>
		arguments</strong>.</p>
		<p>Let's start with a simple example:</p>
		<pre class="brush: js">alert("my argument");</pre>
		<p>What we have here is your <span class="inlineCode">alert</span> 
		function. You've probably seen it a few (or a few dozen) times already. 
		What this function does is take an argument for what to actually display 
		when it gets called:</p>
		<p class="centerImageNoBorder">
		<img alt="an argument" height="193" src="https://www.kirupa.com/html5/images/my_argument_72.png" width="327"></p>
		<p>Between your opening and closing parenthesis when calling the alert 
		function, you specify the stuff that needs to be displayed. This stuff 
		is more formally known as an <strong>argument</strong>. The <span class="inlineCode">alert</span> function is just one of 
		many functions that take arguments, and many functions you create will 
		take arguments as well.</p>
		<p>To stay local, just from this tutorial itself, another function that 
		we briefly looked at that takes arguments is 
		our
		<span class="inlineCode">showDistance</span> function:</p>
		<pre class="brush: js">function showDistance(speed, time) {
	alert(speed * time);
}</pre>
		<p>See, you can tell when a function takes arguments by looking at the 
		function declaration itself:</p>
		<pre class="brush:js, highlight:[1]">function showDistance(speed, time) {
	alert(speed * time);
}</pre>
		<p>What used to be empty parenthesis following the function name will 
		actually contain some information about the quantity of arguments your 
		function needs along with some hints on what values your arguments will 
		take.</p>
		<p>For <span class="inlineCode">showDistance</span>, you can infer that 
		this function takes two arguments. The first argument corresponds to the <span class="inlineCode">
		speed</span> and the second argument corresponds to the
		<span class="inlineCode">time</span>.</p>
		<p>You specify your arguments to the function as part of the function 
		call:</p>
		<pre class="brush: js, highlight:[4]">function showDistance(speed, time) {
	alert(speed * time);
}
showDistance(10, 5);</pre>
		<p>In our case, we call <span class="inlineCode">showDistance</span> and specify the values we want to 
		pass to your function inside the parentheses.</p>
		<dl class="kASHglobal">
			<dt><span class="kASHwrd">showDistance</span><span class="kASHop">(</span><span class="yellowEmphasis">10, 
			5</span><span class="kASHop">)</span>;</dt>
		</dl>
		<p>Because I am providing more than one argument, I separate the 
		individual arguments 
		by a comma. Oh, and before I forget to call this out, the order you 
		specify your arguments matters.</p>
		<p>Let's look at all of this in 
		greater detail starting with the following diagram:</p>
		<p>
		<img alt="example" height="263" src="https://www.kirupa.com/html5/images/code_1_72.png" width="483"></p>
		<p>
		When the <span class="inlineCode">showDistance</span> 
		function gets called, it passes in a <strong>10</strong> for the <span class="inlineCode">speed</span> argument, and it 
		passes in a <strong>5</strong> for the <span class="inlineCode">distance</span> argument. 
		That mapping, as shown in the previous diagram, is entirely based on 
		order.</p>
		<p>
		Once the values you pass in as arguments reach your function, the names 
		you specified for the arguments are treated just like variable names:</p>
		<p>
		<img alt="just the function" height="204" src="https://www.kirupa.com/html5/images/just_the_function_72.png" width="453"></p>
		<p>
		You can use these variable names to easily reference the values stored 
		by the arguments inside your function.</p>
		<div class="callout">
		<h4>Note - Mismatched Number of Arguments</h4>
		<p>If a function happens to take arguments and you don&#39;t provide any 
		arguments as part of your function call, provide too few arguments, or 
		provide too many arguments, things can still work. You can code your 
		function defensively against these cases, and in the future, we will 
		touch upon that a bit.</p>
			<p>In general, to make the code you are writing more clear, you should provide the 
		required number of arguments for the function you are calling.</p>
		</div>
		<p>&nbsp;</p>
		<h2>Creating a Function that Returns Data</h2>
		<p>The last function variant we will look at is one that returns some 
		data back to whatever called it. Here is what we want to do. We have our
		<span class="inlineCode">showDistance</span> function, and we know that 
		it look as follows:</p>
		<pre class="brush: js">function showDistance(speed, time) {
	alert(speed * time);
}</pre>
		<p>Instead of having our <span class="inlineCode">showDistance</span> function calculate the distance 
		and display it as an alert, we actually want to store that value for 
		some future use. We want to do something like this:</p>
		<pre class="brush: js">var myDistance = showDistance(10, 5);</pre>
		<p>The <span class="inlineCode">myDistance</span> variable will store the results of the calculation the 
		<span class="inlineCode">showDistance</span> function does.</p>
		<h3>The Return Keyword</h3>
		<p>The way you return data from a function is by using the
		<span class="inlineCode">return</span> keyword. Let&#39;s create a new 
		function called <span class="inlineCode">getDistance</span> that looks 
		identical to <span class="inlineCode">showDistance</span> with the only 
		difference being what happens when the function runs to completion:</p>
		<pre class="brush: js">function getDistance(speed, time) {
	var distance = speed * time;
	return distance;
}</pre>
		<p>Notice that we are still calculating the distance by multiplying the
		<span class="inlineCode">speed</span> and <span class="inlineCode">time</span>. 
		Instead of displaying an alert, we instead return the distance (as 
		stored by the <span class="inlineCode">distance</span> variable).</p>
		<p>To call the <span class="inlineCode">getDistance</span> function, you 
		can just call it as part of initializing a variable:</p>
		<dl class="kASHglobal">
			<dt><span class="kASHkwrd">var</span> <span class="kASHwrd">
			myDistance</span> <span class="kASHop">=</span> get<span class="kASHwrd">Distance</span><span class="kASHop">(</span><span class="kASHnum">10</span>,
			<span class="kASHnum">5</span><span class="kASHop">)</span>;</dt>
		</dl>
		<p>When the <span class="inlineCode">getDistance</span> function gets 
		called, it gets evaluated and returns a numerical value that then 
		becomes assigned to the <span class="inlineCode">myDistance</span> 
		variable. That&#39;s all there is to it.</p>
		<h3>Exiting the Function Early</h3>
		<p>Once your function hits the <span class="inlineCode">return</span> 
		keyword, it stops everything it is doing at that point, returns whatever 
		value you specified to the caller, and exits:</p>
		<pre class="brush: js">function getDistance(speed, time) {
	var distance = speed * time;
	return distance;
&nbsp;
	if (speed &lt; 0) {
		distance *= -1;
	}
}</pre>
		<p>Any code that exists after your <span class="inlineCode">return</span> statement will not get 
		reached. It will be as if that code never even existed.</p>
		<p>In practice, you will use the return statement to terminate a 
		function after it has done what you wanted it to do. That function could 
		return a value to the caller like you saw in the previous examples, or that 
		function could simply just exit:</p>
		<dl class="kASHglobal">
			<dt><span class="kASHkwrd">function</span> <span class="kASHwrd">
			doSomething</span><span class="kASHop">()</span>
			<span class="kASHop">{</span></dt>
			<dl>
				<dt><span class="kASHcom">// do something</span></dt>
				<dt><span class="kASHkwrd">return</span>;</dt>
			</dl>
			<dt><span class="kASHop">}</span></dt>
		</dl>
		<p>Using the <span class="inlineCode">return</span> keyword to return a 
		value is optional. The <span class="inlineCode">return</span> keyword 
		can be used standalone like you see here to just exit the function.</p>
		<h2>Conclusion</h2>
		<p>Functions are among a handful of things that you will use in almost 
		every single JavaScript application. They provide the much-sought after 
		ability to help make your code reusable. Whether you are creating your 
		own functions or using the many functions that are built-in to the 
		JavaScript language, you will simply not be able to live without them.</p>
		<p>What you have seen so far is how functions are commonly used. There 
		are some advanced traits that functions possess that I did not cover 
		here. Those uses will be covered in the future...a distant future. For 
		now, everything you've learned will take you quite far when it comes to 
		how functions are used in the wild.</p>
		<p>
			
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>Event Capturing and Bubbling in JavaScript</h1>
		<div class="post-wrapper">

	  <p>In the
		<a class="blueEmphasis" href="//www.kirupa.com/html5/javascript_events.htm">
		Events tutorial</a>, you learned how to use the <span class="inlineCode">
		addEventListener</span> function to listen for events that you want to 
		react to. That tutorial covered the basics, but it glossed over an important detail about how events 
		actually get fired. An event isn't an isolated disturbance. Like a 
		butterfly flapping its wings, an 
		earthquake, a meteor strike, or a
		<a class="blueEmphasis" href="http://en.wikipedia.org/wiki/Kaiju" target="_blank">
		Godzilla</a> visit, events ripple and affect a bunch elements that lie in their 
		path:</p>
		<p class="centerImageNoBorder">
		<img alt="EventZilla!!!" height="559" src="https://www.kirupa.com/html5/images/eventzilla_72b.jpg" width="614"></p>
		<p class="kCaption">
		[
		<a class="blueEmphasis" href="http://commons.wikimedia.org/wiki/File:Gojira_1954_poster_3.jpg" target="_blank">
		poster by Toho Company Ltd.</a> (??????, Toho Kabushiki-kaisha) © 1954 ]</p>
		<p>In this article, I will put on my investigative glasses, a top hat, 
		and a serious British accent to explain what exactly happens when an event 
		gets fired. You will learn about the two phases events live in, why this 
		is all relevant, and a few other tricks to help you better take control 
		of events.</p>
		<p>Onwards!		</p>
		<h2>Event Goes Down. Event Goes Up.</h2>
		<p>To better help us understand events and their lifestyle, let's frame all of this in the context of a simple example. Here 
		is some HTML we'll refer to:</p>
		<pre class="brush: html">&lt;body id="theBody" class="item"&gt;
    &lt;div id="one_a" class="item"&gt;
        &lt;div id="two" class="item"&gt;
            &lt;div id="three_a" class="item"&gt;
                &lt;button id="buttonOne" class="item"&gt;one&lt;/button&gt;
            &lt;/div&gt;
            &lt;div id="three_b" class="item"&gt;
                &lt;button id="buttonTwo" class="item"&gt;two&lt;/button&gt;
                &lt;button id="buttonThree" class="item"&gt;three&lt;/button&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div id="one_b" class="item"&gt;

    &lt;/div&gt;
&lt;/body&gt;</pre>
		<p>As you can see, there is nothing really exciting going on here. The HTML should 
		look pretty straightforward (as opposed to 
		being shifty and constantly staring on its phone), and its DOM 
		representation looks as follows:</p>
		<p class="centerImageNoBorder">
		<img alt="the DOM for this example" height="479" src="https://www.kirupa.com/html5/images/dom_ec_1_72.png" width="363"></p>
		<p>Here is where our investigation is going to begin. Let's say that we 
		click on the <strong>buttonOne</strong> element. From what we saw 
		previously, you know that a <span class="inlineCode">click</span> event 
		is going to be fired. The interesting part that I omitted is where 
		exactly the <span class="inlineCode">click</span> event is going to get 
		fired from. Your
		<span class="inlineCode">click</span> event (just like almost every 
		other JavaScript event) does not actually originate at the element that 
		you interacted with. That would be too easy and make far too much sense.</p>
		<p>Instead, an event starts at the root of your document:</p>
		<p class="centerImageNoBorder">
		<img alt="starting point" height="497" src="https://www.kirupa.com/html5/images/dom_start_event_72.png" width="375"></p>
		<p>From the root, the event makes its way through the narrow 
		pathways of the DOM and stops at the element that triggered the event,
		<strong>buttonOne</strong> (also more formally known as the event
		<strong>target</strong>):</p>
		<p class="centerImageNoBorder">
		<img alt="event capturing" height="479" src="https://www.kirupa.com/html5/images/dom_capturing_72.png" width="405"></p>
		<p>As shown in the diagram, the path your event takes is direct, but it 
		does obnoxiously notify every element along that path. This means that 
		if you were to listen for a click event on <span class="inlineCode">body</span>,
		<strong>one_a</strong>, <strong>two</strong>, or <strong>three_a</strong>, 
		the associated event handler will get fired. This is an important detail 
		that we will revisit in a little bit.</p>
		<p>Now, once your event reaches its target, it doesn't stop. Like some 
		sort of an energetic bunny for a battery company whose trademarked name 
		I probably can't mention here, the event keeps going by retracing its 
		steps and returning back to the root:</p>
		<p class="centerImageNoBorder">
		<img alt="bubbling time" height="479" src="https://www.kirupa.com/html5/images/dom_bubbling_72.png" width="405"></p>
		<p>Just like before, every element along the event's path as it is 
		moving on up gets notified about its existence.</p>
		<h2>Meet the Phases</h2>
		<p>One of the main things to note is that it doesn't matter where in 
		your DOM you initiate an event. The event always starts at the root, 
		goes down until it hits the target, and then goes back up to the root. 
		This entire journey is very formally defined, so let's look at all of 
		this formalness.</p>
		<p>The part where you initiate the event and the event barrels down the 
		DOM from the root is known as the <strong>Event Capturing Phase</strong>:</p>
		<p class="centerImageNoBorder">
		<img alt="the capture phase" height="479" src="https://www.kirupa.com/html5/images/capture_phase_72.png" width="405"></p>
		<p>The less learned among you may just call it <strong>Phase 1</strong>, 
		so be aware that you'll see the proper name and the phase name used 
		interchangeably in event-related content you may encounter in real life. 
		Up next is <strong>Phase 2</strong> where your event bubbles back up to 
		the root:</p>
		<p class="centerImageNoBorder">
		<img alt="bubbles bubbles bubbles" height="479" src="https://www.kirupa.com/html5/images/bubble_phase_72.png" width="449"></p>
		<p>This phase is also known as the <strong>Event Bubbling Phase</strong>. 
		The event "bubbles" back to the top!</p>
		<p>Anyway, all of the elements in an event's path are pretty lucky. They 
		have the good fortune of getting notified twice when an event is fired. 
		This kinda sorta maybe affects the code you write, for every time you listen for events, you make a choice on which phase 
		you want to listen for your event on. Do you listen to your event as it 
		is fumbling down in the capture phase? Do you listen to your event as it 
		climbs back up in the bubbling phase? </p>
		<p>Choosing the phase is a very subtle detail 
		that you specify with a <strong>true</strong> or <strong>false</strong> 
		as part of 
		your <span class="inlineCode">addEventListener</span> call:</p>
		<pre class="brush: js">item.addEventListener(&quot;click&quot;, doSomething, true);</pre>
		<p>If you remember, I glossed over the third argument to
		<span class="inlineCode">addEventListener</span> in the
		<a class="blueEmphasis" href="javascript_events.htm">Events in 
		JavaScript tutorial</a>. This third argument specifies whether you want 
		to listen for this event during the capture phase. An argument of <span class="inlineCode">true</span> means that you 
		want to 
		listen to the event during the capture phase. If you specify
		<span class="inlineCode">false</span>, this means you want to listen for 
		the event during the bubbling phase.</p>
		<p>To listen to an event across both the capturing and bubbling phases, 
		you can simply do the following:</p>
		<pre class="brush: js">item.addEventListener(&quot;click&quot;, doSomething, true);
item.addEventListener(&quot;click&quot;, doSomething, false);</pre>
		<p>I don't know why you would ever want to do this, but if you ever do, 
		you now know what needs to be done.</p>
		<div class="callout">
		<h4>Not Specifying a Phase</h4>
			<p>Now, you can be rebellious and choose to not specify this third argument 
			for the phase altogether:</p>
		<pre class="brush: js">item.addEventListener(&quot;click&quot;, doSomething);</pre>
		<p>When you don't specify the third argument, the default behavior is to 
		listen to your event during the bubbling phase. It's equivalent to 
		passing in a <strong>false</strong> value as the argument.</p>
		</div>
		<h2>Who Cares?</h2>
		<p>At this point, you are probably wondering why all of this matters. 
		This is doubly true if you have been happily working with events for a 
		really long time and this is the first time you've ever heard about 
		this. 
		Your choice of listening to an event in the 
		capturing or bubbling phase is mostly irrelevant to what will be 
		doing. Very rarely will you find yourself scratching your head because 
		your event listening and handling code isn't doing the right thing 
		because you accidentally specified <strong>true</strong> instead of
		<strong>false</strong> in your <span class="inlineCode">addEventListener</span> 
		call.</p>
		<p>With all this said...there will come a time in your life when you 
		need to know and deal with a capturing or bubbling situation. This time 
		will sneak up on your code and cause you many hours of painful head 
		scratching. Over the years, these are the situations where I've had to 
		consciously be aware of which phase of my event's life I am watching 
		for:</p>
		<ol>
			<li>Dragging an element around the screen and ensuring the drag 
			still happens even if my mouse cursor slips out from under the 
			cursor</li>
			<li>Nested menus that reveal sub-menus when you hover over them</li>
			<li>You have multiple event handlers on both phases, and you want to 
			focus only on the capturing or bubbling phase event handlers 
			exclusively</li>
			<li>A third party component/control library has its own eventing 
			logic and you want to circumvent it for your own custom behavior</li>
			<li>You want to override some built-in/default browser behavior such 
			as when you click on the scrollbar or give focus to a text field</li>
		</ol>
		<p>In my nearly 105 years of working with JavaScript, these five things 
		were all I was able to come up with. Even this is a bit skewed to the 
		last few years since various browsers didn't work well with the various 
		phases at all.</p>
		<h2>Event, Interrupted</h2>
		<p>The last thing I am going to talk about before re-watching Godzilla 
		is how to prevent your event from propagating. An event isn't guaranteed 
		to live a fulfilling life where it starts and ends at the 
		root. Sometimes, it is actually desirable to prevent your event from 
		growing old and happy.</p>
		<p>To end the life of an event, you have the <span class="inlineCode">
		stopPropagation</span> method on your <span class="inlineCode">Event</span> 
		object:</p>
		<pre class="brush: js, highlight:[2]">function handleClick(e) {
	e.stopPropagation();

	// do something
}</pre>
		<p>As its name implies, the <span class="inlineCode">stopPropagation</span> method prevents 
		your event from running through the phases. Continuing with our earlier 
		example, let's say that you are listening for the
		<span class="inlineCode">click</span> event on the <strong>three_a</strong> 
		element and wish to stop the event from propagating. The code for 
		preventing the propagation will look as follows:</p>
		<pre class="brush: js">var theElement = document.querySelector("#three_a");
theElement.addEventListener("click", doSomething, true);

function doSomething(e) {
    e.stopPropagation();
}</pre>
		<p>When you click on <strong>buttonOne</strong>, here is what our 
		event's path will look like:</p>
		<p class="centerImageNoBorder">
		<img alt="the event is stopped" height="479" src="https://www.kirupa.com/html5/images/event_stopped_72.png" width="462"></p>
		<p>Your <span class="inlineCode">click</span> event will steadfastly 
		start moving down the DOM tree and notifying every element on the path 
		to <strong>buttonOne</strong>. Because the <strong>three_a</strong> 
		element is listening for the <span class="inlineCode">click</span> event 
		during the capture phase, the event handler associated with it will get 
		called:</p>
		<pre class="brush: js">function doSomething(e) {
    e.stopPropagation();
}</pre>
		<p>In general, events will not continue to propagate until an event 
		handler that gets activated is fully dealt with. Because <strong>three_a</strong> 
		has an event listener specified to react on a <span class="inlineCode">
		click</span> event, the <span class="inlineCode">doSomething</span> 
		event handler gets called. Your event is in a holding pattern at this 
		point until the <span class="inlineCode">doSomething</span> event 
		handler executes and returns.</p>
		<p>In this case, the event will not propagate further. The
		<span class="inlineCode">doSomething</span> event handler is its last 
		client thanks to the <span class="inlineCode">stopPropagation</span> 
		function that is hiding in the shadows to kill the event right there and 
		then....gangsta' style! The <span class="inlineCode">click</span> event 
		will never reach the <strong>buttonOne</strong> element nor get a chance 
		to bubble back up. So tragically sad.</p>
		<div class="callout">
			<h4>What about preventDefault()? What is it?</h4>
			<p>Another function that lives on your event object that you may 
			awkwardly run 
			into is <span class="inlineCode">preventDefault</span>:</p>
			<pre class="brush: js">function overrideScrollBehavior(e) {
	e.preventDefault();

	// do something
}</pre>
			<p>What this function does is a little mysterious. Many HTML 
			elements exhibit a default behavior when you interact with them. For 
			example, clicking in a textbox gives that textbox focus with a 
			little blinking text cursor appearing. Using your mouse wheel in a 
			scrollable area will scroll in the direction you are scrolling. 
			Clicking on a checkbox will toggle the checked state on or off. All 
			of these are examples of built-in reactions to events your browser 
			instinctively knows what to do about.</p>
			<p>If you want to turn off this default behavior, you can call the
			<span class="inlineCode">preventDefault</span> function. This 
			function needs to be called when reacting to an event on the element 
			whose default reaction you want 
			to ignore. You can see an example of me using this function in the
			<a class="blueEmphasis" href="//www.kirupa.com/html5/smooth_parallax_scrolling.htm">
			Smooth Parallax Scrolling</a> tutorial.</p>
		</div>
		<h2>Conclusion</h2>
		<p>So...yeah! How about those events and their bubbling and capturing 
		phases? One of the best ways to learn more about how event capturing and 
		bubbling works is to just write some code and see how your event makes 
		its way around the DOM.</p>
		<p>Below is a simple example related to the DOM tree we've been looking 
		at:</p>
		<pre class="brush:js, html-script:true">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;body id="theBody" class="item"&gt;
    &lt;div id="one_a" class="item"&gt;
        &lt;div id="two" class="item"&gt;
            &lt;div id="three_a" class="item"&gt;
                &lt;button id="buttonOne" class="item"&gt;one&lt;/button&gt;
            &lt;/div&gt;
            &lt;div id="three_b" class="item"&gt;
                &lt;button id="buttonTwo" class="item"&gt;two&lt;/button&gt;
                &lt;button id="buttonThree" class="item"&gt;three&lt;/button&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div id="one_b" class="item"&gt;

    &lt;/div&gt;

    &lt;script&gt;
        var items = document.querySelectorAll(".item");

        for (var i = 0; i &lt; items.length; i++) {
            var el = items[i];

            //capturing phase
            el.addEventListener("click", doSomething, true);

            //bubbling phase
            el.addEventListener("click", doSomething, false);
        }

        function doSomething(e) {
            console.log(e.currentTarget.id);
        }
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
		<p>If you make an HTML document out of this and preview in your browser, 
		you will see three buttons. If you click on <strong>buttonOne</strong> 
		and inspect your browser's console, you'll see the following path your
		<span class="inlineCode">click</span> event takes from beginning to end:</p>
		<ol>
			<li>theBody</li>
			<li>one_a</li>
			<li>two</li>
			<li>three_a</li>
			<li>buttonOne</li>
			<li>buttonOne</li>
			<li>three_a</li>
			<li>two</li>
			<li>one_a</li>
			<li>theBody</li>
		</ol>
		<p>If you examine our DOM, it should be no surprise to you that this is 
		the order the <span class="inlineCode">click</span> event propagates 
		through the elements.</p>
		<p>We are done with the technical part of all this, but if you have a few 
		more minutes to 
		spare, then I encourage you watch the somewhat related episode of 
		<strong>Comedians Getting Coffee</strong> aptly titled
		<a class="blueEmphasis" href="https://www.youtube.com/watch?v=Wriy3ICfF9U">
		It's Bubbly Time, Jerry!</a> In what is probably their bestest episode,&nbsp; 
		Michael Richards and Jerry Seinfeld just chat over coffee about events, 
		the bubbling phase, and other very important topics. I think.</p>
		<p>
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>Variable Scope Basics</h1>
		<div class="post-wrapper">
			
			<p>Let's revisit something relating to
					<a class="blueEmphasis" href="//www.kirupa.com/html5/variables_in_javascript.htm">
					variables</a>. Each variable you declare has a certain level of 
					visibility that determines when you can actually use it. In 
					human-understandable terms, what this means is simple. Just because you declare 
					a variable doesn't mean that it can be accessed from 
					anywhere in your code. There are some basic things you need 
					to understand, and this whole area of understanding this 
					falls under a topic known as <strong>variable scope</strong>.</p>
		<p>In this tutorial, I'm going to be explaining variable scope by 
		looking at common cases that you've (mostly) already seen. This is a 
		pretty deep topic, but we are just going to scratch the surface here. 
		You'll see variable scope creep up in many subsequent tutorials where we 
		will extend on what you learn here.</p>
		<p>Onwards!</p>
		<h2>Global Scope</h2>
		<p>We are going to start our exploration of scope at the very top with
		what is known as
		<strong>global scope</strong>. In real life, when we say that something 
		can be heard globally, it means that you can be anywhere in the world and 
		still be able to hear that...something:</p>
		<p class="centerImageNoBorder">
		<img alt="the earth" height="321" src="https://www.kirupa.com/html5/images/urth_72.png" width="489"></p>
		<p>In JavaScript, much the same applies. If we say, for example, a 
		variable is available globally, it means that any code on your page has 
		access to read and modify this variable. The way you make something apply globally is 
		by declaring it in your code completely outside of a function.</p>
		<p>To illustrate this, let's take a look at the following example:</p>
		<pre class="brush: js">&lt;script&gt; 
var counter = 0; 
&lt;/script&gt;</pre>
		<p>Here, I am simply declaring a variable called
		<span class="inlineCode">counter</span> and initializing it to <strong>0</strong>. By 
		virtue of this variable being declared directly inside the script tag 
		without being placed inside a function, the <span class="inlineCode">
		counter</span> variable is considered to be <strong>global</strong>. 
		What this distinction means is that your <span class="inlineCode">
		counter</span> variable can be accessed by any code that lives in your 
		document.</p>
		<p>The below code highlights this:</p>
		<pre class="brush: js">var counter = 0; 

function returnCount() { 
	return counter;
} </pre>
		<p>In this example, the <span class="inlineCode">counter</span> variable 
		is declared outside of the <span class="inlineCode">returnCount</span> 
		function. Despite that, the <span class="inlineCode">returnCount</span> 
		function has full access to the <span class="inlineCode">counter</span> 
		variable.</p>
		<p>At this point, you are probably wondering why I am pointing out what 
		seems very obvious. After all, you've been using global variables all this time 
		without really noticing it. All I am doing here is formally introducing 
		you to a guest that has been hanging around your party for a while.</p>
		<div class="callout">
			<h4>Note: What Global Really Means</h4>
			<p>I've been pretty vague in defining what exactly
			<span class="inlineCode">global</span> means. That is deliberate, 
			for formally describing it will involve a whole lot more backstory 
			to make sense of everything. If you are familiar enough with 
			JavaScript (or are feeling adventurous), read on. If not, feel free 
			to skip this note and move on to the next section. We'll revisit 
			this later.</p>
			<p>Anyway...something is considered global in JavaScript when this thing is a direct child of your browser's
		<span class="inlineCode">window</span> object. That is a more precise 
			way of saying "declared outside of a function." You can verify this 
			pretty easily.</p>
		<p>In our example, <span class="inlineCode">counter</span> and
		<span class="inlineCode">window.counter</span> point to exactly the same 
		thing:</p>
		<dl class="kASHglobal">
			<dt><span class="kASHwrd">alert</span><span class="kASHop">(</span><span class="kASHwrd">window</span>.<span class="kASHwrd">counter</span>
			<span class="kASHop">==</span> <span class="kASHwrd">counter</span><span class="kASHop">)</span>;</dt>
		</dl>
		<p>Realizing that global variables live under your 
		<span class="inlineCode">window</span> object should 
		help you understand why you can access a global variable from anywhere 
		in your document.</p>
		</div>
		<p>&nbsp;</p>
		<h2>Local Scope</h2>
		<p>Now, things get a little interesting when we look at 
		things that aren't globally declared. This is where understanding scope 
		really helps you out. As you saw earlier, a variable declared globally 
		is accessible inside a function:</p>
		<pre class="brush: js">var counter = 0; 

function returnCount() { 
	return counter;
}</pre>
		<p>The opposite doesn't hold true. A variable declared inside a function 
		will not work when accessed outside of the function:</p>
		<pre class="brush: js">function setState() { 
	var state = "on";
} 
setState(); 
&nbsp;
alert(state) // undefined </pre>
		<p>In this example, the <span class="inlineCode">state</span> variable is declared inside 
		the <span class="inlineCode">setState</span> function, and accessing the 
		state variable outside of that function doesn't work. The reason is that 
		the scope for your <span class="inlineCode">state</span> variable is 
		local to the <span class="inlineCode">setState</span> function itself. A 
		more generic way of describing this is by saying that your
		<span class="inlineCode">state</span> variable is just <strong>local</strong>.</p>
		<div class="callout">
			<h4>Note: Declaring Variables Without Using var!</h4>
			<p>If I declare the <span class="inlineCode">state</span> variable 
		without using the <span class="inlineCode">var</span> keyword, the 
		scoping behavior is drastically different:</p>
			<pre class="brush: js">function setState() { 
	state = "on";
} 
setState(); 

alert(state) // "on" </pre>
		<p>In this case, even though your <span class="inlineCode">state</span> 
		variable makes its appearance inside the <span class="inlineCode">
		setState</span> function first, not including the
		<span class="inlineCode">var</span> keyword makes this variable live 
		globally.</p>
		<p>Any time, a variable that is used without being declared using the
		<span class="inlineCode">var</span> keyword will <strong><em>always live 
		globally</em></strong>.</p>
		</div>
		<p>&nbsp;</p>
		<h2>Miscellaneous Scoping Shenanigans</h2>
		<p>Since we are talking about JavaScript here, things would be too easy 
		if we just left everything with variable scope as they stand now. In the 
		following sections, I am going to highlight some quirks that you need to 
		be famliar with.</p>
		<h3>JavaScript Does Not Support Block Scoping</h3>
		<p>Before I attempt to explain this, take a look at the following code:</p>
		<pre class="brush: js, highlight:[3,4,6]">function checkWeight(weight) {
    if (weight &gt; 5000) {
        var text = "No free shipping for you!";
        alert(text);
    }
    alert(text); // how did it know??!
}

checkWeight(6000);</pre>
		<p>I've highlighted the relevant lines that you should focus on. Inside 
		the <span class="inlineCode">if</span> statement, we declare a variable 
		called <span class="inlineCode">text</span>. When this code is run, the
		<span class="inlineCode">alert</span> function directly below it 
		displays <strong>No free shipping for you!</strong>. That makes sense. 
		What might make less sense is that the second alert that is outside of 
		the <span class="inlineCode">if</span> statement also displays <strong>
		No free shipping for you!</strong>.</p>
		<p>Here is what is going on. Your <span class="inlineCode">text</span> 
		variable is declared inside what is known as a <strong>block</strong>. A block is anything 
		that appears 
		within the open and close brackets - <span class="inlineCode">{</span> 
		and <span class="inlineCode">}</span>. In many programming languages, 
		variables declared inside a block are part of that block's own scope. 
		That means those variables are local and can't be accessed outside of 
		the block.</p>
		<p>JavaScript is not like those many "other" programming languages. 
		JavaScript doesn't support block scoping. For the code you just saw, 
		despite the text variable being declared inside a block, from 
		JavaScript's point of view, it mights as well have been declared at the 
		top of your <span class="inlineCode">checkWeight</span> function itself:</p>
		<pre class="brush:js, highlight:[2]">function checkWeight(weight) {
    var text = "No free shipping for you!";

    if (weight &gt; 5000) {
        alert(text);
    }
    alert(text);
}

checkWeight(6000);</pre>
		<p>The behavior is identical in this version compared to what you saw a 
		few moments earlier.</p>
		<p>To repeat myself,&nbsp; there are only two scopes you need to keep 
		track of. The first is the global scope where what you are declaring is 
		completely outside the grips of a function. The second is the local 
		scope where what you are declaring is enclosed by whatever function you 
		are inside.</p>
		<div class="callout">
			<h4>Note: Meet the <span class="inlineCode">let</span> Keyword!</h4>
			<p>In the near future, the latest version of JavaScript (part of the 
			EcmaScript 6 improvements) will introduce support for the <span class="inlineCode">let</span> 
			keyword that allows you to declare variables that are block scoped:</p>
			<pre class="brush: js">var x = 100;

function theFutureIsNow() {
    if (true) {
        let x = 350;
        alert(x) // 350
    }
    alert(x) // 100;
}
theFutureIsNow();</pre>
			<p>I'll touch upon some of the improvements being made to JavaScript 
			by the ECMAScript 6 changes at another time.</p>
			<p class="grayEmphasis"><strong>Correction: </strong>
			<span class="kASHwrd"><br>Thanks to <strong>Kyle Murray / krilnon</strong> 
			for pointing out the EcmaScript 6 angle for </span>
			<span class="inlineCode">let</span><span class="kASHwrd">. See the 
			comments below for more context!</span></p>
		</div>
		<p>&nbsp;</p>
		<h3>How JavaScript Processes Variables</h3>
		<p>If you thought the earlier block scoping logic was weird, wait till 
		you see this one. Take a look at the following code:</p>
		<pre class="brush:js, highlight:[4,7]">var foo = "Hello!";

function doSomethingClever() {
    alert(foo);

    var foo = "Good Bye!";
    alert(foo);
}

doSomethingClever();</pre>
		<p>Examine the code in detail. What do you think is shown in the two 
		highlighted <span class="inlineCode">alert</span> function calls? Given 
		what is going on, the answer that many people give is <strong>Hello!</strong> 
		and <strong>Good Bye!</strong>. What you actually see is
		<span class="inlineCode">undefined</span> and <strong>Good Bye!</strong>. 
		Let's look at what is going on here.</p>
		<p>At the very top, we have our <span class="inlineCode">foo</span> 
		variable that is instantiated to <strong>Hello!</strong>:</p>
		<pre class="brush:js, highlight:[1]">var foo = "Hello!";

function doSomethingClever() {
    alert(foo);

    var foo = "Good Bye!";
    alert(foo);
}

doSomethingClever();</pre>
		<p>Inside the <span class="inlineCode">doSomethingClever</span> 
		function, the first thing we have is an <span class="inlineCode">alert</span> 
		that should show the value stored by the <span class="inlineCode">foo</span> 
		variable. A few lines below that, we re-declare the
		<span class="inlineCode">foo</span> variable with a new value of <strong>
		Good Bye!</strong>:</p>
		<pre class="brush:js, highlight:[6]">var foo = "Hello!";

function doSomethingClever() {
    alert(foo);

    var foo = "Good Bye!";
    alert(foo);
}

doSomethingClever();</pre>
		<p>Because our first <span class="inlineCode">alert</span> comes before 
		the <span class="inlineCode">foo</span> variable re-declaration, the 
		logical assumption is that <span class="inlineCode">foo</span>'s 
		original value of <strong>Hello!</strong> will be what gets shown. As 
		you saw earlier, that isn't the case. The value of
		<span class="inlineCode">foo</span> when it hits the first alert is 
		actually <span class="inlineCode">undefined</span>. The reason for this 
		has to do with how JavaScript deals with variables.</p>
		<p>When JavaScript encounters a function, one of the first things it 
		does is scan the full body of the code for any declared variables. When 
		it encounters them, it initializes them by default with
		<span class="inlineCode">undefined</span>. Because the
		<span class="inlineCode">doSomethingClever</span> function is declaring 
		a variable called <span class="inlineCode">foo</span>, before the first
		<span class="inlineCode">alert</span> even hits, an entry for
		<span class="inlineCode">foo</span> is created with a value of
		<span class="inlineCode">undefined</span>. Eventually, when the code 
		hits <span class="inlineCode">var foo = "Good Bye!"</span>, the value of
		<span class="inlineCode">foo</span> is properly initialized. That 
		doesn't help our first <span class="inlineCode">alert</span> function, 
		but that does help the second one that follows the re-declaration of
		<span class="inlineCode">foo</span>.</p>
		<p>Keep this little quirk in mind if you ever run into a situation where 
		you are re-declaring variables into a local scope like this simple 
		example highlighted.</p>
		<h3>Closures</h3>
		<p>No conversation about variable scope can be wrapped up without 
		discussing closures. That is, until right now. I am not going to explain 
		closures here, for it is a slightly more advanced topic that we will 
		cover separately in the
		<a class="blueEmphasis" href="//www.kirupa.com/html5/closures_in_javascript.htm">
		Closures in JavaScript tutorial</a>.</p>
		<h2>Conclusion</h2>
		<p>Well, that concludes this topic of variable scopes. This topic seems 
		very simple on the surface, but as you can see, there are some unique 
		characteristics that takes some time and practice to fully understand.</p>
		<p>
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>Of Pizza, Types, Primitives, and Objects</h1>
		<div class="post-wrapper">

                                <p>It's time to get serious. Srsly! In the past few tutorials, we've 
                                been working with all kinds of values. You've worked with strings, numbers, 
                                booleans (aka <strong>true</strong> and <strong>false</strong>), 
                                functions, and various other built-in 
                                things that are part of the JavaScript language.</p>
					<p>Below are some examples to jog your memory:</p>
					<pre class="brush: js">var someText = &quot;hello, world!&quot;;
var count = 50;
var isActive = true; </pre>
					<p>Unlike other languages, JavaScript makes it really easy 
					to specify and use these built-in things. You don't even 
					have to think about or plan ahead to use any of them. Despite how simple using these different 
					kinds of built-in things is, there is a lot of detail that 
					is hidden from you. Knowing these details is important 
					because it will not only help 
					you make sense your code more easily, it may even help you to 
					more quickly pinpoint what is going wrong when things aren't 
					working the way they should.</p>
                                <p>Now, as you can probably guess, &quot;built-in-things&quot; 
								isn't the proper way to describe the variety of 
								values that you can use in JavaScript. There is a more formal 
								name for the variety of values you can use in 
								your code, and that name is <strong>types</strong>. 
								In this tutorial, you are going to get a gentle 
								introduction to what they are.</p>
                                <p>Onwards!</p>
                                <h2>Let's First Talk About Pizza</h2>
                                <p>No, I haven't completely lost it. Since I am always eating something (or thinking about 
                                eating something), I am going to try to explain 
								the mysterious world of types by first explaining the 
								much simpler world of pizza.</p>
                                <p>In case you haven't had pizza in a while, this is what a typical 
                                pizza looks like:</p>
                                <p class="centerImageNoBorder">
                                <img alt="it's pizza time!" height="422" src="https://www.kirupa.com/html5/images/pizza_4_72.png" width="446"></p>
                                <p>A pizza doesn't just magically appear looking like this. It is made 
                                up of other ingredients - some simple and some not-so-simple:</p>
                                <p>&nbsp;</p>
                                <p class="centerImageNoBorder">
                                <img alt="the ingredients" height="473" src="https://www.kirupa.com/html5/images/individual_pieces_72.png" width="655"></p>
                                <p>&nbsp;</p>
                                <p>The simple ingredients are easy to spot. These would 
								be your <strong>
                                mushrooms</strong> and <strong>jalapenos</strong>. The reason these are 
                                simple is because you can't break these ingredients apart any further:</p>
                                <p>&nbsp;</p>
                                <p class="centerImageNoBorder">
                                <img alt="simple enuf" height="244" src="https://www.kirupa.com/html5/images/simple_ingredients_72.png" width="403"></p>
                                <p>&nbsp;</p>
                                <p>They aren't prepared. They aren't made up of other simple 
                                ingredients. Just like the dude, they abide.</p>
					<p>The not-so-simple, complex ingredients would be your
                                <strong>cheese</strong>, <strong>sauce</strong>, <strong>crust</strong>, 
                                and the <strong>pepperoni</strong>. These are more complex for all the 
                                reasons the simples one are...um...simple. These complex ingredients are made up of 
					<strong>other ingredients</strong>:</p>
                                <p class="centerImageNoBorder">
                                <img alt="these are your complex ingredients" height="583" src="https://www.kirupa.com/html5/images/complex_ingredients_72.png" width="626"></p>
                                <p>Unfortunately for all of us, there is no one 
								ingredient called cheese or pepperoni out there. 
								You need to combine and prepare and add some 
								more ingredients to make up some of the complex 
								ingredients you see here. There is a subtle wrinkle to call out about complex ingredients. 
                                Their composition isn't limited to just simple ingredients. Complex 
                                ingredients can themselves be made up of other complex ingredients. How 
                                scandalous?!!</p>
                                <h2>From Pizza to JavaScript!</h2>
                                <p>While this may be hard to believe, everything 
								you learned about pizzas in the previous section 
								was there for a purpose. The description of the 
								simple and complex ingredients very neatly applies to 
								types and JavaScript. Each individual ingredient 
								could be considered a counterpart to a type that 
								you can use:</p>
					<p>&nbsp;</p>
					<p class="centerImageNoBorder">
					<img alt="the various types" height="327" src="https://www.kirupa.com/html5/images/pieces_types_v1_72.png" width="589"></p>
					<p>&nbsp;</p>
					<p>Just like the cheese, sauce, pepperoni, mushrooms, and 
					bacon in our version of a pizza, the basic types in 
					JavaScript are <span class="inlineCode">string</span>,
					<span class="inlineCode">number</span>,
					<span class="inlineCode">boolean</span>,
					<span class="inlineCode">null</span>,
					<span class="inlineCode">undefined</span>, and
					<span class="inlineCode">Object</span>. Some of these types 
					may be very familiar to you already, and some 
					of them may not be. While we will look at all of these types 
					in much greater detail in future tutorials, the following 
					table provides a very brief summary of what they do:</p>
<table id="smileysTable">
	<tr>
		<th class="auto-style1">Type</th>
		<th class="auto-style2">What it does</th>
	</tr>
	<tr>
		<td class="auto-style3">
		string</td>
		<td>the basic structure for working with text</td>
	</tr>
	<tr>
		<td class="auto-style3">
		number</td>
		<td>as you can guess, it allows you to work with numbers</td>
	</tr>
	<tr>
		<td class="auto-style3">
		boolean</td>
		<td>comes alive when you are using <strong>true</strong> and <strong>
		false</strong></td>
	</tr>
	<tr>
		<td class="auto-style3">
		null</td>
		<td>represents the digital equivalent of nothing...or
		<a class="blueEmphasis" href="http://www.youtube.com/watch?v=fLwYpSCrlHU" target="_blank">
		moo</a> :P</td>
	</tr>
	<tr>
		<td class="auto-style3">
		undefined</td>
		<td>while sorta similar to <span class="inlineCode">null</span>, this is 
		returned when a value should exist but doesn't...like when you declare a 
		variable but don't assign anything to it</td>
	</tr>
	<tr>
		<td class="auto-style3">
		Array</td>
		<td>helps store, retrieve, and manipulate a collection of data</td>
	</tr>
	<tr>
		<td class="auto-style3">
		Object</td>
		<td>acts a shell for other types including other objects</td>
	</tr>
	</table>

					<p>Now, while each of the types is pretty unique in what it 
					does. There is a simple grouping they fall under. Just like 
					with your pizza's simple and complex ingredients, your types 
					can be simple or complex as well. Except, in JavaScript 
					terminology involving types, simple and complex are more formally known as
					<strong>primitive</strong> and <strong>object</strong> 
					respectively. Another way of saying this is that your types 
					in JavaScript are either known as <strong>
								primitive types</strong> (or just <strong>
								primitives</strong>) and <strong>object types</strong> (or 
								just <strong>objects</strong>).</p>
					<p>The next two paragraphs are going to be really boring, 
					and I don't expect you to memorize what I am about to say. Your primitive types are your <span class="inlineCode">
					string</span>, <span class="inlineCode">number</span>,
					<span class="inlineCode">boolean</span>,
					<span class="inlineCode">null</span>, and
					<span class="inlineCode">undefined</span> types. Any values 
					that fall under their umbrella can't be divided any further. 
					They are the jalapenos and mushrooms of the JavaScript 
					world. Your object types are...or just is...the
					<span class="inlineCode">Object</span>. Anything that you 
					create or use that is an Object, under the covers, is 
					potentially made up of other primitive types as 
					well as other objects. Objects can also be empty, but we'll 
					cover all those details eventually.</p>
					<p>As you can see, primitives are pretty easy to understand. 
					There is no depth to them, and you pretty much get what you see 
					when you encounter one. Your object types are a bit more 
					mysterious, so the last thing I want to cover before 
					unleashing you with details about all of these types is what 
					objects in JavaScript actually are.</p>
		<h2>What are Objects?</h2>
		<p>The concept of objects in a programming language like JavaScript maps 
		nicely 
		to its real-world equivalents. In the real world, you are literally surrounded by objects. Your 
		computer is an object. A book on a shelf is an object. A potato is 
		(arguably) an object. Your alarm clock is an object. The autographed Cee 
		Lo Green poster you got on Ebay is also an object! I could go on 
		forever, but (for everyone's sake :P) I'm going to stop here.</p>
		<p>Some objects like a paperweight don't do much:</p>
		<p>&nbsp;</p>
		<p class="centerImageNoBorder">
		<img alt="paperweight" height="87" src="https://www.kirupa.com/html5/images/rock_72.png" width="307"></p>
		<p>&nbsp;</p>
		<p>They just sit there. Other objects, like a television, go above and beyond the call of 
		mere existence and do a lot of things:</p>
		<p class="centerImageNoBorder">
		<img alt="a television" height="316" src="https://www.kirupa.com/html5/images/television_72.png" width="442"></p>
		<p>A typical television takes input, allows you to turn it on or 
		off, change the channel, adjust the volume, and do all sorts of 
		television-y things.</p>
		<p>The thing to realize is that objects come in different shapes, sizes, 
		and usefulness. Despite the variations, objects are 
		all the same at a high-level. They are an <strong>abstraction</strong>. They provide an 
		easy way for you to use them without having to worry about what goes on 
		under the covers. Even the simplest objects hide a certain level of 
		complexity that you simply don't have to worry about.</p>
		<p>For example, it doesn't matter what goes on inside your TV, how the 
		wires are connected, or what type of glue is used to hold everything 
		together. Those are unnecessary details. All that you care about is that 
		the TV does what it is told. When you want it to change the channel, the 
		channel should change. When you adjust the volume, the volume should 
		adjust. Everything else is just noise.</p>
		<p>Basically, think of an object as a black box. There are some 
		predefined / documented things it does. How it does them is something 
		you can't easily see. How it does its magic is also something you don't 
		really care about as long as it works. We'll change that notion later 
		when we learn to actually create the insides of an object, but let's relish 
		this simple and happy world for now.</p>
					<h2>The Predefined Objects Roaming Around in JavaScript</h2>
					<p>Besides the built-in types you saw earlier, you also have 
					a handful of predefined objects in JavaScript that you can 
					use out-of-the-box. These objects allow you to work with 
					everything from collections of data to dates to even text 
					and numbers. Here is the table of these objects along with, 
					just like before, a short blurb on what they do:</p>
					<table id="smileysTable">
	<tr>
		<th class="auto-style1">Type</th>
		<th class="auto-style2">What it does</th>
	</tr>
	<tr>
		<td class="auto-style3">
		Array</td>
		<td>helps store, retrieve, and manipulate a collection of data</td>
	</tr>
	<tr>
		<td class="auto-style3">
		Boolean</td>
		<td>acts as a wrapper around the <span class="inlineCode">boolean</span> 
		primitive; still very much in love with <strong>true</strong> and
		<strong>false</strong></td>
	</tr>
	<tr>
		<td class="auto-style3">
		Date</td>
		<td>allows you to more easily represent and work with dates</td>
	</tr>
	<tr>
		<td class="auto-style3">
		Function</td>
		<td>allows you to invoke some code among other esoteric things</td>
	</tr>
	<tr>
		<td class="auto-style3">
		Math</td>
		<td>the nerdy one in the group that helps you better work with numbers</td>
	</tr>
	<tr>
		<td class="auto-style3">
		Number</td>
		<td>acts as a wrapper around the <span class="inlineCode">number</span> 
		primitive</td>
	</tr>
	<tr>
		<td class="auto-style3">
		RegExp</td>
		<td>provides a lot of functionality for matching patterns in text</td>
	</tr>
	<tr>
		<td class="auto-style3">
		String</td>
		<td>acts as a wrapper around the <span class="inlineCode">string</span> 
		primitive</td>
	</tr>
	</table>

					<p>The way you use these built-in objects is a little bit 
					different than how you use primitives. Each object has its 
					own quirk on how you can use them as well. Explaining each 
					object and how it is meant to be used is something that I 
					will defer to for later, but here is a very short snippet of 
					commented code to show you want is possible:</p>
					<pre class="brush: js">// an array
var names = [&quot;Jerry&quot;, &quot;Elaine&quot;, &quot;George&quot;, &quot;Kramer&quot;];
var alsoNames = new Array(&quot;Dennis&quot;, &quot;Frank&quot;, &quot;Dee&quot;, &quot;Mac&quot;);

// a round number
var roundNumber = Math.round(&quot;3.14&quot;);

// today's date
var today = new Date();

// a boolean object
var booleanObject = new Boolean(true);

// infinity
var unquantifiablyBigNumber = Number.POSITIVE_INFINITY;

// a string object
var hello = new String(&quot;Hello!&quot;);</pre>
					<p>One thing that you may find puzzling is the existence of 
					the Object-form of the <span class="inlineCode">string</span>,
					<span class="inlineCode">boolean</span>, and
					<span class="inlineCode">number</span> primitives. On the 
					surface, the Object-form and primitive-form of these types 
					look very similar. Here is an example:</p>
					<pre class="brush: js">var movie = &quot;Pulp Fiction&quot;;
var movieObj = new String(&quot;Pulp Fiction&quot;);

alert(movie);
alert(movieObj);</pre>
					<p>What you will see printed will be identical. Below the 
					surface, though, both <span class="inlineCode">movie</span> 
					and <span class="inlineCode">movieObj</span> are very 
					different. One is literally a primitive of type
					<span class="inlineCode">string</span>, and the other is of 
					type <span class="inlineCode">Object</span>. This leads to 
					some interesting (and possibly incomprehensible) behavior 
					that I will gradually touch upon as we explore the handful 
					of built-in types that you've seen so far.</p>
                                <h2>Conclusion</h2>
                                <p>If this feels like an abrupt ending where the 
								movie stopped just as things were getting 
								interesting, I don't blame you for thinking that 
								way. All you really learned in this section are 
								the names for the common built-in types and some 
								basic background background material about all 
								of them. What you are going to see in subsequent 
								tutorials is a deeper look at all of these types 
								and the nuances of working with them. Think of 
								this tutorial as the gentle on-ramp that 
								suddenly drops you into the rails of a crazy 
								rollercoaster.</p>
			
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>When Primitives Behave Like Objects</h1>
		<div class="post-wrapper">


		<p>In the earlier
		<a class="blueEmphasis" href="//www.kirupa.com/html5/strings_in_javascript.htm">
		Strings</a> tutorial and less so in the
		<a class="blueEmphasis" href="of_pizza_types_primitives_and_objects.htm">
		Of Pizza, Types, Primitives, and Objects</a> tutorial, you got a sneak 
		peek at something that is probably pretty confusing. I've stated many 
		times that primitives are very plain and simple. Unlike 
		<span class="inlineCode">Objects</span>, they 
		don't contain properties that allow you to fiddle with their values in interesting (or boring) ways. Yet, as clearly demonstrated by 
		all the stuff you can do with strings, your primitives seem to have a 
		mysterious dark side to them:</p>
		<pre class="brush: js">var greeting = "Hi, everybody!!!";
var shout = greeting.toUpperCase(); //where did toUpperCase come from?</pre>
		<p>As you can see from this brief snippet, your <span class="inlineCode">greeting</span> 
		variable, which stores a primitive value in the form of text, seems to have 
		access to the <span class="inlineCode">toUpperCase</span> method. How 
		is this even possible? Where did that method come from? Why am I here? Answers to 
		confusing existential questions like this will make up the bulk of what you see in 
		this page. Also, I apologize for writing that previous sentence in 
		passive voice. Happen again it won't.</p>
		<p>Onwards!</p>
		<h2>Strings Aren't the Only Problem</h2>
		<p>Because of how cute they are, it's easy to pick on strings as the 
		main perpetrator of this primitive/Object confusion. As it turns out, 
		many of the built-in primitive types are involved in this racket as 
		well. Below is a table of the built-in <span class="inlineCode">Object</span> 
		types with the guilty parties that <strong>also</strong> exist as 
		primitives highlighted:</p>
					<table id="smileysTable">
	<tr>
		<th class="auto-style1">Type</th>
		<th class="auto-style2">What it does</th>
	</tr>
	<tr>
		<td class="auto-style3">
		Array</td>
		<td>helps store, retrieve, and manipulate a collection of data</td>
	</tr>
	<tr class="yellowEmphasis">
		<td class="auto-style3">
		Boolean</td>
		<td>acts as a wrapper around the <span class="inlineCode">boolean</span> 
		primitive; still very much in love with <strong>true</strong> and
		<strong>false</strong></td>
	</tr>
	<tr>
		<td class="auto-style3">
		Date</td>
		<td>allows you to more easily represent and work with dates</td>
	</tr>
	<tr>
		<td class="auto-style3">
		Function</td>
		<td>allows you to invoke some code among other esoteric things</td>
	</tr>
	<tr>
		<td class="auto-style3">
		Math</td>
		<td>the nerdy one in the group that helps you better work with numbers</td>
	</tr>
	<tr class="yellowEmphasis">
		<td class="auto-style3">
		Number</td>
		<td>acts as a wrapper around the <span class="inlineCode">number</span> 
		primitive</td>
	</tr>
	<tr>
		<td class="auto-style3">
		RegExp</td>
		<td>provides a lot of functionality for matching patterns in text</td>
	</tr>
	<tr class="yellowEmphasis">
		<td class="auto-style3">
		String</td>
		<td>acts as a wrapper around the <span class="inlineCode">string</span> 
		primitive</td>
	</tr>
	</table>

		<p>Whenever you are working with boolean, number, or string primitives, 
		you have access to properties their Object equivalent exposes. In the 
		following sections, you'll see what exactly is going on.</p>
		<h2>Let's Pick on Strings Anyway</h2>
			<p>Just as you were taught by your parents growing up, you typically use a string in the literal form:</p>
		<pre class="brush: js">var primitiveText = "Homer Simpson";</pre>
		<p>As you saw in the table earlier, strings also have the ability to be 
		used as objects. There are 
			several ways to create a new object, but the most common way to 
			create an object for a built-in type like our string is to use the
			<span class="inlineCode">new</span> keyword followed by the word
			<span class="inlineCode">String</span>:</p>
			<pre class="brush: js">var name = new String("Homer Simpson");</pre>
			<p>The <span class="inlineCode">String</span> in this case isn't 
			just any normal word. It represents what is known as a <strong>
			constructor function</strong> whose sole purpose is to be used for 
			creating objects. Just like there are several ways to create 
			objects, there are several ways to create <span class="inlineCode">String</span> 
			objects as well. The way I see it, knowing about one way that you really shouldn't be 
			creating them with is enough.</p>
			<p>Anyway, the main difference between the primitive and object 
			forms of a string is the sheer amount of additional baggage the object form 
			carries with it. Let's bring our silly visualizations back. Your
			<span class="inlineCode">primitiveText</span> variable and its 
			baggage looks as follows:</p>
		<p class="centerImageNoBorder">
		<img alt="what baggage?" height="52" src="https://www.kirupa.com/html5/images/visualizing_primitive_string_72.png" width="462"></p>
		<p>&nbsp;There really isn't much there. Now, don't let the next part scare you, but if we 
			had to visualize our <span class="inlineCode">String</span> object 
		called <span class="inlineCode">name</span>, 
			here is what that would look like:</p>
			<p class="centerImageNoBorder">
			<img alt="string overload" height="540" src="https://www.kirupa.com/html5/images/visualizing_string_object_72.png" width="668"></p>
			<p>You have your <span class="inlineCode">name</span> variable 
			containing a pointer to the text, <strong>Homer Simpson</strong>. 
			You also have all of the various properties and methods that go with 
			the <span class="inlineCode">String</span> object - things you may 
			have used like <span class="inlineCode">indexOf</span>,
			<span class="inlineCode">toUpperCase</span>, and so on. You'll get a 
			massive overview of what exactly this diagram represents in
			<a class="blueEmphasis" href="a_deeper_look_at_objects_in_javascript.htm" target="_blank">
			a future tutorial</a>, so don't worry yourself too much about what 
			you see here. Just know that the object form of any of the 
			primitives carries with it a lot of functionality.</p>
		<h2>Why This Matters</h2>
		<p>Let's back to our earlier point of confusion. Our string is a 
		primitive. How can a primitive type allow you to access properties on 
		it? The answer has to do with JavaScript being really weird. Let's say 
		you have the following string:</p>
		<pre class="brush: js">var game = "Dragon Age: Origins";</pre>
		<p>The <span class="inlineCode">game</span> variable is very clearly a 
		string primitive that is assigned to some literal text. If I want to 
		access the <span class="inlineCode">length</span> of this text, I 
		would do something as follows:</p>
		<pre class="brush: js">var game = "Dragon Age: Origins";
alert(game.length);</pre>
		<p>As part of evaluating <span class="inlineCode">game.length</span>,
		<span class="greenEmphasis">JavaScript will convert your primitive 
		string into an object</span>. For a brief moment, your lowly primitive 
		will become a beautiful object in order to figure out what the
		<span class="inlineCode">length</span> actually is. The thing to keep in 
		mind is that all of this is temporary. Because this temporary object isn't 
		grounded or tied to anything after it serves its purpose, it goes away 
		and you are left with the result of the <span class="inlineCode">length</span> 
		evaluation (a number) and the <span class="inlineCode">game</span> 
		variable (still a string primitive).</p>
		<p>This transformation only happens for primitives. If you ever 
		explicitly create a String object, then what you create is permanently kept as 
		an object. Let's say you have the following:</p>
		<pre class="brush: js">var gameObject = new String("Dragon Age:Origins");</pre>
		<p>In this case, our <span class="inlineCode">gameObject</span> variable 
		very clearly points to something whose type is <span class="inlineCode">
		Object</span>. This variable 
		will continue to point to an <span class="inlineCode">Object</span> type unless you modify the string or 
		do something else that causes the reference to be changed. The primitive 
		morphing into an object and then morphing back into a primitive is 
		something unique to primitives. Your objects don't partake in such 
		tomfoolery.</p>
		<p>You can easily verify everything I've said by examining the type of 
		your data. That is done by using the
		<span class="inlineCode">typeof</span> keyword. Here is an example of me 
		using it to confirm everything I've just told you about:</p>
		<pre class="brush: js">var game = "Dragon Age: Origins";
alert("Length is: " + game.length);

var gameObject = new String("Dragon Age:Origins");

typeof game //string
typeof game.length //number
typeof gameObject //Object</pre>
		<p>Now, aren't you glad you learned all this?</p>
		<h2>Conclusion</h2>
		<p>Hopefully this brief explanation helps you to reconcile why your 
		primitives behave like objects when they need to. At this point, you 
		might have a different question around why anybody would have designed a 
		language that does something this bizarre. After all, if a primitive 
		turns into an object when it needs to do something useful, why not just 
		stay an object always? The answer has to do with memory consumption.</p>
		<p>As you saw from my discussion on how much more baggage the 
		object form of a primitive carries when compared to just a primitive, 
		all of those pointers to 
		additional functionality cost resources. The solution in JavaScript is 
		a compromise. All literal values like text, numbers, and booleans are 
		kept as primitives if they are declared and/or used as such. Only when 
		they need to are they converted to their respective
		<span class="inlineCode">Object</span> forms. To ensure your app 
		continues to keep a low memory footprint, these converted objects are 
		quickly discarded (aka garbage collected) once they've served their 
		purpose.</p>
		<p>
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>A Deeper Look at Objects in JavaScript</h1>
		<div class="post-wrapper">
			
			<p>In the
		<a class="blueEmphasis" href="//www.kirupa.com/html5/introduction_to_objects_in_javascript.htm">
		Introduction to Objects in JavaScript</a> tutorial, I provided a very 
		high level overview of what objects in JavaScript are and how to think 
		about them. In this tutorial, we will make that tutorial seem like the tip of a ginormous 
		iceberg:</p>
		<p class="centerImageNoBorder">
		<img alt="you haven't seen anything yet" height="398" src="https://www.kirupa.com/images/iceberg_72.png" width="558"></p>
		<p class="centerImageNoBorder">
		&nbsp;</p>
		<p>What we are going to do here is have a re-look at objects in greater 
		detail and touch on the more advanced topics such as using the
		<span class="inlineCode">Object</span> object, creating your own custom 
		objects, inheritance, prototypes, and the <span class="inlineCode">this</span> 
		keyword. If all that I've listed so far makes no sense, it will after 
		you've reached the end of this tutorial...I hope.</p>
		<p>Onwards!</p>
		<h2>Meet the Object</h2>
		<p>At the very bottom of the food chain, you have the
		<span class="inlineCode">Object</span> type that lays the 
		groundwork for both custom objects as well as built-in types like
		<span class="inlineCode">Function</span>, <span class="inlineCode">Array</span>, 
		and <span class="inlineCode">RegExp</span>. Pretty much everything 
		except <span class="inlineCode">null</span> and <span class="inlineCode">
		undefined</span> are directly related to an <span class="inlineCode">
		Object</span> or can become one as needed.</p>
		<p>As you saw from the introduction, the functionality the
		<span class="inlineCode">Object</span> brings to the table is pretty 
		minimal. It allows you to specify a bunch of named key and value pairs 
		that we lovingly call <strong>properties</strong>. This isn't all that 
		different from what you see in other languages with data structures like hashtables, 
		associate arrays, and dictionaries.</p>
		<p>Anyway, all of this is pretty boring. Let's get to some of the more 
		exciting stuff!</p>
		<h3>Creating Objects</h3>
		<p>The way all the cool kids are creating objects these days is by using the funny-looking 
		(yet 
		compact) <strong>object initializer</strong> syntax:</p>
		<pre class="brush: js">var funnyGuy = {};</pre>
		<p>That's right. Instead of typing in &quot;<span class="inlineCode">new 
		Object()</span>&quot; like you may have seen in old-timey books, you can just initialize your object by saying &quot;<span class="inlineCode">{}</span>&quot;. 
		At the end of this line getting executed, you will have created an 
		object called <span class="inlineCode">funnyGuy</span> whose type is
		<span class="inlineCode">Object</span>. If all of this makes sense so 
		far, great!</p>
		<p>This <span class="inlineCode">funnyGuy</span> object isn't as simple 
		as it looks. Let's dive a little bit deeper and visualize what exactly 
		is going on. On the surface, you just have the <span class="inlineCode">
		funnyGuy</span> object:</p>
		<p class="centerImageNoBorder">
		<img alt="what a funny little, round guy" height="259" src="https://www.kirupa.com/html5/images/funnyGuy_1_72.png" width="306"></p>
		<p>If you back up and look more broadly at the funnyGuy object, you'll 
		realize that it isn't alone here. Because it is an object, is has a 
		connection to the main <span class="inlineCode">Object</span> type that it derives from:</p>
		<p class="centerImageNoBorder">
		<img alt="meet the object" height="175" src="https://www.kirupa.com/html5/images/funnyGuy_2_72.png" width="545"></p>
		<p>What this connection means is pretty significant. Let's add some more 
		detail to what we have provided so far:</p>
		<p>&nbsp;</p>
		<p class="centerImageNoBorder">
		<img alt="funnyGuy Objectified!" height="217" src="https://www.kirupa.com/html5/images/funnyGuy_Object_72.png" width="501"></p>
		<p class="centerImageNoBorder">&nbsp;</p>
		<p>The <span class="inlineCode">funnyGuy</span> object has no properties 
		defined. That makes sense given what we specified in code (and can see 
		in the diagram above):</p>
		<pre class="brush: js">var funnyGuy = {};</pre>
		<p>Our <span class="inlineCode">funnyGuy</span> is simply an empty object. While there may not be any 
		properties <strong>we defined</strong> on it, there is a 
		special internal property that exists called <span class="inlineCode">
		__proto__</span> and often represented as <span class="inlineCode">
		[[Prototype]]</span> that points to our <span class="inlineCode">Object</span>. 
		If your mind just melted for a second, let me slow down and explain what 
		is going on here.</p>
		<p>What the <span class="inlineCode">[[Prototype]]</span> property 
		references is what is known as a <strong>prototype object</strong>:</p>
		<p class="centerImageNoBorder">
		<img alt="meet the prototype" height="277" src="https://www.kirupa.com/html5/images/funnyGuy_Object_prototype_72.png" width="501"></p>
		<p>&nbsp;</p>
		<p>A prototype object is the source that another object is based on. In 
		our case, the <span class="inlineCode">funnyGuy</span> object is created 
		in the likeness of our <span class="inlineCode">Object</span> type. What 
		this means is best highlighted by looking at an example. We know that
		<span class="inlineCode">funnyGuy</span> contains no properties of its 
		own. Because it is &quot;derived&quot; from our <span class="inlineCode">Object</span> 
		type, you can access any properties the <span class="inlineCode">Object</span> contains through
		<span class="inlineCode">funnyGuy</span> itself.</p>
		<p>For example, I can do something like this:</p>
		<pre class="brush: js">var funnyGuy = {};
funnyGuy.toString();  // [object Object]</pre>
		<p>I am calling the <span class="inlineCode">toString()</span> method on 
		our <span class="inlineCode">funnyGuy</span> object. Despite
		<span class="inlineCode">funnyGuy</span> not having any property called
		<span class="inlineCode">toString</span> on it, what gets returned isn't 
		an error or <span class="inlineCode">undefined</span>. You actually see the results of the
		<span class="inlineCode">toString()</span> method having acted on our
		<span class="inlineCode">funnyGuy</span> object.</p>
		<p>Think about this in a different way. Your <span class="inlineCode">
		funnyGuy</span> object is like a little kid. It doesn't have any money 
		of its own to buy big and expensive things. What the
		<span class="inlineCode">funnyGuy</span> object/kid does have is a 
		parent with a credit card. Having access to this credit card allows the 
		kid to go and buy things that he/she wouldn't otherwise be able to do. 
		The <span class="inlineCode">funnyGuy</span> / <span class="inlineCode">
		Object</span> relationship is very much like a child / parent 
		relationship where if the child doesn't have something, he / she can 
		check with a parent next.</p>
		<p>Getting back to our example and looking at it all one more time, what happened is this. 
		Let's act this out.</p>
		<div class="callout">
			<p>&nbsp;Our JavaScript engine was like,
		<span class="blueEmphasis">Hey, funnyGuy! I'm going to call toString() 
		on you.</span></p>
			<p>The <span class="inlineCode">funnyGuy</span> object replied with 
			a, <span class="greenEmphasis">Yo...dawg. I don't know what you are 
		talking about.</span></p>
			<p>The JavaScript engine then said,
		<span class="blueEmphasis">Well, I'm going to check your prototype 
		object and see if it contains a property called toString().</span></p>
			<p>A 
		few milliseconds later, after finding the prototype object thanks to the
		<span class="inlineCode">[[Prototype]]</span> property, our JavaScript 
		engine says, <span class="blueEmphasis">Object, my old chum! Do you 
		have a toString() property?</span></p>
			<p>The <span class="inlineCode">Object</span> 
		quickly replies with a <span class="redEmphasis">Yep.</span> and 
		calls the <span class="inlineCode">toString</span> method.</p>
		</div>
		<p>This entire (very dramatic) interaction is part of what is known as a <strong>
		prototype chain</strong>. If an object doesn't have what you are looking 
		for, the JavaScript engine will navigate to the next object as determined by 
		the <span class="inlineCode">[[Prototype]]</span> property and keep 
		going until it reaches the very end. The very end is when you try to 
		access the <span class="inlineCode">[[Prototype]]</span> property on the
		<span class="inlineCode">Object</span> itself. You can't go any further 
		beyond <span class="inlineCode">Object</span>, since that is as basic of 
		a type as you can get. I highlight this in the diagrams by having your
		<span class="inlineCode">Object</span>'s <span class="inlineCode">
		[[Prototype]]</span> refer to <strong>null</strong>.</p>
		<p>If you've ever heard of the term <strong>inheritance</strong> as it 
		applies to programming before, what you've just seen is a simple example 
		of it!</p>
		<h3>Specifying Properties</h3>
		<p>I bet you didn't imagine that a single line of JavaScript would 
		result in that much explanation, did you? Well, the nice thing is, I 
		front loaded a lot of conceptual data on you. Hopefully that makes 
		everything else that you see from here on out make a lot more sense.</p>
		<p>Right now, we still just have an empty object:</p>
		<pre class="brush: js">var funnyGuy = {};</pre>
		<p>Let's specify some properties on it called <span class="inlineCode">
		firstName</span> and <span class="inlineCode">lastName</span>. As with 
		all things in JavaScript, you have multiple ways of defining properties 
		on an element. The way you've seen so far is by using the dot notation:</p>
		<pre class="brush: js, highlight:[2,3]">var funnyGuy = {};
funnyGuy.firstName = &quot;Conan&quot;;
funnyGuy.lastName = &quot;O'Brien&quot;;</pre>
		<p>Another approach involves using the square bracket syntax:</p>
		<pre class="brush: js, highlight:[2,3]">var funnyGuy = {};
funnyGuy[&quot;firstName&quot;] = &quot;Conan&quot;;
funnyGuy[&quot;lastName&quot;] = &quot;O'Brien&quot;;</pre>
		<p>The final approach is by extending our object initializer syntax with 
		the <strong>literal notation</strong> for declaring properties:</p>
		<pre class="brush: js, highlight:[2,3]">var funnyGuy = {
	firstName: &quot;Conan&quot;,
	lastName: &quot;O'Brien&quot;
};</pre>
		<p>There is no right or wrong approach in how you want to specify 
		properties, so be aware of all three variants and go with one that works 
		best for the situation you find yourself in. In general, I use...</p>
		<ol>
			<li>The literal notation when I am specifying properties 
			directly with a value.</li>
			<li>The dot notation if I am specifying a property whose values are 
			provided as part of an argument or expression.</li>
			<li>The square bracket notation if the property name itself is 
			something that is part of an argument or expression.</li>
		</ol>
		<p>Regardless of which of the three approaches you used for specifying 
		your properties, the end result is that your <span class="inlineCode">
		funnyGuy</span> object will have these properties (and values) defined 
		on itself:</p>
		<p class="centerImageNoBorder">
		<img alt="and now we have properties" height="217" src="https://www.kirupa.com/html5/images/funnyGuy_Object_plus_properties_72.png" width="501"></p>
		<p>&nbsp;</p>
		<p>All of this should be straightforward. Let's just do one more thing 
		before we move on bigger and greener pastures. Let's create a method called 
		<strong>getName</strong> on <span class="inlineCode">funnyGuy</span> that will return the value of the
		<span class="inlineCode">firstName</span> and <span class="inlineCode">
		lastName</span> properties. I will just show what this looks like using 
		the literal notation, for it is easy in the other approaches:</p>
		<pre class="brush: js, highlight:[5,6,7]">var funnyGuy = {
    firstName: &quot;Conan&quot;,
    lastName: &quot;O'Brien&quot;,

    getName: function() {
        return &quot;Name is: &quot; + this.firstName + &quot; &quot; + this.lastName;
    }
};</pre>
		<p>Our <span class="inlineCode">getName</span> property's value is a 
		function whose body simply returns a string that includes the value of 
		our <span class="inlineCode">firstName</span> and
		<span class="inlineCode">lastName</span> properties. To call the 
		<span class="inlineCode">getName</span> 
		property, ahem...method, this is all you have to do:</p>
		<pre class="brush: js, highlight:[10]">var funnyGuy = {
    firstName: &quot;Conan&quot;,
    lastName: &quot;O'Brien&quot;,

    getName: function() {
        return &quot;Name is: &quot; + this.firstName + &quot; &quot; + this.lastName;
    }
};

alert(funnyGuy.getName()); // displays &quot;Name is Conan O'Brien&quot;</pre>
		<p>Yep, that's all there is to declaring an object and setting 
		properties on it. Indirectly, you learned a whole lot about what 
		goes on behind the scenes when a simple object is created. You'll need 
		all of this fancy learnin' in the next section when we kick everything 
		up a few notches.</p>
		<h2>Creating Custom Objects</h2>
		<p>Working with the generic <span class="inlineCode">Object</span> and 
		putting properties on it serves a useful purpose, but its awesomeness 
		fades away really quickly when you are creating many objects that are 
		basically the same thing:</p>
		<pre class="brush: js">var funnyGuy = {
    firstName: &quot;Conan&quot;,
    lastName: &quot;O'Brien&quot;,

    getName: function () {
        return &quot;Name is: &quot; + this.firstName + &quot; &quot; + this.lastName;
    }
};

var theDude = {
    firstName: &quot;Jeffrey&quot;,
    lastName: &quot;Lebowski&quot;,

    getName: function () {
        return &quot;Name is: &quot; + this.firstName + &quot; &quot; + this.lastName;
    }
};

var detective = {
    firstName: &quot;Adrian&quot;,
    lastName: &quot;Monk&quot;,

    getName: function () {
        return &quot;Name is: &quot; + this.firstName + &quot; &quot; + this.lastName;
    }
};</pre>
		<p>Currently, if we had to visualize what he have right now, this is 
		what you will see:</p>
		<p class="centerImageNoBorder">
		<img alt="what your new object looks like" height="542" src="https://www.kirupa.com/html5/images/newObject_properties_72.png" width="501"></p>
		<p>There is a lot of duplicated stuff here that is, frankly, 
		unnecessary. Let's fix that using what we've learned about inheritance 
		and the prototype chain.</p>
		<p>What we want to do is create an intermediate <strong>parent</strong> 
		object that contains the properties that are more generic and not 
		necessary to be on the <strong>child</strong> object itself. From what 
		we have here, the <span class="inlineCode">firstName</span> and
		<span class="inlineCode">lastName</span> properties are going to be 
		unique for each object we create. Because of that, these two properties still belong on 
		the <span class="inlineCode">funnyGuy</span>, <span class="inlineCode">
		theDude</span>, and <span class="inlineCode">detective</span> objects.</p>
		<p>Our <span class="inlineCode">getName</span> property, though, does 
		not have to be duplicated for each object. This is something we can 
		parcel off into a parent object that 
		the rest of the objects can inherit from. Let's call this object
		<span class="inlineCode">person</span>:</p>
		<p class="centerImageNoBorder">
		<img alt="and the person appears" height="519" src="https://www.kirupa.com/html5/images/newObject_properties_person_72.png" width="685"></p>
		<p class="centerImageNoBorder">&nbsp;</p>
		<p>Visually, this makes sense. How do we end up creating something like 
		this?</p>
		<p>Well, thinking out loud, we need to create our <span class="inlineCode">funnyGuy</span>,
		<span class="inlineCode">theDude</span>, and <span class="inlineCode">
		detective</span> objects and ensure the <span class="inlineCode">
		firstName</span> and <span class="inlineCode">lastName</span> properties 
		are defined on them. That's easy. Of course, if this is all we did, this wouldn't be adequate. 
		The prototype for these objects will be <span class="inlineCode">Object</span>, and we don't want that. 
		We want the <span class="inlineCode">person</span> object with the <span class="inlineCode">getName</span> 
		property to be a part of our prototype chain as the immediate parent. The way we do that is by 
		ensuring the <span class="inlineCode">[[Prototype]]</span> property on
		<span class="inlineCode">funnyGuy</span>, <span class="inlineCode">
		theDude</span>, and <span class="inlineCode">detective</span> references
		<span class="inlineCode">person</span>.</p>
		<p>In order to do this, we use the extremely awesome
		<span class="inlineCode">Object.create</span> method. Let me quickly 
		explain what it does before we see it in action. The
		<span class="inlineCode">Object.create</span> method, as its name 
		implies, creates a new object. As part of creating the object, it allows 
		you to specify what your newly created object's prototype will be. 
		Strange how what we are wanting to do and what <span class="inlineCode">
		Object.create</span> provides are identical! :P</p>
		<p>Let's use <span class="inlineCode">Object.create</span> and the rest 
		of the code that brings the diagram and the explanation you've seen to 
		life:</p>
		<pre class="brush: js">var person = {
    getName: function () {
        return &quot;The name is &quot; + this.firstName + &quot; &quot; + this.lastName;
    }
};

var funnyGuy = Object.create(person);
funnyGuy.firstName = &quot;Conan&quot;;
funnyGuy.lastName = &quot;O'Brien&quot;;

var theDude = Object.create(person,
    {
        firstName:
        {
            value: &quot;Jeffrey&quot;
        },
        lastName:
        {
            value: &quot;Lebowski&quot;
        }
    });

var detective = Object.create(person,
    {
        firstName: { value: &quot;Adrian&quot; },
        lastName: { value: &quot;Monk&quot; }
    });</pre>
		<p>Let's look at all of this code in greater detail. First, we have our
		<span class="inlineCode">person</span> object:</p>
		<pre class="brush: js">var person = {
    getName: function () {
        return &quot;The name is &quot; + this.firstName + &quot; &quot; + this.lastName;
    }
};</pre>
		<p>There is nothing special going on here. We create a new
		<span class="inlineCode">person</span> object whose type is
		<span class="inlineCode">Object</span>. It's <span class="inlineCode">
		[[Prototype]]</span> property will point you to the
		<span class="inlineCode">Object</span> type. It contains a method called
		<span class="inlineCode">getName</span> that returns some string 
		involving <span class="inlineCode">this.firstName</span> and
		<span class="inlineCode">this.lastName</span>. We'll come back to the
		<span class="inlineCode">this</span> keyword shortly and how this works, so keep that one 
		under your hat for now.</p>
		<p>After creating our person object, this is what our world looks like 
		right now:</p>
		<p class="centerImageNoBorder">
		<img alt="just the person and the object" height="287" src="https://www.kirupa.com/html5/images/person_object_72.png" width="422"></p>
		<p>&nbsp;</p>
		<p>In the next line, we declare our <span class="inlineCode">funnyGuy</span> 
		variable and initialize it to the object that gets returned by
		<span class="inlineCode">Object.create</span>:</p>
		<pre class="brush: js">var funnyGuy = Object.create(person);</pre>
		<p>Notice that I pass in the <span class="inlineCode">person</span> 
		object as an argument to <span class="inlineCode">Object.create</span>. 
		Like I mentioned earlier, what this means is you create a new object 
		with the <span class="inlineCode">[[Prototype]]</span> value pointing to 
		our <span class="inlineCode">person</span> object. This is how things 
		look now:</p>
		<p class="centerImageNoBorder">
		<img alt="just a funnyGuy and a person" height="287" src="https://www.kirupa.com/html5/images/funnyGuy_person_noproperties_72.png" width="685"></p>
		<p>We created our <span class="inlineCode">funnyGuy</span> object with 
		the <span class="inlineCode">person</span> object set as its prototype 
		object. In the next two lines in our code, I define the <span class="inlineCode">
		firstName</span> and <span class="inlineCode">lastName</span> properties 
		on the object:</p>
		<pre class="brush: js, highlight:[2,3]">var funnyGuy = Object.create(person);
funnyGuy.firstName = &quot;Conan&quot;;
funnyGuy.lastName = &quot;O'Brien&quot;;</pre>
		<p>This is your standard, run-of-the-mill property declaration on an 
		object using a name and value. What happens should be of no surprise to 
		you:</p>
		<p>
		<img alt="what our funnyGuy property looks like" height="305" src="https://www.kirupa.com/html5/images/funnyGuy_person_bothproperties_72.png" width="685"></p>
		<p>&nbsp;</p>
		<p>We just created our <span class="inlineCode">funnyGuy</span> object 
		and set the <span class="inlineCode">firstName</span> and
		<span class="inlineCode">lastName</span> properties on it. We just have 
		our <span class="inlineCode">theDude</span> and <span class="inlineCode">
		detective</span> objects left. For these two remaining objects, I use 
		the <span class="inlineCode">Object.create</span> method's second 
		argument to pass in default values to set on our object. Let's take a 
		look.</p>
		<p>Our <span class="inlineCode">theDude</span> object is defined by the 
		following chunk of code:</p>
		<pre class="brush: js">var theDude = Object.create(person,
    {
        firstName:
        {
            value: &quot;Jeffrey&quot;
        },
        lastName:
        {
            value: &quot;Lebowski&quot;
        }
    });</pre>
		<p>Just like with <span class="inlineCode">funnyGuy</span>, I declare a 
		variable and initialize to <span class="inlineCode">Object.create</span>. 
		The first argument is our <span class="inlineCode">person</span> object 
		that will act as this newly created object's prototype. The second 
		argument is me specifying the <span class="inlineCode">firstName</span> 
		and <span class="inlineCode">lastName</span> properties and their 
		values.</p>
		<p>You would think that you could just use the object literal notation 
		that you saw earlier to specify the properties:</p>
		<pre class="brush: js">var theDude = Object.create(person,
    {
        firstName: &quot;Jeffrey&quot;,
        lastName: &quot;Lebowski&quot;
    });</pre>
		<p>Unfortunately, you can't be quite that brief. This will throw an 
		error, for every simple property defined via <span class="inlineCode">
		Object.create</span> has to be an object with a <span class="inlineCode">
		value</span> property containing the value you care about.</p>
		<p>Once you've figured that out and specified the properties to set once 
		this object has been created, the end result is identical to what you 
		saw earlier when creating the <span class="inlineCode">funnyDude</span> 
		object. You will have created a <span class="inlineCode">theDude</span> 
		object whose prototype object is <span class="inlineCode">person</span> 
		with the <span class="inlineCode">firstName</span> and
		<span class="inlineCode">lastName</span> properties storing the 
		appropriate value.</p>
		<p>One more object remaining! For our last <span class="inlineCode">
		detective</span> object, just to try something similar...yet different, 
		I try to create a more compact way of defining the initial properties as 
		part of creating the object via <span class="inlineCode">Object.create</span>:</p>
		<pre class="brush: js">var detective = Object.create(person,
    {
        firstName: { value: &quot;Adrian&quot; },
        lastName: { value: &quot;Monk&quot; }
    });</pre>
		<p>By now, you know exactly what is going on. I won't repeat myself 
		here. At the end of all this, you will end up with your child objects 
		created, chained to the parent <span class="inlineCode">person</span> 
		object, which is in turn chained to the <span class="inlineCode">Object</span>:</p>
		<p>
		<img alt="and the person appears" height="519" src="https://www.kirupa.com/html5/images/newObject_properties_person_72.png" width="685"></p>
		<p>&nbsp;</p>
		<p>At this point, if you've been following along and understand what is 
		going on, you should be quite impressed with yourself. Many people who 
		work with JavaScript for a very long time have difficulty grasping how 
		inheritance and prototypes tie in to object creation. Wrapping your head 
		around all of this is quite an accomplishment.</p>
		<p>Before you pop the champagne bottle and start celebrating, we are not 
		done yet. There is one last thing we need to look at before we call it a 
		day.</p>
		<h2>The <span class="inlineCode">this</span> Keyword</h2>
		<p>Let's go back to our <span class="inlineCode">person</span> object 
		and, more specifically, the <span class="inlineCode">getName</span> 
		property:</p>
		<pre class="brush:js">var person = {
    getName: function () {
        return &quot;The name is &quot; + this.firstName + &quot; &quot; + this.lastName;
    }
};</pre>
		<p>When you call <span class="inlineCode">getName</span>, depending on 
		which object you called it from, you'll see the appropriate name 
		returned. For example, let's say you do the following:</p>
		<pre class="brush: js, highlight:[5]">var funnyGuy = Object.create(person);
funnyGuy.firstName = &quot;Conan&quot;;
funnyGuy.lastName = &quot;O'Brien&quot;;

alert(funnyGuy.getName());</pre>
		<p>When you run this, you'll see something that looks as follows:</p>
		<p class="centerImageNoBorder">
		<img alt="this is conan o'brien" height="249" src="https://www.kirupa.com/html5/images/this_is_conan_obrien.png" width="435"></p>
		<p>If you look at the <span class="inlineCode">getName</span> property 
		again, there is absolutely no existence of the <span class="inlineCode">
		firstName</span> or <span class="inlineCode">lastName</span> properties 
		on the <span class="inlineCode">person</span> object. When a property 
		doesn't exist, I mentioned that we walk down the prototype chain from 
		parent to parent. In this case, that would be <span class="inlineCode">
		Object</span>:</p>
		<p class="centerImageNoBorder">
		<img alt="just the person and the object" height="287" src="https://www.kirupa.com/html5/images/person_object_72.png" width="422"></p>
		<p class="centerImageNoBorder">&nbsp;</p>
		<p>There is no existence of the <span class="inlineCode">firstName</span> 
		or <span class="inlineCode">lastName</span> properties on
		<span class="inlineCode">Object</span> either. How is it that this
		<span class="inlineCode">getName</span> method happens to work and 
		return the right values?</p>
		<p>The answer has to do with the <span class="inlineCode">this</span> 
		keyword that precedes <span class="inlineCode">firstName</span> and
		<span class="inlineCode">lastName</span>. The <span class="inlineCode">
		this</span> keyword refers to the object that our
		<span class="inlineCode">getName</span> method is bound to. That object 
		is, in this case, <span class="inlineCode">funnyGuy</span>:</p>
		<p class="centerImageNoBorder">
		<img alt="the this keyword and funnyGuy" height="434" src="https://www.kirupa.com/html5/images/this_funny_guy_72.png" width="685"></p>
		<p>&nbsp;</p>
		<p>At the point where the <span class="inlineCode">getName</span> method 
		is evaluated and the <span class="inlineCode">firstName</span> and
		<span class="inlineCode">lastName</span> properties have to be resolved, 
		the lookup starts at whatever the <span class="inlineCode">this</span> 
		keyword is pointing to. In our case, the <span class="inlineCode">this</span> 
		keyword is pointing to the <span class="inlineCode">funnyGuy</span> 
		object - an object that contains the <span class="inlineCode">firstName</span> 
		and <span class="inlineCode">lastName</span> properties!</p>
		<p>Knowing what the <span class="inlineCode">this</span> keyword refers 
		to is something we'll devote more time to in a later tutorial, but what 
		you've seen now will you get you pretty far.</p>
		<h2>Conclusion</h2>
		<p>Because so much fuss is made about JavaScript's object orientedness, 
		it is only natural that a topic that covers it would be as wide and deep 
		as what you've seen here. A bulk of what you saw here dealt with 
		inheritance directly or indirectly where objects are derived and based 
		on other objects. Unlike other, more class-ical languages that use 
		classes as templates for objects, JavaScript has no such concept of a 
		class. JavaScript uses what is known as a <strong>prototypical 
		inheritance model</strong>. You don't instantiate objects from a 
		template. Instead, you create objects either from scratch or, more 
		commonly, by copying / cloning another object.</p>
		<p>In the bazillion pages here, I tried to reinforce JavaScript's new 
		functionality for working with objects and extending them for your own 
		needs. There is still more to cover, so take a break and we'll touch 
		upon some more interesting topics in the near future that extend what 
		you've seen in more powerful, expressive, and awesome ways.</p>
		<p>
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>Why and how to bind methods in your React component classes? </h1>
		<div class="post-wrapper">
<p>React v0.13 introduced a major change in how you can define your component classes. <strong>What was a React-bound class system was slimmed down to a level where the pure JavaScript classes can be used.</strong> It has many benefits - your component classes are not magical anymore, you can take advantage of the common JavaScript idioms and so on.</p>

<p>This change emphasized that <em>React is JavaScript</em> - and React authors dont want to escape this truth. That change encourages you to use language features, not custom solutions to create your React code. For people coming from different background than JavaScript / Node.js using some language features can be confusing.</p>

<p>One of those confusing features is function context binding in JavaScript. In this blogpost I want to explain how and why you need to do it.</p>

<!-- more -->
<h2 id="let__39_s_start_with_javascript">Lets start with JavaScript</h2>
<p>As has been said before, React does not hide its JavaScript roots. Thats why its important to understand how JavaScript handles the function context assignment.</p>

<p>In languages like Ruby or Java, <code>this</code> (or in case of Ruby <code>self</code>) will always point to the object in which your method is defined. So in Ruby if you are working on the <code>foo</code> method inside the <code>Bar</code> class, <code>self</code> will always point to the object which is the instance of the <code>Bar</code> class.</p>

<p>JavaScript works quite surprisingly here. Because <strong>in JavaScript function context is defined while <em>calling</em> the function, not while defining it</strong>! This is what can surprise many when coming to JS from different fields. Such late binding is a powerful mechanism which allows us to re-use loosely coupled functions in variety of contexts.</p>

<p>There are four patterns of invoking functions that defines the context of the function being called:</p>

<ul>
<li><strong>function invocation pattern</strong></li>
<li><strong>method invocation pattern</strong></li>
<li><strong>constructor invocation pattern</strong></li>
<li><strong>apply invocation pattern</strong></li>
</ul>

<p>All of these patterns used define function context differently. In next paragraphs youll see how.</p>
<h2 id="function_invocation_pattern">Function invocation pattern</h2>
<blockquote>
<p>If there are no dots in your function call, your context is likely to be <code>window</code>.</p>
</blockquote>

<p>The most straightforward way to call a function is to call it directly:</p>

<pre><code class="language-javascript highlight javascript"><span class="kd">var</span> <span class="nx">func</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// ...</span>
<span class="p">};</span>

<span class="nx">func</span><span class="p">()</span></code></pre>

<p>Calling the function this way will set its context (<code>this</code>) to a global variable of an environment on which your JavaScript operates. In browsers it is a <code>window</code> global variable.</p>

<p>It can be very counter-intuitive. Lets see an another example:</p>

<pre><code class="language-javascript highlight javascript"><span class="kd">var</span> <span class="nx">unicorns</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">func</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="c1">// ... }</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">fun</span> <span class="o">=</span> <span class="nx">unicorns</span><span class="p">.</span><span class="nx">func</span><span class="p">;</span>
<span class="nx">fun</span><span class="p">();</span></code></pre>

<p>The <code>object.func</code> function is a <em>method</em> of the <code>unicorns</code> object. Since JavaScript treats functions like every other value, it can be assigned to the variable. Usually people think that such assignment cannot change the context of the function - itll still be <code>unicorns</code>, right? Wrong. Since context binding is determined by the way you call this function, the context will change to <code>window</code> global variable. Oops!</p>

<p>The less surprising behaviour can be achieved by using the <em>method invocation pattern</em> of calling functions.</p>
<h2 id="method_invocation_pattern">Method invocation pattern</h2>
<blockquote>
<p>If there are dots in your function call, your function context will be the right-most element of your dots chain.</p>
</blockquote>

<p>If your function is defined within an object, calling it directly from an object will set its context to the object on which the function is being called.</p>

<pre><code class="language-javascript highlight javascript"><span class="kd">var</span> <span class="nx">frog</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">RUN_SOUND</span><span class="p">:</span> <span class="s2">"POP!!"</span><span class="p">,</span>
  <span class="na">run</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">RUN_SOUND</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">frog</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span> <span class="c1">// returns "POP!!" since this points to the `frog` object.</span>
<span class="kd">var</span> <span class="nx">runningFun</span> <span class="o">=</span> <span class="nx">frog</span><span class="p">.</span><span class="nx">run</span><span class="p">;</span>
<span class="nx">runningFun</span><span class="p">();</span> <span class="c1">// returns "undefined" since this points to the window</span></code></pre>

<p>If your object is nested, when calling a function from an object nested within another object, the most nested object will be set as a context of the function call.</p>

<pre><code class="language-javascript highlight javascript"><span class="kd">var</span> <span class="nx">foo</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">bar</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">func</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">foo</span><span class="p">.</span><span class="nx">bar</span><span class="p">.</span><span class="nx">func</span><span class="p">();</span> <span class="c1">// this will point to `bar`</span></code></pre>

<p>This is less surprising for people coming from another languages. It is very similar to behaviour of the most programming languages.</p>

<p>This pattern works well if you have one object and want to have your context defined properly. If you are instantiating objects, youd like to have <code>this</code> pointing to each instance separately. Lets say <em>hi</em> to <em>constructor invocation pattern</em>!</p>
<h2 id="constructor_invocation_pattern">Constructor invocation pattern</h2>
<blockquote>
<p>Every time you see a <code>new</code> followed by a function name, your <code>this</code> will point to a newly created empty object.</p>
</blockquote>

<p>Function that are designed to be used with the <code>new</code> syntax are called <em>constructors</em>. By convention their names begin by an upper case letter.</p>

<pre><code class="language-javascript highlight javascript"><span class="kd">function</span> <span class="nx">Wizard</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">castSpell</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="s2">"KABOOM"</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span></code></pre>

<p>Calling it directly will cause <code>window</code> to be mutated (since itll be a <em>function invocation pattern</em>). But this function is intended to be called with a <code>new</code> operator.</p>

<pre><code class="language-javascript highlight javascript"><span class="kd">function</span> <span class="nx">Wizard</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">castSpell</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="s2">"KABOOM"</span><span class="p">;</span> <span class="p">};</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">merlin</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Wizard</span><span class="p">();</span> <span class="c1">// this is set to an empty object {}. Returns `this` implicitly.</span>
<span class="nx">merlin</span><span class="p">.</span><span class="nx">castSpell</span><span class="p">()</span> <span class="c1">// returns "KABOOM";</span></code></pre>

<p>This is exactly how a <em>constructor invocation pattern</em> looks like. Function called with the <code>new</code> operator will cause two things:</p>

<ul>
<li>Function will have a <code>this</code> context pointing to an empty object.</li>
<li>If you do not specify <code>return</code>, or this function will return a non-object value, <code>this</code> will get returned from such function.</li>
</ul>

<p>This pretty sums up all options you have in JavaScript when it comes to <em>implicit</em> setting a function call context. There is another very powerful technique for setting contexts - since functions are also objects in JavaScript, they have methods to change function call context to something else.</p>
<h2 id="apply_invocation_pattern">Apply invocation pattern</h2>
<p>When you have a reference of the function in hand, you can call the function with the context provided by you. It can be done by using two methods that functions provide:</p>

<ul>
<li>
<code>call</code> - it takes a <em>context</em> as the first argument. The rest of arguments are arguments passed to the function being called this way.</li>
<li>
<code>apply</code> - it takes a <em>context</em> as the first argument and an array of arguments for the function being called as the second argument.</li>
</ul>

<p>Lets see those methods in action!</p>

<pre><code class="language-javascript highlight javascript"><span class="kd">function</span> <span class="nx">addAndSetX</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="o">+=</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">obj1</span> <span class="o">=</span> <span class="p">{</span> <span class="na">x</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">y</span><span class="p">:</span> <span class="mi">2</span> <span class="p">};</span>

<span class="nx">addAndSetX</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">obj1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span> <span class="c1">// this = obj1, obj1 after call = { x: 3, y : 2 }</span>
<span class="c1">// It is the same as:</span>
<span class="c1">// addAndSetX.apply(obj1, [1, 1]);</span></code></pre>

<p>This is very handy if you need to call function being passed from somewhere else (for example, as an argument to your function) with a certain context. It is not very usable with async callback though - since binding is coupled with a function call. To set proper context with callbacks, you may need yet another handy technique - you can create a <em>bounded function</em> from it.</p>
<h2 id="binding_functions">Binding functions</h2>
<p><em>Bounded function</em> in JavaScript is a function that is <em>bounded</em> to a given context. That means no matter how you call it, the context of the call will stay the same. The only exception is the <code>new</code> operator which <strong>always</strong> return a new context.</p>

<p>To create a <em>bounded function</em> out of the regular function, the <code>bind</code> method is used. <code>bind</code> method take context to which you want to bind your function as a first argument. The rest of arguments are arguments that will be always passed to such function. It returns a bounded function as a result. Lets see an example:</p>

<pre><code class="language-javascript highlight javascript"><span class="kd">function</span> <span class="nx">add</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">result</span> <span class="o">+=</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">y</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">computation1</span> <span class="o">=</span> <span class="p">{</span> <span class="na">result</span><span class="p">:</span> <span class="mi">0</span> <span class="p">};</span>
<span class="kd">var</span> <span class="nx">boundedAdd</span> <span class="o">=</span> <span class="nx">add</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">computation1</span><span class="p">);</span>

<span class="nx">boundedAdd</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span> <span class="c1">// `this` is set to `computation1`.</span>
                  <span class="c1">//  computation1 after call: { result: 3 }</span>

<span class="kd">var</span> <span class="nx">boundedAddPlusTwo</span> <span class="o">=</span> <span class="nx">add</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">computation1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="nx">boundedAddPlusTwo</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span> <span class="c1">// `this` is set to `computation1`.</span>
                      <span class="c1">// computation1 after call: { result: 9 }</span></code></pre>

<p>Bounded function cant be changed even by manually calling <code>call</code> and <code>apply</code>! See these examples:</p>

<pre><code class="language-javascript highlight javascript"><span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span> <span class="na">boundedPlusTwo</span><span class="p">:</span> <span class="nx">boundedAddPlusTwo</span> <span class="p">};</span>
<span class="nx">obj</span><span class="p">.</span><span class="nx">boundedPlusTwo</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span> <span class="c1">// `this` is set to `computation1`.</span>
                       <span class="c1">// even though method is called on `obj`.</span>
                       <span class="c1">// computation1 after call: { result: 15 }</span></code></pre>

<pre><code class="language-javascript highlight javascript"><span class="kd">var</span> <span class="nx">computation2</span> <span class="o">=</span> <span class="p">{</span> <span class="na">result</span><span class="p">:</span> <span class="mi">0</span> <span class="p">};</span>
<span class="nx">boundedAdd</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">computation2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span> <span class="c1">// `this` is set to `computation1`.</span>
                                     <span class="c1">// even though context passed to call is</span>
                                     <span class="c1">// `computation2`</span>
                                     <span class="c1">// computation1 after call: { result: 18 }</span></code></pre>

<p>You are now equipped with this knowledge about the JavaScript. Lets jump to your React component classes and see how function call context affects your code.</p>

<div class="newsletter newsletter-reactjs_by_example_is_10">
        
        <div style="text-align: left">
          <h1 style="text-align: center; margin-bottom: 1em;">
<i>React.js by Example</i> is 1.0</h1>
          <a href="https://arkency.dpdcart.com/cart/add?product_id=113689&amp;method_id=120078">
            <img src="/assets/images/rbe-cover.png" alt="" style="float: left; max-width: 220px; margin-right: 1.5em; margin-bottom: 1em">
          </a>
          <p>Struggling with creating dynamic user interfaces? Want to ease the pain of building interfaces? Learn React.js and modern JavaScript by examples you love and know!</p>
          <ul class="benefit-list">
            <li>210 pages</li>
            <li>12 widgets like password strength meter or slack channel switcher - implementation &amp; theory. Impress your friends and boss by creating cool widgets in a matter of <b>hours</b>!</li>
            <li>All snippets in ECMAScript 2015 - learn the most modern JavaScript flavor and boost your productivity.</li>
            <li>2 full applications presented and implemented in a step-by-step basis - learn how to structure modern JavaScript frontends</li>
            <li>tips &amp; tricks of React.js experts with over one year experience in this technology</li>
          </ul>

          <p>Code repositories for all examples included. Use <strong>LEARNREACT</strong> code to get 30% off!</p>
        </div>
      
      <p style="text-align: center"><a href="https://arkency.dpdcart.com/cart/add?product_id=113689&amp;method_id=120078" style="font-size: 3em;" class="button">Grab your copy!</a></p>

</div>
<h2 id="how_and_what_to_bind">How and what to bind</h2>
<p>ECMAScript 2015 (ECMAScript 6) introduced a new class syntax that can be used to create React component classes. In fact, this class syntax is a syntactic sugar for the old, <em>prototype</em> system of object-oriented JavaScript.</p>

<p>That means function context calls within ES2015 classes follow the same principles as the rest of JavaScript.</p>

<p>You can think (to simplify things - its <em>not</em> exactly true how ES2015 classes are defined. ES2015 classes use prototypes and <code>Object.defineProperty</code> under the hood. But in this case, semantics are the same) that such class:</p>

<pre><code class="language-javascript highlight javascript"><span class="kr">class</span> <span class="nx">Foo</span> <span class="p">{</span>
  <span class="nx">constructor</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">bar</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ...</span>
  <span class="p">}</span>

  <span class="nx">baz</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ...</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre>

<p>Is roughly the same as:</p>

<pre><code class="language-javascript highlight javascript"><span class="kd">function</span> <span class="nx">Foo</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>

  <span class="k">this</span><span class="p">.</span><span class="nx">bar</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="c1">// ... };</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">baz</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="c1">// ... };</span>
<span class="p">}</span></code></pre>

<p>Remember it is just a simplification. In the case of determining the function context calls, this more sophisticated logic follows the same principles as the snippet above.</p>
<h3 id="_code_react_createclass__code_"><code>React.createClass</code></h3>
<p>In the oldest component class syntax called <code>React.createClass</code> binding problem is non-existent. That is because <code>React.createClass</code> performs <em>auto-binding</em> under the hood. All methods you define in an object passed to <code>React.createClass</code> will be automatically bound to the component instance. That means you can always use <code>setState</code>, access <code>props</code> and <code>state</code> and so on from these methods.</p>

<p>This may seem cool, but that means under the hood something magical happened which is not under your control. While it may be perfectly acceptable in 99% of cases, it limits your ability to arbitrary set context - which can be a big issue in more sophisticated codebases.</p>
<h3 id="ecmascript_2015_classes">ECMAScript 2015 classes</h3>
<p>In ECMAScript 2015 classes you need to bind your methods manually. In fact, all you actually need to bind are event handlers and functions passed down as properties (a.k.a. callbacks). Why is that?</p>

<p>Just think about it. In the React codebase, React is assuming that you have <code>render</code> method within your component class. While rendering, your component is instantiated from the component class by using the <em>constructor invocation pattern</em> (a.k.a <code>new Component(...)</code>). Since your component classes inherit from <code>React.Component</code>, functions like <code>setState</code> and <code>forceUpdate</code> are inherited.</p>

<p>What React codebase can know about your component and is able to perform calls using the <em>method invocation pattern</em> to it is:</p>

<ul>
<li>You may have component lifecycle methods - it just calls it under the hood with <code>component.componentDidUpdate(...)</code> - so <code>this</code> is properly binded to a component instance itself.</li>
<li>You must have a <code>render</code> method - so it is too called with a <em>method invocation pattern</em>. Most non-event handler functions are called from <code>render</code>, so you have full control over the pattern you use - and you should generally use <code>this.method</code> pattern since it binds context correctly.</li>
</ul>

<p>But event handlers you pass as properties (like <code>onChange</code> or <code>onClick</code>) can come from many sources. They can be even passed from the non-React level by a property of the top-level component. In <code>React.createClass</code> React assumes that they come from your component and binds them automaticaly. But in ES2015 classes you have freedom. Under the hood they are called using the <em>function invocation pattern</em>. You can check it by yourself <a href="http://jsbin.com/kacuviloxi/edit?html,js,output">here</a>. Just click on a Hello word on the Output pane and see that <code>this</code> points to <code>window</code>. You may need to open your browsers developer console to see that.</p>

<p>That means by default you cant access properties, state and component methods like <code>setState</code> from event handlers. To do so, you need to bind them explicitly.</p>

<p>The best place to bind your event handlers is your constructor:</p>

<pre><code class="language-javascript highlight javascript"><span class="kr">class</span> <span class="nx">InputExample</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span> <span class="na">text</span><span class="p">:</span> <span class="s1">''</span> <span class="p">};</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">change</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">change</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">change</span><span class="p">(</span><span class="nx">ev</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="na">text</span><span class="p">:</span> <span class="nx">ev</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span> <span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="p">{</span> <span class="nx">text</span> <span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">;</span>
    <span class="k">return</span> <span class="p">(</span><span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"text"</span> <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">text</span><span class="p">}</span> <span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">change</span><span class="p">}</span> <span class="sr">/&gt;</span><span class="se">)</span><span class="err">;
</span>  <span class="p">}</span>
<span class="p">}</span></code></pre>

<p><strong>This way your event handler has its context bound to the component instance</strong>. You can access <code>props</code> and <code>state</code> and call <code>setState</code> or <code>forceUpdate</code> from such bound handler.</p>
<h3 id="ecmascript_2015_classes_with_class_properties">ECMAScript 2015 classes with class properties</h3>
<p>There is an experimental feature called <em>class properties</em> that can help you avoid binding methods explicitly. It is a syntactic sugar for defining fields and functions within a constructor. It looks like this:</p>

<pre><code class="language-javascript highlight javascript"><span class="kr">class</span> <span class="nx">InputExample</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">state</span> <span class="o">=</span> <span class="p">{</span> <span class="na">text</span><span class="p">:</span> <span class="s1">''</span> <span class="p">};</span>

  <span class="c1">// ...</span>
<span class="p">}</span></code></pre>

<p>And is compiled to something like this:</p>

<pre><code class="language-javascript highlight javascript"><span class="kr">class</span> <span class="nx">InputExample</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">constructor</span><span class="p">(...</span><span class="nx">arguments</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">super</span><span class="p">(...</span><span class="nx">arguments</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span> <span class="na">text</span><span class="p">:</span> <span class="s1">''</span> <span class="p">};</span>
  <span class="p">}</span>

  <span class="c1">// ...</span>
<span class="p">}</span></code></pre>

<p>So how about defining a method this way?</p>

<pre><code class="language-javascript highlight javascript"><span class="kr">class</span> <span class="nx">InputExample</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">state</span> <span class="o">=</span> <span class="p">{</span> <span class="na">text</span><span class="p">:</span> <span class="s1">''</span> <span class="p">};</span>

  <span class="nx">change</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ev</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="na">text</span><span class="p">:</span> <span class="nx">ev</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span> <span class="p">});</span>
  <span class="p">};</span>

  <span class="c1">// ...</span>
<span class="p">}</span></code></pre>

<p>So now, you got an equivalent of the following class:</p>

<pre><code class="language-javascript highlight javascript"><span class="kr">class</span> <span class="nx">InputExample</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">constructor</span><span class="p">(...</span><span class="nx">arguments</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">super</span><span class="p">(...</span><span class="nx">arguments</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span> <span class="na">text</span><span class="p">:</span> <span class="s1">''</span> <span class="p">};</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">change</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ev</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="na">text</span><span class="p">:</span> <span class="nx">ev</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span> <span class="p">});</span>
    <span class="p">};</span>
  <span class="p">}</span>

  <span class="c1">// ...</span>
<span class="p">}</span></code></pre>

<p>Well, it does not help you at all with the function context problem. <code>this.change</code> will still get called by a <em>function invocation pattern</em>, so the context will still be wrong.</p>

<p>In fact this feature itself is not helpful in this case. But <strong>combined with another feature</strong>, called <em>arrow functions syntax</em> it fixes the problem with binding in a very elegant way.</p>

<p>The <em>arrow function syntax</em> is a way of defining function with a syntax like this:</p>

<pre><code class="language-javascript highlight javascript"><span class="nx">change</span> <span class="o">=</span> <span class="p">(</span><span class="nx">ev</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="na">text</span><span class="p">:</span> <span class="nx">ev</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span> <span class="p">});</span></code></pre>

<p>It is a more concise way than writing a <code>function(ev) { .... }</code> statement. If you dont provide <code>{</code> and <code>}</code> brackets after the <code>=&gt;</code> arrow, such function is a single expression which is returned instantly. So this desugars to something like:</p>

<pre><code class="language-javascript highlight javascript"><span class="nx">change</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ev</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="na">text</span><span class="p">:</span> <span class="nx">ev</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span> <span class="p">});</span> <span class="p">};</span></code></pre>

<p>If that would be the case, youd still have a problem with binding event handlers. But there is another very useful side-effect - arrow functions always gets the context from where they have been defined. So in fact, this example is equivalent to:</p>

<pre><code class="language-javascript highlight javascript"><span class="kd">var</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
<span class="nx">change</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ev</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">that</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="na">text</span><span class="p">:</span> <span class="nx">ev</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span> <span class="p">});</span> <span class="p">};</span></code></pre>

<p>All <code>this</code> occurencies within the arrow function will get transformed into <code>that</code> - and <code>that</code> is a reference to the context in which this function is defined. Combine it with the class properties behaviour and you get:</p>

<pre><code class="language-javascript highlight javascript"><span class="kr">class</span> <span class="nx">InputExample</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">constructor</span><span class="p">(...</span><span class="nx">arguments</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">super</span><span class="p">(...</span><span class="nx">arguments</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span> <span class="na">text</span><span class="p">:</span> <span class="s1">''</span> <span class="p">};</span>
    <span class="kd">var</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">change</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ev</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">that</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="na">text</span><span class="p">:</span> <span class="nx">ev</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span> <span class="p">});</span>
    <span class="p">};</span>
  <span class="p">}</span>

  <span class="c1">// ...</span>
<span class="p">}</span></code></pre>

<p>This <code>that</code> trick is a very common JavaScript idiom. It is used when you want to call a function using the <em>function invocation pattern</em>, but still have an access to the higher level context. It is useful in modules and closures in JavaScript. Its a technique certainly worth to know!</p>

<p>So, defining the <code>InputExample</code> component class with class properties and arrow functions allows you to get rid of binding altogether. Lets see the final result:</p>

<pre><code class="language-javascript highlight javascript"><span class="kr">class</span> <span class="nx">InputExample</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">state</span> <span class="o">=</span> <span class="p">{</span> <span class="na">text</span><span class="p">:</span> <span class="s1">''</span> <span class="p">};</span>
  <span class="nx">change</span> <span class="o">=</span> <span class="nx">ev</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span><span class="na">text</span><span class="p">:</span> <span class="nx">ev</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">});</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="p">{</span><span class="nx">text</span><span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">;</span>
    <span class="k">return</span> <span class="p">(</span><span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"text"</span> <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">text</span><span class="p">}</span> <span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">change</span><span class="p">}</span> <span class="sr">/&gt;</span><span class="se">)</span><span class="err">;
</span>  <span class="p">}</span>
<span class="p">}</span></code></pre>

<p>Your component is written in a <strong>more concise</strong> way, you get rid of the <code>constructor</code> and your event handler is properly bound without making the explicit binding. It looks very promising!</p>

<p>The downside of this solution is that class properties are still in an <strong>experimental stage</strong>. That means this feature can be removed in later iterations of ECMAScript 2016 (a.k.a ECMAScript 7 or ES7) without warning. It can also be removed by maintainers of your EcmaScript transpiler. One of the transpilers that is widely used in React community and allows you to enable this feature is <a href="http://babeljs.io/">Babel.js</a>.</p>

<p>In my opinion using this syntax has <strong>more advantages than disadvantages</strong>. Class properties syntax is widely adopted already and if you have your codebase tested your tests will detect if something happen with this feature. You can also desugar this syntax very easily if you need to. Overall gain is huge, so for me its a way to go with defining React component classes.</p>
<h2 id="summary">Summary</h2>
<p><strong>Knowing how JavaScript function call contexts behaves is a very valuable knowledge</strong> - it allows you to track subtle bugs that can arise while developing your UI using JavaScript. Since React is JavaScript, component classes follows the same principles of call contexts than rest of your codebase. Apart from the surprise effect you can get when coming from another languages, having your React component classes defined with pure ES2015 classes makes your React codebase behaviour more consistent with the rest of your codebase. Good luck!</p>
<h2 id="examples___one_more_time">Examples - one more time</h2><h3 id="before__es_2015_">Before (ES 2015)</h3>
<pre><code class="language-javascript highlight javascript"><span class="kr">class</span> <span class="nx">InputExample</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span> <span class="na">text</span><span class="p">:</span> <span class="s1">''</span> <span class="p">};</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">change</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">change</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">change</span><span class="p">(</span><span class="nx">ev</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="na">text</span><span class="p">:</span> <span class="nx">ev</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span> <span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="p">{</span> <span class="nx">text</span> <span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">;</span>
    <span class="k">return</span> <span class="p">(</span><span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"text"</span> <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">text</span><span class="p">}</span> <span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">change</span><span class="p">}</span> <span class="sr">/&gt;</span><span class="se">)</span><span class="err">;
</span>  <span class="p">}</span>
<span class="p">}</span></code></pre>
<h3 id="after__class_properties___arrow_function_syntax_">After (class properties + arrow function syntax)</h3>
<pre><code class="language-javascript highlight javascript"><span class="kr">class</span> <span class="nx">InputExample</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">state</span> <span class="o">=</span> <span class="p">{</span> <span class="na">text</span><span class="p">:</span> <span class="s1">''</span> <span class="p">};</span>
  <span class="nx">change</span> <span class="o">=</span> <span class="nx">ev</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span><span class="na">text</span><span class="p">:</span> <span class="nx">ev</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">});</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="p">{</span><span class="nx">text</span><span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">;</span>
    <span class="k">return</span> <span class="p">(</span><span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"text"</span> <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">text</span><span class="p">}</span> <span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">change</span><span class="p">}</span> <span class="sr">/&gt;</span><span class="se">)</span><span class="err">;
</span>  <span class="p">}</span>
<span class="p">}</span></code></pre>
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>Javascript ES6: Learn important features in a few minutes</h1>
		<div class="post-wrapper">
			
			<p>The next-generation of javascript also known as ECMAScript 6 (also called ES6 or Harmony), is bringing us lots of amazing features that you probably will need to know. But instead of you spend too much time learning and researching all of the features I separated a few that I felt are the ones you'll be probably using in your daily basis.</p>
<p>Don't worry if you are new to javascript or you're coming from a server-side language, I believe this is the best time to learn it as ES6 has a much cleaner and friendlier syntax, known as <code>sugar syntax</code>.</p>
<h4 id="sugarsyntax">Sugar Syntax</h4>
<p>First of all, Syntactic Sugar is a syntax that make a language easier to understand and more readable, it makes the language "sweeter" for us. It also means that some "new" features of ES6 are not really new because ES6 is trying to simplify the syntax to make things easier for us. So instead of writing the your code using the old tricky way, you'll be able to code in a the simpler way, with sugar syntax.</p>
<p>Look below the sugar syntax in action to create a class in Javascript.</p>
<h4 id="classes">Classes</h4>
<p>Always remember: Javascript does not support classes like other Object-Oriented languages. Instead, Javascript can simulate classes using <code>functions</code> and <code>prototype</code>.</p>
<p>Below is the new syntax to create classes. You will feel familiar to this way if you come from a Java background or other OO language. </p>
<pre><code class="language-javascript">class Project {  
  constructor(name) {
    this.name = name;
  }

  start() {
    return "Project " + this.name + " starting";
  }
}

var project = new Project("Journal");  
project.start(); // "Project Journal starting"  
</code></pre>
<p>All the methods you declare in a class will be added to the prototype of the class.</p>
<h4 id="inheritanceines6andprototype">Inheritance in ES6 and Prototype:</h4>
<p>As said before, javascript does not support classes. So, if it doesn't support classes, does it support inheritance?</p>
<p>Yes, inheritance in javascript is possible via <code>prototype</code>. If you're not familiar with prototype, the good news is that with ES6 you don't necessarily need to know it to get the benefits of classes and inheritance. <code>prototype</code> is not hard to learn but for the purpose of this post you can understand <code>prototype</code> as the way javascript implements inheritance.</p>
<p>This is how I would create a subclass of Project, called WebProject and inherit the attributes and methods from Project. </p>
<pre><code class="language-javascript">class WebProject extends Project {  
  constructor(name, technologies) {
    super(name);
    this.technologies = technologies;
  }

  info() {
    return this.name + " uses " + arrayToString(this.technology);
  }
}

function arrayToString(param) {  
  // ... some implementation
}

var webJournal = new WebProject("FrontEnd Journal", "javascript");  
webJournal.start(); // "FrontEnd Journal starting"  
webJournal.info(); // "FrontEnd Journal uses javascript"  
</code></pre>
<p>Notice that in my WebProject constructor, I invoke the Project constructor and then I can make use of its attributes and method.</p>
<h4 id="modules">Modules</h4>
<p>If you don't want to leave all of your javascript in just one file or you do want to re-use some functionality in other parts of your application, you'll probably want to use modules. The magic keyword you need remember is <code>export</code>. Use export before the function you want to expose and you're done.</p>
<p>This is the structure of our app. The Project and the WebProject classes are stored in <code>application.js</code>.</p>
<pre><code>myproject (folder)  
 |
 -- modules (folder)
 |   |
 |   -- helpers.js
 |
 -- application.js
</code></pre>
<p>Let's separate out the <code>arrayToString()</code> function from the <code>application.js</code> and put it into the module <code>modules/helpers.js</code>, so we can re-use it in other places. </p>
<pre><code class="language-javascript">// modules/helper.js
export function arrayToString(param) {  
  // some implementation
}
</code></pre>
<p>Now we just need to import our module in <code>application.js</code>:</p>
<pre><code class="language-javascript">// application.js
import { arrayToString } from 'modules/helpers';

class WebProject extends Project {  
  constructor(name, technologies) {
    super(name);
    this.technologies = technology;
  }

  info() {
    return this.name + " uses " + arrayToString(this.technology);
  }
}

// ...
</code></pre>
<h4 id="whatelseshouldiknowaboutes6">What else should I know about ES6?</h4>
<p>Well, the next two feature in ES6 are very interesting. Enter <code>let</code> and <code>const</code>. They will make the development easier and even avoid common mistakes in Javascript.</p>
<h4 id="let">let</h4>
<p>To understand <code>let</code>, first we need to keep in mind that <code>var</code> creates function-scoped variables: </p>
<pre><code class="language-javascript">function printName() {  
  if(true) {
    var name = "Rafael";
  }
  console.log(name); // Rafael
}
</code></pre>
<p>Notice that, unlike Java or many other languages, any variable created inside a function in Javascript it is hoisted to the top of the function. It means no matter where you declare the variable, it's the same as if you declare it at the top of the function. This behaviour is called <code>hoisting</code>.</p>
<p>So the function above can be better understood like this: </p>
<pre><code class="language-javascript">function printName() {  
  var name; // variable declaration is hoisted to the top
  if(true) {
    name = "Rafael";
  }
  console.log(name); // Rafael
}
</code></pre>
<p>Now, how does <code>let</code> work? <br/>
Let's modify the same example and introduce let in it. </p>
<pre><code class="language-javascript">function printName() {  
  if(true) {
    let name = "Rafael";
  }
  console.log(name); // ReferenceError: name is not defined
}
</code></pre>
<p>As <code>let</code> is inside a block, name is only seen inside that block. </p>
<pre><code class="language-javascript">function printName() {  
  var name = "Hey";
  if(true) {
    let name = "Rafael";
    console.log(name); // Rafael
  }
  console.log(name); // Hey
}
</code></pre>
<p>In this case, as <code>let</code> is referencing a previously declared variable, the value "Rafael" is valid only inside the block. Outside the block the value of <code>name</code> is "Hey".</p>
<p>In summary, <code>var</code> is function-scoped and <code>let</code> is block-scoped.</p>
<h4 id="const">const</h4>
<p>The ability to create constant variables is something javascript was missing for a long time. With ES6 you'll be able to create constants and make sure its value won't be changed during the application execution.</p>
<p>The syntax for creating constants is as follow: </p>
<pre><code class="language-javascript">const SERVER_URL = "http://frontendjournal.com"  
</code></pre>
<h4 id="otherinterestingfeatures">Other interesting features</h4>
<p>ECMAScript 6 also brings these amazing features you might want to take a look: <code>Map</code>, <code>WeakMap</code>, <code>generators</code> and <code>Proxies</code>.</p>
<h4 id="whenwillibeabletousees6">When will I be able to use ES6?</h4>
<p>At the moment Firefox is the browser that has implemented more features. Juriy Zaytsev has put together some a useful table of compatibility for the major browsers. <a href="http://kangax.github.com/es5-compat-table/es6/">http://kangax.github.com/es5-compat-table/es6/</a></p>
<p>Some ES6 features is also available in Node JS. Check out Alex Young's blog post on <a href="http://dailyjs.com/2012/10/15/preparing-for-esnext/">ES6 for Node</a> to get started.</p>
<h4 id="conclusion">Conclusion</h4>
<p>The next-generation of javascript will bring a simpler and friendlier syntax helping the learning process for developers coming from other OO languages. The main problem I see now is that it's gonna take some time until we can use ES6 extensively in all major browsers.</p>
<p>Now, for server side development using Nodejs, ES6 is already a reality as many features are already present in V8.</p>
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>HTML5 pushState and Single-Page apps</h1>
		<div class="post-wrapper">
			<p>Imagine the situation where you have a single-page app. You start playing around with it and after some actions you decide to click the back button from the browser to go back to a previous state.</p>
<h4 id="doyouthinkyourappispreparedforit">Do you think your app is prepared for it?</h4>
<p>Dealing with browser history can be a headache specially if your app rely on Ajax calls or you have a single page app. Users love using the back button and developers hate it.</p>
<p>The problem with the browser history in Single-Page applications is that the browser is not able to keep track of the states of your application, differently than the traditional multi-page app where every state is usually bound to a different URL.</p>
<p>So what can we do to let users use the back button and at the same time make sure your application won't break?</p>
<p>If your app uses hashbang <code>#!</code> in the URLs for each state, like twitter used to (<a href="http://twitter.com/#!/roshiro">http://twitter.com/#!/roshiro</a>), you can restore the previous state with some lines of codes in Javascript. However, hashbangs is not a standard to solve the browser history issue.</p>
<p><strong>That's where HTML5's pushState comes in.</strong> Check out a simple example to see how to use pushState feature.</p>
<p>Suppose you have an application to control your restaurant, the code below is the menu. For every plate you click on, its name will be displayed, the URL will be changed and we will store the state of that URL in the browser history.</p>
<p><strong>restaurant_menu.html</strong> </p>
<pre><code class="language-html">&lt;ul&gt;  
    &lt;li&gt;&lt;a onclick="burger()"&gt;Burger&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a onclick="sandwich()"&gt;Sandwich&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a onclick="fries()"&gt;Fries&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;  
&lt;div id="chosen_plate"&gt;&lt;/div&gt;  
</code></pre>
<p><strong>pushState.js</strong> </p>
<pre><code class="language-javascript">function burger() {  
  // URL will change to /plate/burger
  history.pushState( { 
    plate_id: 1, 
    plate: "Burger" 
  }, null, "/plate/burger");

  showPlate("Burger");
}

function sandwich() {  
  // URL will change to /plate/sandwich
  history.pushState( { 
    plate_id: 2, 
    plate: "Sandwich" 
  }, null, "/plate/sandwich");

  showPlate("Sandwich");
}

function fries() {  
  // URL will change to /plate/fries
  history.pushState( { 
    plate_id: 3, 
    plate: "Fries" 
  }, null, "/plate/fries");

  showPlate("Fries");
}

function showPlate(name) {  
  document.getElementById("chosen_plate").innerHTML = name;
}

window.onpopstate = function (event) {  
  var content = "";
  if(event.state) {
    content = event.state.plate;
  }
  showPlate(content);
}
</code></pre>
<p>It's important to notice that the URLs don't need to exist, these "fake" URLs are just a way to link the history entry to its proper state. Then, if you click the back button from your browser, the onpopstate event will be fired which in turn will access the history API and access the stored state and do whatever is necessary, in this example display the name of the plate.</p>
<ul>
<li><code>onpopstate</code> is fired every time the active history changes.</li>
<li><code>pushState</code> takes 3 arguments, a state object, title (which is currently ignored) and URL.</li>
</ul>
<p>HTML5's pushState is great and I see it as a much better and more elegant alternative to hashbangs (#!), which sounds more like a workaround for browsers that don't support HTML5. So next time you need to manipulate the history of your app, don't forget to consider using the html5 history API.</p>
			
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>Closures: Probably the Simplest Way To Learn It</h1>
		<div class="post-wrapper">
			
			<p><img src="http://roshiro.github.io/cdn/images/closures.png" alt="Closures"/>
Have you always heard about closures but never knew clearly how it works?</p>
<p>Don't worry, closures is not a complex concept to learn if you break it down into small parts as I'm doing here. What I usually do to keep things in my mind for good is to sketch up a mind map. Yep, a mind map like this one above that has the central subject in the middle and several branches off it. Each branch is a small part of the central subject and this drawing you see is similar to how our brain store information, therefore, it's a great way to study things.</p>
<p>After this small introduction to mind maps, let's start with this interesting subject: closures.</p>
<h2 id="firstofallwhatsaclosure">First of all, what's a closure?</h2>
<p>Sorry, but there's no simple definition for that. I personally find the definition of closure harder to explain than the to implement it. My attempt to define closure would be:</p>
<p><em>In simple words, closure is the scope created by a function which encloses variables and other functions creating a separate "environment".</em></p>
<p>Look at the code below, this is an example of closure. Yes, a simple function called <code>myClosure()</code> with a local variable <code>a</code> defined in it and a var <code>a</code> declared outside the my function. Note that when we execute that code below, the variable <code>a</code> inside the function is protected from the outside, because <code>myClosure</code> function is enclosing the the local variable.</p>
<pre><code class="language-javascript">var a = "outside closure";  
function myClosure() {  
    var a = "inside closure";
    alert(a); // "inside closure"
}
myClosure();  
alert(a); // "outside closure"  
</code></pre>
<p>So, this is a closure. Nothing so fancy, right? <br/>
Yes, nothing fancy in this example but further on we'll have some better ones.</p>
<p>Remember the mind map in the beginning of the article? Now we'll go through each of the branches with a bit of examples and notes.</p>
<h3 id="1accesstoouttervariablesbyreferencenotvalue">1. Access To Outter Variables (By Reference, Not Value)</h3>
<p>This item says that we can access all outter variables by reference from within our closure. So, let's demonstrate it by incrementing the previous code including an inner function inside myClosure(). </p>
<pre><code class="javascript">var a = "outside",
    b = "another outside";

function myClosure() {
    var a = "inside";

    // Inner function
    function inner() {
        console.debug(a);
        console.debug(b);
    }

    inner();
}

myClosure(); // output: "inside" "another outside"
b = "hey";
myClosure(); // output: "inside" "hey"</code></pre>
<p>Note that inner() has access to all outter variables (a and b) by reference, it means if we change the value of <strong>b</strong> for example, inner() will automatically get the new value.</p>
<h3 id="2variablesoutliveafterbeingreturned">2. Variables Outlive After Being Returned</h3>
<p>That's a pretty exciting use of closures, check this another example and an interesting use of it. In the code below, when <code>myConcat()</code> is executed it returns a function enclosed in a scope, prefix is also enclosed. With that in mind, <code>sayWelcomeTo</code> and <code>sayByeTo</code> are two closures with different environment from each other.</p>
<pre><code class="language-javascript">function myConcat(prefix) {  
    return function(sufix) {
        return prefix + " " + sufix;
    }
}

var sayWelcomeTo = myConcat("Welcome");  
var sayByeTo = myConcat("Bye")

alert(sayWelcomeTo("Michael")); // Welcome Michael  
alert(sayByeTo("John")); // Bye John  
</code></pre>
<p>This example above shows us that closures keep the state of variables when the function was defined.</p>
<p>To make it more clear, look at the screenshot below showing how you can easily see the closure scope and local scope when debugging in Chrome. The closure keeps the value "Welcome" from the time it was created. <br/>
<img src="http://roshiro.github.io/cdn/images/debugging_closure.png" alt="Debugging Closure"/></p>
<h3 id="3emulateprivateandpublicmethods">3. Emulate Private and Public Methods</h3>
<p>This is an emulation because javascript doesn't have this access modifiers (private, public) like Java does, but with closure we can do something similar. This way of having private and public methods in javascript is also known as <em>"module pattern"</em>.</p>
<p>So let's say you need a javascript code to make mathematical divisions (Ok, this is just to illustrate). To do that let's create a module with all necessary methods and make them public or private according to what we need to expose and what we need to hide.</p>
<pre><code class="language-javascript">var DivisionModule = (function() {  
    var isDivisorZero = function(divisor) { // private
        return divisor === 0;
    },
    doDivision = function(a, b) {
        if(isDivisorZero(b)) {
            return "Divisor cannot be zero";
        }
        return a/b;
    };

    return {
        doDivision: doDivision // doDivision() is public
    }
})();

DivisionModule.doDivision(9, 3); // 3  
</code></pre>
<p>In the example above <code>isDivisorZero()</code> is a private method because it's not in the return statement. See below how we exposed just the <code>doDivision()</code> method, everything else is private.</p>
<p><img src="http://roshiro.github.io/cdn/images/debugging_closure_2.png" alt="Module Pattern"/></p>
<p>What made this possible is this notation below:</p>
<pre><code class="language-javascript">// This notation below makes the function be immediately executed and a closure is created.
(function() {

})();
</code></pre>
<h3 id="4closureandloopscautionhere">4. Closure and Loops: Caution here!</h3>
<p>Always remember that closures keep the <strong>reference</strong> of outter variables instead of value. This piece of advice can be particularly important in loops with closures because if you don't take that into account, something like this can happens.</p>
<pre><code class="language-html">&lt;a href="#"&gt;Green&lt;/a&gt;  
&lt;a href="#"&gt;Red&lt;/a&gt;  
&lt;a href="#"&gt;Blue&lt;/a&gt;  
</code></pre>
<pre><code class="language-javascript">var colors = ['green', 'red', 'blue'];

// Doing the wrong way
for(var i=0; i&amp;lt;colors.length; i++) {  
    document.getElementsByClassName(colors[i])[0].onclick = 
        function() {
            alert(colors[i]); // undefined
        };
}
</code></pre>
<p>The code above was meant to show an alert box with the colour that was clicked on. But instead what we get here is an <code>undefined</code>, do you know why? Because the <code>alert()</code> is using the variable <code>i</code> by reference and by the time we click on any link the variable <code>i</code> will have the value 3 for all the links. <br/>
See this code live: <a href="http://jsfiddle.net/rL4su/">http://jsfiddle.net/rL4su/</a></p>
<p>What we can do to fix it is to store the value o <code>i</code> in a separate closure for each link so each link will have its proper value. Below is the correct code:</p>
<pre><code class="language-javascript">var colors = ['green', 'red', 'blue'],  
    clickEvent = function(position) {
        // this closure will have position stored inside
        return function() {
            alert("My favorite color is " + colors[position]);
        };
    };

for(var i=0; i&amp;lt;colors.length; i++) {  
    document.getElementsByClassName(colors[i])[0].onclick = clickEvent(i);
}
</code></pre>
<p>The value of the variable position will be the same when the function was created. <br/>
See this code live: <a href="http://jsfiddle.net/rJGhg/">http://jsfiddle.net/rJGhg/</a></p>
<p><strong>P.S.</strong> I used mind maps for the first time when I was studing for an SAP Netweaver Java Certification, which was a subject totally obscure to me at the time. That map was much bigger than this one from this article. If you're intested in seeing it, let me know in the comments and I can show you.</p>
<p><strong>P.P.S.</strong> If you like this post, don't forget to join my mailing list below to receive future posts in your inbox.</p>
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>Object-Oriented JavaScript</h1>
		<div class="post-wrapper">
		<h2 class="chapter-title">Introduction</h2>
			<p pid="38">As HTML5 standards mature, JavaScript has become the de-facto programming language of the web for client-side environments, and is gaining ground rapidly on the server-side. As JavaScript code-bases grow larger and more complex, the object-oriented capabilities of the language become increasingly crucial. Although JavaScript's object-oriented capabilities are not as powerful as those of static server-side languages like Java, its current object-oriented model can be utilized to write better code.</p><p pid="39">In this Refcard, you'll learn how to write object-oriented code in JavaScript. Code samples include some EcmaScript 5 (JavaScript's specification) features and have been tested in Firefox 17, Chrome 23 and Internet Explorer 9.</p>
			<h2 class="chapter-title">Comparison of Java and JavaScript</h2>
			  <table border="1" width="630">
 <thead>
  <tr class="left_th_colored">
   <td>Java</td>
   <td>JavaScript</td>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td class="right_td_colored">Statically typed</td>
   <td class="right_td_colored">Dynamically typed</td>
  </tr>
  <tr>
   <td class="left_td_colored">Custom types are defined with class, interface or enum</td>
   <td class="left_td_colored">Custom types are defined with functions and prototypes</td>
  </tr>
  <tr>
   <td class="right_td_colored">Types cannot be changed at runtime</td>
   <td class="right_td_colored">Types can be changed at runtime</td>
  </tr>
  <tr>
   <td class="left_td_colored">Variables needs a type when declared (Strong typing)</td>
   <td class="left_td_colored">No type needed when variables are declared (Loose typing)</td>
  </tr>
  <tr>
   <td class="right_td_colored">Constructors are special methods</td>
   <td class="right_td_colored">Constructor is just a function;&nbsp; no distinction between function and constructor</td>
  </tr>
  <tr>
   <td class="left_td_colored">Class and instance are different entities</td>
   <td class="left_td_colored">Everything is object; constructor functions and prototypes are also object</td>
  </tr>
  <tr>
   <td class="right_td_colored">Static and instance members supported</td>
   <td class="right_td_colored">No direct static member support</td>
  </tr>
  <tr>
   <td class="left_td_colored">Abstract types supported with abstract classes and interfaces</td>
   <td class="left_td_colored">No direct abstract type support</td>
  </tr>
  <tr>
   <td class="right_td_colored">Good enough member scoping options; private, package, protected, public</td>
   <td class="right_td_colored">Only public members supported by language</td>
  </tr>
  <tr>
   <td class="left_td_colored">Rich inheritance mechanism</td>
   <td class="left_td_colored">Poor prototypal inheritance</td>
  </tr>
  <tr>
   <td class="right_td_colored">Method overloading and overriding possible</td>
   <td class="right_td_colored">No direct overloading and overriding support</td>
  </tr>
  <tr>
   <td class="left_td_colored">Rich reflection features</td>
   <td class="left_td_colored">Some reflection features</td>
  </tr>
  <tr>
   <td class="right_td_colored">Modularity with package support</td>
   <td class="right_td_colored">No direct package or module support</td>
  </tr>
 </tbody>
</table>
<div class="content">
        <div class="">
            <div>
                <div id="chapter-2" class="chapter-box">Section 3
                    <th-if-scroll relative-to="top" from="40" to="60" callback="activate($index)"></th-if-scroll>
                </div>
                <h2 class="chapter-title">Object Type Definition</h2>
            </div>
            <div class="col-md-12 content-html" dz-code-container>
                <h3>Type Definition</h3><p pid="40">Every function is also a type, and new instances of these functions can be created with the &quot;new&quot; operator. Function declaration can behave like a constructor, and in this case is called a Constructor Function. In constructor functions, prototype methods and fields can be accessed.</p><pre><code lang="text/x-java">function MyType(){
   if (!(this instanceof MyType))
        throw new Error(&quot;Constructor can't be called as a function&quot;);
}
var myInstance = new MyType();
MyType(); // Error: Constructor can't be called as a function
</code></pre><p pid="41">In Eclipse, object types can be easily inspected in the JavaScript perspective. Constructor, instance members, static members and inner functions are all separated in Outline View.</p><p pid="42"><img alt="Inspecting Object Types" class="fr-dii fr-fil" src="https://dzone.com/storage/rc-covers/12997-thumb.png" /></p><h3>Instance Members</h3><p pid="43">Instance members are accessed from instance objects which are created with the &quot;new&quot; operator. Instance members are created via &quot;this&quot; keyword, prototype, constructor closure or Object.defineProperty method.</p><pre><code lang="text/x-java">function Cat(name){
        var voice = &quot;Meow&quot;;
        this.name = name;
        this.say = function(){
                return voice;
}
}
Cat.prototype.eat = function(){
        return &quot;Eating&quot;;
}
var cat = new Cat(&quot;Fluffy&quot;);
Object.defineProperty(cat, &quot;numLegs&quot;,{value: 4,writable:true,enumerable:true,configurable:true});

console.log(cat.name); // Fluffy
console.log(cat.numLegs); // 4
console.log(cat.say()); // Meow
console.log(cat.eat()); // Eating
</code></pre><h3>Static Members</h3><p pid="44">There is no direct support for static members. Constructor functions are used to create static members. Static members can't be accessed with &quot;this&quot; keyword.</p><p pid="45"><strong>Public Static Members:</strong></p><pre><code lang="text/x-java">function Factory(){
}

// public static method
Factory.getType = function (){
return &quot;Object Factory&quot;;
};
// public static field
Factory.versionId = &quot;F2.0&quot;;

Factory.prototype.test = function(){
console.log(this.versionId); // undefined
console.log(Factory.versionId); // F2.0
console.log(Factory.getType()); // Object Factory
}

var factory = new Factory();
factory.test();
</code></pre><p pid="46"><strong>Private Static Members:</strong></p><pre><code lang="text/x-java">var Book = (function () {
        // private static field
        var numOfBooks = 0;

        // private static method
        function checkIsbn(isbn) {
                if (isbn.length != 10 &amp;&amp; isbn.length != 13) 
                        throw new Error(&quot;isbn is not valid!&quot;);
        }

        function Book(isbn, title) {
                checkIsbn(isbn);
                this.isbn = isbn;
                this.title = title;
                numOfBooks++;
                this.getNumOfBooks = function () {
                        return numOfBooks;
                }

        }
        return Book;
})();

var firstBook = new Book(&quot;0-943396-04-2&quot;, &quot;First Title&quot;);
console.log(firstBook.title); // First Title
console.log(firstBook.getNumOfBooks()); // 1
var secondBook = new Book(&quot;0-85131-041-9&quot;, &quot;Second Title&quot;);
console.log(firstBook.title); // First Title
console.log(secondBook.title); // Second Title
console.log(firstBook.getNumOfBooks()); // 2
console.log(secondBook.getNumOfBooks()); // 2</code></pre><h3>Abstract Types</h3><p pid="47">JavaScript is a loosely typed language, so you don't have to specify the variable type of a variable when you declare it and pass as an argument. This reduces the need for abstract types like interfaces. But abstract types may be needed to collect common functionality when inheritance is used.</p><pre><code lang="text/x-java">(function(){

var abstractCreateLock = false;
// abstract type
function BaseForm(){
        if(abstractCreateLock)
                throw new Error(&quot;Can't instantiate BaseForm!&quot;);
}
BaseForm.prototype = {};
BaseForm.prototype.post = function(){
        throw new Error(&quot;Not implemented!&quot;);
}

function GridForm(){
}

GridForm.prototype = new BaseForm();
abstractCreateLock = true;
GridForm.prototype.post = function(){
        // ...
        return &quot;Grid is posted.&quot;;
}

window.BaseForm = BaseForm;
window.GridForm = GridForm;

})();

var myGrid = new GridForm();
console.log(myGrid.post()); // Grid is posted.
var myForm = new BaseForm(); // Error: Can't instantiate BaseForm!</code></pre><h3>Interfaces</h3><p pid="48">There is no direct interface or virtual class support in JavaScript. It can be mimicked as below, leaving a method signature check:</p><pre><code lang="text/x-java">var Interface = function (name, methods) {
        this.name = name;
        // copies array
        this.methods = methods.slice(0);
};

Interface.checkImplements = function (obj, interfaceObj) {
        for (var i = 0; i &lt; interfaceObj.methods.length; i++) {
                var method = interfaceObj.methods[i];
                if (!obj[method] || typeof obj[method] !== &quot;function&quot;)
                        throw new Error(&quot;Interface not implemented! Interface: &quot; + interfaceObj.name + &quot; Method: &quot; + method);
        }
};
var iMaterial = new Interface(&quot;IMaterial&quot;, [&quot;getName&quot;, &quot;getPrice&quot;]);

function Product(name,price,type){ 
        Interface.checkImplements(this, iMaterial);
        this.name = name;
        this.price = price;
        this.type = type;
}

Product.prototype.getName = function(){
        return this.name;
};

Product.prototype.getPrice = function(){
        return this.price;
};

var firstCar = new Product(&quot;Super Car X11&quot;,20000,&quot;Car&quot;);
console.log(firstCar.getName()); // Super Car X11
delete Product.prototype.getPrice;
var secondCar = new Product(&quot;Super Car X12&quot;,30000,&quot;Car&quot;); // Error: Interface not implemented! Interface: IMaterial Method: getPrice</code></pre><h3>Singleton Objects</h3><pre><code lang="text/x-java">var Logger = {
        enabled:true,
        log: function(logText){
                if(!this.enabled)
                        return;
                if(console &amp;&amp; console.log)
                        console.log(logText);
                else
                        alert(logText);
        }
}

Or

function Logger(){
}
Logger.enabled = true;
Logger.log = function(logText){
        if(!Logger.enabled)
                return;
        if(console &amp;&amp; console.log)
                console.log(logText);
        else
                alert(logText);
};

Logger.log(&quot;test&quot;); // test
Logger.enabled = false; 
Logger.log(&quot;test&quot;); //</code></pre>
            </div>

            <div class="col-md-12 col-sm-12 col-xs-12 background-striped"></div>
        </div>
    </div>
    <div class="content">
        <div class="">
            <div>
                <div id="chapter-3" class="chapter-box">Section 4
                    <th-if-scroll relative-to="top" from="40" to="60" callback="activate($index)"></th-if-scroll>
                </div>
                <h2 class="chapter-title">Object Creation</h2>
            </div>
            <div class="col-md-12 content-html" dz-code-container>
                <h3>With &quot;new&quot; Operator</h3><p pid="49">Instances of built-in or user-defined object types can be created with the &quot;new&quot; operator. The &quot;new&quot; operator runs only with constructor functions. An already created object can't be used with &quot;new&quot; again. First, the &quot;new&quot; operator creates an empty object; then it calls the constructor function while assigning the newly created object as &quot;this&quot;. The constructor function runs with the given arguments, performing its coded initializations.</p><pre><code lang="text/x-java">//or var dog = {};
//or var dog = new MyDogType();
var dog = new Object();
dog.field1 = &quot;Scooby&quot;;
dog.owner = {};
dog.owner.name = &quot;Mike&quot;;
dog.bark = function(){
        return &quot;Woof&quot;;
};

console.log(dog.field1); // Scooby
console.log(dog.owner.name); // Mike 
console.log(dog.bark()); // Woof</code></pre><h3>With Object Literal</h3><p pid="50">It is very easy to create objects with object literal. It is also possible to create nested objects.</p><pre><code lang="text/x-java">var dog = {
        name:&quot;value1&quot;,
        owner:{
                name:&quot;Mike&quot;
        },
        bark:function(){
                return &quot;Woof&quot;;
        }
};

console.log(dog.name); // Scooby
console.log(dog.owner.name); // Mike 
console.log(dog.bark()); // Woof</code></pre>
            </div>

            <div class="col-md-12 col-sm-12 col-xs-12 background-striped"></div>
        </div>
    </div>
    <div class="content">
        <div class="">
            <div>
                <div id="chapter-4" class="chapter-box">Section 5
                    <th-if-scroll relative-to="top" from="40" to="60" callback="activate($index)"></th-if-scroll>
                </div>
                <h2 class="chapter-title">Member Scoping</h2>
            </div>
            <div class="col-md-12 content-html" dz-code-container>
                <h3>Private Fields</h3><p pid="51">In JavaScript, there is no built-in private field support. But this support can be achieved with constructor closures. Variables defined within a constructor function can be used as private fields. Any methods using private fields should be declared in the constructor function (note that prototype methods can't be declared in the constructor function and used with private fields). Private setter and getter functions should be declared in the constructor function.</p><pre><code lang="text/x-java">function Customer(){
        // private field
        var risk = 0;

        this.getRisk = function(){
                return risk;
        };
        this.setRisk = function(newRisk){
                risk = newRisk;
        };
        this.checkRisk = function(){
                if(risk &gt; 1000)
                        return &quot;Risk Warning&quot;;
                return &quot;No Risk&quot;;
        };
}

Customer.prototype.addOrder = function(orderAmount){
        this.setRisk(orderAmount + this.getRisk());
        return this.getRisk();
};

var customer = new Customer();

console.log(customer.getRisk()); // 0
console.log(customer.addOrder(2000)); // 2000
console.log(customer.checkRisk()); // Risk Warning</code></pre><h3>Private Methods</h3><p pid="52">Also called &quot;Nested&quot; or &quot;Inner Functions&quot;. Private methods are defined within another function and can't be accessed from outside. Private methods can be declared in any part of a function.</p><pre><code lang="text/x-java">function Customer(name){
        var that = this;
        var risk = 0;
        this.name = name;
        this.type = findType();
        // private method
        function findType() {
                console.log(that.name);
                console.log(risk);
                return &quot;GOLD&quot;;
        }
}

Or

function Customer(name){
        var that = this;
        var risk = 0; 
        this.name = name;
        // private method
        var findType = function() {
                console.log(that.name);
                console.log(risk);
                return &quot;GOLD&quot;;
        };
        this.type = findType();
}

var customer = new Customer(&quot;ABC Customer&quot;); // ABC Customer
                                       // 0
console.log(customer.type); // GOLD
console.log(customer.risk); // undefined</code></pre><p pid="53">If a private inner function is returned outside, its methods can be called from outside:</p><pre><code lang="text/x-java">function Outer(){
        return new Inner();

        //private inner
        function Inner(){
                this.sayHello = function(){
                        console.log(&quot;Hello&quot;);
                }
        }
}

(new Outer()).sayHello(); // Hello</code></pre><h3>Privileged Methods</h3><p pid="54">Prototype methods can't access private fields; everything attached to them is also &quot;public&quot;. We need a way to declare methods so that (a) they are accessible publicly and (b) they can access private members, which means privileged or protected access. For this purpose, the following code can be used:</p><pre><code lang="text/x-java">function Customer(orderAmount){
        // private field
        var cost = orderAmount / 2;
        this.orderAmount = orderAmount;
        var that = this;

        // privileged method
        this.calculateProfit = function(){
                return that.orderAmount - cost; 
        };
}

Customer.prototype.report = function(){
        console.log(this.calculateProfit());
};

var customer = new Customer(3000);
customer.report(); // 1500</code></pre><h3>Public Fields</h3><p pid="55">For public fields, prototype or instance can be used. Prototype fields and methods are shared by new instances. (Prototype objects are also shared). If a new instance changes the field or method in its object, the change is not reflected in other instances. To change all instances, we need to change it in the prototype object.</p><pre><code lang="text/x-java">function Customer(name,orderAmount){
        // public fields
        this.name = name;
        this.orderAmount = orderAmount;
}
Customer.prototype.type = &quot;NORMAL&quot;;

Customer.prototype.report = function(){
        console.log(this.name);
        console.log(this.orderAmount);
        console.log(this.type);
        console.log(this.country);
};

Customer.prototype.promoteType = function(){
        this.type = &quot;SILVER&quot;;
};

var customer1 = new Customer(&quot;Customer 1&quot;,10);
// public field
customer1.country = &quot;A Country&quot;;
customer1.report(); // Customer 1
                    // 10
                    // NORMAL
                    // A Country

var customer2 = new Customer(&quot;Customer 2&quot;,20);
customer2.promoteType();
console.log(customer2.type); // SILVER
console.log(customer1.type); // NORMAL

Public Methods
Prototype methods are public. Any methods attached to &quot;this&quot; are also public.
function Customer(){
        // public method
        this.shipOrder = function(shipAmount){
                return shipAmount;
        };
}
// public method
Customer.prototype.addOrder = function (orderAmount) {
        var totalOrder = 0;
        for(var i = 0; i &lt; arguments.length; i++) {
                totalOrder += arguments[i];
        }
        return totalOrder;
};

var customer = new Customer();
// public method
customer.findType = function(){
        return &quot;NORMAL&quot;;
};
console.log(customer.addOrder(25,75)); // 100
console.log(customer.shipOrder(50)); // 50
console.log(customer.findType()); // NORMAL</code></pre>
            </div>

            <div class="col-md-12 col-sm-12 col-xs-12 background-striped"></div>
        </div>
    </div>
    <div class="content">
        <div class="">
            <div>
                <div id="chapter-5" class="chapter-box">Section 6
                    <th-if-scroll relative-to="top" from="40" to="60" callback="activate($index)"></th-if-scroll>
                </div>
                <h2 class="chapter-title">Inheritance</h2>
            </div>
            <div class="col-md-12 content-html" dz-code-container>
                <p pid="56">There are different ways to implement inheritance in JavaScript. &quot;Prototypal Inheritance&quot;  using prototype as an inheritance mechanism  has many advantages. For example:</p><pre><code lang="text/x-java">function Parent(){
        var parentPrivate = &quot;parent private data&quot;;
        var that = this;
        this.parentMethodForPrivate = function(){
                return parentPrivate;
        }; 
        console.log(&quot;parent&quot;);
}
Parent.prototype = {
        parentData: &quot;parent data&quot;,
        parentMethod: function(arg){
                return &quot;parent method&quot;; 
        },
        overrideMethod: function(arg){
                return arg + &quot; overriden parent method&quot;; 
        }
}

function Child(){
// super constructor is not called, we have to invoke it
        Parent.call(this);
        console.log(this.parentData);
        var that = this;
        this.parentPrivate = function(){
                return that.parentMethodForPrivate();
        };
        console.log(&quot;child&quot;);
}

//inheritance
Child.prototype = new Parent();// parent
Child.prototype.constructor = Child;

//lets add extented functions
Child.prototype.extensionMethod = function(){
        return &quot;child's &quot; + this.parentData;
};

//override inherited functions
Child.prototype.overrideMethod = function(){
        //parent's method is called
        return &quot;Invoking from child&quot; + Parent.prototype.overrideMethod.call(this, &quot; test&quot;);
}

var child = new Child();// parent
                // parent data 
                // child
console.log(child.extensionMethod()); //child's parent data
console.log(child.parentData); //parent data
console.log(child.parentMethod()); //parent method
console.log(child.overrideMethod()); //Invoking from child test overriden parent method
console.log(child.parentPrivate()); // parent private data

console.log(child instanceof Parent); //true
console.log(child instanceof Child); //true</code></pre><p pid="57">When a member of child object is accessed, it is searched from the object's members. If it is not found there, then it is searched in its prototype object. If it is not found there, then it is searched in the parent object's members and prototype. It is searched up to the Object's prototype. This hierarchy is also called the &quot;Prototype chain&quot;. The following diagram illustrates the chain:</p><p pid="58"><img alt="inheritance" class="fr-dii fr-fil" src="https://dzone.com/storage/rc-covers/12998-thumb.png" /></p>
            </div>

            <div class="col-md-12 col-sm-12 col-xs-12 background-striped"></div>
        </div>
    </div>
    <div class="content">
        <div class="">
            <div>
                <div id="chapter-6" class="chapter-box">Section 7
                    <th-if-scroll relative-to="top" from="40" to="60" callback="activate($index)"></th-if-scroll>
                </div>
                <h2 class="chapter-title">Modularization</h2>
            </div>
            <div class="col-md-12 content-html" dz-code-container>
                <p pid="59">Once we have many custom object types, we need to group them and manage their visibility, dependencies, and loading. &quot;Namespace and Module Pattern&quot; can be used to handle these tasks. (Note that EcmaScript version 6 (Harmony) is beginning to develop a full-fledged module system. Until it is implemented by browsers, there are some useful libraries to facilitate these features.)</p><h3>Namespaces</h3><p pid="60">There is no direct namespace support in JavaScript. We can create namespace via objects and fill our object types in object properties:</p><pre><code lang="text/x-java">//create namespace
var myLib = {};
myLib.myPackage = {};

//Register types to namespace
myLib.myPackage.MyType1 = MyType1;
myLib.myPackage.MyType2 = MyType2;</code></pre><h3>Modules</h3><p pid="61">Modules are a way of dividing our JavaScript code-base into packages. Modules export some object type definitions and import other modules. The module system loads each module and its dependencies. First it runs the dependencies in appropriate order; then the module code is executed. Some libraries can be used for this purpose.</p><p pid="62">In modules, we define new types, import some types from other modules and export our public types. Here is an example of a module definition:</p><pre><code lang="text/x-java">Module.define(&quot;module1.js&quot;,[&quot;dependent_module1.js&quot;,&quot;dependent_module2.js&quot;,...], function(dependentMod1, dependentMod2) { //IMPORTS

//TYPE DEFINITIONS
function ExportedType1(){
        // use of dependent module's types
        var dependentType = new dependentMod1.DependentType1();
        ...
}
function ExportedType2(){
}
...

// EXPORTS
return { ExportedType1: ExportedType1, ExportedType2: ExportedType2,...};

});</code></pre><p pid="63">To use a module (can work asynchronously or synchronously):</p><pre><code lang="text/x-java">Module.use([&quot;module1.js&quot;], function(aModule){
        console.log(&quot;Loaded aModule!&quot;);
        var AType = aModule.AnExportedType;
        var atype1Instance = new AType();
});</code></pre>
            </div>

            <div class="col-md-12 col-sm-12 col-xs-12 background-striped"></div>
        </div>
    </div>
    <div class="content">
        <div class="">
            <div>
                <div id="chapter-7" class="chapter-box">Section 8
                    <th-if-scroll relative-to="top" from="40" to="60" callback="activate($index)"></th-if-scroll>
                </div>
                <h2 class="chapter-title">Custom Exceptions</h2>
            </div>
            <div class="col-md-12 content-html" dz-code-container>
                <p pid="64">In JavaScript, there are built-in exceptions like Error, TypeError and SyntaxError which may be created and thrown during runtime. Every exception is &quot;unchecked&quot;. An ordinary object can be used as an exception with throw statement. Thus, we can create our own custom exceptions and throw and catch them. It is good practice to write exceptions that extend JavaScript's standard Error object.</p><pre><code lang="text/x-java">function BaseException() {
}
BaseException.prototype = new Error();
BaseException.prototype.constructor = BaseException;

BaseException.prototype.toString = function(){
        // note that name and message are properties of Error
        return this.name + &quot;: &quot; + this.message;
};

function NegativeNumberException(value) {
        this.name = &quot;NegativeNumberException&quot;;
        this.message = &quot;Negative number! Value: &quot; + value;
}
NegativeNumberException.prototype = new BaseException();
NegativeNumberException.prototype.constructor = NegativeNumberException;

function EmptyInputException() {
        this.name = &quot;EmptyInputException&quot;;
        this.message = &quot;Empty input!&quot;;
}
EmptyInputException.prototype = new BaseException();
EmptyInputException.prototype.constructor = EmptyInputException;

var InputValidator = (function(){

var InputValidator = {};
InputValidator.validate = function(data){
        var validations = [validateNotNegative,validateNotEmpty];
        for(var i = 0; i &lt; validations.length; i++){
                try {
                        validations[i](data);
                }
                catch (e) {
                        if (e instanceof NegativeNumberException) {
                                //re-throw
                                throw e;
                        }
                        else if (e instanceof EmptyInputException) {
                                // tolerate it
                                data = &quot;0&quot;;
                        }
                }
        }
};
return InputValidator;

function validateNotNegative(data){
                if (data &lt; 0)
                        throw new NegativeNumberException(data);
}
function validateNotEmpty(data){
                if (data == &quot;&quot; || data.trim() == &quot;&quot;)
                        throw new EmptyInputException();
}

})();

try{
        InputValidator.validate(&quot;-1&quot;);
}
catch(e){
        console.log(e.toString()); // NegativeNumberException: Negative number! Value: -1
}
finally{
        console.log(&quot;Validation is done.&quot;); // Validation is done.
}</code></pre>
            </div>

            <div class="col-md-12 col-sm-12 col-xs-12 background-striped"></div>
        </div>
    </div>
    <div class="content">
        <div class="">
            <div>
                <div id="chapter-8" class="chapter-box">Section 9
                    <th-if-scroll relative-to="top" from="40" to="60" callback="activate($index)"></th-if-scroll>
                </div>
                <h2 class="chapter-title">Custom Events</h2>
            </div>
            <div class="col-md-12 content-html" dz-code-container>
                <p pid="65">Custom events reduce code complexity and decrease coupling of objects. Here is a typical event pattern:</p><pre><code lang="text/x-java">function EventManager(){
}
var listeners = {};

EventManager.fireEvent = function(eventName, eventProperties) {
        if (!listeners[eventName]) 
                return;

        for (var i = 0; i &lt; listeners[eventName].length; i++) {
                listeners[eventName][i](eventProperties);
        }
};

EventManager.addListener = function(eventName, callback) {
        if (!listeners[eventName]) 
                listeners[eventName] = [];
        listeners[eventName].push(callback);
};

EventManager.removeListener = function(eventName, callback) {
        if (!listeners[eventName]) 
                return;
        for (var i = 0; i &lt; listeners[eventName].length; i++) {
                if (listeners[eventName][i] == callback) {
                        delete listeners[eventName][i];
                        return;
                }
        }
};

EventManager.addListener(&quot;popupSelected&quot;, function(props){
        console.log(&quot;Invoked popupSelected event: &quot; + props.itemID);
});

EventManager.fireEvent(&quot;popupSelected&quot;, {itemID:&quot;100&quot;}); // Invoked popupSelected event: 100</code></pre>
            </div>

            <div class="col-md-12 col-sm-12 col-xs-12 background-striped"></div>
        </div>
    </div>
    <div class="content">
        <div class="">
            <div>
                <div id="chapter-9" class="chapter-box">Section 10
                    <th-if-scroll relative-to="top" from="40" to="60" callback="activate($index)"></th-if-scroll>
                </div>
                <h2 class="chapter-title">Writing Components</h2>
            </div>
            <div class="col-md-12 content-html" dz-code-container>
                <p pid="66">JavaScript lets developers add new behaviors to HTML elements. These enrichments can be combined in a component structure. There is a continuing specification work by the W3C on &quot;Web Components&quot;. Here is a commonly used pattern to bind JavaScript objects to DOM objects. In this way, we can collect behaviors and manage their lifecycles.</p><p pid="67"><strong>1- Define JavaScript Component:</strong></p><pre><code lang="text/x-java">function InputTextNumberComponent(domElement){
        this.initialize(domElement);
}

InputTextNumberComponent.prototype.initialize = function(domElement){
        domElement.onchange = function(){
                //just a format
                domElement.value = &quot;-&quot; + domElement.value + &quot;-&quot;;
        };
domElement.jsComponent = this; //Expando property
        this.domElement = domElement;
};

InputTextNumberComponent.prototype.resetValue = function(){
        this.domElement.value = &quot;&quot;;
};</code></pre><p pid="68"><strong>2- Define CSS Class to Correlate HTML Elements with JavaScript Components:</strong></p><pre><code lang="text/x-java">&lt;style type=&quot;text/css&quot;&gt;
.inputTextNumber { text-align:right; }
&lt;/style&gt;</code></pre><p pid="69">HTML element should be as follows:</p><pre><code lang="text/x-java">&lt;input type=&quot;text&quot; class=&quot;inputTxtNumber&quot; name=&quot;NumberField&quot; size=&quot;10&quot; value=&quot;Click me!&quot; onClick=&quot;this.jsComponent.resetValue()&quot;&gt;</code></pre><p pid="70"><strong>3- When page is loaded (or DOM ready), detect HTML elements and create components:</strong></p><pre><code lang="text/x-java">window.onload = function(){
        var inputTextNumbers = document.getElementsByClassName(&quot;inputTextNumber&quot;);
        for(var i = 0; i &lt; inputTextNumbers.length; i++){
                var myComp = new InputTextNumberComponent(inputTextNumbers.item(i));
        }
};</code></pre>
            </div>

            <div class="col-md-12 col-sm-12 col-xs-12 background-striped"></div>
        </div>
    </div>
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>10 Lodash Features You Can Replace with ES6</h1>
		<div class="post-wrapper">
			
			<p><a href="https://lodash.com/">Lodash</a> is the <a href="https://www.npmjs.com/browse/depended">most depended on npm package</a>
 right now, but if youre using ES6, you might not actually need it. In 
this article, were going to look at using native collection methods 
with arrow functions and other new ES6 features to help us cut corners 
around many popular use cases.</p>

<h2>1. Map, Filter, Reduce</h2>

<p>These collection methods make transforming data a breeze and with 
near universal support, we can pair them with arrow functions to help us
 write terse alternatives to the implementations offered by Lodash.</p>

<pre><code>_.map([1, 2, 3], function(n) { return n * 3; });
// [3, 6, 9]
_.reduce([1, 2, 3], function(total, n) { return total + n; }, 0);
// 6
_.filter([1, 2, 3], function(n) { return n &lt;= 2; });
// [1, 2]

// becomes

[1, 2, 3].map(n =&gt; n * 3);
[1, 2, 3].reduce((total, n) =&gt; total + n);
[1, 2, 3].filter(n =&gt; n &lt;= 2);
</code></pre>

<p>It doesnt stop here either, if were using an ES6 polyfill, we can also use <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find">find</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some">some</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/every">every</a> and <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduceRight">reduceRight</a> too.</p>

<h2>2. Head &amp; Tail</h2>

<p><a href="https://www.sitepoint.com/preparing-ecmascript-6-destructuring-assignment/">Destructuring syntax</a> allows us to get the head and tail of a list without utility functions.</p>

<pre><code>_.head([1, 2, 3]);
// 1
_.tail([1, 2, 3]);
// [2, 3]

// becomes

const [head, ...tail] = [1, 2, 3];
</code></pre>

<p>Its also possible to get the initial elements and the last element in a similar way.</p>

<pre><code>_.initial([1, 2, 3]);
// -&gt; [1, 2]
_.last([1, 2, 3]);
// 3

// becomes

const [last, ...initial] = [1, 2, 3].reverse();
</code></pre>

<p>If you find it annoying that <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reverse">reverse</a> mutates the data structure, then you can use the spread operator to clone the array before calling reverse.</p>

<pre><code>const xs = [1, 2, 3];
const [last, ...initial] = [...xs].reverse();
</code></pre>

<h2>3. Rest &amp; Spread</h2>

<p>The <a href="https://lodash.com/docs#rest">rest</a> and <a href="https://lodash.com/docs#spread">spread</a>
 functions allow us to define and invoke functions that accept a 
variable number of arguments. ES6 introduced dedicated syntaxes for both
 of these operations.</p>

<pre><code>var say = _.rest(function(what, names) {
  var last = _.last(names);
  var initial = _.initial(names);
  var finalSeparator = (_.size(names) &gt; 1 ? ', &amp; ' : '');
  return what + ' ' + initial.join(', ') +
    finalSeparator + _.last(names);
});

say('hello', 'fred', 'barney', 'pebbles');
// "hello fred, barney, &amp; pebbles"

// becomes

const say = (what, ...names) =&gt; {
  const [last, ...initial] = names.reverse();
  const finalSeparator = (names.length &gt; 1 ? ', &amp;' : '');
  return `${what} ${initial.join(', ')} ${finalSeparator} ${last}`;
};

say('hello', 'fred', 'barney', 'pebbles');
// "hello fred, barney, &amp; pebbles"
</code></pre>

<h2>4. Curry</h2>

<p>Without a higher level language such as <a href="http://www.typescriptlang.org/">TypeScript</a> or <a href="http://flowtype.org/">Flow</a>, we cant give our functions type signatures which makes <a href="https://www.sitepoint.com/currying-in-functional-javascript/">currying</a>
 quite difficult. When we receive curried functions its hard to know 
how many arguments have already been supplied and which we will need to 
provide next. With arrow functions we can define curried functions 
explicitly, making them easier to understand for other programmers.</p>

<pre><code>function add(a, b) {
  return a + b;
}
var curriedAdd = _.curry(add);
var add2 = curriedAdd(2);
add2(1);
// 3

// becomes

const add = a =&gt; b =&gt; a + b;
const add2 = add(2);
add2(1);
// 3
</code></pre>

<p>These explicitly curried arrow functions are particularly important for debugging.</p>

<pre><code>var lodashAdd = _.curry(function(a, b) {
  return a + b;
});
var add3 = lodashAdd(3);
console.log(add3.length)
// 0
console.log(add3);
//function wrapper() {
//  var length = arguments.length,
//  args = Array(length),
//  index = length;
//
//  while (index--) {
//    args[index] = arguments[index];
//  }

// becomes

const es6Add = a =&gt; b =&gt; a + b;
const add3 = es6Add(3);
console.log(add3.length);
// 1
console.log(add3);
// function b =&gt; a + b
</code></pre>

<p>If were using a functional library like <a href="https://github.com/lodash/lodash/wiki/FP-Guide">lodash/fp</a> or <a href="http://ramdajs.com/">ramda</a> then we can also use arrows to remove the need for the auto-curry style.</p>

<pre><code>_.map(_.prop('name'))(people);

// becomes

people.map(person =&gt; person.name);
</code></pre>

<h2>5. Partial</h2>

<p>Like with currying, we can use arrow functions to make partial application easy and explicit.</p>

<pre><code>var greet = function(greeting, name) {
  return greeting + ' ' + name;
};

var sayHelloTo = _.partial(greet, 'hello');
sayHelloTo('fred');
// "hello fred"

// becomes

const sayHelloTo = name =&gt; greet('hello', name);
sayHelloTo('fred');
// "hello fred"
</code></pre>

<p>Its also possible to use rest parameters with the spread operator to partially apply variadic functions.</p>

<pre><code>const sayHelloTo = (name, ...args) =&gt; greet('hello', name, ...args);
sayHelloTo('fred', 1, 2, 3);
// "hello fred"
</code></pre>

<h2>6. Operators</h2>

<p>Lodash comes with a number of functions that reimplement syntactical 
operators as functions, so that they can be passed to collection 
methods.</p>

<p>In most cases, arrow functions make them simple and short enough that we can define them inline instead.</p>

<pre><code>_.eq(3, 3);
// true
_.add(10, 1);
// 11
_.map([1, 2, 3], function(n) {
  return _.multiply(n, 10);
});
// [10, 20, 30]
_.reduce([1, 2, 3], _.add);
// 6

// becomes

3 === 3
10 + 1
[1, 2, 3].map(n =&gt; n * 10);
[1, 2, 3].reduce((total, n) =&gt; total + n);
</code></pre>

<h2>7. Paths</h2>

<p>Many of Lodashs functions take paths as strings or arrays. We can use arrow functions to create more reusable paths instead.</p>

<pre><code>var object = { 'a': [{ 'b': { 'c': 3 } }, 4] };

_.at(object, ['a[0].b.c', 'a[1]']);
// [3, 4]
_.at(['a', 'b', 'c'], 0, 2);
// ['a', 'c']

// becomes

[
  obj =&gt; obj.a[0].b.c,
  obj =&gt; obj.a[1]
].map(path =&gt; path(object));

[
  arr =&gt; arr[0],
  arr =&gt; arr[2]
].map(path =&gt; path(['a', 'b', 'c']));
</code></pre>

<p>Because these paths are just functions, we can compose them too.</p>

<pre><code>const getFirstPerson = people =&gt; people[0];
const getPostCode = person =&gt; person.address.postcode;
const getFirstPostCode = people =&gt; getPostCode(getFirstPerson(people));
</code></pre>

<p>We can even make higher order paths that accept parameters.</p>

<pre><code>const getFirstNPeople = n =&gt; people =&gt; people.slice(0, n);

const getFirst5People = getFirstNPeople(5);
const getFirst5PostCodes = people =&gt; getFirst5People(people).map(getPostCode);
</code></pre>

<h2>8. Pick</h2>

<p>The <a href="https://lodash.com/docs#pick">pick</a> utility allows us
 to select the properties we want from a target object. We can achieve 
the same results using destructuring and shorthand object literals.</p>

<pre><code>var object = { 'a': 1, 'b': '2', 'c': 3 };

return _.pick(object, ['a', 'c']);
// { a: 1, c: 3 }

// becomes

const { a, c } = { a: 1, b: 2, c: 3 };

return { a, c };
</code></pre>

<h2>9. Constant, Identity, Noop</h2>

<p>Lodash provides some utilities for creating simple functions with a specific behaviour.</p>

<pre><code>_.constant({ 'a': 1 })();
// { a: 1 }
_.identity({ user: 'fred' });
// { user: 'fred' }
_.noop();
// undefined
</code></pre>

<p>We can define all of these functions inline using arrows.</p>

<pre><code>const constant = x =&gt; () =&gt; x;
const identity = x =&gt; x;
const noop = () =&gt; undefined;
</code></pre>

<p>Or we could rewrite the example above as:</p>

<pre><code>(() =&gt; ({ a: 1 }))();
// { a: 1 }
(x =&gt; x)({ user: 'fred' });
// { user: 'fred' }
(() =&gt; undefined)();
// undefined
</code></pre>

<h2>10. Chaining &amp; Flow</h2>

<p>Lodash provides some functions for helping us write chained 
statements. In many cases the built-in collection methods return an 
array instance that can be directly chained, but in some cases where the
 method mutates the collection, this isnt possible.</p>

<p>However, we can define the same transformations as an array of arrow functions.</p>

<pre><code>_([1, 2, 3])
 .tap(function(array) {
   // Mutate input array.
   array.pop();
 })
 .reverse()
 .value();
// [2, 1]

// becomes

const pipeline = [
  array =&gt; { array.pop(); return array; },
  array =&gt; array.reverse()
];

pipeline.reduce((xs, f) =&gt; f(xs), [1, 2, 3]);
</code></pre>

<p>This way, we dont even have to think about the difference between <a href="https://lodash.com/docs#tap">tap</a> and <a href="https://lodash.com/docs#thru">thru</a>. Wrapping this reduction in a utility function makes a great general purpose tool.</p>

<pre><code>const pipe = functions =&gt; data =&gt; {
  return functions.reduce(
    (value, func) =&gt; func(value),
    data
  );
};

const pipeline = pipe([
  x =&gt; x * 2,
  x =&gt; x / 3,
  x =&gt; x &gt; 5,
  b =&gt; !b
]);

pipeline(5);
// true
pipeline(20);
// false
</code></pre>

<h2>Conclusion</h2>

<p>Lodash is still a great library and this article only offers a fresh 
perspective on how the evolved version of JavaScript is allowing us to 
solve some problems in situations where we would have previously relied 
on utility modules.</p>

<p>Dont disregard it, but insteadnext time you reach for an abstractionthink about whether a simple function would do instead!</p>
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>Promises: All The Wrong Ways</h1>
		<div class="post-wrapper">
<p>If youre not well-versed on JavaScript Promises yet, I urge you to <a href="https://blog.getify.com/promises-part-1/">read up</a> on <a href="https://github.com/getify/You-Dont-Know-JS/blob/master/async%20&amp;%20performance/ch3.md">them</a> before diving into this article.</p>

<p>Promises are the <em>promise</em> of a vastly improved asynchrony 
over our previous primitives (notably: callbacks). By abstracting a 
potentially future value so that it can be treated as time-independent 
 we dont have to care if the value is still pending or already 
finalized  we remove <strong>time</strong> from our concerns, making our programs far easier to reason about.</p>

<p>But Im not writing to convince you to use promises. Nor am I writing to convince you <em>not</em>
 to use them. I simply want to call out some ways promises are being 
used in the wild that I think miss the point, muddy up your code, and 
dilute the benefits of using them in the first place.</p>

<h3>False Start</h3>

<p>You use some lib that has a function called <code>foo()</code>, and 
supposedly when you call it, you get a promise back. But exactly what 
flavor of promise is it? Your app uses Bluebird promises because you 
love those extra API methods, but do you know what kind of promise this 
other <code>foo()</code> function is going to give you? Are you even sure its a reliably Promises/A+ compliant promise?</p>

<p>How much can you really trust that the promise youre getting is the 
promise you think youre getting? And what if you are using different 
libraries that each have their own flavor of promises returned? How are 
you managing the mixing of all these promises in your code?</p>

<p>The plain fact, which is inconvenient and troubling, is this: this code is a bad anti-pattern:</p>

<pre>foo()
.then( nextStep )
..
</pre>

<p>You need to normalize the promise youre receiving back to make sure its a legitimate promise and of the flavor you assume.</p>

<p>Fortunately, this is relatively easy, if not a teeny bit tedious. Use <code>Promise.resolve(..)</code>
  or whatever the equivalent is for your promise library of choice  to
 normalize the returned value into a promise you recognize and trust:</p>

<pre>Promise.resolve( foo() )
.then( nextStep )
..
</pre>

<p>If <code>foo()</code> returns a promise that is the same as you are expecting, itll pass through <code>Promise.resolve(..)</code> untouched. Otherwise, itll be adapted so that the return of <code>Promise.resolve(..)</code> <em>is</em> a promise you recognize and trust.</p>

<p>But wait does that mean we have to wrap every single promise we get? Eh, not exactly.</p>

<p>The <code>then(..)</code> method automatically does this same sort of
 normalizing on any return value it receives back from either the 
fulfillment or rejection handlers.</p>

<pre>Promise.resolve( foo() )
.then( bar )
.then( lastStep );
</pre>

<p>Even if <code>bar()</code> produces a different kind of promise, that promise is subsumed by <code>then(..)</code>  the <code>then(..)</code> that comes from the kind of promise we want, via <code>Promise.resolve(..)</code>  meaning that the normalization is automatically implied as wed want.</p>

<p>So its really only the beginning of the promise chain that we need 
to be more careful with. We need to make sure to normalize all 
first-of-chain promises, just in case.</p>

<h4>Start Delays</h4>

<p>Speaking of the start of a promise chain, another mistake thats 
often made is adding unnecessary promise resolution steps. For example:</p>

<pre>Promise.resolve()
.then( firstStep );
</pre>

<p>Why would we do this? The first reason is that it automatically normalizes <code>firstStep()</code>s returned value/promise, as just described. The second well cover in the next section.</p>

<p>But instead of calling <code>firstStep()</code> right away, here 
itll be delayed until the end of the event-loop tick. Is that really a 
big deal? Usually not, but when you do this over and over again, those 
delays <em>can</em> add up.</p>

<p>Dont put an extra empty tick at the beginning of your promise chain. Just start the chain right away.</p>

<p>And while were discussing it, dont do this either:</p>

<pre>new Promise( function(resolve,reject){
  firstStep()
  .then( resolve, reject );
} )
..
</pre>

<p>You may think thatd be obnoxious and obviously bad, but its more common than youd realize and really shouldnt be done.</p>

<h4>Failing To Start</h4>

<p>What if theres any case where <code>firstStep()</code> being called could result directly in a synchronous exception  not a rejected promise?</p>

<p>Most people think such method behavior shouldnt ever be designed  
indeed, many would call such a function an anti-pattern in and of itself
  but this post isnt about bad patterns with API design, its about 
bad practices with using the promises you get.</p>

<p>The fact is, some functions of this sort do exist. If you have to 
deal with one, youre probably going to want trap such an exception and 
turn it into a promise rejection that can be dealt with in the 
normalized promise chain.</p>

<p>You might consider doing something manual like this:</p>

<pre>var p;

try {
  p = Promise.resolve( firstStep() );
}
catch (err) {
  p = Promise.reject( err );
}

p
.then( .. )
..
</pre>

<p>We not only normalize the return value to the desired promise flavor with <code>Promise.resolve(..)</code>, but the <code>try..catch</code>
 also normalizes any caught exception into the rejection. Thats 
effective, but ugly, and this codes verbosity doesnt actually 
contribute to easier understanding, IMO.</p>

<p>This concern is where two earlier-mentioned patterns probably originated from:</p>

<pre>Promise.resolve()
.then( firstStep )
..

// and:

new Promise( function(resolve,reject){
  firstStep()
  .then( resolve, reject );
} )
..
</pre>

<p>In both cases, if <code>firstStep()</code> results in an exception, 
it will automatically be caught by the Promise machinery, and turned 
into a promise rejection that the rest of the chain can articulate 
handling for.</p>

<p>But I think a cleaner way of doing this is to use an <a href="https://blog.getify.com/not-awaiting-1/"><code>async function</code></a>, specifically in its <code>=&gt;</code> arrow-function IIFE form:</p>

<pre>async _=&gt;firstStep()()
.then( .. )
..
</pre>

<p><strong>Note:</strong> <code>async function</code>s are a proposed 
addition to the JS standard, but have not officially landed. They are 
experimentally implemented in several major browsers, but as with all 
recent JS changes, youll likely be transpiling them, which is fully 
supported by Babel and others.</p>

<p>The <code>async function</code> normalizes whatever comes back from the <code>firstStep()</code> function call into a promise, including catching any exception and turning it into a promise rejection.</p>

<p>The small caveat here, different from using <code>Promise.resolve(..)</code> manually, is that the promise coming back from an <code>async function</code> is going to be a built-in native Promise, not some custom extended flavor. Use an additional <code>Promise.resolve(..)</code> or equivalent to cast it into a promise youre happy with.</p>

<h3>Deconstruction</h3>

<p>When you construct a promise manually, the initialization function 
you pass to the constructor receives the capabilities for resolving that
 promise:</p>

<pre>var pr = new Promise( function init(resolve,reject){
  // call `resolve()` to fulfill the promise
  // or call `reject()` to reject it
} );
</pre>

<p>By convention, we usually call those functions <code>resolve()</code> and <code>reject()</code>.</p>

<p>Back before the standard for promises was finalized, there was a 
notion of these two capabilities  referred to collectively at the time 
as the <strong>deferred</strong>  being separately created from the promise they controlled.</p>

<p>Imagine creating a promise more like this:</p>

<pre>var [ pr, def ] = new Promise();

// call `def.resolve()` to fulfill the promise
// or call `def.reject()` to reject it
</pre>

<p><strong>Note:</strong> FYI: <code>[pr,def] = ..</code> is utilizing the new <a href="https://github.com/getify/You-Dont-Know-JS/blob/master/es6%20&amp;%20beyond/ch2.md#destructuring">ES6 destructuring syntax</a>, specifically <strong>array destructuring</strong>.</p>

<p>Having the promise and the deferred separated can seem quite useful 
in certain cases if the code that is doing this construction needs to 
transfer the resolution capabilities (deferred) to one part of the code 
and the observation capabilities (the promise) to another.</p>

<p>For example:</p>

<pre>var [ pr, def ] = new Promise();

// later:

setupEvent( def.resolve, def.reject );

// even later:

handleEvent( pr );
</pre>

<p>Essentially, this approach treates a promise like a single-value 
event conduit. One part of the app holds the write end of the pipe, 
the <strong>deferred</strong>. Another part of the app holds the read end, the promise.</p>

<p>Though the Promise API doesnt work like this, it is possible to emulate, by <strong>extracting the resolution capabilities</strong>:</p>

<pre>function makePromise() {
  var def = {};
  var pr = new Promise( function init(resolve,reject){
    def.resolve = resolve;
    def.reject = reject;
  } );
  return [ pr, def ];
}

var [ pr, def ] = makePromise();
</pre>

<p>As you can see, we extract the <code>resolve()</code> and <code>reject()</code> capabilities from the promise initialization function storing them on <code>def</code>, then return both <code>pr</code> and <code>def</code> to the calling code.</p>

<p>Undeniably, there are cases where this is quite convenient. Ive done this many times myself.</p>

<p>But I will assert that its an anti-pattern and that you should try 
to avoid it. At a minimum, if you have to do so, you should be hiding 
that kind of trick inside the plumbing of a library, not exposing the 
deferred and promise separately at the top level of logic in your 
application.</p>

<p>If you agree with me that promise resolution extraction smells a 
little hackish, its because IMO were abusing a promise to act like a 
different kind of abstraction (that is already more well understood).</p>

<h4>Abstractions For Value Communication</h4>

<p>One way to envision this alternate, more well-suited abstraction is as an Event Emitter:</p>

<pre>var evt = new EventEmitter();

// later:

setupEvent( evt );

// even later:

handleEvent( evt );
</pre>

<p>Inside <code>setupEvent(..)</code>, we use <code>evt</code> to call <code>evt.emit(..)</code> to set an event of some name, and optionally pass along any data with that event. Inside <code>handleEvent(..)</code>, we call something like <code>evt.once(..)</code> to set up a single-occurring event listener for that pre-agreed event name.</p>

<p>Either with promises (as shown earlier) or these Event Emitter events, we use a <strong>push</strong> model for communicating the value at the appropriate future time.</p>

<p>But another way to abstract this problem is with a <strong>pull</strong>
 model. In other words, instead of the producer pushing the value once 
its ready, the consumer pulls the value when its ready to handle it.</p>

<p>In my <a href="https://github.com/getify/asynquence">asynquence</a> 
library, I have an abstraction called iterable sequences, which is 
basically like an queue. You can add new handlers to the queue by 
calling <code>then(..)</code>, and then iterate through the queue using the standard <code>next()</code> iterator interface.</p>

<p>For example:</p>

<pre>var isq = ASQ.iterable();

isq
  .then( function(val){
    return val * 2;
  } )
  .then( function(val){
    return !!val;
  } )
  .then( function(val){
    return val.toUpperCase();
  } );

isq.next( 21 );       // { value: 42, done: false }
isq.next( false );    // { value: true, done: false }
isq.next( "hello" );  // { value: "HELLO", done: false }
isq.next();           // { done: true }
</pre>

<p>An <em>iterable sequence</em> is a different kind of abstraction that
 encapsulates both the resolution and observation capabilities into a 
single interface. We pass around that single abstraction wrapper instead
 of splitting up the promise and the deferred.</p>

<p><strong>Note:</strong> By the way, thats similar in nature to <a href="http://reactivex.io/documentation/subject.html"><em>Observable Subject</em>s</a>.</p>

<p>Aside from custom library abstractions, we can use already built-in parts of JavaScript to create a <strong>pull</strong> abstraction directly. A generator can create a producer iterator:</p>

<pre>function *setupProducer() {
  var pr = new Promise(function(resolve,reject){
    setupEvent( resolve, reject );
  });
  yield pr;
}

var producer = setupProducer();
</pre>

<p>Whats going on here? We want an iterator that when we call <code>next()</code>
 on it, well get back a value. But when we pull it, that value might 
not be ready yet. So instead, we yield a promise for that single next 
value that the producer will eventually produce. So the consumer is <strong>pulling</strong> (iterating) out each <strong>push</strong> instance (promise).</p>

<p>Why is that different from the earlier promise capability extraction I
 called an anti-pattern? Because were not tracking the promise and its 
paired deferred separately at the top level of logic; weve hidden those
 as implementation details inside the <code>setupProducer()</code> generator.</p>

<p>What we instead pass around is the wrapper around this capability: <code>producer</code>,
 which is an iterator. Thats a better abstraction that makes code 
easier to reason about. Tracking promises and their deferred 
capabilities separately is much harder to reason about in complex 
applications.</p>

<p><strong>Note:</strong> The other advantage, though hard to see in 
this snippet, is that our generator/iterator could produce a new promise
 for each pull request, so we can use this conduit for communicating 
multiple values, instead of just once when theres only a single promise
 involved. We get a new promise for each value.</p>

<p>Heres how we later <strong>pull</strong> a value:</p>

<pre>var pr = producer.next();

pr.then( function(value){
  // ..
} );
</pre>

<p>We call <code>next()</code> on our <code>producer</code> iterator, and we get out a promise, that we can then listen to.</p>

<p>By the way, this notion of a generator that produces promises is not my own invention. Theres currently <a href="https://github.com/tc39/proposal-async-iteration#asynchronous-iterators-for-ecmascript">a proposal to add a new primitive</a>
 to JavaScript called an async generator. It basically does what I 
just sketched out: it gives an iterator that returns a new promise each 
time it is <code>next()</code> iterated.</p>

<p>These various abstractions are far better suited for modeling the 
transmission of a value asynchronously from one part of the application 
to another. Promises have to be twisted and contorted to serve that 
purpose.</p>

<p>Dont do it just because you <em>can</em> do it. Promises shouldnt be used that way, at least not visibly to your main application code.</p>

<h3>Promise Side-Effects</h3>

<p>Promises are, at their most core, a model for values. The fact that 
we use functions with the Promise API as the vehicle for unwrapping 
those values is an unfortunate temptation trap we can too easily fall 
into.</p>

<p>Functional programming practices implore us to rely on value 
immutability for easier to reason about code, as well as using functions
 without side-effects (aka, pure). But its all too common that promises
 are used in very non-FP-friendly ways. Specifically, its far too 
common to either create or rely on side-effects with the functions 
passed to promise methods.</p>

<p>The first kind of common side-effect is relative sequencing between multiple promises.</p>

<p>Consider:</p>

<pre>firstStep()
.then( secondStep )
.then( function(){
  console.log( "two" );
} );

firstStep()
.then( function(){
  console.log( "one" );
} );
</pre>

<p>What order do you think those two console messages are printed? 
Almost certainly in one, two order, right? Almost. Its actually 
possible that the second invocation of the <code>firstStep()</code> function will produce a promise that isnt resolved until after the <code>secondStep()</code> promise is finished, resulting in two, one order.</p>

<p>If you author code like this, what youre saying is, I believe I can
 predict the relative ordering of asynchronous activity, and rely on 
that for my application. Unfortunately, youre the only one; noone else
 who reads your code will be able to do so to the same effective extent.
 <img src="https://s.w.org/images/core/emoji/72x72/1f641.png" alt="??" draggable="false" width="" height="" data-src="../database/uploads/images/article_images/1f641_15_6_2016.png" data-original-src="https://s.w.org/images/core/emoji/72x72/1f641.png"></p>

<p>Another example:</p>

<pre>Promise.resolve().then( function(){
  console.log( "two" );
} );

console.log( "one" );
</pre>

<p>The console here will always print one, two, because were taking advantage of our knowledge that a <code>then(..)</code> handler will always be run asynchronously.</p>

<p>By run asynchronously, we mean strictly after the current 
synchronous execution context, but we dont actually mean on the next 
tick of the event loop, like with a <code>setTimeout(..0)</code> type of asynchrony:</p>

<pre>setTimeout( function(){
  console.log( "three" );
}, 0 );

Promise.resolve().then( function(){
  console.log( "two" );
} );

console.log( "one" );
</pre>

<p>In a conforming/native implementation, this snippet will always print
 one, two, three, because the two console message function is on
 the microtask queue to be run at the end of the snippet (after the 
one console message), but the <code>setTimeout(..0)</code> schedules the three message on the next event loop tick.</p>

<p>As intrictate as this situation is, Ive seen plenty of code that <strong>relies on</strong> the relative sequencing of these types of actions, even with multiple promises:</p>

<pre>Promise.resolve().then( function(){
  console.log( "one" );
} );

Promise.resolve().then( function(){
  console.log( "two" );
} );
</pre>

<p>The specification doesnt explicitly require one, two sequencing 
here. However, in practice, itll probably happen that way, because 
there will probably only be one internal microtask queue that those two 
separate <code>then(..)</code> actions are scheduled onto, in first-come-first-served order.</p>

<p>While you might be able to rely on this as an implementation detail, I
 think these kinds of tricks are an absolutely terrible idea.</p>

<p>If theres some dependency between the actions, then express it directly  do <strong>not</strong> rely on perceived behaviors or async microtask processing. Even if the code works, youve written <strong>entirely un-reason-able code</strong>, as future readers will almost certainly not be able to intuit those same implied sequencing relationships.</p>

<p>Inter-promise sequencing may or may not be guaranteed in any given scenario, but one thing that <em>is</em> guaranteed is that relying on this behavior makes your code worse. Dont do it!</p>

<h4>Construction Sequencing</h4>

<p>Another place where this sequencing side-effects thing is often seen is with the <code>Promise(..)</code> constructor.</p>

<p>The idea is to take advantage of the knowledge that the initialization function you pass in is <strong>synchronously</strong> executed, even though the other parts of the Promise API (like the handlers you pass to <code>then(..)</code>) execute those functions <strong>asynchronously</strong>.</p>

<p>We already saw this illustrated earlier when we discussed the capability extraction.</p>

<p>For example:</p>

<pre>var fn;

var pr = new Promise( function init(resolve){
  fn = resolve;
} );

fn( 42 );
</pre>

<p>We <em>know</em> we can call <code>fn()</code> right away because we know the <code>init(..)</code> function is executed synchronously by the Promise constructor.</p>

<p>Im asserting that this is a <strong>bad idea</strong> to exploit this sort of semantic in your normal application code alongside other <code>then(..)</code>
 function calls, since those are always asynchronous. Having both sync 
and async behaviors mixed together makes the code harder to understand.</p>

<p>The above snippet is equivalent to just:</p>

<pre>var pr = Promise.resolve( 42 );
</pre>

<p>Im not saying to avoid the Promise constructor. But dont use it as a
 synchronous side-effect producing function  specifically, relying on 
the sequencing of the side effects  if you can at all avoid it.</p>

<h4>Scopes</h4>

<p>Another pattern that seems to crop up is the sharing of values across
 scopes via side-effects, to get around the fact that promises only 
model/fulfill single values.</p>

<p>Consider:</p>

<pre>function getOrderDetails(orderID) {
  var _order;

  return db.find( "orders", orderID )
    .then( function(order){
      _order = order;
      return db.find( "customers", order.customerID )
    } )
    .then( function(customer){
      _order.customer = customer;
      return _order;
    } );
}
</pre>

<p>Whats going on here? We first make a <code>db.find("orders" ..)</code> call, which gives us the <code>order</code>. We not only need that to get <code>order.customerID</code> for the <code>db.find("customers" ..)</code> call, but well also need <code>order</code> for the final result of our <code>getOrderDetails(..)</code> operation.</p>

<p>But the second <code>then(..)</code> will receive the result of the <code>db.find("customers" ..)</code> call, which will not pass along the <code>order</code> value as part of its result. So, it seems we have to save it somewhere, which we choose to do with an outer <code>_order</code> variable thats shared across scopes. When the second <code>then(..)</code> handler runs, <code>_order</code> will still be available for us to use.</p>

<p>Dont kid yourself: <strong>this is side-effect programming</strong>. <code>_order</code> is a side-effect of the first <code>then(..)</code>.
 We are crippled by the limitations of the Promise API mechanics and 
cant share the state with the next step, so we just stick that state in
 an outer scope to share it.</p>

<p>This is a bad idea. I dont care how many times youve done this or how acceptable you think it is. <strong>Its an anti-pattern code smell</strong>. Stop programming side-effects with your promises. It makes your code harder to reason about.</p>

<p>I know how allergic many developers seem to be with respect to 
nesting, but the more appropriate way to handle this case is to nest the
 second <code>then(..)</code> in the scope where <code>order</code> still exists, as shown here:</p>

<pre>function getOrderDetails(orderID) {
  return db.find( "orders", orderID )
    .then( function(order){
      return db.find( "customers", order.customerID )
        // nested `then()` instead of flattened to outer chain,
        // so that we still have lexical scope access to `order`
        .then( function(customer){
          order.customer = customer;
          return order;
        } );
    } );
}
</pre>

<p>Normally, nesting promise <code>then(..)</code>s is a bad idea, and even goes by the name promise hell.</p>

<p>But in these cases where multiple values need to be available (in 
scope), a flattened vertical promise chain necessitates the worser evil 
of side-effects. Promise nesting is the better choice.</p>

<h3>Promise Chainitis</h3>

<p>A promise models a value that may still be pending. The purpose is to
 factor time out of the picture so that you only have to think about the
 value and what you need to do with it  not the <em>time</em> you have to wait until its ready.</p>

<p>The problem is that the mechanics of how promises work in JS means 
that the finalizing of a value is observable  you can tell when it 
happens. Though you shouldnt be thinking about time, promises let you 
still think about time if you want to, and many people do it too much.</p>

<p>The most obvious way we use our knowledge of when a promise resolves 
is to use this observation as a step in a flow control. For example:</p>

<pre>firstStep()
.then( secondStep )
.then( thirdStep );
</pre>

<p>Here, what were saying with the promise chain is that we want to delay the execution of the <code>secondStep()</code> function until after <code>firstStep()</code> has finished. Youll notice that nothing here makes it obvious that were using a promise as a placeholder for a <em>future value</em>. Instead, were using promises kind of like event handlers to let us know when each step finishes.</p>

<p>I used to be enormously excited about promise chains as flow control.
 But the longer Ive programmed with promises, the more Ive realized 
that long promise chains are actually a bad smell. Ive almost come to 
the point where Id say there should only ever be one <code>then(..)</code> in the chain. Using promise chains as a way to express flow control is a poor idea.</p>

<p>Yes, yes, I know that <strong>literally almost everybody is doing this</strong>. Doesnt matter, theyre all wrong.</p>

<p>So, what should we do to express our multi-step flow control? Go back to nested callbacks? No.</p>

<p>Use the <strong>synchronous-async pattern</strong>. If youre not familiar, Ive talked about this pattern in detail in several places, including:</p>

<ul>

<li>
<p><a href="https://davidwalsh.name/async-generators">Going Async With Generators</a></p>

</li>

<li>
<p><a href="https://blog.getify.com/not-awaiting-1/#have-we-seen-this-before">Have We Seen This Before</a></p>

</li>

<li>
<p><a href="https://github.com/getify/You-Dont-Know-JS/blob/master/async%20&amp;%20performance/ch4.md#generators--promises">Generators + Promises</a> (Async &amp; Performance, Ch 4)</p>

</li>

<li>
<p><a href="https://github.com/getify/You-Dont-Know-JS/blob/master/es6%20&amp;%20beyond/ch4.md#generators--promises">Generators + Promises</a> (ES6 &amp; Beyond, Ch 4)</p>

</li>

</ul>

<p>To boil this down, using either generators (with a runner), or <code>async function</code>s,
 we get the ability to express fundamentally asynchronous code in a 
synchronous fashion. This sync semantic works not only for success flow 
control but also error handling (ie, <code>try..catch</code>).</p>

<p>Heres how the previous promise-chain flow control code should be written:</p>

<pre>async function main() {
  await firstStep();
  await secondStep();
  await thirdStep();
}

// or:

function *main() {
  yield firstStep();
  yield secondStep();
  yield thirdStep();
}
</pre>

<p>Were still relying on the fact that each step returns a promise, and
 were still waiting on each promise to resolve before moving onto the 
next step.</p>

<p>Unfortunately, with these examples were missing not only 
articulation of the result values but also of any error handling. A bit 
more of a realistic example:</p>

<pre>async function main() {
  try {
    var val1 = await firstStep();
    var val2 = await secondStep( val1 );
    var val3 = await thirdStep( val1, val2 );

    console.log( "Final: ", val3 );
  }
  catch (err) {
    console.error( err );
  }
}
</pre>

<p>This example clearly illustrates how we are using synchronous code 
semantics to express the async flow control (success and exception).</p>

<p>Under the covers, something similar to the earlier chain, but not the same, is happening. <code>firstStep()</code> produces a promise, which is then <code>await</code>ed. That means, hidden from view, the engine puts a <code>then(..)</code> on it and waits for it to finish before resuming the paused <code>main()</code> function. It also unwraps the promises fulfillment value and gives it back so we can assign it to <code>val1</code>.</p>

<p>When the <code>await</code> is called on the promise from the <code>secondStep(..)</code> call, its performing a <code>then(..)</code> against <em>that</em> promise, <strong>not</strong> the one that came from the <code>then(..)</code> called on the first. And so on.</p>

<p>It may seem like pointless nuance, but thats not the same thing as chaining one <code>then(..)</code> after another. Its treating, explicitly, each step as a separate promise/<code>then(..)</code> pair.</p>

<p>Conceptually thats a much cleaner and easier to understand process 
than what happens when promises are chained multiple times. If youve 
ever tried to understand just how a promise chain is wired up, or 
explain it to someone else, youll know its not so simple. I wont 
belabor those details here, but Ive <a href="https://blog.getify.com/promises-part-5/#the-chains-that-bind-us">previously explained it in more detail</a> if you care to dig into it.</p>

<p>The sync-async pattern above wipes away any of that unnecessary complexity. It also conveniently hides the <code>then(..)</code> calling altogether, because truthfully, that part is a wart. The <code>then(..)</code> on a promise is an unfortunate but necessary component of the Promise API design that was settled on for JS.</p>

<p>I assert that, for the most part, we should try not to ever call <code>then(..)</code> explicitly. As much as possible, that should stay hidden as an implementation detail.</p>

<p>Calling <code>then(..)</code> on a promise is a <strong>code smell and anti-pattern</strong>.</p>

<p>Im sure youve heard the admonition of use the right tool for the 
job. To put a slight twist on that, here the problem is more about 
using a tool inappropriately. Its like if you held a hammer in your 
teeth and tried to drive in a nail. A hammer is better used if held in 
your hand.</p>

<p>Instead of using the promise API for expressing async flow control, 
we should only use promises for what theyre good for: modeling future 
values in a time independent way. Sure, promises <em>can</em> be chained together. No, <strong>you shouldnt be doing that</strong>. Let libraries and engines do the plumbing for you.</p>

<p>Theres a better tool for the job of expressing flow control: the sync-async pattern of generators+promises or <code>async function</code>s.</p>

<h3>Summary</h3>

<p>Summing up, using promises outside of the main notion of modeling a 
future value independent of time is probably wandering towards 
anti-patterns.</p>

<p>Promises are powerful and transformative, but I urge you to take a 
step back and re-examine how youre relying on them. They are best as a 
value/composition mechanism. Use them as such and stay away from all the
 wrong ways.</p>
			
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>Defining classes and inheritance</h1>
		<div class="post-wrapper">
	<p>In early versions of Prototype, the framework came with basic support for
class creation: the <a href="http://prototypejs.org/api/class/create"><code>Class.create()</code></a> method. Until now the
<em>only</em> feature of classes defined this way was that the constructor called a
method called <code>initialize</code> automatically.</p>



<p><strong>Prototype 1.6.0</strong> now features a richer class system that's backward-compatible and adds some new features.</p>



<p>The cornerstone of class creation in Prototype is still
the <a href="http://api.prototypejs.org/language/Class/create/"><code>Class.create</code></a>
 method. If you have legacy Prototype code, your class-based code will 
continue to work as before, but now you don't have to work with 
prototypes directly or use <a href="http://api.prototypejs.org/language/Object/extend/"><code>Object.extend</code></a> to copy properties around.</p>



<h3>Example</h3>



<p>Suppose you have legacy Prototype class-based code that looks like htis:</p>



<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="cm">/** obsolete syntax **/</span>
    
<span class="kd">var</span> <span class="nx">Person</span> <span class="o">=</span> <span class="nx">Class</span><span class="p">.</span><span class="nx">create</span><span class="p">();</span>
<span class="nx">Person</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
<span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="nx">say</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">': '</span> <span class="o">+</span> <span class="nx">message</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>
    
<span class="kd">var</span> <span class="nx">guy</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Person</span><span class="p">(</span><span class="s1">'Miro'</span><span class="p">);</span>
<span class="nx">guy</span><span class="p">.</span><span class="nx">say</span><span class="p">(</span><span class="s1">'hi'</span><span class="p">);</span>
<span class="c1">// -&gt; "Miro: hi"</span>
    
<span class="kd">var</span> <span class="nx">Pirate</span> <span class="o">=</span> <span class="nx">Class</span><span class="p">.</span><span class="nx">create</span><span class="p">();</span>
<span class="c1">// inherit from Person class:</span>
<span class="nx">Pirate</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="k">new</span> <span class="nx">Person</span><span class="p">(),</span> <span class="p">{</span>
  <span class="c1">// redefine the speak method</span>
  <span class="nx">say</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">': '</span> <span class="o">+</span> <span class="nx">message</span> <span class="o">+</span> <span class="s1">', yarr!'</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>
    
<span class="kd">var</span> <span class="nx">john</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Pirate</span><span class="p">(</span><span class="s1">'Long John'</span><span class="p">);</span>
<span class="nx">john</span><span class="p">.</span><span class="nx">say</span><span class="p">(</span><span class="s1">'ahoy matey'</span><span class="p">);</span>
<span class="c1">// -&gt; "Long John: ahoy matey, yarr!"</span></code></pre>

</div>




<p>Observe the direct interaction with class prototypes and the clumsy inheritance
technique using <code>Object.extend</code>. Also, with <code>Pirate</code> redefining the <code>say()</code>
method of <code>Person</code>, there is no way of calling the overridden method like you can
do in programming languages that support class-based inheritance.</p>



<p>This has changed for the better. Compare the above with:</p>



<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="cm">/** new, preferred syntax **/</span>
    
<span class="c1">// properties are directly passed to `create` method</span>
<span class="kd">var</span> <span class="nx">Person</span> <span class="o">=</span> <span class="nx">Class</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
  <span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="nx">say</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">': '</span> <span class="o">+</span> <span class="nx">message</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>
    
<span class="c1">// when subclassing, specify the class you want to inherit from</span>
<span class="kd">var</span> <span class="nx">Pirate</span> <span class="o">=</span> <span class="nx">Class</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">Person</span><span class="p">,</span> <span class="p">{</span>
  <span class="c1">// redefine the speak method</span>
  <span class="nx">say</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$super</span><span class="p">,</span> <span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">$super</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="o">+</span> <span class="s1">', yarr!'</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>
    
<span class="kd">var</span> <span class="nx">john</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Pirate</span><span class="p">(</span><span class="s1">'Long John'</span><span class="p">);</span>
<span class="nx">john</span><span class="p">.</span><span class="nx">say</span><span class="p">(</span><span class="s1">'ahoy matey'</span><span class="p">);</span>
<span class="c1">// -&gt; "Long John: ahoy matey, yarr!"</span></code></pre>

</div>




<p>You can see how both class and subclass definitions are shorter because you
don't need to hack their prototypes directly anymore. We have also demonstrated
another new feature: <code>Pirate#say</code> "supercalls" the <code>say</code> method of its <code>Person</code> superclass.</p>



<h3>The <code>$super</code> argument in method definitions</h3>



<p>When you override a method in a subclass, but still want to be able to call the
original method, you will need a <em>reference</em> to it. You can obtain that
reference by defining those methods with an extra argument in the front:
<code>$super</code>. Prototype will detect this and make the overridden method available to
you through that argument. But <em>to the outside world</em>, the <code>Pirate#say</code> method still expects a single argument. Keep this in mind.</p>



<h3>How to mix-in modules</h3>



<p>So far you have seen the general way of calling <code>Class.create</code>.</p>



<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">Pirate</span> <span class="o">=</span> <span class="nx">Class</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">Person</span><span class="p">,</span> <span class="p">{</span> <span class="cm">/* instance methods */</span> <span class="p">});</span></code></pre>

</div>




<p>But in fact, <code>Class.create</code> takes in an arbitrary number 
of arguments. If the first argument is a class, it will serve as that 
function's superclass. Any subsequent arguments (or <em>all</em> 
arguments, should the first argument not be a class) are treated as 
"mixins"; their function properties are extended onto the object in the 
order they're listed.</p>



<p>This can conveniently be used for mixing in modules:</p>



<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// define a module</span>
<span class="kd">var</span> <span class="nx">Vulnerable</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">wound</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">hp</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">health</span> <span class="o">-=</span> <span class="nx">hp</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">health</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">kill</span><span class="p">();</span>
  <span class="p">},</span>
  <span class="nx">kill</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">dead</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>
    
<span class="c1">// the first argument isn't a class object, so there is no inheritance ...</span>
<span class="c1">// simply mix in all the arguments as methods:</span>
<span class="kd">var</span> <span class="nx">Person</span> <span class="o">=</span> <span class="nx">Class</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">Vulnerable</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">health</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">dead</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>
    
<span class="kd">var</span> <span class="nx">bruce</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Person</span><span class="p">;</span>
<span class="nx">bruce</span><span class="p">.</span><span class="nx">wound</span><span class="p">(</span><span class="mi">55</span><span class="p">);</span>
<span class="nx">bruce</span><span class="p">.</span><span class="nx">health</span><span class="p">;</span> <span class="c1">//-&gt; 45</span></code></pre>

</div>




<h3>Types of inheritance in programming languages</h3>



<p>Generally we distinguish between class-based and prototypal inheritance, the
latter being specific to JavaScript.</p>



<p>Prototypal inheritance, of course, is a very useful feature of the 
language, but
is often verbose when you are actually creating your objects. This is 
why we
emulate class-based inheritance (as in the Ruby language) through 
prototypal inheritance internally. This has certain implications.</p>



<p>For instance, in PHP you can define the initial values for instance variables:</p>



<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">class</span> <span class="nc">Logger</span> <span class="p">{</span>
  <span class="k">public</span> <span class="nv">$log</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
    
  <span class="k">function</span> <span class="nf">write</span><span class="p">(</span><span class="nv">$message</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">log</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$message</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
    
<span class="nv">$logger</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Logger</span><span class="p">;</span>
<span class="nv">$logger</span><span class="o">-&gt;</span><span class="na">write</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">);</span>
<span class="nv">$logger</span><span class="o">-&gt;</span><span class="na">write</span><span class="p">(</span><span class="s1">'bar'</span><span class="p">);</span>
<span class="nv">$logger</span><span class="o">-&gt;</span><span class="na">log</span><span class="p">;</span> <span class="c1">// -&gt; ['foo', 'bar']</span>
<span class="cp">?&gt;</span><span class="x"></span></code></pre>

</div>




<p>We can try to do the same in Prototype:</p>



<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">Logger</span> <span class="o">=</span> <span class="nx">Class</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
  <span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="p">},</span>
  <span class="nx">log</span><span class="o">:</span> <span class="p">[],</span>
  <span class="nx">write</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">log</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">message</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>
    
<span class="kd">var</span> <span class="nx">logger</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Logger</span><span class="p">;</span>
<span class="nx">logger</span><span class="p">.</span><span class="nx">log</span><span class="p">;</span> <span class="c1">// -&gt; []</span>
<span class="nx">logger</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">);</span>
<span class="nx">logger</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="s1">'bar'</span><span class="p">);</span>
<span class="nx">logger</span><span class="p">.</span><span class="nx">log</span><span class="p">;</span> <span class="c1">// -&gt; ['foo', 'bar']</span></code></pre>

</div>




<p>It works. But what if we make <strong>another</strong> instance of Logger?</p>



<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">logger2</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Logger</span><span class="p">;</span>
<span class="nx">logger2</span><span class="p">.</span><span class="nx">log</span><span class="p">;</span> <span class="c1">// -&gt; ['foo', 'bar']</span>
    
<span class="c1">// ... hey, the log should have been empty!</span></code></pre>

</div>




<p>You can see that, although you may have expected an empty array in the new
instance, it has the same array as the previous logger instance. In fact, <em>all</em>
logger objects will share the same array object because it is copied by reference, not by value.</p>



<p>Instead, <strong>initialize your instances with default values:</strong></p>



<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">Logger</span> <span class="o">=</span> <span class="nx">Class</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
  <span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// this is the right way to do it:</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">log</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="p">},</span>
  <span class="nx">write</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">log</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">message</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span></code></pre>

</div>




<h3>Defining class methods</h3>



<p>There is no special support for class methods in Prototype 1.6.0. Simply define
them on your existing classes:</p>



<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">Pirate</span><span class="p">.</span><span class="nx">allHandsOnDeck</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">voices</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="nx">n</span><span class="p">.</span><span class="nx">times</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">voices</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">new</span> <span class="nx">Pirate</span><span class="p">(</span><span class="s1">'Sea dog'</span><span class="p">).</span><span class="nx">say</span><span class="p">(</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">));</span>
  <span class="p">});</span>
  <span class="k">return</span> <span class="nx">voices</span><span class="p">;</span>
<span class="p">}</span>
    
<span class="nx">Pirate</span><span class="p">.</span><span class="nx">allHandsOnDeck</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
<span class="c1">// -&gt; ["Sea dog: 1, yarr!", "Sea dog: 2, yarr!", "Sea dog: 3, yarr!"]</span></code></pre>

</div>




<p>If you need to define several at once, simply use <code>Object.extend</code> as before:</p>



<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">Pirate</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">song</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">pirates</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">},</span>
  <span class="nx">sail</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">crew</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">},</span>
  <span class="nx">booze</span><span class="o">:</span> <span class="p">[</span><span class="s1">'grog'</span><span class="p">,</span> <span class="s1">'rum'</span><span class="p">]</span>
<span class="p">});</span></code></pre>

</div>




<p>When you inherit from Pirate, the class methods are <em>not</em> inherited. This feature may be added in future versions of Prototype. Until then, copy the methods manually, but <em>not</em> like this:</p>



<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">Captain</span> <span class="o">=</span> <span class="nx">Class</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">Pirate</span><span class="p">,</span> <span class="p">{});</span>
<span class="c1">// this is wrong!</span>
<span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">Captain</span><span class="p">,</span> <span class="nx">Pirate</span><span class="p">);</span></code></pre>

</div>




<p>Class constructors are Function objects and it will mess them up if you just
copy everything from one to another. In the best case you will still end up
overriding <code>subclasses</code> and <code>superclass</code> properties on <code>Captain</code>, which is not
good.</p>



<h3>Special class properties</h3>



<p>Prototype 1.6.0 defines two special class properties: <code>subclasses</code> and
<code>superclass</code>. Their names are self-descriptive: they hold references to
subclasses or superclass of the current class, respectively.</p>



<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">Person</span><span class="p">.</span><span class="nx">superclass</span>
<span class="c1">// -&gt; null</span>
<span class="nx">Person</span><span class="p">.</span><span class="nx">subclasses</span><span class="p">.</span><span class="nx">length</span>
<span class="c1">// -&gt; 1</span>
<span class="nx">Person</span><span class="p">.</span><span class="nx">subclasses</span><span class="p">.</span><span class="nx">first</span><span class="p">()</span> <span class="o">==</span> <span class="nx">Pirate</span>
<span class="c1">// -&gt; true</span>
<span class="nx">Pirate</span><span class="p">.</span><span class="nx">superclass</span> <span class="o">==</span> <span class="nx">Person</span>
<span class="c1">// -&gt; true</span>
<span class="nx">Captain</span><span class="p">.</span><span class="nx">superclass</span> <span class="o">==</span> <span class="nx">Pirate</span>
<span class="c1">// -&gt; true</span>
<span class="nx">Captain</span><span class="p">.</span><span class="nx">superclass</span> <span class="o">==</span> <span class="nx">Person</span>
<span class="c1">// -&gt; false</span></code></pre>

</div>




<p>These properties are here for easy class introspection.</p>



<h3>Adding methods on-the-fly with Class#addMethods</h3>



<div class="deprecated" style="margin-bottom:1em"><code>Class#addMethods</code> was named <code>Class.extend</code> in Prototype 1.6 RC0.<br>Please update your code accordingly.</div>




<p>Imagine you have an already defined class you want to add extra 
methods to. In JavaScript's native prototypal inheritance, this can be 
accomplished by adding the methods onto one of the objects in the 
class's prototype chain. With Prototype, the easiest way to do this is 
to use <code>Class#addMethods</code>:</p>



<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">john</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Pirate</span><span class="p">(</span><span class="s1">'Long John'</span><span class="p">);</span>
<span class="nx">john</span><span class="p">.</span><span class="nx">sleep</span><span class="p">();</span>
<span class="c1">// -&gt; ERROR: sleep is not a method</span>
    
<span class="c1">// every person should be able to sleep, not just pirates!</span>
<span class="nx">Person</span><span class="p">.</span><span class="nx">addMethods</span><span class="p">({</span>
  <span class="nx">sleep</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">say</span><span class="p">(</span><span class="s1">'ZzZ'</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>
    
<span class="nx">john</span><span class="p">.</span><span class="nx">sleep</span><span class="p">();</span>
<span class="c1">// -&gt; "Long John: ZzZ, yarr!"</span></code></pre>

</div>




<p>The <code>sleep</code> method is now available not only on new Person instances, but
on instances of its subclasses, including any instances that had already been created.</p>
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>JavaScript apply vs. call vs. bind</h1>
		<div class="post-wrapper">
			<p>JavaScript has three different methods that allow you to change&nbsp;the value of <code>this</code> for a given function.</p>
<p>Those methods are <code>Function.prototype.call()</code>, <code>Function.prototype.apply()</code> and <code>Function.prototype.bind()</code>.</p>
<p>They are slightly different but sometimes its difficult to remember which is which.</p>
<h2>TL;DR</h2>
<ul>
<li><code>call</code> invokes the function and allows you to pass in arguments one by one.</li>
<li><code>apply</code> invokes the function and allows you to pass in arguments as an array.</li>
<li><code>bind</code> returns a new&nbsp;function, allowing you to pass in a this array and any number of arguments.</li>
</ul>
<h2>Some Quick Examples</h2>
<h3>Call</h3>
<p></p> 
<div id="crayon-5762b5ff4ca10251694979" class="crayon-syntax crayon-theme-sublime-text crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" touchscreen minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 14px ! important; line-height: 25px ! important; height: auto;">
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" style="-moz-tab-size: 4; font-size: 14px ! important; line-height: 25px ! important; z-index: 0; opacity: 0;" wrap="soft">var person1 = {firstName: 'Jon', lastName: 'Kuperman'};
var person2 = {firstName: 'Kelly', lastName: 'King'};

function say(greeting) {
    console.log(greeting + ' ' + this.firstName + ' ' + this.lastName);
}

say.call(person1, 'Hello'); // Hello Jon Kuperman
say.call(person2, 'Hello'); // Hello Kelly King</textarea></div>
<div class="crayon-main" style="position: relative; z-index: 1;">
<table style="" class="crayon-table">
<tbody><tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 25px !important;"><div class="crayon-num" data-line="crayon-5762b5ff4ca10251694979-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5762b5ff4ca10251694979-2">2</div><div class="crayon-num" data-line="crayon-5762b5ff4ca10251694979-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5762b5ff4ca10251694979-4">4</div><div class="crayon-num" data-line="crayon-5762b5ff4ca10251694979-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5762b5ff4ca10251694979-6">6</div><div class="crayon-num" data-line="crayon-5762b5ff4ca10251694979-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5762b5ff4ca10251694979-8">8</div><div class="crayon-num" data-line="crayon-5762b5ff4ca10251694979-9">9</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 25px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5762b5ff4ca10251694979-1"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">person1</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-v">firstName</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'Jon'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">lastName</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'Kuperman'</span><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5762b5ff4ca10251694979-2"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">person2</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-v">firstName</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'Kelly'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">lastName</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'King'</span><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5762b5ff4ca10251694979-3">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5762b5ff4ca10251694979-4"><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">say</span><span class="crayon-sy">(</span><span class="crayon-v">greeting</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5762b5ff4ca10251694979-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">console</span><span class="crayon-sy">.</span><span class="crayon-e">log</span><span class="crayon-sy">(</span><span class="crayon-v">greeting</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-s">' '</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">firstName</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-s">' '</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">lastName</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5762b5ff4ca10251694979-6"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5762b5ff4ca10251694979-7">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5762b5ff4ca10251694979-8"><span class="crayon-v">say</span><span class="crayon-sy">.</span><span class="crayon-e">call</span><span class="crayon-sy">(</span><span class="crayon-v">person1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'Hello'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-c">// Hello Jon Kuperman</span></div><div class="crayon-line" id="crayon-5762b5ff4ca10251694979-9"><span class="crayon-v">say</span><span class="crayon-sy">.</span><span class="crayon-e">call</span><span class="crayon-sy">(</span><span class="crayon-v">person2</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'Hello'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-c">// Hello Kelly King</span></div></div></td>
</tr>
</tbody></table>
</div>
</div>
 
<p></p>
<h3>Apply</h3>
<p></p> 
<div id="crayon-5762b5ff4ca23381820127" class="crayon-syntax crayon-theme-sublime-text crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" touchscreen minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 14px ! important; line-height: 25px ! important; height: auto;">
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" style="-moz-tab-size: 4; font-size: 14px ! important; line-height: 25px ! important; z-index: 0; opacity: 0;" wrap="soft">var person1 = {firstName: 'Jon', lastName: 'Kuperman'};
var person2 = {firstName: 'Kelly', lastName: 'King'};

function say(greeting) {
    console.log(greeting + ' ' + this.firstName + ' ' + this.lastName);
}

say.apply(person1, ['Hello']); // Hello Jon Kuperman
say.apply(person2, ['Hello']); // Hello Kelly King</textarea></div>
<div class="crayon-main" style="position: relative; z-index: 1;">
<table style="" class="crayon-table">
<tbody><tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 25px !important;"><div class="crayon-num" data-line="crayon-5762b5ff4ca23381820127-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5762b5ff4ca23381820127-2">2</div><div class="crayon-num" data-line="crayon-5762b5ff4ca23381820127-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5762b5ff4ca23381820127-4">4</div><div class="crayon-num" data-line="crayon-5762b5ff4ca23381820127-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5762b5ff4ca23381820127-6">6</div><div class="crayon-num" data-line="crayon-5762b5ff4ca23381820127-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5762b5ff4ca23381820127-8">8</div><div class="crayon-num" data-line="crayon-5762b5ff4ca23381820127-9">9</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 25px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5762b5ff4ca23381820127-1"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">person1</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-v">firstName</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'Jon'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">lastName</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'Kuperman'</span><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5762b5ff4ca23381820127-2"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">person2</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-v">firstName</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'Kelly'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">lastName</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'King'</span><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5762b5ff4ca23381820127-3">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5762b5ff4ca23381820127-4"><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">say</span><span class="crayon-sy">(</span><span class="crayon-v">greeting</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5762b5ff4ca23381820127-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">console</span><span class="crayon-sy">.</span><span class="crayon-e">log</span><span class="crayon-sy">(</span><span class="crayon-v">greeting</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-s">' '</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">firstName</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-s">' '</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">lastName</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5762b5ff4ca23381820127-6"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5762b5ff4ca23381820127-7">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5762b5ff4ca23381820127-8"><span class="crayon-v">say</span><span class="crayon-sy">.</span><span class="crayon-e">apply</span><span class="crayon-sy">(</span><span class="crayon-v">person1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">'Hello'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-c">// Hello Jon Kuperman</span></div><div class="crayon-line" id="crayon-5762b5ff4ca23381820127-9"><span class="crayon-v">say</span><span class="crayon-sy">.</span><span class="crayon-e">apply</span><span class="crayon-sy">(</span><span class="crayon-v">person2</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">'Hello'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-c">// Hello Kelly King</span></div></div></td>
</tr>
</tbody></table>
</div>
</div>
 
<p></p>
<h3>Bind</h3>
<p></p> 
<div id="crayon-5762b5ff4ca29812840800" class="crayon-syntax crayon-theme-sublime-text crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" touchscreen minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 14px ! important; line-height: 25px ! important; height: auto;">
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" style="-moz-tab-size: 4; font-size: 14px ! important; line-height: 25px ! important; z-index: 0; opacity: 0;" wrap="soft">var person1 = {firstName: 'Jon', lastName: 'Kuperman'};
var person2 = {firstName: 'Kelly', lastName: 'King'};

function say() {
    console.log('Hello ' + this.firstName + ' ' + this.lastName);
}

var sayHelloJon = say.bind(person1);
var sayHelloKelly = say.bind(person2);

sayHelloJon(); // Hello Jon Kuperman
sayHelloKelly(); // Hello Kelly King</textarea></div>
<div class="crayon-main" style="position: relative; z-index: 1;">
<table style="" class="crayon-table">
<tbody><tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 25px !important;"><div class="crayon-num" data-line="crayon-5762b5ff4ca29812840800-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5762b5ff4ca29812840800-2">2</div><div class="crayon-num" data-line="crayon-5762b5ff4ca29812840800-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5762b5ff4ca29812840800-4">4</div><div class="crayon-num" data-line="crayon-5762b5ff4ca29812840800-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5762b5ff4ca29812840800-6">6</div><div class="crayon-num" data-line="crayon-5762b5ff4ca29812840800-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5762b5ff4ca29812840800-8">8</div><div class="crayon-num" data-line="crayon-5762b5ff4ca29812840800-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5762b5ff4ca29812840800-10">10</div><div class="crayon-num" data-line="crayon-5762b5ff4ca29812840800-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5762b5ff4ca29812840800-12">12</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 25px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5762b5ff4ca29812840800-1"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">person1</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-v">firstName</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'Jon'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">lastName</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'Kuperman'</span><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5762b5ff4ca29812840800-2"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">person2</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-v">firstName</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'Kelly'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">lastName</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'King'</span><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5762b5ff4ca29812840800-3">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5762b5ff4ca29812840800-4"><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">say</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5762b5ff4ca29812840800-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">console</span><span class="crayon-sy">.</span><span class="crayon-e">log</span><span class="crayon-sy">(</span><span class="crayon-s">'Hello '</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">firstName</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-s">' '</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-r">this</span><span class="crayon-sy">.</span><span class="crayon-v">lastName</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5762b5ff4ca29812840800-6"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5762b5ff4ca29812840800-7">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5762b5ff4ca29812840800-8"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">sayHelloJon</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">say</span><span class="crayon-sy">.</span><span class="crayon-e">bind</span><span class="crayon-sy">(</span><span class="crayon-v">person1</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5762b5ff4ca29812840800-9"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">sayHelloKelly</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">say</span><span class="crayon-sy">.</span><span class="crayon-e">bind</span><span class="crayon-sy">(</span><span class="crayon-v">person2</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5762b5ff4ca29812840800-10">&nbsp;</div><div class="crayon-line" id="crayon-5762b5ff4ca29812840800-11"><span class="crayon-e">sayHelloJon</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-c">// Hello Jon Kuperman</span></div><div class="crayon-line crayon-striped-line" id="crayon-5762b5ff4ca29812840800-12"><span class="crayon-e">sayHelloKelly</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-c">// Hello Kelly King</span></div></div></td>
</tr>
</tbody></table>
</div>
</div>
 
<p></p>
<h2>When To Use Each</h2>
<p>Call and apply are pretty interchangeable. Just decide whether its easier to send in an array or a comma separated list of arguments.</p>
<p>I always remember which one is which by remembering that <b>C</b>all&nbsp;is for comma (separated list) and&nbsp;<strong>A</strong>pply is for Array.</p>
<p>Bind is a bit different. It returns a new function. Call and Apply execute the current function immediately.</p>
<p>Bind is great for a lot of things. We can use it to curry functions like in the above example. We can take a simple hello function and turn it into a helloJon or helloKelly. We can also use it for events like onClick where we dont know when theyll be fired but we know what context we want them to have.</p>
<div class="sharedaddy sd-sharing-enabled"><div class="robots-nocontent sd-block sd-social sd-social-official sd-sharing"><div class="sd-content"><ul><li class="share-twitter"><iframe data-url="https://codeplanet.io/javascript-apply-vs-call-vs-bind/" src="https://platform.twitter.com/widgets/tweet_button.6e778523ecf0a9c9f1c446083d86ede1.en.html#dnt=false&amp;id=twitter-widget-0&amp;lang=en&amp;original_referer=https%3A%2F%2Fcodeplanet.io%2Fjavascript-apply-vs-call-vs-bind%2F&amp;size=m&amp;text=JavaScript%20apply%20vs.%20call%20vs.%20bind&amp;time=1466091978136&amp;type=share&amp;url=https%3A%2F%2Fcodeplanet.io%2Fjavascript-apply-vs-call-vs-bind%2F&amp;via=thecodeplanet" title="Twitter Tweet Button" style="position: static; visibility: visible; width: 61px; height: 20px;" class="twitter-share-button twitter-share-button-rendered twitter-tweet-button" allowtransparency="true" scrolling="no" id="twitter-widget-0" frameborder="0"></iframe></li><li class="share-facebook"><div fb-iframe-plugin-query="app_id=249643311490&amp;container_width=0&amp;href=https%3A%2F%2Fcodeplanet.io%2Fjavascript-apply-vs-call-vs-bind%2F&amp;layout=button_count&amp;locale=en_US&amp;sdk=joey" fb-xfbml-state="rendered" class="fb-share-button fb_iframe_widget" data-href="https://codeplanet.io/javascript-apply-vs-call-vs-bind/" data-layout="button_count"><span style="vertical-align: bottom; width: 88px; height: 20px;"><iframe class="" src="https://www.facebook.com/v2.3/plugins/share_button.php?app_id=249643311490&amp;channel=https%3A%2F%2Fstaticxx.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D42%23cb%3Df115f183dd8d3f2%26domain%3Dcodeplanet.io%26origin%3Dhttps%253A%252F%252Fcodeplanet.io%252Ff165e184a20557%26relation%3Dparent.parent&amp;container_width=0&amp;href=https%3A%2F%2Fcodeplanet.io%2Fjavascript-apply-vs-call-vs-bind%2F&amp;layout=button_count&amp;locale=en_US&amp;sdk=joey" style="border: medium none; visibility: visible; width: 88px; height: 20px;" title="fb:share_button Facebook Social Plugin" scrolling="no" allowfullscreen="true" allowtransparency="true" name="f2f14e6e9e7f1ae" frameborder="0" height="1000px" width="1000px"></iframe></span></div></li><li class="share-end"></li></ul></div></div></div>
<div style="display: block;" id="jp-relatedposts" class="jp-relatedposts">
<h3 class="jp-relatedposts-headline"><em>Related</em></h3>
<div class="jp-relatedposts-items jp-relatedposts-items-minimal"><p class="jp-relatedposts-post jp-relatedposts-post0" data-post-id="705" data-post-format="false"><span class="jp-relatedposts-post-title"><a data-position="0" data-origin="404" rel="nofollow" title="Upgrading FlightJS

Flight 2.x is actively being developed. In the meantime, if you're on an old version of Flight 1.x and looking to upgrade to the most recent version, this guide is for you! Upgrade Core First, head over to the [FlightJS Github](https://github.com/flightjs/flight) and replace your current core files with the most" href="https://codeplanet.io/upgrading-flightjs/" class="jp-relatedposts-post-a">Upgrading FlightJS</a></span><span class="jp-relatedposts-post-date">October 6, 2015</span><span class="jp-relatedposts-post-context">In "JavaScript"</span></p><p class="jp-relatedposts-post jp-relatedposts-post1" data-post-id="708" data-post-format="false"><span class="jp-relatedposts-post-title"><a data-position="1" data-origin="404" rel="nofollow" title="Introduction to regular expressions

Hey all! Today we're going to cover a gentle introduction to regular expressions. We'll use JavaScript as our example language although almost everything we cover will work in any modern language. Regular Expressions with JavaScript JavaScript Regular Expressions&nbsp;come with a bunch of handy methods but today we are going to" href="https://codeplanet.io/introduction-to-regular-expressions/" class="jp-relatedposts-post-a">Introduction to regular expressions</a></span><span class="jp-relatedposts-post-date">October 8, 2015</span><span class="jp-relatedposts-post-context">In "JavaScript"</span></p><p class="jp-relatedposts-post jp-relatedposts-post2" data-post-id="701" data-post-format="false"><span class="jp-relatedposts-post-title"><a data-position="2" data-origin="404" rel="nofollow" title="Hello World with FlightJS

For those of you that don't know, Twitter has it's own Open Source JavaScript Framework. It's called FlightJS and it's pretty cool (I may be biased). It's pretty easy to get started with and the documentation is great, but here's a quick &quot;Hello World&quot; so you can hit the ground" href="https://codeplanet.io/hello-world-flight-js/" class="jp-relatedposts-post-a">Hello World with FlightJS</a></span><span class="jp-relatedposts-post-date">October 5, 2015</span><span class="jp-relatedposts-post-context">In "JavaScript"</span></p></div></div>
			
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>JavaScript Mixins</h1>
		<div class="post-wrapper">
 <p>Let&#39;s start by defining what a mixin is. I would explain it as <em>a way to share set of data (functions, methods, variables) with objects</em>.</p>

<p>How does that look like? Let&#39;s say we have two functions <code>Clark</code> and <code>Bruce</code> and that we want to implement two methods <code>sayName</code> and <code>secretIdentity</code> to their prototypes.</p>

<p>This is how our functions would look like:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">function</span> <span class="nx">Clark</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s1">'Clark Kent'</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">alterego</span> <span class="o">=</span> <span class="s1">'Superman'</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">Clark</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">fly</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">fly</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">};</span>

<span class="kd">function</span> <span class="nx">Bruce</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s1">'Bruce Wayne'</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">alterego</span> <span class="o">=</span> <span class="s1">'Batman'</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">Bruce</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">talk</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s2">"I'm Batman"</span><span class="p">;</span>
<span class="p">};</span></code></pre></figure>

<p>Most common ways of adding the methods these functions are:</p>

<h4>1. Extending objects</h4>

<p>Extending object doesn&#39;t really fit our description of mixins, since we are <strong>extending</strong> instead <strong>mixing</strong>, though idea is the same. At least that&#39;s the way I see it.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">Superhero</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">sayName</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="na">secretIdentity</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">alterego</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// Here we extend function prototypes with object using jQuery.extend</span>
<span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">Clark</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="nx">Superhero</span><span class="p">);</span>
<span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">Bruce</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="nx">Superhero</span><span class="p">);</span></code></pre></figure>

<p>Biggest downside to this approach is that you&#39;ll either need <code>extend</code> function available from some library like <em>Underscore</em> or <em>jQuery</em> or you would have to write it.</p>

<h4>2. Functional mixin</h4>

<p>They don&#39;t require any additional library and they are faster compared to extending. Also I find this implementation frequently overlooked.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">function</span> <span class="nx">Superhero</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">sayName</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">secretIdentity</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">alterego</span><span class="p">;</span>
    <span class="p">};</span>
<span class="p">}</span>

<span class="c1">// Here we extend function prototypes with using mixin function</span>
<span class="nx">Superhero</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">Clark</span><span class="p">.</span><span class="nx">prototype</span><span class="p">);</span>
<span class="nx">Superhero</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">Bruce</span><span class="p">.</span><span class="nx">prototype</span><span class="p">);</span></code></pre></figure>

<p>Which approach do you prefer?</p>
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>JavaScript CustomEvent</h1>
		<div class="post-wrapper">
			
			<p>JavaScript events have been the gateway to user interaction within the browser since its inception.  Not only do events tell us when an interaction happens, but events tell us type of interaction, the nodes involved, and provide us methods for working with the event.  Creating custom events and triggering them have always been trickier.  Using JavaScript's CustomEvent API, that trickery can be eliminated.  The CustomEvent API allows developers to not only create custom events but trigger them on DOM nodes, passing data along the way.  Best of all, the API is super simple!</p>

<h2>The JavaScript</h2>

<p>When working with customizing events, there's two components included in an event being "custom":  a custom event name and the ability to trigger that event.  Adding an event listener to an element, however, stays the same:</p>

<pre class="js">
myElement.addEventListener("userLogin", function(e) {
	console.info("Event is: ", e);
	console.info("Custom data is: ", e.detail);
})
</pre>

<p>Here we've added a <code>userLogin</code> event, just as easily as we could add a native mouseover or focus event -- that's not special.  The special part is creating and triggering the event:</p>

<pre class="js">
// First create the event
var myEvent = new CustomEvent("userLogin", {
	detail: {
		username: "davidwalsh"
	}
});

// Trigger it!
myElement.dispatchEvent(myEvent);
</pre>

<p>The <code>CustomEvent</code> constructor allows for creation of the custom event, allowing you to pass both a custom event name as well as a number of special properties;  <code>dispatchEvent</code> triggers the event on the given element.  Let's make the event to be triggered super-customized by configuring its bubbling, cancelable, detail properties:</p>

<pre class="js">
var myEvent = new CustomEvent("userLogin", {
	detail: {
		username: "davidwalsh"
	},
	bubbles: true,
	cancelable: false
});
</pre>

<p>Creating and trigger custom events with custom data is incredibly useful.  Not only can you create your own naming convention for events, but you may also pass custom data along the way!  You can keep up with browser support on the <a href="https://developer.mozilla.org/en/DOM/CustomEvent" rel="nofollow">CustomEvent API on MDN</a>, but this API is available in most modern browsers.</p>
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>Custom events in JavaScript</h1>
		<div class="post-wrapper">
			
<p>Without a doubt, the most often-used paradigm in JavaScript is events. Events are a manifestation of the <a href="http://en.wikipedia.org/wiki/Observer_pattern">observer pattern</a>, a well-defined computer science design pattern for loose coupling. <a href="http://en.wikipedia.org/wiki/Loose_coupling">Loose coupling</a> is incredibly important for creating maintainable, stable codebases. I talk a lot about loose coupling and its importance in my talk, <a href="http://www.slideshare.net/nzakas/scalable-javascript-application-architecture">Scalable JavaScript Application Architecture</a> (<a href="http://developer.yahoo.com/yui/theater/video.php?v=zakas-architecture">video</a>), so I won&#8217;t talk too much about it here. However, the concept is very important to grasp if you wish to progress as a software engineer.</p>

<h2>Events</h2>

<p>Unless you&#8217;ve never written any JavaScript before, you&#8217;ve used events at some point in time (admittedly, if you&#8217;ve never written JavaScript before, the chances of your reading my blog are probably pretty slim). Put quite simply: the way that you tie behavior to web pages is through events. Events are a way of letting interested parties know that an important moment has occurred in the lifecycle of the application. For instance:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">window.onload = function(){
    Application.init();
};
</code></pre></div>
<p>In this example, the <code>load</code> event is the interesting moment. I want to know when the window is fully loaded so that I can initialized the JavaScript application. The <code>onload</code> event handler is the location to where an event handler is assigned. The brilliant part is that <code>window</code> doesn&#8217;t care what web page is loaded or who is writing the code; it just knows that there&#8217;s a function to call when <code>load</code> occurs. This is the essence of loose coupling: when parts of an application have very limited knowledge of one another.</p>

<p>The <a href="http://javascript.about.com/od/browserobjectmodel/a/bom01.htm">Browser Object Model</a> (BOM) and <a href="http://www.w3.org/DOM/">Document Object Model</a> (DOM) publish events to allow developers access to the interesting moments of the browser and web page, respectively.</p>

<h2>Custom events</h2>

<p>It&#8217;s no surprise that most JavaScript libraries rely heavily on custom events since this is a pattern that web developers are familiar with. Every major JavaScript library provides its own events, components to enable easy custom event definition, or both. This makes sense, of course, since libraries want to be loosely-coupled to the execution environment, and therefore, to your code.</p>

<p>There&#8217;s nothing magic about custom events, though, and there&#8217;s no need to load an entire library if you&#8217;d like to experiment with custom events. An object that supports custom events needs to be able to do a small set of things:</p>

<ol>
<li>Assign an event handler for a particular event.</li>
<li>Remove an event handler for a particular event.</li>
<li>Fire an event and call all assigned event handlers.</li>
</ol>

<p>The following implements all of this basic functionality:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">//Copyright (c) 2010 Nicholas C. Zakas. All rights reserved.
//MIT License

function EventTarget(){
    this._listeners = {};
}

EventTarget.prototype = {

    constructor: EventTarget,

    addListener: function(type, listener){
        if (typeof this._listeners[type] == &quot;undefined&quot;){
            this._listeners[type] = [];
        }

        this._listeners[type].push(listener);
    },

    fire: function(event){
        if (typeof event == &quot;string&quot;){
            event = { type: event };
        }
        if (!event.target){
            event.target = this;
        }

        if (!event.type){  //falsy
            throw new Error(&quot;Event object missing &#39;type&#39; property.&quot;);
        }

        if (this._listeners[event.type] instanceof Array){
            var listeners = this._listeners[event.type];
            for (var i=0, len=listeners.length; i &lt; len; i++){
                listeners[i].call(this, event);
            }
        }
    },

    removeListener: function(type, listener){
        if (this._listeners[type] instanceof Array){
            var listeners = this._listeners[type];
            for (var i=0, len=listeners.length; i &lt; len; i++){
                if (listeners[i] === listener){
                    listeners.splice(i, 1);
                    break;
                }
            }
        }
    }
};
</code></pre></div>
<p>The <code>EventTarget</code> type has three methods: <code>addListener()</code>, <code>fire()</code>, and <code>removeListener</code>.</p>

<p>The <code>addListener()</code> uses the private <code>_listeners</code> object to store event handlers for various events. When an event handler is added, the method first checks to see if there&#8217;s a named property for that event type on the <code>_listeners</code> object, and if not, creates one containing an array. The event handler function is then saved to the array for later.</p>

<p>The <code>fire()</code> method fires an event with a given name. In effect, this method&#8217;s only job is to execute each event handler for the given event type. The method accepts either an object, in which case it&#8217;s expected to have a <code>type</code> property, or a string, in which case a new object is created and the string is assigned as the value of <code>type</code>. Next, if the event object doesn&#8217;t have a <code>target</code> property assigned, it is set to the current instance. This effectively creates an event object similar to the one most are familiar with via the BOM and DOM. Once the event object is created, the <code>_listeners</code> object is checked for event handlers, and if found, they are executed. Note that in order to mimic the BOM/DOM approach, event handlers are executed in the scope of <code>this</code> via the <code>call()</code> method.</p>

<p>The last method, <code>removeListener()</code>, simply reverses the process of <code>addListener()</code>. It searches through the <code>_listeners</code> property for the given event type to locate the specified event handler. If found, the event handler is removed by using the array&#8217;s <code>splice()</code> method, and otherwise it exits without doing anything.</p>

<p>Basic usage:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">var target = new EventTarget();
function handleEvent(event){
    alert(event.type);
};

target.addListener(&quot;foo&quot;, handleEvent);
target.fire({ type: &quot;foo&quot; });    //can also do target.fire(&quot;foo&quot;)
target.removeListener(&quot;foo&quot;, handleEvent);
</code></pre></div>
<p>Practically speaking, you&#8217;ll likely not want to use an instance of <code>EventTarget</code> directly, but rather inherit from it:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">function MyObject(){
    EventTarget.call(this);
}

MyObject.prototype = new EventTarget();
MyObject.prototype.constructor = MyObject;
MyObject.prototype.foo = function(){
    this.fire(&quot;foo&quot;);
};

var o = new MyObject();

o.addListener(&quot;foo&quot;, function(){
    alert(&quot;Foo just happened.&quot;);
});

o.foo();
</code></pre></div>
<p>Typically, events are fired in reaction to some other method call, as in this example (events are usually not fired external to the object that is publishing the events).</p>

<h2>What about&#8230;?</h2>

<p>This is a pretty barebones implementation of a custom event providing object, so inevitably someone will come along and ask why I didn&#8217;t include one feature or another. There are, of course, a lot of enhancements you can make to custom events if you so desire. Some enhancements others have implemented:</p>

<ul>
<li>Bubbling of events</li>
<li>Continue to execute event handlers even if one throws an error</li>
<li>Allow event handlers to cancel further processing or default actions</li>
</ul>

<p>Each of these can be built pretty easily on top of the base presented in this post.</p>

<h2>Conclusion</h2>

<p>Custom events are a very powerful and useful pattern in JavaScript programming, and your usage of them doesn&#8217;t have to rely on a large JavaScript library. Implementing your own custom events is easy. The implementation presented in this post is a minimum feature set that typically fulfills most requirements, but you can consider it as a starting point for more advanced functionality if your requirements are more complex.</p>
			
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>How to Create Custom Events in JavaScript to Program with HTML</h1>
		<div class="post-wrapper">
<p>The standard events provided with JavaScript perform well for most common tasks. But, sometimes, you will need a custom event. For example, you must have a method of performing a click, and JavaScript provides a standard event to handle this need. However, there are times when you need to pass information that the makers of JavaScript can&#8217;t foresee. In this case, you must create a custom event.</p>
<h2>How to work with the CustomEvent object in JavaScript</h2>
<p>The <span class="code">CustomEvent</span> object provides the means for creating a new event &#8212; one that isn&#8217;t part of JavaScript by default. The <span class="code">CustomEvent</span> object is deceptively simple. All it contains are the two properties described in the following list:</p>
<ul class="level-one">
 <li><p class="first-para"><b>Event name:</b> A string containing the name that you want to use for the event. The name can be anything you want, but it can&#8217;t contain any whitespace characters, such as the space. Use an underscore (<span class="code">_</span>), if desired, to separate words.</p>
 </li>
 <li><p class="first-para"><b>Event data:</b> An object literal that contains the data you want to pass as part of the event. This part of a custom event can become quite complex because you can pass any amount of data in any form you want, as long as the data fulfills the object literal format. The event data comes in two forms:</p>
 <ul class="level-two">
  <li><p class="first-para"><i>Standard data:</i> You can provide information for any of the properties supported by the standard <span class="code">Event</span> object. Most developers define the <span class="code">bubbles</span> and <span class="code">cancelable</span> properties as a minimum.</p>
  </li>
  <li><p class="first-para"><i>Custom data:</i> A custom event can contain custom data in any form. You must avoid using the names of any standard properties. For example, you can&#8217;t give a custom property the name <span class="code">bubbles</span>. Many developers use the <span class="code">detail</span> property to contain details about the custom event, but this is only a convention, and you&#8217;re free to use any form you see fit.</p>
  </li>
 </ul>
 </li>
</ul>
<h2>How to create the custom event code in JavaScript</h2>
<p>JavaScript makes it quite easy to create custom events of your own. These events could be anything. There are many uses for custom events, but they all follow the same pattern. This example begins the global custom event object shown here.</p>
<pre class="code">// Define a new event.
var SpecialEvent = new CustomEvent(
  "SpecialMessage",
  {
   detail:
   {
     message: "Hello There",
     time: new Date()
   },
   bubbles: true,
   cancelable: true
  });</pre>
<p>Notice that this event relies on a form of object literal. However, notice how detail is actually a nested object literal. You can nest information as many levels deep as needed. If you later want to change some feature of the event, you can do so. For example, to change the message, you would use code similar to this:</p>
<pre class="code">SpecialEvent.detail.message = "A new message!";</pre>
<p>Now that you have a custom event to use, you need to go through three phases to implement it. First, you must assign the event to a control. The example uses a label and tells the application to make the assignment as part of the form loading process using: <span class="code">&lt;body onload="AssignEvent()"&gt;</span>. Here&#8217;s the code you need to assign the event to the label:</p>
<pre class="code">function AssignEvent()
{
  // Obtain the object reference.
  var Label = document.getElementById("CustomLabel");
 
  // Assign an event to the object.
  Label.addEventListener(
   "SpecialMessage", HandleEvent, false);
}</pre>
<p>Here you see it a standard click event for the <span class="code">SpecialMessage</span> custom event. Whether you assign a standard or custom event, the technique is the same.</p>
<p>The second phase of implementing a custom event is firing the event. This example relies on a button to perform the task, but any action could fire the event. All you need is an action where you can attach code to perform the task of firing the event. Here&#8217;s the event firing code used for this example:</p>
<pre class="code">function FireEvent()
{
  // Obtain the object reference.
  var Label = document.getElementById("CustomLabel");
 
  // Fire the event.
  Label.dispatchEvent(SpecialEvent);
}</pre>
<p>The <span class="code">dispatchEvent()</span> function performs the actual work. Notice that you fire the event using the event object you created earlier. If you had wanted, you could assign values to any of the content found in the custom event. For that matter, you could create new content as needed as long as the recipient knows how to work with the new content.</p>
<p>The third phase of implementing a custom event is providing the event handler. The event handler receives the custom event from the control that&#8217;s assigned to the event handler. Here&#8217;s the event handler used in this case:</p>
<pre class="code">function HandleEvent(event)
{
  // Display the event information.
  document.getElementById("CustomLabel").innerHTML =
   "Control: " + event.currentTarget.id +
   "&lt;br /&gt;Message: " + event.detail.message +
   "&lt;br /&gt;Time sent: " +
   event.detail.time.toTimeString();
}</pre>
<p>All that this event handler does is display the custom event information onscreen.</p>
<img src="http://media.wiley.com/Lux/89/377589.image0.jpg" width="535" height="211" alt="image0.jpg"/>
			
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>Custom JavaScript Events</h1>
		<div class="post-wrapper">
			
			<p>
    While working on a JavaScript plugin I decided that it is great when plugin informs user about what it have done or on what it is working right now.
    This functianality is the same as some events in javascript like <span>'click'</span>, <span>'keyup'</span> or others.
    And the plugin should use it's own events.</p>

<p>But how to fire own crossbrowser event?</p>

<p>Here is simple answer:</p>


<h3>1. CrossBrowser attaching events:</h3>


<p>For attaching event to some element I wrote speciall function - <span>addEvent</span>.</p>

<p>Attributes:</p>

<ul>

    <li><span>evnt</span> - our event keywork (like 'keyup', 'onclick');</li>

    <li><span>func</span> - function executed on event;</li>

</ul>

<p><span><b>this</b></span> here will be our target element.</p>


<pre><code>// Funtion for adding event to some element
var addEvent = function(evnt, func) {
    if (this.addEventListener) { // W3C DOM
        this.addEventListener(evnt,func,false);
    } else if (this.attachEvent) { // IE DOM
        this.attachEvent("on"+evnt, func);
    } else { // No much to do
        this[evnt] = func;
    }
};
</code></pre>

<p><b>How to use it</b>:</p>

<pre><code>var my_element = document.getElementById('my_element_id');
addEvent.call(my_element, 'me_event', function(){
    console.log('my_event fires');
})
</code></pre>


<br><br>

<h3>2. CrossBrowser firing custom JavaScript events:</h3>


<p>And here is the function for creating custom event:</p>

<p>Attributes:</p>

<ul>

    <li><span>event</span> - (String) - our event keyword;</li>

</ul>

<p><span><b>this</b></span> this here is our event target element.</p>

<pre><code>function fireEvent(event){
    if (document.createEventObject){
        // dispatch for IE
        var evt = document.createEventObject();
        return this.fireEvent('on'+event,evt)
    } else {
        // dispatch for firefox + others
        var evt = document.createEvent("HTMLEvents");
        evt.initEvent(event, true, true ); // event type,bubbling,cancelable
        return !this.dispatchEvent(evt);
    }
}
</code></pre>


<p><b>How to use it</b>:</p>


<pre><code>var my_element = document.getElementById('my_element_id');
fireEvent.call(my_element, 'my_event');
</code></pre>


<h3>Example:</h3>

<p>As an example we will fire custom event when button will be pressed. </p>

<div class="example">
    <button id="event_test_element">Custom events test button. Press it.</button>
</div>


<pre><code>var button = document.getElementById('event_test_element');
// fire our event on click
addEvent.call(button, 'click', function(){
    fireEvent.call(this, 'abra-cadabra');
})

// listen 'abra-cadabra' event
addEvent.call(button, 'abra-cadabra', function(){
    alert('abra-cadabra');
})
</code></pre>
<pre>&lt;script>
var addEvent = function(evnt, func) {
    if (this.addEventListener) { // W3C DOM
    	this.addEventListener(evnt,func,false);
	} else if (this.attachEvent) { // IE DOM
		this.attachEvent("on"+evnt, func);
	} else { // No much to do
		this[evnt] = func;
	}
};

function fireEvent(event){
    if (document.createEventObject){
    	// dispatch for IE
		var evt = document.createEventObject();
		return this.fireEvent('on'+event,evt)
	} else {
		// dispatch for firefox + others
		var evt = document.createEvent("HTMLEvents");
		evt.initEvent(event, true, true ); // event type,bubbling,cancelable
		return !this.dispatchEvent(evt);
	}
}

var button = document.getElementById('event_test_element');
addEvent.call(button, 'click', function(){
    fireEvent.call(this, 'abra-cadabra'); // fire our event on click
})

addEvent.call(button, 'abra-cadabra', function(){
    // execute on 'abra-cadabra' event
    alert('abra-cadabra');
})
&lt;/script></pre>
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>5 nifty JavaScript tricks that you may not know</h1>
		<div class="post-wrapper">
			<section class="post-content"><p>Over the years, I have seen several 
JavaScript techniques that are particularly clever. Heres a short list 
of 5 such techniques that I have been using again and again. I hope it 
inspires you too to rethink how you write certain piece of code.</p>

<p>And,
 please note that some people may think clever coding impacts 
readability and they might be right. So, grasp the concept and apply it 
in your code wherever you think it helps.</p>

<h2 id="a-compact-string-comparision">1. A compact string comparision</h2>

<p>Lets say you want to check if a string value is present in a set of strings. You obviously go for a <code class="highlighter-rouge">if</code> statement as below.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">if</span><span class="p">(</span><span class="nx">fruit</span> <span class="o">===</span> <span class="s1">'apple'</span> <span class="o">||</span> <span class="nx">fruit</span> <span class="o">===</span> <span class="s1">'banana'</span> <span class="o">||</span> <span class="nx">fruit</span> <span class="o">===</span> <span class="s1">'chikoo'</span><span class="p">){</span>
	<span class="nx">doMagic</span><span class="p">();</span>
<span class="p">}</span></code></pre>

</figure><p>Heres a compact version of above code:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">if</span><span class="p">({</span><span class="na">apple</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="na">banana</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="na">chikoo</span><span class="p">:</span><span class="mi">1</span><span class="p">}[</span><span class="nx">fruit</span><span class="p">]){</span>
	<span class="nx">doMagic</span><span class="p">();</span>
<span class="p">}</span></code></pre>

</figure><p>This trick works well only if you have a small set of strings to compare.</p>

<h2 id="section">2. !!</h2>

<p>Heres a shortest way to convert any JavaScript value to its truthy / falsy representation - just use <code class="highlighter-rouge">!!val</code>. Very useful if you want to check if a value is a present or not.</p>

<p>For example,</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">if</span><span class="p">(</span><span class="o">!!</span><span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">){</span>
	<span class="nx">doMagic</span><span class="p">();</span>
<span class="p">}</span></code></pre>

</figure><p>But <code class="highlighter-rouge">!!</code> might confuse people with <code class="highlighter-rouge">!</code> operator which has a different meaning. So make a good judgement before you use <code class="highlighter-rouge">!!</code> everywhere.</p>

<h2 id="conditional-function-call">3. Conditional function call</h2>

<p>If a value is true, you want to call a function foo() otherwise you want to call bar(). You go for <code class="highlighter-rouge">if</code>, right?</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">if</span><span class="p">(</span><span class="nx">param</span><span class="p">){</span>
	<span class="nx">foo</span><span class="p">();</span>
<span class="p">}</span><span class="k">else</span><span class="p">{</span>
	<span class="nx">bar</span><span class="p">();</span>
<span class="p">}</span></code></pre>

</figure><p>Heres an alternative, short approach:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">param</span> <span class="p">?</span> <span class="nx">foo</span><span class="p">()</span> <span class="p">:</span> <span class="nx">bar</span><span class="p">();</span></code></pre>

</figure><p>yay!</p>

<h2 id="chaining-of-function-calls">4. Chaining of function calls</h2>

<p>You have three functions <code class="highlighter-rouge">one()</code>, <code class="highlighter-rouge">two()</code> and <code class="highlighter-rouge">three()</code>.
 You want to call these functions one after other, but only when a 
previous function returns a truthy value. For example, if all three 
functions returns a truthy value, then all will be called. But if the 
function <code class="highlighter-rouge">two()</code> returns false/null then function <code class="highlighter-rouge">three()</code> wont be called.</p>

<p>So, you go for <code class="highlighter-rouge">if</code>, obviously.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">if</span><span class="p">(</span><span class="nx">one</span><span class="p">()){</span>
	<span class="k">if</span><span class="p">(</span><span class="nx">two</span><span class="p">()){</span>
		<span class="nx">three</span><span class="p">();</span>
	<span class="p">}</span>
<span class="p">}</span></code></pre>

</figure><p>But lets rewrite with this one:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">one</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="nx">two</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="nx">three</span><span class="p">();</span></code></pre>

</figure><h2 id="iife">5. IIFE</h2>

<p><strong>IIFE</strong> is short for <strong>Immediately Invoked Function Expression</strong>.
 It means, you define a function and then you call it immediately. IIFE 
helped me in some usecases where I dont want to create a new function 
but I needed the logic to be inside a function block.</p>

<p>For example,
 lets say you are initializing variables and for one variable, the 
initial value needs to be calculated using some complex logic. If you 
dont want to separate this calculation logic to a seperate function, 
but you still want to wrap it in its own block, you can IIFE. Like 
below:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">doMagic</span><span class="p">(){</span>
	<span class="kd">var</span> <span class="nx">foo</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="nx">bar</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="nx">zoo</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
			<span class="c1">// some complex stuff</span>
			<span class="c1">// some more complex stuff</span>
			<span class="k">return</span> <span class="nx">stuff</span><span class="p">;</span>
		<span class="p">}()),</span>
		<span class="nx">baz</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="p">}</span></code></pre>

</figure><p>So, what do you think 
about these tricks? Do you think these are usefull or affect the code 
readability? Feel free to comment your thoughts.</p>

</section>
			
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>ES6 - Iterator, Generator Example</h1>
		<div class="post-wrapper">
			
			<section><p>ES6 comes with lots of <a href="https://github.com/lukehoban/es6features">new <em>cool</em> features</a>. Out of which, <strong>Iterators</strong> and <strong>Generators</strong> took some time to get used to. Heres an example that shows how to use ES6 Iterators and Generators.</p>
<p>Since this is experimental stuff, you need latest version of Chrome/Firefox to run the code. I used <a href="https://developer.chrome.com/devtools/docs/authoring-development-workflow#snippets">Chromes Dev tool snippets</a> to author/run the given example code.</p>
<p>Lets start with the problem definition.</p>
<p>Assume that you have a business class <code>Basket</code> that used to hold a list of items and other related methods. Now you need a way to iterate through all the items inside the <code>Basket</code>. Since <code>Basket</code> is a custom class, you can not use JavaScripts <code>for..in</code>. You need to write your own custom logic that iterates, as shown below.</p>
<h2>Iterating <code>Basket</code> using <code>for</code> loop</h2>
<figure><pre><code data-lang="javascript"><span>'use strict'</span><span>;</span>

<span>function</span> <span>Basket</span><span>()</span> <span>{</span>
	<span>// array to hold things inside the basket</span>
	<span>this</span><span>.</span><span>container</span> <span>=</span> <span>[];</span>
<span>}</span>

<span>// business method add that puts the given item in the basket</span>
<span>Basket</span><span>.</span><span>prototype</span><span>.</span><span>add</span> <span>=</span> <span>function</span><span>(</span><span>item</span><span>)</span> <span>{</span>
	<span>if</span> <span>(</span><span>!!</span><span>item</span><span>)</span> <span>{</span>
		<span>this</span><span>.</span><span>container</span><span>.</span><span>push</span><span>(</span><span>item</span><span>);</span>
	<span>}</span>
<span>}</span>

<span>function</span> <span>test</span><span>()</span> <span>{</span>
	
	<span>// create new instance of Basket.</span>
	<span>var</span> <span>fruitBasket</span> <span>=</span> <span>new</span> <span>Basket</span><span>();</span>
	
	<span>// put fruits in the fruitBasket</span>
	<span>fruitBasket</span><span>.</span><span>add</span><span>(</span><span>'apple'</span><span>);</span>
	<span>fruitBasket</span><span>.</span><span>add</span><span>(</span><span>'banana'</span><span>);</span>
	<span>fruitBasket</span><span>.</span><span>add</span><span>(</span><span>'orange'</span><span>);</span>
	
	<span>// list all fruits in the fruitBasket</span>
	<span>for</span><span>(</span><span>let</span> <span>index</span><span>=</span><span>0</span><span>;</span> <span>index</span> <span>&lt;</span> <span>fruitBasket</span><span>.</span><span>container</span><span>.</span><span>length</span><span>;</span> <span>index</span><span>++</span><span>){</span>
	    <span>console</span><span>.</span><span>log</span><span>(</span><span>fruitBasket</span><span>.</span><span>container</span><span>[</span><span>index</span><span>]);</span>
	<span>}</span>

<span>};</span>

<span>test</span><span>();</span></code></pre>
</figure><h3>Problems with <code>for</code> loop approach</h3>
<ol>
<li>The <code>for</code> loop inside the <code>test</code> method is accessing a property <code>container</code> which is supposed to be internal to the <code>fruitBasket</code>
 object. There is no need for the outer world to know the internal of an
 object to iterate it. Of course, there are other ways to fix it, but 
for this articles purpose, lets not go there.</li>
<li>You cant use <code>for(let fruit in fruitBasket)</code> to iterate through the items. Because, althogh semantically <code>fruitBasket</code> is a list, technically it is not a list or an array. So, you cant use the elegant way of <code>for..each</code>. So sad!</li>
</ol>
<p>Lets fix this with the use of Iterators.</p>
<h2>Enter <code>Iterator</code></h2>
<p>Given the above problem, we need a way to tell JavaScript that our custom object is indeed a <code>list</code> and let it use <code>for..each</code> in our object. How do we do it? With the help of <code>Iterator</code>,
 of course. We need to define a method in our object that JavaScript 
will invoke when it wants to iterate our object. And, what method will 
that be?</p>
<p>If you are coming from Java background, you must be aware of <code>Interface</code>.
 If an object tends to implement an interface, then the Java run time 
knows for sure that the object will have an implementation of all 
methods defined in that interface. So, without fear, it will invoke that
 method.</p>
<p>But, JavaScript is not Java and we dont have Interfaces here. What else we have? <strong>ES6</strong>.</p>
<p>ES6 defines two new protocols <code>iterator</code> and <code>iterable</code>,
 which in layman terms means that, you can define custom iterator 
methods in your object and tell JavaScript that thats our iterator 
method.</p>
<p>For example, you can say,</p>
<figure><pre><code data-lang="javascript"><span>var</span> <span>myObj</span> <span>=</span> <span>{};</span>
<span>myObj</span><span>[</span><span>Symbol</span><span>.</span><span>iterator</span><span>]</span> <span>=</span> <span>function</span> <span>()</span> <span>{</span>
	<span>return</span> <span>{</span>
		<span>next</span><span>:</span> <span>function</span><span>()</span> <span>{</span>
			<span>return</span> <span>{</span>
				<span>value</span><span>:</span> <span>'anything'</span><span>,</span>
				<span>done</span><span>:</span> <span>false</span> <span>// or true if completed iterating</span>
			<span>}</span>
		<span>}</span>
	<span>}</span>
<span>}</span></code></pre>
</figure><p>and you can use,</p>
<figure><pre><code data-lang="javascript"><span>for</span><span>(</span><span>let</span> <span>thing</span> <span>of</span> <span>myObj</span><span>)</span> <span>{</span> <span>console</span><span>.</span><span>log</span><span>(</span><span>thing</span><span>);</span> <span>}</span></code></pre>
</figure><p>All you need to do is from your custom iterator function, return an object that has a method <code>next()</code> defined which inturn will return an object in the format of <code><span>{</span><span>value:</span><span></span><span>'val',</span><span></span><span>done:</span><span></span><span>false</span><span>}</span></code> . JavaScript will use the <em>well-known</em> <code>Symbol.iterator</code> to identify if an object is iterable and has an iterator function defined in it. (<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/iterator">More about Symbol.iterator</a>)</p>
<p>How sweet! Lets use this concept in our <code>Basket</code> problem.</p>
<figure><pre><code data-lang="javascript"><span>'use strict'</span><span>;</span>

<span>function</span> <span>Basket</span><span>()</span> <span>{</span>
	<span>this</span><span>.</span><span>container</span> <span>=</span> <span>[];</span>

	<span>// maintain the state of current index value while iterating</span>
	<span>this</span><span>.</span><span>_index</span> <span>=</span> <span>0</span><span>;</span>
<span>}</span>

<span>Basket</span><span>.</span><span>prototype</span><span>.</span><span>add</span> <span>=</span> <span>function</span><span>(</span><span>item</span><span>)</span> <span>{</span>
	<span>if</span> <span>(</span><span>!!</span><span>item</span><span>)</span> <span>{</span>
		<span>this</span><span>.</span><span>container</span><span>.</span><span>push</span><span>(</span><span>item</span><span>);</span>
	<span>}</span>
<span>}</span>

<span>// define custom iterator</span>
<span>Basket</span><span>.</span><span>prototype</span><span>[</span><span>Symbol</span><span>.</span><span>iterator</span><span>]</span> <span>=</span> <span>function</span><span>()</span> <span>{</span>
	<span>return</span> <span>{</span>
		<span>next</span><span>:</span> <span>function</span><span>()</span> <span>{</span>
			<span>var</span> <span>result</span><span>;</span>
			<span>if</span> <span>(</span><span>this</span><span>.</span><span>_index</span> <span>&lt;</span> <span>this</span><span>.</span><span>container</span><span>.</span><span>length</span><span>)</span> <span>{</span>
				<span>result</span> <span>=</span> <span>{</span>
					<span>value</span><span>:</span> <span>this</span><span>.</span><span>container</span><span>[</span><span>this</span><span>.</span><span>_index</span><span>],</span>
					<span>done</span><span>:</span> <span>false</span>
				<span>};</span>
				<span>this</span><span>.</span><span>_index</span><span>++</span><span>;</span>
			<span>}</span> <span>else</span> <span>{</span>
				<span>// completed iterating through all items.</span>
				<span>result</span> <span>=</span> <span>{</span>
					<span>done</span><span>:</span> <span>true</span>
				<span>}</span>
				<span>this</span><span>.</span><span>_index</span> <span>=</span> <span>0</span><span>;</span>
			<span>}</span>

			<span>return</span> <span>result</span><span>;</span>
		<span>}.</span><span>bind</span><span>(</span><span>this</span><span>)</span>
	<span>};</span>
<span>}</span>

<span>function</span> <span>test</span><span>()</span> <span>{</span>

	<span>var</span> <span>fruitBasket</span><span>;</span>

	<span>fruitBasket</span> <span>=</span> <span>new</span> <span>Basket</span><span>();</span>
	<span>fruitBasket</span><span>.</span><span>add</span><span>(</span><span>'apple'</span><span>);</span>
	<span>fruitBasket</span><span>.</span><span>add</span><span>(</span><span>'banana'</span><span>);</span>
	<span>fruitBasket</span><span>.</span><span>add</span><span>(</span><span>'orange'</span><span>);</span>

	<span>for</span> <span>(</span><span>let</span> <span>fruit</span> <span>of</span> <span>fruitBasket</span><span>)</span> <span>{</span>
		<span>console</span><span>.</span><span>log</span><span>(</span><span>'fruit fetched through iterator is '</span><span>,</span> <span>fruit</span><span>);</span>
	<span>}</span>

<span>};</span>

<span>test</span><span>();</span></code></pre>
</figure><p>Now our code has improved a bit. From our <code>fruitBasket</code>, we are not exposing the internals to the outer world to iterate. And we get to use <code>for..of</code> to iterate <code>fruitBasket</code>.</p>
<p>But
 still, theres a problem. If you look at the code inside our custom 
iterator, you will notice that we are maintaining the state manually 
using the variable <code>_index</code>. We manually update this value as we iterate through the list. Is there an alternative to this?</p>
<p>Yes and its called as <strong>Generator</strong> functions.</p>
<h2>Enter <code>Generator</code></h2>
<p>By
 definition, A generator is a special type of function that works as a 
factory for iterators. In English, a generator in a function returns a <code><span>{</span><span>value:</span><span></span><span>'val',</span><span></span><span>done:</span><span></span><span>false</span><span>}</span></code> if there are items left and returns <code><span>{</span><span>done:true</span><span>}</span></code> if there are no items. And, it maintains internal state by its own.</p>
<p>A Generator function should have,</p>
<ol>
<li><code>function* ()</code> syntax</li>
<li>One or more <code>yield</code> expressions inside the function body. <code>yield</code> is a special keyword that will return a value in the form of <code><span>{</span><span>value:</span><span></span><span>'val',</span><span></span><span>done:</span><span></span><span>false</span><span>}</span></code>. (<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/yield">More about Yield</a>)</li>
</ol>
<p>Lets put this together in our <code>Basket</code> problem.</p>
<figure><pre><code data-lang="javascript"><span>'use strict'</span><span>;</span>

<span>function</span> <span>Basket</span><span>()</span> <span>{</span>
	<span>this</span><span>.</span><span>container</span> <span>=</span> <span>[];</span>
<span>}</span>

<span>Basket</span><span>.</span><span>prototype</span><span>.</span><span>add</span> <span>=</span> <span>function</span><span>(</span><span>item</span><span>)</span> <span>{</span>
	<span>if</span> <span>(</span><span>!!</span><span>item</span><span>)</span> <span>{</span>
		<span>this</span><span>.</span><span>container</span><span>.</span><span>push</span><span>(</span><span>item</span><span>);</span>
	<span>}</span>
<span>}</span>

<span>Basket</span><span>.</span><span>prototype</span><span>[</span><span>Symbol</span><span>.</span><span>iterator</span><span>]</span> <span>=</span> <span>function</span><span>*</span><span>()</span> <span>{</span>
	<span>for</span><span>(</span><span>let</span> <span>index</span><span>=</span><span>0</span><span>;</span> <span>index</span> <span>&lt;</span> <span>this</span><span>.</span><span>container</span><span>.</span><span>length</span><span>;</span> <span>index</span><span>++</span><span>){</span>
		<span>yield</span> <span>this</span><span>.</span><span>container</span><span>[</span><span>index</span><span>];</span>
	<span>}</span>
	
<span>}</span>

<span>function</span> <span>test</span><span>()</span> <span>{</span>

	<span>var</span> <span>fruitBasket</span><span>,</span> <span>i</span><span>;</span>

	<span>fruitBasket</span> <span>=</span> <span>new</span> <span>Basket</span><span>();</span>
	<span>fruitBasket</span><span>.</span><span>add</span><span>(</span><span>'apple'</span><span>);</span>
	<span>fruitBasket</span><span>.</span><span>add</span><span>(</span><span>'banana'</span><span>);</span>
	<span>fruitBasket</span><span>.</span><span>add</span><span>(</span><span>'orange'</span><span>);</span>
	
	
	<span>for</span><span>(</span><span>let</span> <span>fruit</span> <span>of</span> <span>fruitBasket</span><span>){</span>
		<span>console</span><span>.</span><span>log</span><span>(</span><span>'fruit fetched through iterator/generator is'</span><span>,</span> <span>fruit</span><span>);</span>
	<span>}</span>

<span>};</span>

<span>test</span><span>();</span></code></pre>
</figure><p>Notice how simple our iterator method has become.</p>
<p>Hopefully,
 this article sheds some light on the ES6 Iterator / Generator concepts.
 Please leave your questions / feedback (if any) in the comment section.</p>
</section>
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>Javascript Prototype methods vs Object methods</h1>
		<div class="post-wrapper">
			<section class="post-content"><p>In JavaScript, when you define an object, you can attach its functions in two different ways.</p>
<ol>
<li>Inside objects constructor function, using <code class="highlighter-rouge">this.func = function(){...}</code></li>
<li>Using <code class="highlighter-rouge">prototype</code>. i.e. <code class="highlighter-rouge">Obj.prototype.func = function() {...}</code>.</li>
</ol>
<p>In both approaches, the function <code class="highlighter-rouge">func()</code> will be accessible to all the instances of your object.</p>
<p>But which one is the best way to use?</p>
<p>In short: Use <code class="highlighter-rouge">prototype</code> - which is effective for <em>most</em> cases. If your objective is to share common functionality between your object instances, then <code class="highlighter-rouge">prototype</code> is the way to go.</p>
<h2 id="modifying-the-common-functionality-is-easy-with-prototype">1. Modifying the common functionality is easy with Prototype</h2>
<p>When you use <code class="highlighter-rouge">prototype</code>
 to attach common functions to objects, it is easy to modify the common 
logic even after the instances are created. The old and new objects will
 use the updated code. But this may not be possible if you attach the 
common code to each object instance, using <code class="highlighter-rouge">this.func()</code>.</p>
<p>Lets see this with an example.</p>
<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">Parent</span><span class="p">(</span><span class="nx">gender</span><span class="p">){</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">gender</span> <span class="o">=</span> <span class="nx">gender</span><span class="p">;</span>

  <span class="c1">// attach the common function to each object instance.</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">yellAtChild</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Somebody gonna get a hurt real bad!'</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Let's create dad and mom and start yelling at kids.</span>
<span class="kd">var</span> <span class="nx">dad</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parent</span><span class="p">(</span><span class="s1">'male'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">mom</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parent</span><span class="p">(</span><span class="s1">'female'</span><span class="p">);</span>
<span class="nx">dad</span><span class="p">.</span><span class="nx">yellAtChild</span><span class="p">();</span> <span class="c1">// Somebody gonna get a hurt real bad!</span>
<span class="nx">mom</span><span class="p">.</span><span class="nx">yellAtChild</span><span class="p">();</span> <span class="c1">// Somebody gonna get a hurt real bad!</span>

<span class="c1">// but, Russell has decide to sue you if you use his catch phrase.</span>
<span class="c1">// Let's try to tell our already created dad &amp; mon to use different phrase.</span>

<span class="c1">// ERROR: Not possible to do this way.</span>
<span class="nx">Parent</span><span class="p">.</span><span class="nx">yellAtChild</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="p">....</span> <span class="p">}</span> 

<span class="c1">// You need to override the `yellAtChild` method for each object instance.</span>
<span class="nx">dad</span><span class="p">.</span><span class="nx">yellAtChild</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Shut up!'</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">mom</span><span class="p">.</span><span class="nx">yellAtChild</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Go to bed!'</span><span class="p">);</span>
<span class="p">}</span>
<span class="nx">dad</span><span class="p">.</span><span class="nx">yellAtChild</span><span class="p">();</span> <span class="c1">// Shut up!</span>
<span class="nx">mom</span><span class="p">.</span><span class="nx">yellAtChild</span><span class="p">();</span> <span class="c1">// Go to bed!</span></code></pre>
</figure><p>As
 you can see, if you decide to change the common logic, you can not 
easily update the object methods since they are already created. You 
need to modify each and every instance of that object which is tedious.</p>
<p>Lets see the same example, but this time with <code class="highlighter-rouge">prototype</code>.</p>
<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">Parent</span><span class="p">(</span><span class="nx">gender</span><span class="p">){</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">gender</span> <span class="o">=</span> <span class="nx">gender</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Attach the common function to prototype.</span>
<span class="nx">Parent</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">yellAtChild</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Somebody gonna get a hurt real bad!'</span><span class="p">);</span>
<span class="p">};</span>

<span class="c1">// Let's create dad and mom and start yelling at kids.</span>
<span class="kd">var</span> <span class="nx">dad</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parent</span><span class="p">(</span><span class="s1">'male'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">mom</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parent</span><span class="p">(</span><span class="s1">'female'</span><span class="p">);</span>
<span class="nx">dad</span><span class="p">.</span><span class="nx">yellAtChild</span><span class="p">();</span> <span class="c1">// Somebody gonna get a hurt real bad!</span>
<span class="nx">mom</span><span class="p">.</span><span class="nx">yellAtChild</span><span class="p">();</span> <span class="c1">// Somebody gonna get a hurt real bad!</span>

<span class="c1">// but, Russell has decide to sue you if you use his catch phrase.</span>
<span class="c1">// Simple: Just modify the function at Parent.prototype.</span>

<span class="nx">Parent</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">yellAtChild</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'You are grounded.'</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">dad</span><span class="p">.</span><span class="nx">yellAtChild</span><span class="p">();</span> <span class="c1">// You are grounded</span>
<span class="nx">mom</span><span class="p">.</span><span class="nx">yellAtChild</span><span class="p">();</span> <span class="c1">// You are grounded</span></code></pre>
</figure><p>So, all the changes that you make to functions in <code class="highlighter-rouge">prototype</code> will reflect in all the instances of that object. Even for the new objects that you create will use the modifed method.</p>
<h2 id="prototype-is-fast-and-memory-efficient">2. Prototype is fast and memory efficient.</h2>
<p>When
 you attach methods to object instances, then each instance will have 
its own copy of the method. This involves the system processing time 
and the memory.</p>
<p>But, when you attach the method to objects <code class="highlighter-rouge">prototype</code>,
 then only one version of the method exists. This doesnt need as much 
processing time and memory when compared to the above approach.</p>
<p>Lets see this with an example.</p>
<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">Parent</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">yellAtKid</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Somebody gonna get a hurt real bad!'</span><span class="p">);</span>
  <span class="p">};</span>
<span class="p">};</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">profile</span><span class="p">(</span><span class="s1">'Object Methods'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">dads</span> <span class="o">=</span> <span class="p">[];</span>
<span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;=</span><span class="mi">10000000</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">){</span>
  <span class="nx">dads</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">new</span> <span class="nx">Parent</span><span class="p">());</span>
<span class="p">}</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">profileEnd</span><span class="p">();</span> <span class="c1">// 4903.267ms</span></code></pre>
</figure><p>When I profiled the above code in Firefox / Mac, the <code class="highlighter-rouge">populate()</code> method took about <strong>4903.267ms</strong> to execute. If I changed method attachment to <code class="highlighter-rouge">prototype</code> instead, like below:</p>
<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">Parent</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
<span class="p">};</span>

<span class="nx">Parent</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">yellAtKid</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Somebody gonna get a hurt real bad!'</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">profile</span><span class="p">(</span><span class="s1">'Prototype Methods'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">dads</span> <span class="o">=</span> <span class="p">[];</span>
<span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;=</span><span class="mi">10000000</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">){</span>
  <span class="nx">dads</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">new</span> <span class="nx">Parent</span><span class="p">());</span>
<span class="p">}</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">profileEnd</span><span class="p">();</span> <span class="c1">// 3271.413ms</span></code></pre>
</figure><p>This time, the <code class="highlighter-rouge">populate()</code> method took only <strong>3271.413ms</strong> seconds. So, about <strong>1.5 seconds</strong> we save, just by reattaching the methods to <code class="highlighter-rouge">prototype</code>,</p>
<p>I hope that explains why <code class="highlighter-rouge">prototype</code> is best way to share common logic between your javascript objects.</p>
</section>
			
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>Functional and Object Oriented Programming with Higher Order Functions</h1>
		<div class="post-wrapper">
			
			<p>A higher order function is a function whose argument list or return 
value includes a function. Knowledge about higher order functions is 
essential when writing programs both in functional and in object 
oriented style.</p>
<h3>Why is functional programming good?</h3>
<p>When writing programs in a functional style, you have to treat your 
data as immutable. Operations on data are not allowed to mutate any 
arguments outside the function. In case a reference type is passed to a 
function (object, array), the value of this reference type cannot be 
mutated.</p>
<blockquote>
<p>
  If you write code in a functional style, all your functions are side effect free.
</p>
</blockquote>
<p>A program without side effects is more easily testable. Functions are
 your building blocks. As functions do not mutate values outside their 
scope, all your building blocks can be tested in isolation.</p>
<h3>Examples for functional programming utilities</h3>
<p>The <code>map</code> function is applied on arrays. It accepts one function argument. This function is applied on each element of the array.</p>
<p>For instance, suppose that you have a shopping basket containing arrays of objects.</p>
<p></p>
<div id="crayon-576bff9509dbe024840336" class="crayon-syntax crayon-theme-sublime-text crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px ! important; line-height: 15px ! important; height: auto;"><pre>var basket = [
    { name: 'How to Draw Comic Books', price: 10 },
    { name: 'Programming in Basic', price: 5 },
    { name: 'Programming in Turbo Pascal', price: 5 },
    { name: 'Conspiracy Theory in Practice', price: 99 },
    { name: 'Let there be Poker Strategy', price: 999 }
];
</pre>
</div>
<p></p>
<p>Suppose that a coupon code is applied on the basket, giving you 20% 
discount on the price of the items. How can we adjust the price of the 
items in the basket?</p>
<p></p>
<div id="crayon-576bff9509dca003201979" class="crayon-syntax crayon-theme-sublime-text crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px ! important; line-height: 15px ! important; height: auto;"><pre>var discount = 0.2;
var discountedBasket = basket.map( function( item ) {
    item.price *= (1 - discount);
    return item;
});
</pre>
</div>
<p></p>
<p>The above implementation is flawed, because it mutates the original 
basket. Although the value of the original basket is not used anywhere, 
in functional programming, we are supposed to treat data as immutable. 
Therefore, it is advised to create the mapping like this:</p>
<p></p>
<div id="crayon-576bff9509dce528080245" class="crayon-syntax crayon-theme-sublime-text crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px ! important; line-height: 15px ! important; height: auto;"><pre>var discount = 0.2;
var discountedBasket = basket.map( function( item ) {
        return {
            price: item.price * (1 - discount),
            name:  item.name
        };
});
</pre>
</div>
<p></p>
<p>Another option is to <a href="http://www.zsoltnagy.eu/cloning-objects-in-javascript/" target="_blank">clone</a> the item on the first line of the mapper function.</p>
<p>In the second example, we will search for items that are not more expensive than <code>5</code> units.</p>
<p></p>
<div id="crayon-576bff9509dd1094108298" class="crayon-syntax crayon-theme-sublime-text crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px ! important; line-height: 15px ! important; height: auto;"><pre>var cheapItemsInBasket = basket.filter( function( item ) {
    return item.price &lt;= 5;
} );
</pre>
</div>
<p></p>
<p>Calculating the total basket value can be done using a simple <code>for</code> loop or using the <code>reduce</code> function.</p>
<p></p>
<div id="crayon-576bff9509dd4510609449" class="crayon-syntax crayon-theme-sublime-text crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px ! important; line-height: 15px ! important; height: auto;"><pre>basket.reduce( function( intermediateValue, item ) {
    return intermediateValue + item.price;
}, 0 );
</pre>
</div>
<p></p>
<p>Higher order functions are quite common. They are not limited to the 
typical functions you would learn at a functional programming course. 
Just think about the jQuery deferred object, promises in general, or 
AJAX requests.</p>
<h3>Why is Object Oriented Programming good?</h3>
<p>Object oriented programming often lets you model the real world more 
closely than functional programming. The concept of internal state is 
used and supported by JavaScript. In general, more developers have 
experience writing and maintaining object oriented code than functional 
code.</p>
<p>Furthermore, object oriented programs tend to be more efficient than 
functional programs. Full immutability in functional programming comes 
at the cost of <a href="http://www.zsoltnagy.eu/cloning-objects-in-javascript/" target="_blank">deep cloning</a> your state during each and every transformation.</p>
<h3>Context binding</h3>
<p>Context binders are also higher order functions. Binding is special, 
because this is our first example where a function returns another 
function.</p>
<p>Why is context binding important? Let me illustrate it using an example:</p>
<p></p>
<div id="crayon-576bff9509dd8869579591" class="crayon-syntax crayon-theme-sublime-text crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px ! important; line-height: 15px ! important; height: auto;"><pre>var Person = function( name, delay ) {
    this.name = name;
    this.delay = delay;
    this.introduce = function() { 
        console.log( 'Hi, I am ' + this.name ); 
    };
    this.introduceWithDelay = function() {
        setTimeout( this.introduce, this.delay );
    };  
}

var john = new Person( 'John', 1000 );
john.introduce();           // Hi, I am John
john.introduceWithDelay();  // After a second: Hi, I am 
</pre>
</div>
<p></p>
<p>When the callback function of <code>setTimeout</code> is called, the context is set to <code>window</code>. As <code>window.name</code> does not exist, the second introduction fails.</p>
<blockquote>
<p>
  This is a typical situation when many developers solve the problem by making the <code>self = this</code> assignment and using <code>self</code> inside the callback. I seriously suggest never making the <code>self = this</code>
 assignment, because it creates maintainability concerns. Suppose you 
pay full attention on the implementation. One day, one of your peers 
decides on moving a line of code from the outside to the inside of the 
callback. If the moved line contains <code>this</code> and the reference is not changed to <code>self</code>, a well hidden fault may easily be left in the code.
</p>
</blockquote>
<p>The proper solution is context binding.</p>
<p></p>
<div id="crayon-576bff9509ddc334960002" class="crayon-syntax crayon-theme-sublime-text crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px ! important; line-height: 15px ! important; height: auto;"><pre>var Person = function( name, delay ) {
    this.name = name;
    this.delay = delay;
    this.introduce = function() { 
        console.log( 'Hi, I am ' + this.name ); 
    };
    this.introduceWithDelay = function() {
        setTimeout( this.introduce.bind( this ), this.delay );
    };  
}

var john = new Person( 'John', 1000 );
john.introduce();           // Hi, I am John
john.introduceWithDelay();  // After a second: Hi, I am John
</pre>
</div>
<p></p>
<ul>

<li><code>this.introduce</code> is a function</li>

<li><code>this.introduce.bind</code> is a function accepting a context and returning a function</li>

<li>the return value <code>this.introduce.bind( this )</code> does the same as <code>this.introduce</code>, fixing the context</li>

</ul>
<p>There are several options for binding the context. The native <code>bind</code> method should be good enough unless you support legacy browsers such as IE8. Alternatives are <code>_.bind</code> or <code>$.proxy</code>.</p>
<h3>Higher order functions are not hard</h3>
<p>Higher order functions are just like any other functions, with the 
twist that their return value or argument list contains a function. This
 article covered two types of higher order functions:</p>
<ul>

<li>functional programming utility functions such as <code>map</code>, <code>filter</code> and <code>reduce</code>,</li>

<li>the object oriented utility function <code>bind</code>.</li>

</ul>
<p>Both functional and object oriented programming has a wide support. 
Regardless of your choice, you will use higher order functions from time
 to time.</p>
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>19+ JavaScript Shorthand Coding Techniques</h1>
		<div class="post-wrapper">
			<p><strong>This really is a must read for any JavaScript based developer.</strong> I have made this post as a vital source of reference for learning shorthand JavaScript coding techniques that I have picked up over the years. To help you understand what it going on I have included the longhand versions to give some coding perspective on the shorts.</p>
<p><strong>Update 05/05/2013 &#8211; There are now 19 strong keep em coming!</strong> :)</p>
<ul>
<li>Step 1 &#8211; Learn the JavaScript shorthand techniques.</li>
<li>Step 2 &#8211; Save valuable coding time by keeping your code to a minimum.</li>
<li>Step 3 &#8211; Impress your colleagues with your awesome new coding skillz!</li>
</ul>
<p>It&#8217;s as easy as steps 1,2,3. Here they are.</p>
<h2 id="1iftrueelseshorthand">1. If true &#8230; else Shorthand</h2>
<p>This is a great code saver for when you want to do something if the test is true, else do something else by using the ternary operator.<br />
<span id="more-81903"></span></p>
<p>Longhand:</p>
<pre><code class="javascript language-javascript">var big;
if (x &gt; 10) {
    big = true;
}
else {
    big = false;
}
</code></pre>
<p>Shorthand:</p>
<pre><code class="javascript language-javascript">var big = (x &gt; 10) ? true : false;
</code></pre>
<p>If you rely on some of the weak typing characteristics of JavaScript, this can also achieve more concise code. For example, you could reduce the preceding code fragment to this:</p>
<pre><code class="javascript language-javascript">var big = (x &gt; 10);

//further nested examples
var x = 3,
big = (x &gt; 10) ? "greater 10" : (x &lt; 5) ? "less 5" : "between 5 and 10";
console.log(big); //"less 5"

var x = 20,
big = {true: x&gt;10, false : x&lt; =10};
console.log(big); //"Object {true=true, false=false}"
</code></pre>
<h2 id="2nullundefinedemptychecksshorthand">2. Null, Undefined, Empty Checks Shorthand</h2>
<p>When creating new variables sometimes you want to check if the variable your referencing for it&#8217;s value isn&#8217;t null or undefined. I would say this is a very common check for JavaScript coders.</p>
<p>Longhand:</p>
<pre><code class="javascript language-javascript">if (variable1 !== null || variable1 !== undefined || variable1 !== '') {
     var variable2 = variable1;
}
</code></pre>
<p>Shorthand:</p>
<pre><code class="javascript language-javascript">var variable2 = variable1  || '';
</code></pre>
<p>Don&#8217;t believe me? Test it yourself (paste into Firebug and click run):</p>
<pre><code class="javascript language-javascript">//null value example
var variable1 = null;
var variable2 = variable1  || '';
console.log(variable2);
//output: '' (an empty string)

//undefined value example
var variable1 = undefined;
var variable2 = variable1  || '';
console.log(variable2);
//output: '' (an empty string)

//normal value example
var variable1 = 'hi there';
var variable2 = variable1  || '';
console.log(variable2);
//output: 'hi there'
</code></pre>
<h2 id="3objectarraynotationshorthand">3. Object Array Notation Shorthand</h2>
<p>Useful way of declaring small arrays on one line.</p>
<p>Longhand:</p>
<pre><code class="javascript language-javascript">var a = new Array();
a[0] = "myString1";
a[1] = "myString2";
a[2] = "myString3";
</code></pre>
<p>Shorthand:</p>
<pre><code class="javascript language-javascript">var a = ["myString1", "myString2", "myString3"];
</code></pre>
<h2 id="4associativearraynotationshorthand">4. Associative Array Notation Shorthand</h2>
<p>The old school way of setting up an array was to create a named array and then add each named element one by one. A quicker and more readable way is to add the elements at the same time using the object literal notation. <em>Please note that Associative Array are essentially JavaScript Objects with properties.</em></p>
<p>Longhand:</p>
<pre><code class="javascript language-javascript">var skillSet = new Array();
skillSet['Document language'] = 'HTML5';
skillSet['Styling language'] = 'CSS3';
skillSet['Javascript library'] = 'jQuery';
skillSet['Other'] = 'Usability and accessibility';
</code></pre>
<p>Shorthand:</p>
<pre><code class="javascript language-javascript">var skillSet = {
    'Document language' : 'HTML5',
    'Styling language' : 'CSS3',
    'Javascript library' : 'jQuery',
    'Other' : 'Usability and accessibility'
};
</code></pre>
<p>Dont forget to omit the final comma otherwise certain browsers will complain (not naming any names, IE).</p>
<h2 id="5declaringvariablesshorthand">5. Declaring variables Shorthand</h2>
<p>It is sometimes good practice to including variable assignments at the beginning of your functions. This shorthand method can save you lots of time and space when declaring multiple variables at the same time.</p>
<p>longhand:</p>
<pre><code class="javascript language-javascript">var x;
var y;
var z = 3;
</code></pre>
<p>shorthand:</p>
<pre><code class="javascript language-javascript">var x, y, z=3;
</code></pre>
<h2 id="6assignmentoperatorsshorthand">6. Assignment Operators Shorthand</h2>
<p>Assignment operators are used to assign values to JavaScript variables and no doubt you use arithmetic everyday without thinking (no matter what programming language you use Java, PHP, C++ it&#8217;s essentially the same principle).</p>
<p>Longhand:</p>
<pre><code class="javascript language-javascript">x=x+1;
minusCount = minusCount - 1;
y=y*10;
</code></pre>
<p>Shorthand:</p>
<pre><code class="javascript language-javascript">x++;
minusCount --;
y*=10;
</code></pre>
<p>Other shorthand operators, given that x=10 and y=5, the table below explains the assignment operators:</p>
<pre><code class="javascript language-javascript">x += y //result x=15
x -= y //result x=5
x *= y //result x=50
x /= y //result x=2
x %= y //result x=0
</code></pre>
<h2 id="7regexpobjectshorthand">7. RegExp Object Shorthand</h2>
<p>Example to avoid using the RegExp object.</p>
<p>Longhand:</p>
<pre><code class="javascript language-javascript">var re = new RegExp("\d+(.)+\d+","igm"),
result = re.exec("padding 01234 text text 56789 padding");
console.log(result); //"01234 text text 56789"
</code></pre>
<p>Shorthand:</p>
<pre><code class="javascript language-javascript">var result = /d+(.)+d+/igm.exec("padding 01234 text text 56789 padding");
console.log(result); //"01234 text text 56789"
</code></pre>
<h2 id="8ifpresenceshorthand">8. If Presence Shorthand</h2>
<p>This might be trivial, but worth a mention. When doing &#8220;if checks&#8221; assignment operators can sometimes be ommited.</p>
<p>Longhand:</p>
<pre><code class="javascript language-javascript">if (likeJavaScript == true)
</code></pre>
<p>Shorthand:</p>
<pre><code class="javascript language-javascript">if (likeJavaScript)
</code></pre>
<p>Here is another example. If &#8220;a&#8221; is NOT equal to true, then do something.</p>
<p>Longhand:</p>
<pre><code class="javascript language-javascript">var a;
if ( a != true ) {
// do something...
}
</code></pre>
<p>Shorthand:</p>
<pre><code class="javascript language-javascript">var a;
if ( !a ) {
// do something...
}
</code></pre>
<h2 id="9functionvariableargumentsshorthand">9. Function Variable Arguments Shorthand</h2>
<p>Object literal shorthand can take a little getting used to, but seasoned developers usually prefer it over a series of nested functions and variables. You can argue which technique is shorter, but I enjoy using object literal notation as a clean substitute to functions as constructors.</p>
<p>Longhand:</p>
<pre><code class="javascript language-javascript">function myFunction( myString, myNumber, myObject, myArray, myBoolean ) {
    // do something...
}
myFunction( "String", 1, [], {}, true );
</code></pre>
<p>Shorthand (looks long but only because I have console.log&#8217;s in there!):</p>
<pre><code class="javascript language-javascript">function myFunction() {
    console.log( arguments.length ); // Returns 5
    for ( i = 0; i &lt; arguments.length; i++ ) {
        console.log( typeof arguments[i] ); // Returns string, number, object, object, boolean
    }
}
myFunction( "String", 1, [], {}, true );
</code></pre>
<h2 id="10javascriptforeachloopshorthand">10. JavaScript foreach Loop Shorthand</h2>
<p>This little tip is really useful if you want plain JavaScript and hence can&#8217;t use <a href="http://www.sitepoint.com/jquery-each-function-examples/">jQuery.each</a> or Array.forEach().</p>
<p>Longhand:</p>
<pre><code class="javascript language-javascript">for (var i = 0; i &lt; allImgs.length; i++)
</code></pre>
<p>Shorthand:</p>
<pre><code class="javascript language-javascript">for(var i in allImgs)
</code></pre>
<p>Shorthand for Array.forEach:</p>
<pre><code class="javascript language-javascript">function logArrayElements(element, index, array) {
    console.log("a[" + index + "] = " + element);
}
[2, 5, 9].forEach(logArrayElements);
// logs:
// a[0] = 2
// a[1] = 5
// a[2] = 9
</code></pre>
<h2 id="11charatshorthand">11. charAt() Shorthand</h2>
<p>You can use the eval() function to do this but this bracket notation shorthand technique is much cleaner than an evaluation, and you will win the praise of colleagues who once scoffed at your amateur coding abilities!</p>
<p>Longhand:</p>
<pre><code class="javascript language-javascript">"myString".charAt(0);
</code></pre>
<p>Shorthand:</p>
<pre><code class="javascript language-javascript">"myString"[0]; // Returns 'm'
</code></pre>
<h2 id="12comparisonreturns">12. Comparison returns</h2>
<p>We&#8217;re no longer relying on the less reliable == as !(ret == undefined) could be rewritten as !(ret) to take advantage of the fact that in an or expression, ret (if undefined or false) will skip to the next condition and use it instead. This allows us to trim down our 5 lines of code into fewer characters and it&#8217;s once again, a lot more readable.</p>
<p>Longhand:</p>
<pre><code class="javascript language-javascript">    if (!(ret == undefined)) {
        return ret;
    } else{
       return fum('g2g');
    }
</code></pre>
<p>Shorthand:</p>
<pre><code class="javascript language-javascript">return ret || fum('g2g');
</code></pre>
<h2 id="13shortfunctioncalling">13. Short function calling</h2>
<p>Just like #1 you can use ternary operators to make function calling shorthand based on a conditional.</p>
<p>Longhand:</p>
<pre><code class="javascript language-javascript">function x() {console.log('x')};function y() {console.log('y')};
var z = 3;
if (z == 3) 
{
    x();
} else 
{
    y();
}
</code></pre>
<p>Shorthand:</p>
<pre><code class="javascript language-javascript">function x() {console.log('x')};function y() {console.log('y')};var z = 3;
(z==3?x:y)(); // Short version!
</code></pre>
<h2 id="14switchknightmare">14. Switch Knightmare</h2>
<p>Everyone loves switch statements, <em>cough</em>. Here is how you might avoid switch case syndrome. </p>
<p>Longhand:</p>
<pre><code class="javascript language-javascript">switch (something) {

    case 1:
        doX();
    break;

    case 2:
        doY();
    break;

    case 3:
        doN();
    break;

    // And so on...

}
</code></pre>
<p>Shorthand:</p>
<pre><code class="javascript language-javascript">var cases = {
    1: doX,
    2: doY,
    3: doN
};
if (cases[something]) {
    cases[something]();
}
</code></pre>
<h2 id="15decimalbaseexponents">15. Decimal base exponents</h2>
<p>You may have seen this one around it&#8217;s essentially a fancy way to write without the zeros. 1e7 essentially means 1 followed by 7 zeros &#8211; it represents a decimal base (JS interprets as a float type) equal to 10,000,000.</p>
<p>Longhand:</p>
<pre><code class="javascript language-javascript">for (var i = 0; i &lt; 10000; i++) {
</code></pre>
<p>Shorthand:</p>
<pre><code class="javascript language-javascript">for (var i = 0; i &lt; 1e7; i++) {
</code></pre>
<h2 id="16decimalbaseexponents">16. Decimal base exponents</h2>
<p>You can use 1 and 0 to represent true and false. I&#8217;ve seen this used in JavaScript game development in shorthand while loops. Note that if you use the negative start your array may be in reverse. You can also use while(i++&lt;10) and you don&#8217;t have to add the i++ later on inside the while.</p>
<p>Longhand:</p>
<pre><code class="javascript language-javascript">var i=0;
while (i&amp;lt;9)
{
  //do stuff
  i++; //say
}
</code></pre>
<p>Shorthand:</p>
<pre><code class="javascript language-javascript">var i=9;
while(i--)
{
    //goes until i=0
}

or

var i=-9;
while(i++)
{
    //goes until i=0
}
</code></pre>
<h2 id="17shorterifz">17. Shorter IF&#8217;z</h2>
<p>If you have mutiple IF variable value comparisons you can simply ass them to an array and check for presence. You could use $.inArray as an alternative.</p>
<p>Longhand:</p>
<pre><code class="javascript language-javascript">if( myvar==1 || myvar==5 || myvar==7 || myvar==22 ) alert('yeah')
</code></pre>
<p>Shorthand:</p>
<pre><code class="javascript language-javascript">if([1,5,7,22].indexOf(myvar)!=-1) alert('yeah baby!')
</code></pre>
<h2 id="18lookuptablesshorthand">18. Lookup Tables Shorthand</h2>
<p>If you have code that behaves differently based on the value of a property, it can often result in conditional statements with multiple else ifs or a switch cases. You may prefer to use a lookup table if there is more than two options (even a switch statement looks ugly!).</p>
<p>Longhand:</p>
<pre><code class="javascript language-javascript">if (type === 'aligator')
{
    aligatorBehavior();
}
else if (type === 'parrot')
{
    parrotBehavior();
}
else if (type === 'dolphin')
{
    dolphinBehavior();
}
else if (type === 'bulldog')
{
    bulldogBehavior();
}
else
{
    throw new Error('Invalid animal ' + type);
}
</code></pre>
<p>Shorthand:</p>
<pre><code class="javascript language-javascript">var types = {
  aligator: aligatorBehavior,
  parrot: parrotBehavior,
  dolphin: dolphinBehavior,
  bulldog: bulldogBehavior
};

var func = types[type];
if (!func) throw new Error('Invalid animal ' + type); func();
</code></pre>
<h2 id="19doublebitwise">19. Double Bitwise</h2>
<p>The double bitwise trick provides us with some pretty nifty shorthand tricks. Read more about it here: <a href="http://james.padolsey.com/javascript/double-bitwise-not/">Double bitwise NOT (~~)</a>.</p>
<p>Longhand:</p>
<pre><code class="javascript language-javascript">Math.floor(4.9) === 4  //true
</code></pre>
<p>Shorthand:</p>
<pre><code class="javascript language-javascript">~~4.9 === 4  //true
</code></pre>
<h2 id="20suggestone">20. Suggest one?</h2>
<p>I really do love these and would love to find more, please leave a comment!</p>
			
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>Understand</h1>
		<div class="post-wrapper">
			
			
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>Understand</h1>
		<div class="post-wrapper">
			
			
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		<!--=========================
			START : POST
		=============================-->
		<h1>Understand</h1>
		<div class="post-wrapper">
			
			
		</div>
		<!--=========================
			END : POST
		=============================-->
		
		
</body>
</html>