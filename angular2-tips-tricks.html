<html><head>
		<meta charset="utf-8">
		<title>Angular2/4 Tips :: Part 1</title>
		<meta name="title" content="">
		<meta name="description" content="">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<!--<link href='https://fonts.googleapis.com/css?family=Open+Sans:400,600,700' rel='stylesheet' type='text/css'>
		<link href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700,700i|PT+Serif:400,700" rel="stylesheet">-->
		<style>
* { box-sizing: border-box; }
body { 
	font-family: 'Open Sans', Arial, sans-serif;
	font-size: 14px;
	line-height: 1.7;
	padding: 0.5em;
	font-family: 'PT Sans', Arial, sans-serif;
	
}
em, strong { font-weight: bold; }
h1 { font-size: 1.6em; font-family: 'PT Serif', Arial, serif; padding: 10px 0; margin: 0; }
h2, h3, h6 { 
	font-size: 1.3em;
	font-family: 'PT Serif', Arial, serif;
	padding-left: 1em;
	border-left: 2px solid #868686; 
}
img { display: block; margin: 0 auto; max-width: 100%; }
pre { 
	border: 1px dashed #333; 
	padding: 1em 2em; 
	font-family: Consolas,monospace; 
	background-color: #EEE; 
	overflow-x: scroll; 
	font-size: 14px;  
	white-space: pre-wrap; 
	word-wrap: break-word; 
}
pre {
-moz-box-sizing: border-box;
    box-sizing: border-box;
    margin: 1em auto;
    border: 1px dashed #333;
    width: 100%;
    padding: 1em 1.5em;
    font-family: Inconsolata, Consolas, monospace, sans-serif;
    font-size: 1em;
	line-height: 1.5;
    overflow: auto;
    background: #F7FAFB;
    border-radius: 3px;
	position:relative;
}
code { 
	background-color: #EEE;
    font-family: Consolas,monospace;
    border: solid 1px #CCC;
    padding: 0 8px;
    border-radius: 3px;
    display: inline-block;
    font-size: 14px;
}
pre code { background-color: transparent; padding: 0; display: block; border: 0px solid; }
pre:after {
	content: "<CODE>";
	position: absolute;
	top:0;
	right: 0;
	padding: 5px 15px;
	background: #999;
	color: #FFF;
}

.home-screen { border: 1px solid #777; padding: 4em 0; margin: 2em 0; }
.home-screen * { font-family: 'PT Sans', Arial, sans-serif; font-size: 3em; font-weight: normal; }

/* = Index
-------------------------------*/
.tutorial-index {
	counter-reset: section;
}
.tutorial-index h1:before {
    /*counter-increment: section;
    content: counter(section) " : ";*/
}
.tutorial-index h1 {font-size: 1.2em; padding: 5px 0; font-family: 'Open Sans', Arial, sans-serif; line-height: normal;}
.tutorial-index a { display: block; float: left; width: 50%;}
.tutorial-index a { text-decoration: none; }


/* = Main
-------------------------------*/
.main { counter-reset: mainsection; }
.main h1 { font-size: 1.6em; border-bottom: 2px solid #000; font-family: 'PT Serif', Arial, serif; padding: 10px 0; margin: 0; }
.main h1:before {
    /*counter-increment: mainsection;
    content: counter(mainsection) " : ";
	*/
}

/* = ClearFix
-------------------------------*/
.cf:before,
.cf:after {
    content: " ";
    display: table;
}
.cf:after {
    clear: both;
}
.tc { text-align: center}

/* = TABLE
-------------------------------*/
table { width: 100%; max-width: 100%; margin: 1em 0; border-collapse: collapse;}
table td, table th { border: 1px solid #cdcfd0; padding: 10px;}
table th { border-bottom-width: 2px; background-color: #e8e9ea; }
table tr:nth-of-type(odd) {
    background-color: #f9f9f9;
}
@media print {
    .main article h1 { 
		page-break-before: always; 
	}
	pre, code, pre code, pre span, code span, pre code span {
		/*page-break-inside: avoid;
		-webkit-column-break-inside : avoid;*/
	}
}
		</style>
	</head>
	<body>
	<div class="links tc"><a href="javascript_part_3.html">Part 3</a> | <a href="javascript_part_4.html">Part 4</a> | <a href="javascript_part_5.html">Part 5</a> | <a href="ES6-javascript_part_6.html">Part 6</a></div>
		<div class="home-screen tc cf">
			<h1>Angular2/4 Tips</h1>
			<h4>- Part 1 -</h4>
		</div>
		<!--================= START :: Tutorial Index =================-->
<div class="tutorial-index cf">
	<a href="#t-01"><h1>01 : What is the proper use of an EventEmitter?</h1></a>
	<a href="#t-02"><h1>02 : Index</h1></a>
	<a href="#t-03"><h1>03 : Seven JavaScript Quirks I Wish I'd Known About</h1></a>
	<a href="#t-04"><h1>04 : Named function expressions demystified</h1></a>
</div>
		<!--================= END :: Tutorial Index =================-->
		
		<main class="main cf">
			
			<section class="section__one">
			
			<!--================= START :: Tutorial =================-->
				<article>
					<a id="t-01" name="t-01"></a><h1>01 : What is the proper use of an EventEmitter?</h1>
					<span class="ref-site">https://stackoverflow.com/questions/36076700/what-is-the-proper-use-of-an-eventemitter</span>
					<div class="tutorial__content">
<div class="post-text" itemprop="text">
<h1>No, you should not subscribe manually to it.</h1>

<p><a href="https://angular.io/docs/ts/latest/api/core/index/EventEmitter-class.html" rel="noreferrer">EventEmitter</a> is an angular2 abstraction and its only purpose is to emit events in components. Quoting a <a href="https://stackoverflow.com/questions/33380696/unable-to-figure-out-correct-eventemitter-or-observable-syntax-in-angular2-servi/33382275#comment54684990_33382275">comment</a> from Rob Wormald</p>

<blockquote>
  <p>[...] EventEmitter is really an Angular abstraction, and should be used pretty much only for emitting custom Events in components. Otherwise, just use Rx as if it was any other library.</p>
</blockquote>

<p>This is stated really clear in EventEmitter's documentation.</p>

<blockquote>
  <p>Use by directives and components to emit custom Events.</p>
</blockquote>

<h2>What's wrong about using it?</h2>

<p>Angular2 will never guarantee us that EventEmitter will continue being an Observable. So that means refactoring our code if it changes. The only API we must access is its <code>emit()</code> method. We should never subscribe manually to an EventEmitter.</p>

<p>All the stated above is more clear in this Ward Bell's <a href="http://www.bennadel.com/blog/3038-eventemitter-is-an-rxjs-observable-stream-in-angular-2-beta-6.htm#comments_47949" rel="noreferrer">comment</a> (recommended to read the article, and the <a href="http://www.bennadel.com/blog/3045-ward-bell-do-not-expect-eventemitter-to-be-observable-in-angular-2.htm" rel="noreferrer">answer</a> to that comment). Quoting for reference</p>

<blockquote>
  <p>Do NOT count on EventEmitter continuing to be an Observable!</p>
  
  <p>Do NOT count on those Observable operators being there in the future!</p>
  
  <p>These will be deprecated soon and probably removed before release.</p>
  
  <p>Use EventEmitter only for event binding between a child and parent component. Do not subscribe to it. Do not call any of those methods. Only call <code>eve.emit()</code> </p>
</blockquote>

<p>His comment is in line with Rob's comment long time ago. </p>

<h2>So, how to use it properly?</h2>

<p>Simply use it to emit events from your component. Take a look a the following example.</p>

<pre class=" prettyprint prettyprinted language-js" style=""><code class=" language-js">@<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    selector <span class="token punctuation">:</span> <span class="token string">'child'</span><span class="token punctuation">,</span>
    template <span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`
        &lt;button (click)="sendNotification()"&gt;Notify my parent!&lt;/button&gt;
    `</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">Child</span> <span class="token punctuation">{</span>
    @<span class="token function">Output</span><span class="token punctuation">(</span><span class="token punctuation">)</span> notifyParent<span class="token punctuation">:</span> EventEmitter<span class="token operator">&lt;</span>any<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventEmitter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">sendNotification</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>notifyParent<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'Some value to send to the parent'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

@<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    selector <span class="token punctuation">:</span> <span class="token string">'parent'</span><span class="token punctuation">,</span>
    template <span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`
        &lt;child (notifyParent)="getNotification($event)"&gt;&lt;/child&gt;
    `</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">Parent</span> <span class="token punctuation">{</span>
    <span class="token function">getNotification</span><span class="token punctuation">(</span>evt<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">// Do something with the notification (evt) sent by the child!</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>

<h2>How not to use it?</h2>

<pre class=" prettyprint prettyprinted language-js" style=""><code class=" language-js"><span class="token keyword">class</span> <span class="token class-name">MyService</span> <span class="token punctuation">{</span>
    @<span class="token function">Output</span><span class="token punctuation">(</span><span class="token punctuation">)</span> myServiceEvent <span class="token punctuation">:</span> EventEmitter<span class="token operator">&lt;</span>any<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventEmitter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>

<p>Stop right there... you're already wrong...</p>

<p>Hopefully these two simple examples will clarify EventEmitter's proper usage.</p>

<p><strong>TL;DR</strong> answer :</p>

<p><strong>No, don't subscribe manually to them, don't use them in services. Use them as is shown in the documentation only to emit events in components. Don't defeat angular's abstraction.</strong></p>
    </div>
					</div>
				</article>
				<!--================= END :: Tutorial =================-->
				
				<!--================= START :: Tutorial =================-->
				<article>
					<a id="t-02" name="t-02"></a><h1>02 : What's the difference between @ViewChild and @ContentChild?</h1>
					<span class="ref-site">https://stackoverflow.com/questions/34326745/whats-the-difference-between-viewchild-and-contentchild</span>
					<div class="tutorial__content">
<div class="post-text" itemprop="text">
<p>I'll answer your question using <strong>Shadow DOM</strong> and <strong>Light DOM</strong> terminology (it have come from web components, see <a href="http://webcomponents.org/polyfills/shadow-dom/" rel="noreferrer">here</a>). In general:</p>

<ul>
<li><strong><em>Shadow DOM</em></strong> - is an internal DOM of your component that is defined <strong>by you</strong> (as a <strong>creator of the component</strong>) and hidden from an end-user. For example:</li>
</ul>

<pre class=" prettyprint language-ts prettyprinted" style=""><code class=" language-ts"><span class="lit">@Component</span><span class="pun">({</span><span class="pln">
  selector</span><span class="pun">:</span><span class="pln"> </span><span class="str">'some-component'</span><span class="pun">,</span><span class="pln">
  template</span><span class="pun">:</span><span class="pln"> </span><span class="pun">`</span><span class="pln">
    </span><span class="pun">&lt;</span><span class="pln">h1</span><span class="pun">&gt;</span><span class="pln">I am </span><span class="typ">Shadow</span><span class="pln"> DOM</span><span class="pun">!&lt;/</span><span class="pln">h1</span><span class="pun">&gt;</span><span class="pln">
    </span><span class="pun">&lt;</span><span class="pln">h2</span><span class="pun">&gt;</span><span class="typ">Nice</span><span class="pln"> to meet you </span><span class="pun">:)&lt;/</span><span class="pln">h2</span><span class="pun">&gt;</span><span class="pln">
    </span><span class="pun">&lt;</span><span class="pln">ng</span><span class="pun">-</span><span class="pln">content</span><span class="pun">&gt;&lt;/</span><span class="pln">ng</span><span class="pun">-</span><span class="pln">content</span><span class="pun">&gt;</span><span class="pln">
  </span><span class="pun">`;</span><span class="pln">
</span><span class="pun">})</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">SomeComponent</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="com">/* ... */</span><span class="pln"> </span><span class="pun">}</span></code></pre>

<ul>
<li><strong><em>Light DOM</em></strong> - is a DOM that <strong>an end-user of your component</strong> supply into your component. For example:</li>
</ul>

<pre class=" prettyprint language-ts prettyprinted" style=""><code class=" language-ts"><span class="lit">@Component</span><span class="pun">({</span><span class="pln">
  selector</span><span class="pun">:</span><span class="pln"> </span><span class="str">'another-component'</span><span class="pun">,</span><span class="pln">
  directives</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="typ">SomeComponent</span><span class="pun">],</span><span class="pln">
  template</span><span class="pun">:</span><span class="pln"> </span><span class="pun">`</span><span class="pln">
    </span><span class="pun">&lt;</span><span class="pln">some</span><span class="pun">-</span><span class="pln">component</span><span class="pun">&gt;</span><span class="pln">
      </span><span class="pun">&lt;</span><span class="pln">h1</span><span class="pun">&gt;</span><span class="typ">Hi</span><span class="pun">!</span><span class="pln"> I am </span><span class="typ">Light</span><span class="pln"> DOM</span><span class="pun">!&lt;/</span><span class="pln">h1</span><span class="pun">&gt;</span><span class="pln">
      </span><span class="pun">&lt;</span><span class="pln">h2</span><span class="pun">&gt;</span><span class="typ">So</span><span class="pln"> happy to see you</span><span class="pun">!&lt;/</span><span class="pln">h2</span><span class="pun">&gt;</span><span class="pln">
    </span><span class="pun">&lt;/</span><span class="pln">some</span><span class="pun">-</span><span class="pln">component</span><span class="pun">&gt;</span><span class="pln">
  </span><span class="pun">`</span><span class="pln">
</span><span class="pun">})</span><span class="pln">
</span><span class="kwd">class</span><span class="pln"> </span><span class="typ">AnotherComponent</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="com">/* ... */</span><span class="pln"> </span><span class="pun">}</span></code></pre>

<p>So, the answer to your question is pretty simple:</p>

<blockquote>
  <p>The difference between <code>@ViewChildren</code> and <code>@ContentChildren</code> is that <code>@ViewChildren</code> look for elements in Shadow DOM while <code>@ContentChildren</code> look for them in Light DOM.</p>
</blockquote>
    </div>
					</div>
				</article>
				<!--================= END :: Tutorial =================-->
				
				<!--================= START :: Tutorial =================-->
				<article>
					<a id="t1" name="t1"></a><h1>Angular HTTP Interceptor</h1>
					<span class="ref-site">https://stackoverflow.com/questions/44396890/angular-4-http-interceptor</span>
					<div class="tutorial__content">
<h3>Example 1 using Angular 4.3+</h3>
<p>Http interceptor is already implemented in Angular 4.3.4 and is described in the documentation.</p>

<p>You need to implement the intercept method of HttpInterceptor interface, do something with the request, and call the next.handle(req) method.</p>

<pre>
// Example 1 using Angular 4.3+
//=========================================
import {Injectable} from '@angular/core';
import {HttpEvent, HttpInterceptor, HttpHandler, HttpRequest} from '@angular/common/http';
import { Observable } from 'rxjs/Rx';

@Injectable()
export class NoopInterceptor implements HttpInterceptor {
  intercept(req: HttpRequest&lt;any>, next: HttpHandler): Observable&lt;HttpEvent&lt;any>> {
    const changedReq = req.clone({headers: req.headers.set('My-Header', 'MyHeaderValue')});
    return next.handle(changedReq);
  }
}</pre>

<p>It's also necessary to register interceptor in app's providers section</p>

<pre>
// app.module.ts
import {NgModule} from '@angular/core';
import {HTTP_INTERCEPTORS} from '@angular/common/http';

@NgModule({
  providers: [{
    provide: HTTP_INTERCEPTORS,
    useClass: NoopInterceptor,
    multi: true,
  }],
})
export class AppModule {}
</pre>

<h3>Example 2 using Angular 2 and 4</h3>
<pre>
// Example 2 using Angular 2 and 4
// https://scotch.io/@kashyapmukkamala/using-http-interceptor-with-angular2
//=====================

// http.interceptor.ts
//========================
import { Injectable } from '@angular/core';
import { ConnectionBackend, RequestOptions, Request, RequestOptionsArgs, Response, Http, Headers } from '@angular/http';
import { Observable } from 'rxjs/Rx';
//import { environment } from '../environments/environment';

@Injectable()
export class InterceptedHttp extends Http {
    constructor(backend: ConnectionBackend, defaultOptions: RequestOptions) {
        console.log('defaultOptions :', defaultOptions);
        super(backend, defaultOptions);
    }

    request(url: string | Request, options?: RequestOptionsArgs): Observable<Response> {
        return super.request(url, options);
    }

    get(url: string, options?: RequestOptionsArgs): Observable<Response> {
        url = this.updateUrl(url);
        console.log("GET :", url, options.params);
        return super.get(url, this.getRequestOptionArgs(options));
    }

    post(url: string, body: string, options?: RequestOptionsArgs): Observable<Response> {
        url = this.updateUrl(url);
        console.log("POST :", url, options);
        return super.post(url, body, this.getRequestOptionArgs(options));
    }

    put(url: string, body: string, options?: RequestOptionsArgs): Observable<Response> {
        url = this.updateUrl(url);
        return super.put(url, body, this.getRequestOptionArgs(options));
    }

    delete(url: string, options?: RequestOptionsArgs): Observable<Response> {
        url = this.updateUrl(url);
        return super.delete(url, this.getRequestOptionArgs(options));
    }

    private updateUrl(req: string) {
        return window.location.origin + req;
    }

    private getRequestOptionArgs(options?: RequestOptionsArgs): RequestOptionsArgs {
        if (options == null) {
            options = new RequestOptions();
        }
        if (options.headers == null) {
            options.headers = new Headers();
        }
        options.headers.append('Content-Type', 'application/json');

        return options;
    }
}
</pre>

<pre>
// http.factory.ts
//========================
import { XHRBackend, Http, RequestOptions } from '@angular/http';
import { InterceptedHttp } from './http.interceptor';

export function httpFactory(xhrBackend: XHRBackend, requestOptions: RequestOptions): Http {
    return new InterceptedHttp(xhrBackend, requestOptions);
}
</pre>

<pre>
// app.module.ts
//========================
import { BrowserModule } from '@angular/platform-browser';
import { NgModule } from '@angular/core';
import { FormsModule } from '@angular/forms';
import {HttpModule, Http, XHRBackend, RequestOptions} from '@angular/http';

import {AppComponent} from "./app.component";
import {httpFactory} from "./http.factory";

@NgModule({
    declarations: [
        AppComponent
    ],
    imports: [
        BrowserModule,
        FormsModule,
        HttpModule
    ],
    bootstrap: [AppComponent],
    providers: [
        {
            provide: Http,
            useFactory: httpFactory,
            deps: [XHRBackend, RequestOptions]
        }
    ]
})
export class AppModule { }
</pre>
					</div>
				</article>
				<!--================= END :: Tutorial =================-->
				
				<!--================= START :: Tutorial =================-->
				<article>
					<a id="t-02" name="t-02"></a><h1>02 : Angular 4 ng-template & ng-container with parameters</h1>
					<span class="ref-site">https://gist.github.com/guillaumegarcia13/a00379681d95b0176e10fd3f794bd8bb</span>
					<div class="tutorial__content">
<blockquote name="1a19" id="1a19" class="graf graf--pullquote graf-after--p">&lt;ng-container&gt; is a logical container that can be used to group nodes but is not rendered in the DOM tree as a&nbsp;node.</blockquote>
<blockquote name="4164" id="4164" class="graf graf--pullquote graf-after--pullquote">&lt;ng-container&gt; is rendered as an HTML&nbsp;comment.</blockquote>
<pre>
// Create ng template
&lt;ng-template #followingpost let-author="author" let-age="age" let-text="text" let-badge="badge">
    &lt;div class="container-fluid">
        &lt;div class="card">
            &lt;div class="header">
                &lt;h4 class="title">{{ author }}&lt;/h4>
                &lt;p class="category">il y a {{ age }} jours&lt;/p>
            &lt;/div>

            &lt;div class="content" [innerHTML]="text">
            &lt;/div>

            &lt;div class="text-right">
                &lt;button class="btn btn-icon btn-simple">&lt;i class="ti-comment">&lt;/i>&lt;/button>                            
                &lt;button class="btn btn-icon btn-simple">
                    &lt;i class="ti-heart">&lt;/i>
                    &lt;span *ngIf="badge" class="badge">{{ badge }}&lt;/span>
                &lt;/button>                            
                &lt;button class="btn btn-icon btn-simple">&lt;i class="ti-share">&lt;/i>&lt;/button>                            
            &lt;/div>
        &lt;/div>
    &lt;/div>
&lt;/ng-template>            

// bind above template using *ngTemplateOutlet
&lt;ng-container *ngTemplateOutlet="followingpost;context:{author: 'Timothy', age: 2, badge: 18, text: 'Les Français qui payent plus de 2500 € d impôt peuvent bénéficier de cette loi : &lt;a href=`http://bit.ly/2xxMicY`>http://bit.ly/2xxMicY&lt;/a>'}">&lt;/ng-container>
</pre>

<p>You can attach a context object to the <code><a href="api/core/EmbeddedViewRef" class="code-anchor">EmbeddedViewRef</a></code> by setting <code>[ngTemplateOutletContext]</code>.
<code>[ngTemplateOutletContext]</code> should be an object, the object's keys will be available for binding
by the local template <code>let</code> declarations.</p>
<p>Note: using the key <code>$implicit</code> in the context object will set its value as default.</p>
<pre>
// Example 2
// Ref : https://angular.io/api/common/NgTemplateOutlet
//=======================
@Component({
	selector: 'ng-template-outlet-example',
	template: `
		&lt;ng-container *ngTemplateOutlet="greet">&lt;/ng-container>
		&lt;hr>
		&lt;ng-container *ngTemplateOutlet="eng; context: myContext">&lt;/ng-container>
		&lt;hr>
		&lt;ng-container *ngTemplateOutlet="svk; context: myContext">&lt;/ng-container>
		&lt;hr>
		
		&lt;ng-template #greet>&lt;span>Hello&lt;/span>&lt;/ng-template>
		&lt;ng-template #eng let-name>&lt;span>Hello {{name}}!&lt;/span>&lt;/ng-template>
		&lt;ng-template #svk let-person="localSk">&lt;span>Ahoj {{person}}!&lt;/span>&lt;/ng-template>
	`
})
class NgTemplateOutletExample {
	myContext = {$implicit: 'World', localSk: 'Svet'};
}
</pre>

					</div>
				</article>
				<!--================= END :: Tutorial =================-->
				
				<!--================= START :: Tutorial =================-->
				<article>
					<a id="t1" name="t1"></a><h1>NgSwitch Directives</h1>
					<span class="ref-site">https://angular-2-training-book.rangle.io/handout/directives/ng_switch_directives.html</span>
					<div class="tutorial__content">
<p class="comments-section"><code>ngSwitch</code> is actually comprised of two directives, an attribute directive and a structural directive. It's very similar to a <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Statements/switch" target="_blank">switch statement</a> in JavaScript and other programming languages, but in the template.<div class="comments-icon"><div class="marker">+</div></div></p>

<pre>@Component({
  selector: 'app-root',
  template: `
    &lt;div class="tabs-selection">
      &lt;app-tab [active]="isSelected(1)" (click)="setTab(1)">Tab 1&lt;/app-tab>
      &lt;app-tab [active]="isSelected(2)" (click)="setTab(2)">Tab 2&lt;/app-tab>
      &lt;app-tab [active]="isSelected(3)" (click)="setTab(3)">Tab 3&lt;/app-tab>
    &lt;/div>

    &lt;div [ngSwitch]="tab">
      &lt;app-tab-content *ngSwitchCase="1">Tab content 1&lt;/app-tab-content>
      &lt;app-tab-content *ngSwitchCase="2">Tab content 2&lt;/app-tab-content>
      &lt;app-tab-content *ngSwitchCase="3">&lt;app-tab-3>&lt;/app-tab-3>&lt;/app-tab-content>
      &lt;app-tab-content *ngSwitchDefault>Select a tab&lt;/app-tab-content>
    &lt;/div>
  `
})
export class AppComponent {
  tab: number = 0;

  setTab(num: number) {
    this.tab = num;
  }

  isSelected(num: number) {
    return this.tab === num;
  }
}</pre>
					</div>
				</article>
				<!--================= END :: Tutorial =================-->
				
				<!--================= START :: Tutorial =================-->
				<article>
					<a id="t-02" name="t-02"></a><h1>02 : css background-image url with blank value or image tag with invalid src value.</h1>
					<h3>Empty image src can destroy your site</h3>
					<span class="ref-site">https://www.nczonline.net/blog/2009/11/30/empty-image-src-can-destroy-your-site/</span>
					<div class="tutorial__content">
<p>Search Term : css background url with blank value
	<strong>Ref.:</strong><br/>
	<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=473528">https://bugzilla.mozilla.org/show_bug.cgi?id=473528</a>
	<a href="https://www.nczonline.net/blog/2009/11/30/empty-image-src-can-destroy-your-site/">Empty image src can destroy your site</a>
	</p>
	
<pre>
// Source : https://bugzilla.mozilla.org/show_bug.cgi?id=473528

CSS included in mypage.php
--
#myitem {
  background-image: url();
}
--

FF would first fetch the page and display it in the browser. Then, during rendering and application of the CSS, it would re-fetch the same page as an attempt to get the background image.

This causes problems when pages perform particular actions, such as database interaction. We discovered it because a key being inserted into the database was being re-inserted invisibly somehow. Eventually tracked it down to a double page load thanks to an empty background-image.

Reproducible: Always

Steps to Reproduce:
1. Install Firebug.
2. Create a page as follows:

&lt;html>
	&lt;head>&lt;/head>
	&lt;body style="background-image:url();">
	&lt;/body>
&lt;/html>

3. Open the page in FF, open Firebug and view the "Net" tab. You will see 2 requests for the page. The second is made by the CSS property.
Actual Results:  
2 page requests.

Expected Results:  
An empty/blank background image. No request should be made for an empty URL.</pre>


<div class="post-content">
<h3>Empty image src can destroy your site</h3>
<p>This is a problem I’ve come across frequently, and since it has come up again recently, I thought I’d explore this issue in the hope that it will save others some trouble. There are so many problems that this one issue can lead to that it’s baffling browsers still behave this way. The issue? An HTML image, either via <code>&lt;img&gt;</code> tag or JavaScript <code>Image</code> object, that has its <code>src</code> set to “” (an empty string).</p>

<h2>The offending code</h2>

<p>There are basically two patterns to identify. The first pattern is just straight HTML:</p>
<div class="highlight"><pre><code class="language-" data-lang="">&lt;img src="" &gt;
</code></pre></div>
<p>The second pattern is JavaScript and involves the dynamic setting of the <code>src</code> property on either a newly created image or an existing one:</p>
<div class="highlight"><pre><code class="language-" data-lang="">var img = new Image();
img.src = "";
</code></pre></div>
<p>Both patterns cause the same effect: another request is made to your server. There are two different ways that browsers do this.</p>

<ul>
<li>Internet Explorer makes a request to the directory in which the page is located. For example, if you have a page running at <code><a class="vglnk" href="http://www.example.com/dir/mypage.htm" rel="nofollow"><span>http</span><span>://</span><span>www</span><span>.</span><span>example</span><span>.</span><span>com</span><span>/</span><span>dir</span><span>/</span><span>mypage</span><span>.</span><span>htm</span></a></code> that has one of these patterns, IE makes a request to <code><a class="vglnk" href="http://www.example.com/dir/" rel="nofollow"><span>http</span><span>://</span><span>www</span><span>.</span><span>example</span><span>.</span><span>com</span><span>/</span><span>dir</span><span>/</span></a></code> to fill in the image.</li>
<li>Safari and Chrome make a request to the actual page itself. So the page running at <code><a class="vglnk" href="http://www.example.com/dir/mypage.htm" rel="nofollow"><span>http</span><span>://</span><span>www</span><span>.</span><span>example</span><span>.</span><span>com</span><span>/</span><span>dir</span><span>/</span><span>mypage</span><span>.</span><span>htm</span></a></code> results in a second request to <code><a class="vglnk" href="http://www.example.com/dir/mypage.htm" rel="nofollow"><span>http</span><span>://</span><span>www</span><span>.</span><span>example</span><span>.</span><span>com</span><span>/</span><span>dir</span><span>/</span><span>mypage</span><span>.</span><span>htm</span></a></code> to fill in the image.</li>
</ul>

<p>You’ll note that Opera and Firefox aren’t mentioned at all. Opera behaves as you might expect: it doesn’t do anything when an empty image <code>src</code> is encountered; the attribute is ignored. Firefox 3 and earlier behave the same as Safari and Chrome, but Firefox 3.5 addressed this issue and no longer sends a request (<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=444931">related bug</a>).</p>

<p>Both cases, of course, are problematic because it’s an image making a request for a document. You can easily see this behavior using an HTTP debugging proxy (I highly recommend <a href="http://www.fiddlertool.com/">Fiddler</a>).</p>

<h2>The problems</h2>

<p>There are two basic problems that this browser behavior causes. The first is a traffic spike.Â&nbsp; Imagine that have <code>&lt;img src=""&gt;</code> on the page at <code><a class="vglnk" href="http://www.example.com/" rel="nofollow"><span>http</span><span>://</span><span>www</span><span>.</span><span>example</span><span>.</span><span>com</span><span>/</span></a></code>. The big problem is that each instance of <code>&lt;img src=""&gt;</code> makes a request to <code>/</code> in all browsers, which is the homepage of the domain. Congratulations, you’ve effectively doubled your traffic to the homepage.</p>

<p>For small sites, this may not be that big of a deal; jumping from 10,000 to 20,000 page views probably isn’t going to raise any flags for you or your host. If you’re a page that gets millions of page views per day, and probably have a lot of machines to handle that load, doubling or tripling traffic can be crippling. You can very easily run out of capacity.</p>

<p>Another issue with the traffic increase is the computing power needed to generate that homepage. If the page is personalizable or is updated with some regular frequency, you could be wasting computing cycles creating a page that will never be viewed by anyone.</p>

<p>The second problem is user state corruption. If you’re tracking state in the request, either by cookies or in another way, you have the possibility of destroying data. Even though the image request doesn’t return an image, all of the headers are read and accepted by the browser, including all cookies. While the rest of the response is thrown away, the damage may already be done.</p>

<h2>How does this code happen?</h2>

<p>The first time I encountered this problem, I naively thought that it was a bad developer writing crappy code. Had this been 2000 or earlier, I probably would have been right. In today’s web development world, however, I’m mostly wrong. Today, there are so many templating engines and content management systems responsible for constructing pages on-the-fly that it’s quite possible for good developers to end up producing pages with this code. All it takes is something as simple as this PHP:</p>
<div class="highlight"><pre><code class="language-" data-lang="">&lt;img src="$imageUrl" &gt;
</code></pre></div>
<p>If some other part of the code is responsible for filling in <code>$imageUrl</code>, and that code fails, then the offending code gets output to the browser.</p>

<p>In today’s web development world, we’re all doing something along these lines, whether we know it or not. Download a new WordPress theme? Make sure you’ll filled in all default arguments. Using a CMS at work? Make sure all your image URL fields are validated. It’s frightening easy to end up with this bad code on your page.</p>

<h2>Other tags with problems</h2>

<p>Before getting too angry at browser vendors, I think it’s fair to take a look at the <a href="http://www.w3.org/TR/html4/">HTML 4 specification</a>, specifically the part <a href="http://www.w3.org/TR/html4/struct/objects.html#h-13.2">defining images</a>. Even though the specification indicates that the <code>src</code> attribute should contain a URI, it fails to define the behavior when <code>src</code> doesn’t contain a URI. Of course, images aren’t the only tags that reference an external resource, and so it should come as no surprise that there are other tags with the same problem.</p>

<p>As it turns out, Internet Explorer is the most sane browser out there. It’s problems are thankfully limited to images with an empty <code>src</code> attribute. It does make for this by making it a pain to detect, but that will be discussed later.</p>

<p>For other browsers, there are two additional problem scenarios: <code>&lt;script src=""&gt;</code> and <code>&lt;link href=""&gt;</code>. Chrome, Safari, and Firefox all initiate another request.</p>

<p>Thankfully, no browser has a problem with <code>&lt;iframe src=""&gt;</code>, as all correctly do not make another request.</p>

<h2>What can be done?</h2>

<p>Of course, the best thing to do is eliminate the offending code from your pages whenever possible. That’s fixing the problem at the source. If you can’t do that, though, your next best option is to attempt to detect it on the server and abort any further execution.</p>

<p>For browsers other than IE, it’s not too difficult to detect what’s going on from the server side. Since the request comes back to the exact same location that contains the offending code, there are two things you can do. First, you can check the request’s referrer. A request resulting from this issue coming from <code><a class="vglnk" href="http://www.example.com/dir/mypage.htm" rel="nofollow"><span>http</span><span>://</span><span>www</span><span>.</span><span>example</span><span>.</span><span>com</span><span>/</span><span>dir</span><span>/</span><span>mypage</span><span>.</span><span>htm</span></a></code> will have a referrer of <code><a class="vglnk" href="http://www.example.com/dir/mypage.htm" rel="nofollow"><span>http</span><span>://</span><span>www</span><span>.</span><span>example</span><span>.</span><span>com</span><span>/</span><span>dir</span><span>/</span><span>mypage</span><span>.</span><span>htm</span></a></code>. Assuming that there are <em>no valid situations under which your page links to itself</em>, this is a fairly safe way to detect these requests on the server-side.</p>

<p>Internet Explorer throws a wrench into the works by sending the request to the directory of the page instead of the page itself. If you’re only using path URLs (i.e., nothing with a file extension), then the effect is the same and you can use the same referrer detect. Some sample code for use with PHP:</p>
<div class="highlight"><pre><code class="language-" data-lang="">&lt;?php
    //Works for IE only when using path URLs and not file URLs

    //get the referrer
    $referrer = isset($_SERVER['HTTP_REFERER']) ? $_SERVER['HTTP_REFERER'] : '';

    //current URL (assuming HTTP and default port)
    $url = "http://" . $_SERVER['HTTP_HOST']Â&nbsp; . $_SERVER['REQUEST_URI'];

    //make sure they're not the same
    if ($referrer == $url){
        exit;
    }
?&gt;
</code></pre></div>
<p>The goal here is to detect that the page refers to itself and then <code>exit</code> immediately to prevent the server from doing anything additional. Another option, and probably a good idea, is to log that this has happened so it shows up on a dashboard for evaluation.</p>

<p>Another way to attempt to detect this type of request on the server is by looking at the HTTP <code>Accept</code> header. All browsers except IE send different HTTP <code>Accept</code> headers for image requests than they do for HTML requests. As an example, Chrome sends the following <code>Accept</code> header for an HTML request:</p>
<div class="highlight"><pre><code class="language-" data-lang="">Accept: application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5
</code></pre></div>
<p>Compare this to the <code>Accept</code> header that is sent for an image, script, or style sheet request:</p>
<div class="highlight"><pre><code class="language-" data-lang="">Accept: */*
</code></pre></div>
<p>Firefox, Safari, and Opera all send roughly the same <code>Accept</code> header for HTML requests, meaning that you can check for an individual part, such as “text/html”, to determine if the request is an HTML request or something else. Unfortunately, IE only sends the latter <code>Accept</code> header for all requests, so there is no way to differentiate this on the server. For browsers other than IE, you can use something like the following:</p>
<div class="highlight"><pre><code class="language-" data-lang="">&lt;?php
    //Warning: Doesn't work for IE!

    //make sure the Accept header has 'text/htmnl' in it
    if (strpos($_SERVER['HTTP_ACCEPT'], 'text/html') === false){
        exit;
    }
?&gt;
</code></pre></div>
<p>This check is a little safer than the previous, but its big downside is that it doesn’t work in IE.</p>

<h2>Why does this happen?</h2>

<p>The real problem is the way that URI resolution is performed in browsers. This behavior is defined in <a href="http://tools.ietf.org/html/rfc3986">RFC 3986 – Uniform Resource Identifiers</a>. When an empty string is encountered as a URI, it’s considered a relative URI and is resolved according to the algorithm defined in <a href="http://tools.ietf.org/html/rfc3986#section-5.2">section 5.2</a>. This specific example, an empty string, is listed in <a href="http://tools.ietf.org/html/rfc3986#section-5.4">section 5.4</a>. Firefox, Safari, and Chrome are all resolving an empty string correctly per the specification, while Internet Explorer is resolving it incorrectly, apparently in line with an earlier version of the specification, <a href="http://tools.ietf.org/html/rfc2396">RFC 2396 – Uniform Resource Identifiers</a> (this was obsoleted by RFC 3986). So technically, the browsers are doing what they’re supposed to do to resolve relative URIs. The problem is that in this context, the empty string is clearly unintentional.</p>

<h2>It’s time to fix this</h2>

<p>This is a serious flaw in browsers, and I’m not sure you can look at it in any way where it’s not considered a bug. The inconsistent behavior, from Opera completely ignoring all invalid external references, to IE falling victim only for <code>&lt;img&gt;</code> tags while others do the same for <code>&lt;script&gt;</code> and <code>&lt;link&gt;</code> as well, seem to indicate a bug in browsers. Though browsers seem to be following correct URI resolution (except IE), I think this is a case where common sense must win over the letter of the specification. There is no way that an image can possibly render an HTML page, and the same goes for <code>&lt;script&gt;</code> and <code>&lt;link&gt;</code>. This bug has cost web developers hundreds of lost hours and has potentially brought down sites, pushing servers over capacity. Enough is enough. It’s time for the browser vendors to fix this bug. I’ve taken the liberty of filing or locating bugs:</p>

<ul>
<li>Firefox: <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=531327">Bug 531327</a></li>
<li>WebKit (Safari/Chrome): <a href="https://bugs.webkit.org/show_bug.cgi?id=30303">Bug 30303</a></li>
</ul>

<p>Please show support for fixing these bugs, as I don’t see any reason why we should still be dealing with this browser behavior. And if anyone can get the note to Microsoft so they can address IE, we’d all greatly appreciate it.</p>

<h2>HTML5 to the rescue</h2>

<p>HTML5 adds to the description of the <code>&lt;img&gt;</code> tag’s <code>src</code> attribute to instruct browsers not to make an additional request in <a href="http://www.w3.org/TR/html5/text-level-semantics.html#attr-img-src">section 4.8.2</a>:</p>

<blockquote>
<p>The <code>src</code> attribute must be present, and must contain a valid URL referencing a non-interactive, optionally animated, image resource that is neither paged nor scripted. If the base URI of the element is the same as the document’s address, then the src attribute’s value must not be the empty string.</p>
</blockquote>

<p>Hopefully, browsers won’t have this problem in the future. Unfortunately, there is no such clause for <code>&lt;script src=""&gt;</code> and <code>&lt;link href=""&gt;</code>. Maybe there’s still time to make that adjustment to ensure browsers don’t accidentally implement this behavior.</p>

<p><strong>Update (2 Dec 2009):</strong> It appears that <code>&lt;img src=""&gt;</code> has been patched in Firefox 3.5 (<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=444931">bug 444931</a>). Problems with <code>&lt;script src=""&gt;</code> and <code>&lt;link href=""&gt;</code> still remain. Also, added a reference to the HTML5 section that aims to help this issue.</p>

<p class="disclaimer">Disclaimer: Any viewpoints and opinions expressed in this article are those of Nicholas C. Zakas and do not, in any way, reflect those of my employer, my colleagues, <a href="http://www.wrox.com/">Wrox Publishing</a>, <a href="http://www.oreilly.com/">O'Reilly Publishing</a>, or anyone else. I speak only for myself, not for them.</p>

            </div>
					</div>
				</article>
				<!--================= END :: Tutorial =================-->
				
				<!--================= START :: Tutorial =================-->
				<article>
					<a id="t1" name="t1"></a><h1>Detect the End of CSS Animations and Transitions with JavaScript</h1>
					<span class="ref-site">https://jonsuh.com/blog/detect-the-end-of-css-animations-and-transitions-with-javascript/</span>
					<div class="tutorial__content">
						<h3>Detecting and executing when transitions end with jQuery</h3>
<pre>$(".button").click(function(){
  $(this).addClass("animate");
  $(this).one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",
              function(event) {
    // Do something when the transition ends
  });
});</pre>
<h3>Detect the supported event property name</h3>
<pre>
// Function from David Walsh: http://davidwalsh.name/css-animation-callback
function whichTransitionEvent(){
  var t,
      el = document.createElement("fakeelement");

  var transitions = {
    "transition"      : "transitionend",
    "OTransition"     : "oTransitionEnd",
    "MozTransition"   : "transitionend",
    "WebkitTransition": "webkitTransitionEnd"
  }

  for (t in transitions){
    if (el.style[t] !== undefined){
      return transitions[t];
    }
  }
}

var transitionEvent = whichTransitionEvent();

$(".button").click(function(){
  $(this).addClass("animate");
  $(this).one(transitionEvent,
              function(event) {
    // Do something when the transition ends
  });
});</pre>
<pre>
// Example
&lt;button class="button">Click me&lt;/button>


function whichTransitionEvent(){
  var t,
      el = document.createElement("fakeelement");

  var transitions = {
    "transition"      : "transitionend",
    "OTransition"     : "oTransitionEnd",
    "MozTransition"   : "transitionend",
    "WebkitTransition": "webkitTransitionEnd"
  }

  for (t in transitions){
    if (el.style[t] !== undefined){
      return transitions[t];
    }
  }
}

var transitionEvent = whichTransitionEvent();

$(".button").click(function(){
  $(this).addClass("animate");
  $(this).one(transitionEvent,
              function(event) {
    alert("The transition has ended!");
    $(this).removeClass("animate");
  });
});
	</pre>
<h3>Detect when animations (keyframes) end</h3>
<pre>
function whichAnimationEvent(){
  var t,
      el = document.createElement("fakeelement");

  var animations = {
    "animation"      : "animationend",
    "OAnimation"     : "oAnimationEnd",
    "MozAnimation"   : "animationend",
    "WebkitAnimation": "webkitAnimationEnd"
  }

  for (t in animations){
    if (el.style[t] !== undefined){
      return animations[t];
    }
  }
}

var animationEvent = whichAnimationEvent();

$(".button").click(function(){
  $(this).addClass("animate");
  $(this).one(animationEvent,
              function(event) {
    // Do something when the animation ends
  });
});
</pre>
<h3>Vanilla JavaScript</h3>
<p>With Vanilla JavaScript, it’s slightly trickier. Using the <code class="highlighter-rouge">whichTransitionEvent</code> function, bind <code class="highlighter-rouge">transitionEvent</code> with <code class="highlighter-rouge">addEventListener</code>.</p>
<pre>var button = document.querySelector(".button"),
    transitionEvent = whichTransitionEvent();

button.addEventListener("click", function() {
  if (button.classList) {
    button.classList.add("animate");
  } else {
    button.className += " " + "animate";
  }

  button.addEventListener(transitionEvent, customFunction);
});

function customFunction(event) {
  button.removeEventListener(transitionEvent, customFunction);

  // Do something when the transition ends
}</pre>
<p>The second argument must be a function name as opposed to <code class="highlighter-rouge">function({})</code>. This is important because we must unbind the listener, otherwise the listener will keep running, causing it to run multiple times.</p>
					</div>
				</article>
				<!--================= END :: Tutorial =================-->
				
				<!--================= START :: Tutorial =================-->
				<article>
					<a id="t-02" name="t-02"></a><h1>02 : JavaScript - Removing anonymous event listeners</h1><span class="ref-site">https://stackoverflow.com/questions/36076700/what-is-the-proper-use-of-an-eventemitter</span>
					<div class="tutorial__content">
<p>In order to remove this listener you have to know the name of it. But it’s anonymous! What are we to do? The answer is ridiculously simple: don’t use anonymous functions. You could instead name the function in the listener, then remove it when the function has run:</p>
<pre>
el.addEventListener('click', function _func() { 
	foo(bar,baz); 
	el.removeEventListener('click', _func); 
});</pre>
<p>Alternatively, you could assign the function to a variable, then use that variable as the listener:</p>
<pre>var _func = function() { 
	foo(bar,baz); 
} 
el.addEventListener('click', _func);

//	And remove it by using the variable name again:
el.removeEventListener('click', _func);
</pre>
					</div>
				</article>
				<!--================= END :: Tutorial =================-->
				
				<!--================= START :: Tutorial =================-->
				<article>
					<a id="t1" name="t1"></a><h1>Index</h1>
					<span class="ref-site"></span>
					<div class="tutorial__content">
						
					</div>
				</article>
				<!--================= END :: Tutorial =================-->
				
			</section>
			
		</main>
	
			</body></html>